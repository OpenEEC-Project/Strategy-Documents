





                                                ***********************

                                                *    "RECORD COPY"    *

                                                * Schedule No. 7-6-2  *

                                                * Retain Until 12-92  *

                                                ***********************





                              Copyright 1989 FoMoCo





                                         1989











                   ELECTRONIC FUEL INJECTION (SFI-MA) STRATEGY BOOK











|                               STRATEGY LEVEL "GUFB"

                         NOTE: OVER 16K; REQUIRES 2732 CHIPS











              FOR USE WITH EEC-IV MODULES: SFI-MA1, SFI-MA2 AND SFI-MA3











      COMMENTS OR QUESTIONS SHOULD BE  DIRECTED  TO  PAUL  BALTUSIS  ON

      EXTENSION 72583.



      THE PROCEDURE FOR OBTAINING COPIES OF  THIS  BOOK  OR  ANY  OTHER

      AVAILABLE "GU" DOCUMENTATION IS EXPLAINED ON THE NEXT PAGE.







                             PAUL BALTUSIS

                             POWERTRAIN STRATEGY SECTION

                             CONTROL SYSTEMS DEPT

                             POWERTRAIN ELECTRONICS 

                             DEVELOPMENT DEPARTMENT - PTOPE

                             

|                            DECEMBER 7, 1987







              **********************************************************

      NOTE: A NEW MODULE (PROCESSOR) #XF-252812 IS REQUIRED TO RUN

            THIS AND ALL SUCCEEDING VERSIONS OF THIS STRATEGY.

              **********************************************************







                              Copyright 1989 FoMoCo





                             "GU" STRATEGY DOCUMENTATION



      ALL CURRENT STRATEGY DOCUMENTATION IS STORED ON  THE  VAX  COMPUTER  CLUSTER.

      DOCUMENTATION CAN BE OBTAINED BY LOGGING INTO A VAX COMPUTER (I.E.  SYS2) AND

      ISSUING ONE OR MORE OF THE FOLLOWING VAX/DCL COMMANDS.



      GENERALLY, THREE TYPES OF DOCUMENTATION ARE AVAILABLE:



      1.  UPDATE PACKAGES - CHANGE BARS AT THE LEFT MARGIN  ARE  USED  TO  INDICATE

      WHERE  CHANGES IN TEXT HAVE OCCURRED SINCE THE PREVIOUS LEVEL.  SOME OF THESE

      CHANGES MAY SIMPLY BE ENHANCEMENTS OR CORRECTIONS TO THE TEXT OF THE PREVIOUS

      LEVEL  AND  MAY  BE UNRELATED TO THE STRATEGY LEVEL CHANGE.  THIS FILE CAN BE

      USED AS A QUICK REFERENCE TO SHOW THE CHANGES WHICH HAVE BEEN MADE  FOR  THIS

      RELEASE.  AT THIS TIME THE VIP SECTION IS NOT INCLUDED IN THE UPDATE PACKAGE.

      THE FILE NAME FORMAT IS GU**UP.MEM, WHERE **  IS  THE  DESIRED  NEW  STRATEGY

      LEVEL.



      2.  PRELIMINARY VERSION - THE FILE FORMAT IS  GU**EX.MEM,  WHERE  **  IS  THE

      DESIRED  STRATEGY LEVEL.  IF THIS FILE EXISTS, THEN APPROVED DOCUMENTATION IS

      NOT AVAILBALE AT THIS TIME.  WHEN THE FINAL  VERSION  IS  APPROVED,  IT  WILL

      REPLACE THE PRELIMINARY VERSION ON THE SYSTEM AS A COMPLETE BOOK.



      3.  COMPLETE BOOKS - THE FILE NAME  FORMAT  IS  GU**.MEM,  WHERE  **  IS  THE

      DESIRED  STRATEGY  LEVEL.   CHANGES  IN  TEXT  WHICH  HAVE OCCURRED SINCE THE

      PREVIOUS LEVEL BOOK WILL BE INDICATED WITH CHANGE BARS.  AT THIS TIME THE VIP

      SECTION  WILL NOT CONTAIN CHANGE BARS.  THE INDEX CONTAINS AN ENTRY, "CHANGED

      PAGES," WHICH LISTS ALL PAGES CONTAINING CHANGES.



      THE FOLLOWING VAX/DCL COMMANDS MAY BE HELPFUL IN WORKING WITH  STRATEGY  BOOK

      DOCUMENTATION:



      TO DETERMINE IF A SPECIFIC STRATEGY BOOK IS AVAILABLE, TYPE:



                                  DIR STRATEGY:GU**.MEM

                                 DIR STRATEGY:GU**UP.MEM



      TO OBTAIN A LINE PRINTER COPY OF A GIVEN DOCUMENT, TYPE:



        PRINT/NOFEED STRATEGY:GU**.MEM     where ** = the desired strategy level



      TO OBTAIN A XEROX COPY OF A GIVEN DOCUMENT, TYPE:



              XEROX STRATEGY:GU**.MEM/DEST=EEE/NAME=name/COPIES=no/PMODE=P



                where: ** = the desired strategy level

                       name = your user name

                       no = desired number of copies (i.e. 1)



      TO DETERMINE TARGETING OF EMR'S FOR FUTURE RELEASES, TYPE:



                                         DISEMR



      TO DETERMINE THE STATUS OF STRATEGY BOOK DOCUMENTATION, TYPE:



                                  @STRATEGY:BOOKSTATUS







         


                               TABLE OF CONTENTS - GUFB

                              Copyright 1989 FoMoCo





                                  TABLE OF CONTENTS





                                                                    LAST

      PAGES               SUBJECT                                 REVISION





|     1-1 to 1-14         STRATEGY EVOLUTION                      GUFB



      2-1 to 2-8          SYMBOLOGY                               GXI0



      3-1 to 3-10         EEC OVERVIEW                            GUAB



      4-1 to 4-6          CRANK/UNDERSPEED/RUN MODE SELECTION     GUF0



      5-1 to 5-4          THROTTLE MODE SELECTION                 GXL0



      6-1  to 6-116       FUEL STRATEGY

      6-2  to 6-8          FUEL OVERVIEW                          GUE0

      6-9  to 6-12         OPEN LOOP/CLOSED LOOP LOGIC            GUE0

      6-13 to 6-20         OPEN LOOP STRATEGY                     GUE0

      6-21 to 6-35         CLOSED LOOP STRATEGY                   GUA0

      6-36 to 6-53         ADAPTIVE FUEL                          GUE0

      6-54 to 6-58         ACCELERATION ENRICHMENT                GXM0

      6-59 to 6-66         TRANSIENT FUEL COMPENSATION            GUAA

      6-67 to 6-73         DECEL FUEL SHUT OFF                    GUE0

      6-74 to 6-87         PULSEWIDTH EQUATION                    GUF1

      6-88 to 6-92         SPEED LIMITER                          GUE0

      6-93 to 6-106        INJECTOR TIMING                        GUE0

      6-107 to 6-115       INJECTOR OUTPUT CONTROL                GUE0

      6-115 to 6-116       FUEL PUMP                              GXA0



      7-1  to 7-45        IGNITION TIMING STRATEGY                GUE0

                          (INCLUDES INDIVIDUAL CYLINDER KNOCK)



      8-1  to 8-22        EGR STRATEGY                            GUF0



|     9-1 to 9-47         IDLE SPEED CONTROL STRATEGY             GUFB



      10-1 to 10-6        A/C CLUTCH STRATEGY                     GUE0

                          (INCLUDES HEATED WINDSHIELD RECOGNITION)



      11-1 to 11-6        CANISTER PURGE STRATEGY                 GXW0



      12-1  to 12-12      THERMACTOR AIR STRATEGY                 GUE0

                            (Inlet Air Strategy)

                            (Supercharger Strategy)



      13-1 to 13-6        ELECTRO-DRIVE FAN                       GXW0



      14-1 to 14-4        DATA OUTPUT LINK                        GXK0



      15-1 to 15-22       VEHICLE SPEED CONTROL                   GUE0



      16-1 to 16-3        RIDE CONTROL STRATEGY                   GXY0



      17-1 to 17-5        ELECTRONICALLY CONTROLLED               GXY0

                          ACCESSORY DRIVE (ECAD)


                               TABLE OF CONTENTS - GUFB

                              Copyright 1989 FoMoCo





      18-1 to 18-4        SHIFT INDICATOR LIGHT                   GUA0



      19-1 to 19-40       INPUT CONVERSIONS AND FILTERS           GUF1



      20-1 to 20-22       TIMERS                                  GUF1



      21-1 to 21-14       FAILURE MODE MANAGEMENT                 GUF1



      22-1 to 22-6        KAM                                     GUE0



      23-1 to 23-2        ROM IDENTIFICATION CODE                 GUC0



      24-1 to 31          SELF-TEST VIP                           GUF1



|     32-1 to 32-19       INDEX                                   GUFB



























































































                                          6

























                                      CHAPTER 1



                                  STRATEGY EVOLUTION



































































































                                         1-1


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                                  STRATEGY EVOLUTION



      SOURCE     EVOLUTION

      FILE       FILE

      EMR NO.                          DESCRIPTION/REMARKS



|     GUFA       GUFB

|                (12/7/87)

|     9-423                            Add a proportional control term

|                                      to DEBYMA.





      GUF1       GUFA

                 (3/11/87)

      8-300                            Add minimum Daspot Clip when vehicle is

                                       moving to prevent declutch stalls.

      8-301                            ISC - Apply FN880(CTNTMR) only when

                                       CTNFLG = 1.





      GUF0       GUF1

                 (2/6/87)

      8-234C                           Revise Mass Air Flow Sensor FMEM logic.

      8V-285B                          VIP - Revise implementation, documentation,

                                       and logic relating to BP sensor FMEM.

      8V-285C                          VIP - Clarify documentation. Including all

                                       cases of BP sensor faults for clearing 

                                       BAPCNT and setting MINTIM2 to clock value.

      8V-287                           VIP - Revise FMEM logic setting KAM 

                                       indicating MAFS failure during forced stall.

      9-089                            S/W - Correct error in Thermactor Bypass 

                                       Logic.

      9-091                            S/W - Correct error in 

                                       INJECTOR_UPDATE_REQUEST routine.

      9-097                            S/W - Run ARCHI filter during Mass Air 

                                       Meter FMEM.

      9-100                            VIP - Eliminate stalling after running VIP.





      GUE0       GUF0

                 (12/22/86)



      7-442                            Revise EOS.014 module for documentation only

                                       to create EOS.V01 module.

      7-442A                           Cancel EMR 7-442.

      8-064G                           Documents the module and CPU pin number for

                                       the FPM for model years 1988 and 1989.

      8-092I                           S/W - In the MFLOW module, clear FFMTMR 

                                       after it is used for UROLAV_TC.

      8V-285                           VIP - Add BP FMEM.

      8V-285A                          VIP - Add BPSSW, add FMEM documentation.

      9-054                            Move filter on Air Charge (manifold filling)

                                       to foreground.

      9-054A                           Revise manifold filtering logic to be 

                                       compatible with FMEM.

      9-069                            Add function FN884 for ISC Crank.

      9-072                            S/W - Modify VSBAR calculation.







                                         1-2


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      GUD0       GUE0

                 (11/26/86)



      7-566A                           Clarify, revise, thrift original strategy

                                       logic.

      8-033                            Add Heated Windshield Strategy.

      8-033A                           Implement 8-034A,B,C in GX.

      8-034A                           Add DNDSUP = 0 to Heated Windshield logic.

      8-034B                           Define range, resolution, etc for ACRT and

                                       HWPPM.

      8-034C                           Redefine HWPPM.

      8-135                            Add MU type Speed Limiting.

      8-135B                           Revise strategy logic and documentation

                                       relative to Speed Limiting.

      8-135C                           Clarify that FN179A applies to WOT spark,

                                       as well as Part Throttle Spark.

      8-159                            Improve Cruise control command switch

                                       Debounce filter.

      8-167                            Revise Decel Fuel Shutoff Logic.

      8V-173A                          VIP - Correct VIP error causing false

                                       continuous error codes 41 and 91.

      8-201                            S/W - Set a flag for faster determination

                                       of PHEHP.

      8-229                            S/W - Use a common routine to do clip for

                                       DP and 'DP.

      8-236                            S/W - Restructure foreground Spark code to

                                       use common subroutines.

      8-237A                           S/W - Process HIG_PIP_MISC code in PIP

                                       input routine, instead of as a trigger.

      8-271                            Compute new air charge correction for 

                                       leakage and add in foreground.

      8-271A                           Revise logic so that the AIR37 clip includes

                                       all sources of air.

      8-280                            S/W - Correct FN1355 table lookup error

                                       affecting GUA0 through GUD0.

      9-012                            Implement Adaptive Fuel KAM initialization

                                       as a subroutine.

      9-012A                           Add KWUCTR register to Adaptive Table

                                       validation.

      9-021                            Delete DAC register to display EFTR and

                                       support code.

      9-023                            ISC thrift - Delete IPSBFG register and TP

                                       decision branch.

      9-024                            S/W - Eliminate 2 unnecessary jumps in

                                       FRGRND_FUEL_CALC module.

      9-031                            Reinit RATCH to RATCHIV during TP failure.

      9-035                            Revise convention for table labels in FCA.

      9-041                            Complete 8-138. (Delete CRKFLG logic from

                                       CRKTMR and allow free-run).

      9-044                            S/W - Process LOAD_OUTPUT directly in

                                       OUTPUT_CMD_EDGE instead of using call.

      9-045                            Revise PIP_DATA routines for byte and

                                       chrono efficiency.

      9-046                            Modify Decel Fuel Shutoff Logic to add Cal

                                       Switch to use it at Part Throttle for

                                       enrichment via FN374(N).

      0-003                            Implement EXP-147 and EXP-147A into main

                                       stratvine (Spark angle pulsewidth transfer

                                       function change for CT20).



                                         1-3


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      0-003A                           Revise transfer function for SAPW, change

                                       clips on SAPW.





      GUC1       GUD0

                 (11/12/86)



      7-573C                           Revise FCA for FN824 to say "N_BYTE" instead

                                       of "BYTERPM", revise strategy book.

      7-579A                           S/W - Revise foreground control of fuel

                                       pulses to support Bank-to-Bank EFI.

      7-688                            Revise strategy book to specify requirements

                                       for FN1327.

      8-032A                           H/W - Remove 2nd output for ACL put in 

                                       by 8-032.

      8V-064E                          VIP - Correct interference between normal

                                       and VIP fuel pump control.

      8V-064F                          VIP - Use VIP_FP_OVERRIDE instead of

                                       corrupting TSLPIP.

      8V-188A                          VIP - Correct error in VIP fault filter

                                       relating to Threshold Level Flag.

      8-234                            Add FMEM strategy for Mass Air meter.

      8-234A                           Revise logic, include base values.

      8-234B                           Add Cranking check to FMEM logic of 8-234A.

      8-240                            S/W - Revise range of parameters EDNHYS and

                                       SPUCLP.

      8-261                            Delete NOPS from start of O.I. #1 module.

      8-263                            Document how the PIP noise filter works.

      8-264                            S/W - Thrift code in Fuel service routine.





      GUC0       GUC1

                 (11/5/86)



      8-266                            S/W - Correct problem in ISC related to

                                       adding 7V-709 in GUB0.

      8-267                            S/W - Correct problem related to FN1035

                                       (ARCHOR) lookup.





      GUB0       GUC0

      (Merged with GUAC)   (10/23/86)



      8-061A                           Add new row to Adaptive Fuel table

                                       exclusively for Idle.

      8-107                            Use relative LOAD (PERLOAD) instead of

                                       absolute LOAD.

      8-107A                           Use LOAD for EGR (Delete APECHG, APEBAR,

                                       APELOAD) etc. Add ability to disable

                                       PERLOAD usage.

      8-107B                           FN035 to be function of N, Not N_BYTE.

      8-136                            Add Lugging Mode. Thrift Open Loop Fuel.

      8-136A                           Use DNDSUP instead of NDSFLG in "C"

                                       calculation logic.

      8-189                            Use special temperature Normalizing

                                       function for FN1861.

      8-223                            Revise documentation in CRANK/UNDERSPEED/RUN

                                       logic (N < NSTALL).

      9-007                            Revise and thrift Foreground/Background.



                                         1-4


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      9-033                            Revise Vector lower limit for parameter

                                       XFREPT.





      GUA0       GUB0

                 (10/17/86)

      7V-025                           VIP - Implement the MIL logic using a

                                       single timer.

      7-209                            VIP - New Continuous EGO test for MIL.

      7-209B                           VIP - Do EGO Test after a certain number

                                       of TP transitions rather than time at

                                       Part Throttle.

      7-209C                           VIP - Ensure against false codes 41 and 91

                                       if EGO Test is bypassed.

      7-225E                           VIP - Add TFMFLG and MFMFLG before 

                                       performing Continuous VSS Test.

      7-479                            VIP - Modify entry to EGR tests for

                                       compatibility with 3-state PFEHP.

      7-482                            VIP - VIP Test power steering pressure 

                                       switch.

      7-552                            VIP - Ensure proper VIP entry even if FMEM

                                       is in effect on ITP.

      7-560                            VIP - Short index external RAM locations.

      7V-593D                          VIP - Modify VIP code for a 13 byte thrift.

      7V-593F                          VIP - Cancel 7V-593 through 7V-593E.

      7V-643                           VIP - Add initialization of LAMBSE to VRLAM2

                                       at beginning of KOER goose Test.

      7V-650                           VIP - Put OCCDT4 and OCCDT7 in individual

                                       strategy OCCDT calibration files.

      7-681                            VIP - Improve accuracy and resolution of

                                       dither Purge Duty Cycle and frequency.

      7V-706                           VIP - Correct VIP so that if EGO Test fails,

                                       Thermactor and Fuel Tests are bypassed.

      7V-709                           VIP - Revise ISC Strategy to make VIP ISC

                                       calibration independent from the normal

                                       engine ISC calibration.

      7V-709A                          VIP - FN820A is MU only; GU uses FN820B.

      7V-709B                          VIP - Use parameter name V820A in GU to

                                       replace FN820B (for file commonality).

      7V-709C                          VIP - Substitute 1.0 for FN824 when VIP

                                       running flag = 1.

      8V-056                           VIP - Remove all previous EMR history from

                                       VIP source files.

      8V-064A                          VIP - Incorporate new continuous fuel pump

                                       circuit test.

      8V-064C                          VIP - Revise VIP documentation of names,

                                       etc.

      8-092D                           Correct errors relating to Manifold

                                       Filling Filter.

      8-092E                           VIP - Do time based VIP filter constant

                                       routines for VIP filter constants.

      8-092F                           Correct register clobbered by rolling

                                       average routine relating to EGR.

      8V-101                           VIP - Add MAF sensor test to VIP.

      8V-111                           VIP - Gives blanket authority to fix

                                       documentation in VIP files without any 

                                       further EMRs.

      8-115                            VIP - Delete Cal. parameter VSPCLP and

                                       delete setting ADVLIM = 0 from Self-Test.



                                         1-5


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      8V-121                           VIP - Expand allowable error codes from

                                       32 to 'N'.

      8V-125                           VIP - Expand the meaning of goose flag to

                                       allow output of one digit codes up to 90.

      8V-127                           VIP - Quit displaying service code 16 for

                                       engine-running EGO test failure.

      8V-139                           VIP - Revise type checks to allow ease of

                                       changing between MTXSW and TRTYPE.

      8V-162                           VIP - Thrift PSPS Input Test in running VIP.

      8V-162A                          VIP - Correct Software to bypass VIP KOER

                                       Brake Input Test if BIHP not 1.

      8V-173                           VIP - Control EMR for GU VIP; Basic idea is

                                       to use MU VIP 53A as a base for GU VIP.

      8V-174                           VIP - Do not enter, or remain in, KOEO VIP

                                       if underspeed or run mode.

      8V-174A                          VIP - Do not do cruise control static test

                                       if in underspeed mode.

      8V-188                           VIP - Recode Continuous VIP fault filter to

                                       allow up to 8 bytes of error codes.

      8V-190                           VIP - Assign 2 bytes of RAM to FMEM monitor.

      8V-206                           VIP - Change flag VPFESEL to PHEHP_FLG.

      8V-215                           VIP - Change position of Continuous code

                                       67 to a unique slot.

      8-216                            Move ROM_TO from 9FFE to calid 

                                       location ^200A.

      8-216A                           Add dummy parameter to tweak ROM_TO

                                       if needed.

      8-216C                           Documentation for ROM_TO code.

      8V-232                           VIP - Don't force Closed Throttle mode when

                                       doing engine running Self-Test.

      9V-004                           VIP - Revise SCVNT and SCVAC VIP parameters

                                       (OCCDT1 & OCCDT2) to OCCDTA & OCCDTB.





      GUAB       GUAC

                 (10/14/86)

      8-248                            S/W - Revise the KAMRFn determination in

                                       Adaptive Fuel.





      GUAA       GUAB

                 (10/7/86)

      8-061A                           Add new row to Adaptive Fuel table

                                       exclusively for Idle.

      8-092D                           Correct errors relating to Manifold

                                       Filling Filter.

      8-092F                           Correct register clobbered by rolling

                                       average routine relating to EGR.

      8-107                            Use relative LOAD (PERLOAD) instead of

                                       absolute LOAD.

      8-107A                           Use LOAD for EGR (Delete APECHG, APEBAR,

                                       APELOAD) etc. Add ability to disable

                                       PERLOAD usage.

      8-107B                           FN035 to be function of N, Not N_BYTE.

      8-136                            Add Lugging Mode. Thrift Open Loop Fuel.

      8-136A                           Use DNDSUP instead of NDSFLG in "C"

                                       calculation logic.

      8-189                            Use special temperature Normalizing

                                       function for FN1861.



                                         1-6


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      8-223                            Revise documentation in CRANK/UNDERSPEED/RUN

                                       logic (N < NSTALL).





      GUA0       GUAA                  

                 (9/25/86)             

      9-007                            Revise and thrift Foreground/Background

      8-092D                           S/W - Correct errors relating to

                                       Manifold Filling filter in GUA0.





      GXZ0       GUA0

                 (9/15/86)

      7-379                            S/W filter of digital inputs.

      7-379A                           Implement 7-379 in MU, GX, 9X, etc.

      7-386B                           S/W - Revise parameter MIKE100 and verify

                                       that paths do not exceed this time.

      7-386D                           S/W - Do 7-386B for MU & GU, except set

                                       MIKE100 to 66 clock ticks.

      7-573B                           ISC - Add Neutral/Drive Idle Speed gains

                                       and spark feedback.

      7-651C                           Cancel 7-651. 7-651A, 7-651B for GX. Do

                                       thrift part of 7-651A.

      8-046                            S/W - Utilize common byte count allocation

                                       technique.

      8-047                            Start ECT averaging for TCSTRT calculation

                                       at TKON2.

      8-047A                           Revise logic to re-compute TCSTRT after

                                       a stall.

      8-047C                           Cancel 8-047B. Clarify that TCSTRT isn't

                                       part of Inferred BP.

      8-047D                           Ensure that PIP counter control logic is

                                       coded as previously specified.

      8-053                            Allow 'on the boundary' range checks to be

                                       good sensor values for FMEM as well as VIP.

      8-089                            Make BIAS, Peak-to-Peask amplitude and TAU

                                       tables of speed/load.

      8-089B                           Change the X input of 1343,1351,1352,1353,

                                       1354,1355 from FN070/3 to FN039.

      8-089C                           Create dedicated register for BIAS, correct

                                       documentation.

      8-092                            Rework rolling average subroutine to give

                                       truer time constants.

      8-092A                           Make manifold filling filter constant truly

                                       time (BG loop variant).

      8-092B                           Amend 8-092A. Respecify manifold filling

                                       time constants.

      8-092C                           Reverse filter increment/decrement logic.

      8-092G                           Documentation changes for 8-092, to agree

                                       with the code.

      8-138                            Thrifts in ISC and CRKTMR.

      8-180                            Delete AXOD.

      8-182A                           Delete FN's 088 and 089, which are no longer

                                       needed.

      8-182B                           Delete FN's 1330 and 1341.

      8-211                            S/W - Delete code from cal-console call that

                                       reads alternate calibrations.

      8-211A                           S/W - Thrift console routine.

      9-003                            Replace 7 hardware switches with TRLOAD and



                                         1-7


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                                       TSTRAT.

      9-003A                           Revise for compatibility with multiplexed

                                       NDS/ACC.

      9-003B                           Correct ISC documentation relating to 9-003.





      GXY1       GXZ0

                 (8/4/86)

      6-391                            Clip DELOPT to 922 counts after it is

                                       filtered.

      6-391A                           Implement EMR 6-391.

      6-410A                           Implement EMR-410 - Initialize TBART to same

                                       value as RATCH initialization.

      7-429B                           Revise Spark equation to be like MU.

      7-457                            Delete entire EGO aging strategy.

      7-521                            Revise cruise control; delete Fav speed,

                                       delete variable freq duty cycle.

      7-521A                           VSC - Byte thrift - Delete VSCPUL.

      7-634                            Major ISC revisions (7-634,B,C cancelled

                                       by 8-137).

      7-634B                           Clarify start up hicam DSDRPM direction to

                                       agree with other recent EMR's.

      7-634C                           Cleanup documentation, delete TGFLG, thrift

                                       N/D desired RPM and DESMAF logic.

      7-656                            Use fixed INJDLY for Idle instead of table

                                       value.

      7-659                            S/W - Byte thrift to speed up foreground

                                       execution time.

      7-667                            Do not do decel fuel shut off if any FMEM

                                       flag is set.

      7-669                            Correct non-recognition of "Drive" on a

                                       neutral to fourth transition.

      7-669A                           Delete EMR 7-669; N/D logic is not required.

      7-670                            Use 3-state hardware present switch (0=null,

                                       1=VSS only, 2=VSS+Cruise).

      7-670B                           Revise original EMR. (originally issued as 

                                       7-670A).

      7-670C                           Revise 7-670A.

      8-035                            Install signed spark table as FN(ECT,MAP).

      8-048                            Add vehicle speed to logic inputs

                                       for decel fuel shutoff.

      8-048A                           Respecify parameters. Specify correct

                                       existing DFSO logic.

      8-105A                           S/W - Implement 8-105 - byte thrift.

      8-137                            Delete 7-634,A,B,C,D. Revise/simplify ISC.

      8-137A                           Cleanup EMR for ISC changes; define A3CTMR.

      8-154                            Make parameters IXFRPR and XFREPT signed.

      8-161                            Thrift PPCTR logic in Decel Fuel Shutoff.

      8-182                            Make range of CIDRSW 0 to 1.





      GXY0       GXY1

                 (7/2/86)

      7-666                            Init SPKMUL to 0.99. If any FMEM failure,

                                       set SPKMUL to 0.99.

      8-134                            Delete TKTMR from timer list.

      8-140                            Correct resolution problem with foreground

                                       fuel (FUEL_C and FORFUL1,2)

      8-140A                           Clarify that 8-140 was partially required



                                         1-8


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                                       by strategy resolution misspec.

      8-141                            Cancel EMR's not required for GX: 6-291,

                                       7-092, 7-259, 7-388, 7-417, 7-441, 7-441A,

                                       8-080, 8-080A, 8-080B, 8-103.





      GXX1       GXY0

                 (6/13/86)

      7-199                            Inititalize FAM filter to (N*ENGCYL*ARCHG).

      7-653                            Include hysteresis on DELRAT to exit FAM;

                                       Add clip on (AMPEM-EM) on entry to FAM.

      7-694                            Implement 'DNAC' addition.

      8-032                            Implement Ride Control Strategy.

      8-050                            Add Upstream Air flag in Thermactor Air

                                       Strategy for use with ECAD.

      8-050A                           ECAD revisions.

      8-050B                           ECAD revisions.

      8-050C                           ECAD - Respecify and correct calibration

                                       constant values.

      8-077                            Byte thrift - Eliminate alternate 

                                       calibrations.

      8-090                            Move the ATOD routine ahead of the Throttle

                                       Mode select routine.





      GXX0       GXX1

                 (5/19/86)

      8-074                            S/W - FUEL - Correct usage of ML3W 

                                       instruction.

      8-079                            S/W - FUEL - Output Routine - Injector 

                                       firing during CRANK fix.





      GXW0       GXX0

                 (5/8/86)

      7-455                            FUEL - Foreground Fuel Calculation.

      7-455A                           FUEL - Foreground Fuel Calculation cleanup.

      7-671                            S/W - Delete the KEYOFF flag and the code

                                       that references it.

      8-023                            Air Meter Correction Table.

      8-029                            Delete INJDLY2, Rename INJDLY1 to INJDLY.

      8-030                            Raw Air Charge Calculation time reduction.





      GXV0       GXW0

                 (4/25/86)



      6-607A                           S/W - Correct CTNTMR logic; clip to

                                       (NIOLD + NIHYS).

      7-384                            S/W - Add new engr. console call.

      7-432                            S/W - Automatic generation of MROM

                                       identifier.

      7-453                            Purge output frequency should be 10 Hz.

      7-453A                           Delete EVRPM and EVRPMH.

      7-575                            Revise High Speed Fan Logic.

      7-575A                           EMR - 575, use LOAD instead of MAPPA.

      7-588                            Make DASPOT a function of DSTPR

                                       - (RATCH + DELHYS).

      7-614                            Disable Transient Fuel if in DFSO (and fuel



                                         1-9


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                                       is shut off).

      7-614A                           Delete SW_TFI from Transient Fuel.

      7-633                            S/W - Neutral Idle Injector Delay.

      7-636                            If in ISC Failure Mode Strategy, set

                                       DSDRPM to FMMDSD.

      7-677                            Documentation - ISC/FAM - BGCNT docu.

      7-681                            S/W - Purge Duty Cycle in Foreground.

      8-026                            Expand MFA table.

      8-027                            Delete Synchronous Sampling of the

                                       EPT sensor.





      GXU1       GXV0

                 (2/24/86)



      7-494      Dillon                S/W - Include overflow check in Fuel

                                       Pulsewidth equation.

      7-525      Zaghati               Add Closed Throttle check to DFSO; Add

                                       2 breakpoints to FN131.

      7-574      Baltusis              Add C/L Fuel delay after DFSO.

      7-590      Baltusis              S/W - Execute AEFUEL right after

                                       TAR calculation in Convert Routine.

      8-018      Ward                  Incorporate the Manifold Filling Model.

      8-018A     Ward                  Name & range changes - Manifold Filling.





      GXU0       GXU1

                 (2/4/86)



      7-580      Hughes                S/W - Insure ACITMR cleared for all cases

                                       of ACIFLG clear.

      7-586      Hughes                S/W - Correct O/L Lambse.

      7-587      Meshkinnafas           S/W - Correct repeaters error.

      7-589      Meshkinnafas           S/W - Fix for EFTR calc.





      GXT0       GXU0

                 (1/23/86)



      6-589C     Hughes                Correct Software Rel. to ATMR3.



      7-411      Allen                 Dual MKAY.

      7-411A     Allen                 SIGKAY/MKAY fix.

      7-421      Zaghati               Eliminate Upstream air on WOT after a

                                       certain time from start.

      7-486      Ward                  Rearrange MCAL Region assignments.

      7-486A     Ward                  Put parameters from MISC module in

                                       Region 1.

      7-486B     Meshkinnafas           Change Region assignments for GX.

      7-449A     Hughes                S/W - Set base value of MHPFD to 0.24.

      7-541      Meshkinnafas           S/W - Save FN311 & FN212A in RAM.

      7-560      Meshkinnafas           S/W - Short Index External RAM

                                       automatically.

      7-577      Ward                  S/W - Correct temp. register usage in DFSO.



      0-002      Allen                 CID-VRS added to CID-HALL.





      GXS0       GXT0



                                         1-10


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                 (1/8/86)



      6-469      Pearson               S/W - Reprioritize Repeaters.

      6-469A     Pearson               Cancel EMR 6-469.

      6-705      Zaghati               Allow air on heavy crowds only until

                                       engine stabilizes.

      6-705A     Ward                  Implement 6-705 in GX.



      7-094E     Ward                  S/W - Invert THS3/2.

      7-172B     Chupa                 S/W - Eliminate redundant operation,

                                       SAFTOT is done in Foreground.

      7-197B     Ward                  Revise Adaptive Fuel Default logic.

      7-373      Baltusis              Add a percentage deadband around

                                       equilibrium fuel to turn off transient fuel.

      7-387      Baltusis              Delete FN824(N);

                                       Add FN824A(DSDRPM-N).

      7-402      Baltusis              Reorder code to check unique

                                       NDSFLG condition first.

      7-402A     Baltusis              Revise logic so that reordering code

                                       isn't needed, dont implement 7-402.

      7-403      Baltusis              Use 100% ISC Duty Cycle in Crank

                                       Mode even if FMEM flag is set.

      7-413      Ward                  I/M test changes.

      7-413B     Ward                  Change +FN180(CTNTMR) to -FN180(CTNTMR).

      7-413C     Ward                  Delete HPTPMR timer.

      7-414      Zaghati               Include HSPFLG in Dump Air logic; include

                                       W.O.T. in O/C Fuel Logic.

      7-414A     Ward                  Clarify 7-414 for GX.

      7-426      Ward                  Change all references of OCPSSW to THRMHP.

      7-427      Baltusis              Add a third position to PFEHP;

                                       If PFEHP = 2, disable EGR strategy.

      7-427A     Baltusis              Set EM = 0 & EGRACT = 0 when

                                       no EGR control is required.

      7-428      Zaghati               Initialize TPBAR to RATIV.

      7-435      Baltusis              Delete DASMAX dashpot clip,

                                       replace with a function of RPM.

      7-435A     Baltusis              Add Vector clip to FN882,

                                       maximum clip of 2.0.

      7-437      Baltusis              Correct Transient Fuel "M" logic.

      7-444      Ward                  Allow torque truncation spark if N > TTNOV

                                       * VSBAR without executing AXOD code.

      7-466      Huck                  Revise code to clip all negative DELPR

                                       results to 0.

      7-466A     Huck                  Ignore code revisions in 7-466, implement

                                       revisions in 7-466A.

      7-474      Liller                S/W - Modify the MAF repeaters module.

      7-475      Mingo                 S/W - Prevent inhibition of high speed

                                       outputs due to large carousel count.

      7-524      McIntee               S/W - Clip injector beta to < 1.75.

      7-530      Liller                S/W - Separate Injdly register for each 

                                       bank.



      8-016      Ward                  Allow clutch input to be selectable for

                                       DFSO logic & for ISC logic.

      8-017      Ward                  Change base values of MAFK1 to 1.00 &

                                       MAFK2 to 0.00.

      8-020      Liller                S/W - DOL code revisions.







                                         1-11


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      GXR0       GXS0

                 (10/31/85)



      7-371      McIntee               S/W - Move the external Ram ares designated

                                       as Keep Alive Memory to ^700 - ^7FF.

      7-422      Mazzara               S/W - FCA changes for SWDV testing.

      7-449      Mazzara               S/W - Set base value of MHPFD to .24.



      0-001      Allen                 Provide support for High Data Rate 

                                       Electronic Spark System for CT-20

                                       design contest.

      0-001A     Allen                 Revise Spark Angle Pulse Width  equation and

                                       correct limits for SAPW.





      GXQ0       GXR0

                 (10/4/85)

      6-517C     Harris                VIP - Correct Type_check error.

      6-517D     Rachedi               VIP - Revise Cylinder Balance Test.

      6-517E     Harris                VIP - Revise calibration constant values.

      6-519A     Sass                  VIP - Add MTXSW criteria to Self-Test.

      6-549      Yagley                S/W - Set PTPFLG = 1, if PIP interrupt 

                                       occurs.

      6-677      Rachedi               VIP - ISC Duty Cycle.



      7-025      Neubacher             VIP - FMEM & MIL v36.

      7-025A     Mingo                 VIP - Implement MIL using a single timer.

      7-025B     Hughes                VIP - Apply 7-025 to 9X & GX Versions.

      7-028      Neubacher             VIP - Include a bulb check with MIL.

      7-028A     Mingo                 VIP - Cancel bulb test when disableEOLT

                                       has been set.

      7-029B     Ward                  Set EGRACT to 0 when EGR is disabled.

      7-087      Sass                  VIP - New filter for ISC.

      7-105      Sass                  VIP - Use KIHP & GOOSW.

      7-230      Mingo                 VIP - Rewrite error codes & STO output

                                       for byte efficiency.

      7-236      Pearson               S/W - Transfer between VAX/DEC-20.

      7-243      Yagley                Use VSBAR to enter RPM Control.

      7-245      Yagley                Use VSBAR to enter MFA Mode.

      7-257      Sass                  VIP - Protect against STI noise.

      7-257A     Schumaker             VIP - Include 9X in EMR 7-257.

      7-257B     Sass                  VIP  Documentation clarification of 

                                       7-257 & 7-257A.

      7-261A     Harris                Clip KWUCTR to 255 in Warm_up 

                                       logic.

      7-286      Neubacher             VIP - Add MIL documentation.

      7-286A     Neubacher             VIP - Revise MIL documentation.

      7-305      Rachedi               VIP - Fix error code 33 at ALT.

      7-305A     Mingo                 VIP - Do not implement 7-305A for GX.

      7-352A     Baltusis              Include GX in 7-352, Correct PE

                                       calculation.

      7-378      Liller                S/W - TTBAR filter does not work if

                                       PFEHP = 1.





      GXP0       GXQ0

      6-499A     Yagley                Clarify TIPFLG & CTFLG logic.

      6-585      Zagheti               Bypass Knock Control Strategy.

      6-585A     McIntee               Revise Knock detention logic.



                                         1-12


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      6-585B     Baltusis              Add KIHP switch to bypass knock.



      7-195      Yagley                Rename DISFLG to CIDHP.

      7-198C     Dillon                Revise APT determination code.

      7-238      Mazzara               S/W - Remove VERID.

      7-255      Mortimer              S/W - Protect SPKAD register

                                       from noise.

      7-261      Baltusis              Two Speed Adaptive Fuel Learning.

      7-347      McIntee               S/W - Avoid ML3W instruction.



      8-007      Hardy                 S/W - Change CCDFLG to CCDSW in CCD

                                       logic.





      GXO0       GXP0

      6-531      McIntee               S/W - Add overflow check in EGR

                                       Control algorithm.

      6-724      Chupa                 S/W - FKINJD effectiveness improvement.



      7-094      Yagley                Implement AXOD strategy.

      7-094A     Yagley                Revise LAMMUL logic for AXOD.

      7-094C     Yagley                Revise AXOD.

      7-094D     Ward                  Add RATIV & NPSSW.

      7-191A     Baltusis              Revise definitions in AXOD.

      7-192      Yagley                Revise AXOD & Idle Speed.

      7-194      Yagley                Define brake input logic.

      7-206      Yagley                Add Torque Truncation Spark Retard.

      7-215      Yagley                Revise Tip-in logic.

      7-241      Baltusis              AXOD 3-4 upshift delay time.

      7-246      Chupa                 S/W - Proper update of SPKAD index

                                       register.

      7-268      Baltusis              Revise scaling of TTNOV.

      7-319      Dewey                 S/W - Fix to BAPXFR.



      8-010      Meshkinnafas           S/W - Correct scaling error in

                                        EGRDC calculation.

      8-010A     Meshkinnafas           S/W - Overflow check in EGRDC calc.

      8-011      Chupa                  S/W - RPM Vector clip to 7600 RPM.





      GXN0       GXO0

      6-431      Hardy                 Delete IDMAX from Getfile.

      7-117      Baltusis              Add FN306.

      7-137A     Yagley                Support 3.8L FWD programs with EDF.

      7-147      Yagley                Smooth trasition to MFA.

      7-172      Baltusis              DAC total spark advance.

      7-172A     Yagley                Revise range of SAFTOT.

      7-174      Baltusis              Revise IPSIBR update logic.

      7-197      Baltusis              Revise use idle adaptive cells.

      7-197A     Taylor                Add Else condition to logic.

      7-198      Baltusis              Remove LAMBSE reset from ISC.

      7-198A     Baltusis              Set ISLAST before DSDRPM.

      7-226      Dewey                 Revise Mode select logic.





      GXM0       GXN0

      7-090      Yagley                Add integrated VSC.

      7-090A     Yagley                Revise VSC (include Hardware present sw).

      7-09A      Yagley                Do VSC only if VSCHP = 1.



                                         1-13


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      7-137      Yagley                Add 2-speed EDF.

      7-140      Yagley                Revise VSC.

      7-140B     Yagley                Use Rising edge of VS Sensor input.

      7-140C     Maurer                Calculate speed after 2nd MPH transition.

      7-251                            S/W - Delete PIP_OK logic.





      GXL0       GXM0

      6-642      Baltusis              Add Logic Switch to force NDSFLG.

      6-670      Yagley                Revise DASHPOT preposition.

      6-674      Yagley                Ensure Time delay in shutting off A/C.

      6-675      Yagley                AETAR added.

      6-678      Baltusis              Add conditions to clear latch.

      6-689      Chupa                 Correct underflow for tip-in.

      6-689A     Chupa                 Do 6-689.

      7-089      Yagley                Do NOT open EGR unless DESEM>MINDES+DESHY.

      7-089A     Yagley                Set CONPR = EPTBAR, if disabled or too low.

      7-229      Meshkinafas           Save PE value.





      GXK0       GXL0



      6-336      Pearson               Move calibration parameters.

      6-425      Chupa                 Correct Software error Re: Filter constant

                                       for NDBAR.

      6-428      Pearson/Geer           Make (CHECKSUM) Uncommon.

      6-574      McIntee               Revise injector output algorithm.

      6-574A     McIntee               Change logcation of label Injector 400.

      6-608      Hughes                Correct minor issue in throttle mode.

      6-679      Yagley                Revise Region assignments to fit in memory.

      6-709      Yagley                Reduce ambiguity of document and S/W.

      6-700      Rein                  Check all timect subroutine calls.

      7-076      Yagley                Convert GX Stratvine to multi-cal.

      7-168      Chupa                 Move BP to external RAM.

      7-179      Yagley                Assign Parameters to Regions.

      7-202      Liller                Revise Non-signature mode to avoid two

                                       injectors firing on same PIP.





      GXJ0       GXK0



      6-231      Heikkila              WCOTMR changed to ACWTMR.

      6-240      Heikkila              Define WCOTMR where (TP-RATCH) is

                                       negative.

      6-393      Yagley                Revise DOL ALGORITHM.

      6-393A     McIntee/Yagley        Improve and simplify DOL algorithm.

      6-434      Chupa                 Revise/Clarify LAMBSE reset Logic.

      6-486      Zaghati               Ramp decel fuel "SHUTOFF".

      6-486A     Yagley                Define "DMIN"

      6-486B     Zaghati               Allow decel S/O at commencement of decel.

      6-547      McIntee               Fix Transient error in DOL calculation.

      6-619      Yagley                Change Range - FN1124 TO 0-31.75.

      6-620      Zaghati               Filter INJDLY before use in foreground.

      6-645      McIntee               Eliminate extraneous type checks. 

      6-690      Chupa                 Correction to clip logic - LAMSE2.

      6-694      Chupa                 Clip FN374 to min, not maximum.



      7-010C     Armitage              Information EMR relating to FAM Logic.

      7-103      Yagley                Incorporate FMEM strategy.



                                         1-14


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      7-104      Yagley                Delete FN348A--Use FN348.

      7-107      McIntee               Remove Asynchronous AE.

      7-116      Yagley                Commonize low speed output EVR.

      7-129      Yagley                Revise Closed Loop Fuel/Adaptive learning.

      7-136      Yagley                Replace IDLTMR/CTNTMR with EXTMR.

      7-143      Chupa                 Free up unused RAM.

      7-145      Yagley                Decrease EGR if in MFA MODE.

      7-150      Velting               Store PHFDLT instead of DT12S/2 into HFDLTA.

      7-156      Yagley                Provide Rich Open Loop LAMBSE.





      GXI0       GXJ0



      6-140      Chupa                 Modify Self-Test to avoid undesirable

                                       PW modifiers.

      6-140A     Mortimer              Revision to 6-140.

      6-140B     Chupa                 Revision to 6-140.

      6-432      Baltusis              Revise desired RPM and desired

                                       airflow calculations.

      6-432A     Baltusis              Revise original ISC EMR.

      6-432B     Baltusis              Correct ISFLAG logic.

      6-432C     Baltusis              Change NDADLT to NDDELT.

      6-495      Zaghati               Increase Repetition of FN367.

      6-496      Zaghati               Increase Range of FN367.

      6-545      Ratkowski             Eliminate use of ML3W.

      6-583      Zaghati               Add Unique Spark adder in Neutral.

      6-584      Zaghati               Unique Injection timing - Neutral.

      6-588      Yagley                Open Loop Tip-in Retard permitted.

      6-589      Baltusis              Revise DESMAF calculation.

      6-589A     Baltusis              Rename FN018B to FN018 (ATMR3).

      6-590      Baltusis              100% duty cycle to ISC actuator.

      6-590A     Baltusis              Modify Reinit during Running.

      6-590C     Yagley                First-RPM/STALLN Compare to set

                                       REFLG.

      6-598      Zaghati               New timer to delay Rich Open Loop.

      6-602      Yagley                Increase range of CTATMR.

      6-610      Yagley                EGR disabled, set EM=0 if in RPM

                                       ISC control or FMEM extant.

      6-635      Yagley                Revise Anticipatory FAM.

      6-664      Chupa                 Correct Canister Purge problem.



      7-083      Yagley                Add Open Loop ability during Crowds.

      7-114      Yagley                3 PIP intervals that limit RPM.

      7-114A     Yagley                Shorten MINPIP to MNPIP.

      7-120      Chupa                 Change FN652A to Cal-Par.

      7-131      Chupa                 Change FN036 to Cal-Par.





      GXH0       GXI0



      6-144A     Ward                  Correct EPTZER input to EPTBAR.

      6-615      Yagley                Delete ACCFLG = 1 in Closed Throttle.

      6-646      Chupa                 Define BG_Timer as Byte.



      7-029A     Yagley                Define FKEACT.

      7-054      Armitage              I/O definition to support 3.0L.

      7-054A     Yagley                Clarify A/C-NDS input handling.

      7-078      Yagley                Add inlet air control.

      7-102      Dewey                 Add Thermactor Option.



                                         1-15


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      8-002      Allen                 Add option to use distributorless

                                       Ignition, instead of Sig. PIP.

      8-002A     Allen                 Delete all ref. to SIGDC, if DISFLG

                                       = 1, then SIGPIP = 1.





      GXG0       GXH0



      $5E-190    Sass                  VIP - Word/byte efficiency.

      $5E-190A   Sass                  VIP - Thrift word/byte.

      $5E-203    Sass                  VIP - Insure ISC Precondition.



      6-125      Davison               VIP - Add single EGO self-test.

      6-125A     Davison               VIP - Revise 6-125.

      6-133A     Davison               VIP - Show new Stereo-EGO terms.

      6-148C     Rachedi               VIP - Upgrade PFE/EVR Self-Test.

      6-152      Davison               VIP - Add Crossed-EGO check.

      6-157      Davison               VIP - Add manufacturing test.

      6-157A     Rachedi               VIP - Checksum to include 32K ROM.

      6-157B     Rachedi               VIP - Commonize Veh and EED test.

      6-157C     Rachedi               VIP - Instruction for STO "off"



      6-224      Mingo                 VIP - Revise Knock Window Routine.

      6-229      Sweppy                VIP - Use FMEM.

      6-245      Rachedi               VIP - Delete Transmission test,

                                       Add 6-246.

      6-246      Krzyske               VIP - Revise Knock Test.

      6-263      Mingo                 VIP - Revision to implement 6-162.

      6-270      Krzyske               VIP - Add Keypower circuit test.

      6-275      Krzyske               VIP - Actuate EDF/HEDF outputs.

      6-297      Sass                  VIP - Re-enter KODO Self-test.

      6-301      Sass                  VIP - Revise KAMREF reference.

      6-327      Sass                  VIP - Obviate interference between

                                       STO/KTS.

      6-331      Tedesco               VIP - Avoid Transient Fuel when

                                       in Self-Test.

      6-347      Rachedi               VIP - New Fuel test for 2-EGO sys.

      6-347A     Krzyske               VIP - Save Test time.

      6-348      Rachedi               VIP - Add Air test for 2-EGO sys.

      6-387      Krzyske               VIP - Documentation revision only.

      6-388      Rachedi               VIP - Improved PIP and IDM Test.

      6-388A     Rachedi               VIP - Revise PIP test.

      6-388B     Harris                VIP - Revise PIP->IDM test logic.

      6-388C     Rachedi               VIP - Revise PIP-IDM test.

      6-388D     Rachedi               VIP - Correct continuous PIP/IDM.



      6-400      Sass                  VIP - Accomodate various air flows.

      6-400B     Baltusis              VIP - Bypass 98% Duty Cycle clip.

      6-400C     Mingo                 VIP - Byte thrift, revise FLRNFG.

      6-438      Girdis                VIP - Revise macros, ROM 1 and 2.

      6-452      Krzyske               VIP - Delete ECT rationality.

      6-460      Krzyske               VIP - Verify continuous codes-KAM.

      6-460A     Neubacher             VIP - delete 3U strat. from 6-640.

      6-463      Schumaker             VIP - 11 Byte thrift.

      6-475      Rachedi               VIP - Revise SW documentation only.

      6-476      Rachedi               VIP - Revise SW documentation only.

      6-483      Krzyske               VIP - Resolve Multi-cal conflicts.



      6-500      Mingo                 VIP - EOL RAM test revision.



                                         1-16


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      6-501      Mingo                 VIP - Revise output circuit check.

      6-501A     Mingo                 VIP - Revise 6-501.

      6-501B     Mingo                 VIP - Revise Output circuit check.

      6-517      Rachedi               VIP - New cylinder balance test.

      6-517A     Rachedi               VIP - Revises 6-517.

      6-517B     Rachedi               VIP - Avoid engine stall.

      6-518      Mingo                 VIP - Prevent false indications.

      6-536      Mingo                 VIP - Revise EVR Output circuit ck.

      6-573      Rachedi               VIP - Calib. Capability for PSPS.

      6-573A     Rachedi               VIP - Supercedes 6-573.

      6-586      Sass                  VIP - Extend KAM extension.

      6-586A     Rachedi               VIP - Revise 6-586.

      6-595      Rachedi               VIP - Commonize Goose.

      6-599A     Krzyske               VIP - Prevent false error code 74.

      6-599B     Krzyske               VIP - maintain flag naming con.

      6-599C     Baltusis              VIP - BIHP specification.



      6-612      Mingo                 VIP - Revise Goose.

      6-621      Pearson               VIP - Adjust MAPCNT.

      6-627      Mingo                 VIP - Create Mask of output state.

      6-632      Krzyske               VIP - Code 33 revision.

      6-646      Chupa                 VIP - Define BG_Timer as Byte.



      7-019A     Rachedi               VIP - Add PFE EGR test; delete AM1 and

                                       AM2; revise MAP sensor name.

      7-073      Yagley                Rename EGRSW->PFEHP.





      GXF0       GXG0



      6-419      Allen                 Revise Signature PIP.

      6-419A     Allen                 Revise Switching in Spark

                                       logic between Single and

                                       Double Edge.

      6-419C     Salamon               Use Tick values for SPKSWH/SPKSWL.

      6-548      Allen                 Revise Signature PIP.



      7-052      Allen                 Implement 6-419, 6-419A, 6-419C

                                       at same time as 6-548.

      7-070      Liller                Revision to Injector pulse S/W.

      7-071      Liller                Revise cranking fuel pulse S/W.

      SCM-008    Gaynier               Eliminate use of nested "get files"

                                       in software routines.





      GXE0       GXF0



      6-577      Liller                Revise PIP input processing mod.

      6-597      McIntee               Revise Transient fuel.

      6-601      Liller                Fix Injector Sync. Routine.

      7-033      Allen                 Add computer controlled dwell

                                       for Distributorless Ignition

                                       System.

      7-033A     Allen                 Revise 7-033.

      7-033B     Allen                 Make CCDFLG calibratible.

      7-033C     Velting/Allen         Final revision/Documentation.





      GXD0       GXE0



                                         1-17


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      6-414      Yagley                Revise TIP-in Retard.

      6-414A     Yagley                Load hysteresis in CTFLAG.

      6-455      Zaghati               Bypass MFA at altitude.

      6-456      Zaghati               Time delay before upstream air

                                       in Decel. Delete unused timers.

      6-456A     Yagley                Define HMCTM.

      6-470A     Baltusis              Revise IVPWR to IIVPWR.

      6-481      Yagley                Insert SIL Chapter.

      6-499      Yagley                Revise Retard logic, clarify

                                       flags: TIPFLG and CTFLAG.

      6-506      Yagley                Turn off fuel as RPM limiter.

      6-508      Yagley                Delete ACDFLG, use ACCFLG.

      6-541      Yagley                Revise Retard logic.

      6-587      Liller                Add 3 levels to foreground.



      7-055      Liller                Fix overflow in aircharge calc.

      7-056      Liller                Correct Transient Fuel S/W.

      SCM-006    Gaynier               V29, KAM_Qualify.





      GXC0       GXD0



      6-164      Yagley                A/C status logic revision.

      6-164A     Yagley                Further A/C status revision.

      6-241      Armitage              ISC revisions.

      6-278      Armitage              Add RPM Adder vs Act.

      6-312      Zaghati/Armitage      Revise ISC Mode Select.

      6-338      Bosley                ISCFLG redefined, SW.

      6-377      Zaghati               VBAT Cal-Console Displayable.

      6-389      Girdis                ISCDTY from Byte to Word.

      6-441      Brelian               Remove All TSAD Strategy.

      7-039      Liller                Remove Map usage from Sonic EGR.

      7-040      Armitage              Add 6-164, 6-241, 6-441.

      7-042      Liller                Correct Fuel sequencing.





      GXB0       GXC0





      6-145      Hoen                  Add Stereo EGO Adaptive Fuel

                                       Control re: open/closed loop.

      6-145A     Yagley                Include Table, Row 7 Adaptive Fuel.

      6-145B     Yagley                Revise Adaptive Documentation

                                       to match Code.

      6-189      Baltusis              Revise Adaptive Fuel Learning

                                       Relating to ACT.

      6-189B     Baltusis              Revise AFACT1/AFACT2 in Adaptive.

      6-277      Zaghati               Lambda Resets/Jumpback only in

                                       Closed Loop.

      6-311      Yagley                New DAC Register FAMREG.

      6-324C     Yagley                If ISCKAM pass ISKSUM test, set

                                       ISKSUM = Sum of ISCKAM.

      6-325      Yagley                Qualify EPTZER as KAM Parameter.

      6-346      Hughes                Correct Stereo-Adaptive Code.

      6-365      Jones                 3-Byte Test to go in ROM.

      6-367      Chupa                 Correct Stereo Adaptive load of

                                       BIASCT.

      6-375      Ward                  Add enable interrupt to balance

                                       disable interrupt in CRANK.



                                         1-18


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





      6-394      McIntee               Move ECTCNT to External RAM.

      6-405      Hardy                 Delete header module from FCA.

      6-433      Yagley                Canceled after execution of

                                       LAMBSE=LAMBSE-LMPJMP.

      6-433A     Yagley                Cancel 6-433 - NO problem.



      7-029      Yagley                Revised PFE Strategy.

      7-032      Armitage              Use BIASCT instead of ASYBCT.

      7-034      Armitage              Delete NDCT/NDLAM. Add FN371.

      7-034A     Armitage              Modify Minimum Range for LAMMUL

                                       and FN371.

      7-036      Liller                Remove Bad instruction clearing

                                       Simultaneous Flag too low RPM.





      GXA0       GXB0



      6-033A     Yagley                Change EVR frequency.

      6-204      Yagley                Add PFE EGR Control.

      6-204A     Yagley                Use FN239 with Pressure/EGR Input,

                                       depending on EGRSW.

      6-218      Yagley                Delete references to Non-existent

                                       flags.

      6-324      Yagley                Add checksum to KAM qualification

                                       test during powerup.

      6-324B     Yagley                Do not check KAM_ERROR flag

                                       during powerup KAM qualification.

      6-380      Yagley                Do not reinitialize ISCKAM during

                                       KAM qualification.

      SCM-001    Gaynier               Common Filter constant.

      7-026      Gaynier               Change FKECT1 to FKECT.





      MXG0       MXG3      GXA0



      5E-082     McLean                Supplement Dual-edge Spark Routine.

      5E-082A    McLean                Delete Registers DIFF0 and DIFF1.

      5E-187A    McLean                Delete Signat, MHPFD to .99.

      5-306      Allen/McIntee         Correct value of ticks.



      6-118      McLean                Improve Dynamic spark accuracy.

      6-133      Gaynier               Remove reference to Left/Right with

                                       regard to Stereo EGO.

      6-158      Baltusis              Withhold knock windows for

                                       WINCLD PIP Periods.

      6-158A     Velting               Simplify and improve 6-158.

      6-166      Yagley                Replace single injector slope with

                                       Dual slope and Fox Function.

      6-184      Mazzara/McIntee       Remove PSTRUC counter.

      6-195      Pearson               Ensure at least 10 usec wait.

      NONE       Rutz                  Commonize scheduler with CH.



      6-217      Ratkowski             Confirm Calls to IN22 < .992

                                       only, occur.

      6-224      Mingo                 Fix Single Knock Module EOS.

      6-224A     Mingo                 Correct Implementation of 6-224.

      6-249      McIntee               Clear Simultaneous flag if PIP period

                                       indicates > 1953 RPM.

      6-272      Velting               Revise Knock strategy to correct



                                         1-19


                              STRATEGY EVOLUTION - GUFB

                              Copyright 1989 FoMoCo





                                       Knock window.

      6-295      Zaghati               Make Individual cylinder Knock spark

                                       cal console.

      6-341      Chupa                 Correct Scaling in return of feedback

                                       bias from FN312A. Correct KAMREF.

      6-343      McIntee               Correct software problemm in Transient

                                       Fuel.

      6-344      Hughes                Correct Software problem for A/C Cutout.

      6-363      Liller                Correct scaling error dual slope.



      7-005      Gaynier/Armitage      Revise Fuel Control.

      7-005A     ""                    Clarify APELOAD normalizing to

                                       be FN071A.

      7-005B     ""                    Clarify/correct 7-005/7-005A.

      7-005C     ""                    Modify cranking fuel logic to

                                       reference BP instead of MAP.

      7-005D     ""                    Clarify intent of 7-005A re: FN071

                                       and FN071A.

      7-005E     ""                    Modify range/resolution specification

                                       for FN071 and FN071A.

      7-006      Gaynier/Armitage      Revise spark control.

      7-007      Gaynier               Define Knock Strategy (MAPPA v LOAD)

      7-009      Gaynier               Revise Thermactor Strategy.

      7-010      Gaynier               Revise Idle Speed Strategy.

      7-010A     Armitage              Define Calibration parameters LOWLOD/ACLOD.

      7-010B     Armitage              Define new FN820B,delete FN820A.

      7-012      Gaynier               Control Supercharger Bypass.

      7-014      Gaynier               Revise Timer control.

      7-013      Gaynier/Armitage      Add/revise System Equations

                                       for Air and EGR Mass Flow rates.

      7-013A     ""                    Replace Aircharge, new range for EM.

      7-013B     ""                    Define AELOAD

      7-013C     ""                    Modify Range/Resolution for EM/FN037.

      7-017      Armitage              Revise Sonic EGR Control.

      7-020      Armitage              Apply 6-166 to GX.

      7-022      Armitage              Delete overdrive Strategy, delete

                                       thermactor Pump Clutch.

      7-024      Armitage              TAR conversion in software.













































                                         1-20

























                                      CHAPTER 2



                                      SYMBOLOGY



































































































                                         2-1


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





                                        SYMBOLOGY





   INPUTS



      The inputs to most logical operations will be conditional statements  of  the

      form:



                     X > Y



      where, X is a variable (RAM), and Y is a calibration constant,  fox  function

      or  table  look-up,  or a mathematical expression.  In some cases, Y may also

      represent a variable.



      Typically, six types of conditional statements will appear  in  the  strategy

      logic diagrams.  They are; X>Y, X<Y, X>OR=Y, X<OR=Y, X=Y, and XNOT=Y.





                SYMBOL          MEANING

                ------    ------------------------

                  =       EQUAL TO

                 NOT=     NOT EQUAL TO

                  >       GREATER THAN

                 >OR=     GREATER THAN OR EQUAL TO

                  <       LESS THAN

                 <OR=     LESS THAN OR EQUAL TO







      It should be noted that when the expression X>Y or X<Y  is  encountered,  the

      conditional  statement can be calibrated such that it will never be true, and

      the appropriate strategy action will never take place.  For example,  if  the

      variable  X  has  a  range  of  0 to 255, and the calibration constant in the

      logical statement, X>Y, is selected to be 255, the statement will  always  be

      false.  This provides a means for calibrating out certain strategy functions.





      When any conditional statement is  true,  the  INPUT  STATE  to  the  logical

      operation  is  said  to  be 'TRUE', and is assigned a value of '1'.  When the

      statement is false, the INPUT STATE is 'FALSE', and is assigned  a  value  of

      '0'.







































                                         2-2


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





   LOGICAL OPERATIONS



      Two logical operations are used, the 'AND' gate and the 'OR' gate.  An  'AND'

      gate is represented by the following symbol:





                A ----|

                      | AND--------| C

                B ----|





      where A and B are INPUT STATES and C is defined as the OUTPUT  STATE  of  the

      logical  'AND' operation.  The value of the OUTPUT STATE is a function of the

      INPUT STATES as shown in the following truth table:



                            AND GATE

           ============================================

           INPUT STATE     INPUT STATE     OUTPUT STATE

                A               B                C

           ============================================

                0               0                0

           --------------------------------------------

                0               1                0

           --------------------------------------------

                1               0                0

           --------------------------------------------

                1               1                1

           ============================================





      Likewise, the 'OR' gate is represented by:





                A ----|

                      | OR--------| C

                B ----|





      And the OUTPUT STATE for various INPUT STATES is  given  by  the  'OR'  truth

      table:



                             OR GATE

           ============================================

           INPUT STATE     INPUT STATE     OUTPUT STATE

                A               B                C

           ============================================

                0               0                0

           --------------------------------------------

                0               1                1

           --------------------------------------------

                1               0                1

           --------------------------------------------

                1               1                1

           ============================================













                                         2-3


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





   OUTPUTS





      The output of all logical operations results in one of two possible paths:



           1) The output is an input to another logical operation.





                A ----|

                      | AND--- C ---|

                B ----|             | OR--------| E

                D ------------------|





           In this case, OUTPUT STATE C is an input to an 'OR' gate.  It should  be

           treated  like any other conditional statement when determining the value

           of the final OUTPUT STATE E.





           2) ACTION is taken based upon the OUTPUT STATE.





                A ----|

                      | AND--- C ---| ENERGIZE OUTPUT

                B ----|             |

                                    | --- ELSE ---

                                    |

                                    | DE-ENERGIZE OUTPUT





           The ACTION described in the action box is taken when OUTPUT STATE  C  is

           'true'.   If  an  ALTERNATE  ACTION  is  required when OUTPUT STATE C is

           'false', the alternate action is described below an  ELSE  statement  in

           the  action  box.  If no alternate action is required, no ELSE statement

           will appear.



















































                                         2-4


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





      Multiple "ELSE/ACTION" blocks can appear in a logic diagram in which three or

      more alternate actions are possible.  Consider the following example:





                A ----|

                      | AND--- C ---| ACTION #1

                B ----|             |

                                    |

                                    | --- ELSE ---

                                    |

                D ----|             |

                      | AND--- F ---| ACTION #2

                E ----|             |

                                    |

                                    | --- ELSE ---

                                    |

                                    |

                                    | ACTION #3







      The procedure is:



      1.  Test for ACTION #1.  If "C" is true, perform ACTION #1.



      2.  Otherwise, test for ACTION #2.  If "F" is true, perform ACTION #2.



      3.  Otherwise, perform ACTION #3.







      Notes about multiple "ELSE/ACTION" logic:



      1.  When logic has multiple "ELSE/ACTION" blocks, only one action  block  can

          be performed during a program pass.  Priority is always top down.  In the

          example, if "C" and "F" are simultaneously true, "C" takes precedence and

          ACTION #1 is performed.



      2.  If the final "ELSE/ACTION" block does not have logic as input pointing to

          it  (as  in  the  example),  the  final action block is performed when no

          preceeding action block is true.  Action is always performed during  each

          program pass with this type of logic.



      3.  If the final "ELSE/ACTION" block has logic as input pointing to  it,  the

          final  action  block is performed only when no preceeding action block is

          true and when its input logic is true.  Action is  not  always  performed

          during each program pass with this type of logic.



























                                         2-5


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





   HYSTERESIS





      Hysteresis in a strategy is a situation in which the logic used  to  make  an

      output  true  is  different from the logic used to make the output false.  An

      example use would be to prevent on/off cycling of an output because of jitter

      in an input parameter.





      Hysteresis is represented in strategy  logic  diagrams  using  the  following

      "flip-flop" notation:





                A ----| S   Q --------| C

                      |

                B ----| C





      The actual conditional statements and direction  of  hysteresis  will  depend

      upon  the  specific  application in each strategy module.  The action of this

      hysteresis notation is given by the following truth table:





              HYSTERESIS FLIP-FLOP

           ==========================

           S(SET)  C(CLEAR)  Q-OUTPUT

            A        B          C

           ==========================

            0        0      no change

           --------------------------

            0        1          0

           --------------------------

            1        0          1

           --------------------------

            1        1          1

           ==========================





      The action of the flip-flop can be described as follows.  When the "A"  (set)

      input  is true, regardless of the "B" (clear) input level, the flip-flop sets

      and the "C" output is true.  When the "B" input is true and the "A" input  is

      false,  the  flip-flop  clears and the "C" output is false.  When "A" and "B"

      are both false, the "C" output remains unchanged.



      ADVICE:



      1.  Since the intent of a flip-flop is to provide hysteresis, the state of  a

          flip-flop  must  be  remembered from pass to pass.  The output is usually

          defined as a flag.



      2.  All flip-flops must be serviced every  pass  through  the  program,  even

          though  some  flip-flops  are  shown  in  portions  of logic that may not

          execute each pass.  The normal  practice  is  to  lump  and  service  the

          flip-flops  together at the beginning of a routine.  This guarantees that

          all flip-flop outputs will reflect the correct  state  based  on  current

          input conditions.  Then, when logic refers to a flip-flop, the logic only

          needs to look at the flag which represents the state of the flip-flop.







                                         2-6


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





      3.  Clear (0) is  the  default  initial  value  of  the  output  flag  for  a

          flip-flop.   The  strategy  specification  must  explicitly  state if the

          initial value should be set (1).



      4.  The set input always takes precedence over the clear  input.   When  both

          are  true,  the  flip-flop  output  should  set.   In some instances, the

          software practice has been to perform the clear logic first, followed  by

          the  set  logic.   The  procedure  may  initially clear the flag and then

          reverse the decision later.  This practice could cause  problems  if  the

          flip-flop  output  flag is tested during an EOS interrupt because the EOS

          can catch the flag in the wrong state.



               The flip-flop procedure should always be:



          IF set condition met

               THEN set flip-flop output flag

          ELSE

               IF clear condition met

                    THEN clear flip-flop output flag

               ENDIF

          ENDIF















































































                                         2-7


                                   SYMBOLOGY - GXA0

                              Copyright 1989 FoMoCo





         























































































































                                         2-8

























                                      CHAPTER 3



                                     EEC OVERVIEW



































































































                                         3-1


                                 EEC OVERVIEW - GXP0

                              Copyright 1989 FoMoCo





                        ELECTRONIC ENGINE CONTROL SYSTEM OVERVIEW







      The Electronic Engine Control system is intended to provide  a  more  optimum

      engine  control  strategy  than  is  possible  through  a strictly mechanical

      system.  This is accomplished by  using  a  microprocessor  which  interprets

      input  data from a number of engine parameter sensors, and based on a control

      strategy in the microprocessor's  program  chips,  generates  output  control

      signals to a number of actuators.





      The control  strategy  is  divided  into  two  segments,  an  engine  control

      strategy,  and  self  test diagnostics.  The diagnostics will be discussed in

      another section.   The  engine  control  strategy  is  segmented  into  three

      principal modes:





           -CRANK

           -UNDERSPEED

           -RUN





      The  strategy  description  and  the  entrance  and   exit   conditions   for

      CRANK/UNDERSPEED/RUN  are shown on the following pages.  RUN is of particular

      interest because it contains the control  logic  for  most  engine  operating

      regions.   The  RUN  strategy  is  further  broken  down  into three modes to

      facilitate optimum control.  Based primarily on throttle position, they are:





           -CLOSED THROTTLE

           -PART THROTTLE

           -WIDE OPEN THROTTLE





      The specific entrance and exit conditions for these modes  are  described  in

      the throttle mode selection section.















































                                         3-2


                                 EEC OVERVIEW - GXP0

                              Copyright 1989 FoMoCo





                                    EEC IV OUTPUTS

                                   HARDWARE MODULES





   AIR MANAGEMENT 1 (AM1) (SFI-MA2)



      This Software output controls (via software) a Thermactor  Air  Bypass  (TAB)

      valve;  via  a vacuum solenoid.  When AM1 is OFF, the air is bypassed (dumped

      to the atmosphere).  When AM1 is ON air is routed to an up/down-stream valve.





   AIR MANAGEMENT 2 (AM2) (SFI-MA2)



      This Software output controls a vacuum solenoid which controls the  secondary

      air system to a catalyst via an up/down-stream divertor valve (TAD); but this

      output only controls if AM1 output is ON.





   CANISTER PURGE (CANP)



      This software controls a solenoid which  purges  fuel  vapor  from  a  carbon

      canister.  The carbon canister collects fuel vapor when the engine is off.





   DATA OUTPUT LINK (DOL)



      This software generates a digital  signal  to  one  of  the  Economy  Display

      Subsystems:   Tripminder, Fuel Economy Meter Clock, etcetera).  This displays

      such information as current Miles per Gallon to the driver.





   ELECTRO-DRIVE FAN (EDF) (SFI-MA3)



      The Software Output provides a signal for the AC/Electro-drive Fan Controller

      to control the Electro drive engine cooling fan.





   ELECTRONIC VACUUM REGULATOR (EVR)



      This software output controls a solenoid which varies the vacuum to  the  EGR

      valve via a varying frequency and/or duty cycle pulse train to the regulator.

      The Actuator contains a clamping diode which eliminates the need for a  diode

      in the control module.



































                                         3-3


                                 EEC OVERVIEW - GXP0

                              Copyright 1989 FoMoCo





   FUEL PUMP (FP)



      The software for the Fuel Pump controls  a  relay  which  provides  power  to

      operate the electric fuel pump.





   HIGH SPEED ELECTRO-DRIVE FAN (HEDF) (SFI-MA3)



      This software output provides a signal for the AC/Electro-Drive fan which, in

      turn,  increases the speed of a two-speed electro-drive fan when required via

      a normally open relay or an integrated relay controller module.





   IAC (SFI-MA3)



      The Inlet Air Control opens a valve (upstream of the intake  manifold)  which

      increases  the  engine  airflow.   The  Engine  strategy  uses  this valve to

      increase the horsepower at high RPM.





   INJECTORS



      The Sequential Fuel Injection system uses one output driver per injector  (as

      compared  to  the  EFI systems which have two or more injectors controlled by

      each driver).  The SFI system provides more precise timing  and  duration  of

      the  fuel injection.  As most EFI systems, SFI uses High Resistance (16 Ohms)

      high pressure (39 psi) injectors.





   IDLE SPEED CONTROL - BYPASS AIR - CONSTANT CURRENT (ISC-BPA)



      The EEC controls a linear  actuator  which  varies  air  intake  (from  0  to

      maximum) through a bypass valve in the throttle body.  The software outputs a

      duty-cycled pulse train which is coverted  into  a  constant  current.   This

      output is cycled at a frequency of 160 Hz.





   LOCK-UP SOLENOID (LUS) (SFI-MA3)



      This software output controls the lock-up of the AXOD transmission  convertor

      via a solenoid.







































                                         3-4


                                 EEC OVERVIEW - GXP0

                              Copyright 1989 FoMoCo





   SUPERCHARGER BOOST SOLENOID (SBS) (SFI-MA1)



      This software output provides a signal to the  supercharger  boost  solenoid.

      The  signal can be used in a linear manner (varying frequency and duty cycle)

      to control the position of the supercharger boost bypass  valve.   While  the

      system is in HLOS, the Boost Solenoid is in the OFF (de-activated) condition.



   SPEED CONTROL VACUUM (SCVAC) (SFI-MA3)



      This software controls a normally-closed solenoid which applies a  vacuum  to

      the  Speed  Control  Servo.   If  the SCVNT valve is closed, the state of the

      SCVAC controls the position of the Speed Control Servo.





   SPEED CONTROL VENT (SCVNT)



      This software controls a normally open solenoid which traps (closes) or vents

      (opens) a vacuum to the speed ControlServo.





   SHIFT INDICATOR LIGHT (SIL) (SFI-MA1)



      This output is used to drive a lamp on the instrument  panel  to  signal  the

      driver  to  shift  gears  (manual  transmission  only)  at  an  optimum point

      determined by the strategy.





   SPARK OUTPUT (SPOUT)



      The Spark software generates an ignition control signal  capable  of  driving

      the  Thick  Film  Ignition  Module  (TFI).   The driver is a tri-state device

      (High, low, open) which interfaces with the TFI-IV module  (This  Module  can

      accomodate a 250 Hz/sec acceleration).  The spout signal is referenced to the

      PIP signal.  Its timing is controlled by the SAF calculation.  If the EEC  is

      in LOS mode, the TFI module causes the spark timing to be equal to 10 deg BTC

      (same as PIP).





   WIDE OPEN THROTTLE AIR CONDITION CUTOFF (WAC)



      This output is used to temporarily disable or turn off  the  air-conditioning

      by activating a normally closed relay.





































                                         3-5


                                 EEC OVERVIEW - GXP0

                              Copyright 1989 FoMoCo





      The remainder of this document describes the normal engine  control  strategy

      (RUN)  for  the  various outputs, including fuel, spark, EGR, thermactor air,

      and idle speed control (ISC).



















































































































                                         3-6

























                                      CHAPTER 4



                     CRANK/UNDERSPEED/RUN MODE SELECTION STRATEGY



































































































                                         4-1


                      CRANK/UNDERSPEED/RUN MODE SELECTION - GUF0

                              Copyright 1989 FoMoCo





      OVERVIEW





      The EEC IV  strategy  operation  is  divided  into  three  distinct  strategy

      segments.  They are:





          1)  CRANK

          2)  UNDERSPEED

          3)  RUN





      The CRANK mode is entered after a power-up initialization or after an  engine

      stall.   CRANK  employs  a special strategy to aid engine starting.  When the

      CRANK logic first  becomes  false,  the  UNDERSPEED  mode  is  entered.   The

      UNDERSPEED  mode  employs  a  special spark and fuel strategy in place of the

      normal engine control strategy (RUN).  After start, the RUN mode  is  entered

      and  the  normal engine control strategy is executed.  If the engine stumbles

      during RUN mode, the UNDERSPEED mode can again be  entered  to  help  recover

      from the stumble and prevent a stall.





      The specific strategies are:





                                     CRANK STRATEGY





      Fuel                     Fire all injector ports simultaneously

                               every CRKPIP PIPS. See the Fuel strategy.



      Spark Advance            10 degrees BTDC (on PIP signal)

      Thermactor Air           bypass

      EGR                      disabled

      Purge                    disabled

      ISC                      FN884(TCSTRT)



      Data Output Link         execute strategy

      A/C Clutch               disabled

      S.I.L.                   disabled

      Thermactor Pump Clutch   disabled







































                                         4-2


                      CRANK/UNDERSPEED/RUN MODE SELECTION - GUF0

                              Copyright 1989 FoMoCo





                                   UNDERSPEED STRATEGY





      Fuel                     Fire all injector ports in the

                               same manner as in the RUN mode.

                               The multiplier FN387 is included

                               in the pulsewidth equation.

                               See the Fuel strategy.





      Spark Advance            10 degrees BTDC (on PIP signal)



      Other outputs are the same as the RUN mode.







                                      RUN STRATEGY





      The normal engine control strategy is described  in  the  remainder  of  this

      book.















































































                                         4-3


                      CRANK/UNDERSPEED/RUN MODE SELECTION - GUF0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  ECTCNT = Number of times ECT sensor input was read.



       -  N = Engine RPM.



       -  PIPCNT = Number of PIPs which have occurred.



       -  STALLN = Stall RPM:  If the first RPM calculated  is  greater  than  this

          value, assume there was a reinit, RPM.



       -  TSLPIP = Time since last PIP.



      Bit Flags:



       -  CRKFLG = Engine Mode Flag.  (1 = Crank Mode; 0 NOT= Crank Mode)



      Calibration Constants:



       -  CRKPIP = Number of PIPs between injector outputs during Crank.



       -  FN387 = Fuelpw Multiplier versus ECT - Input = ECT, Output = Multiplier.



       -  FN884(TCSTRT) = ISC Duty Cycle in Crank, deg.



       -  NCNT = Minimum number of PIP necessary to exit CRANK Mode.



       -  NRUN = Minimum Engine Speed to exit CRANK Mode.



       -  NSTALL = Engine Stall speed to re-enter CRANK Mode.



       -  UNRPM = Underspeed Engine Speed, RPM.



       -  UNRPMH = Hysteresis term for UNDERSPEED Mode.







      OUTPUTS



      Registers:



       -  N = See inputs above.



      Bit Flags:



       -  CRKFLG = See inputs above.



       -  FIRST_PIP = Indicates that first PIP has been received.



       -  UNDSP = Run/Underspeed Flag.  (1 = Underspeed (or CRANK), 0 = Run)











                                         4-4


                      CRANK/UNDERSPEED/RUN MODE SELECTION - GUF0

                              Copyright 1989 FoMoCo





      The Crank Flag is set by the PIP Counter and ECT Counter Control logic  which

      is described in SYSTEMS EQUATIONS CHAPTER.





      PROCESS



      CRKFLG = 1 -------------------|

       (CRANK mode)                 |

                                    |AND -------------| CRANK mode

      N <OR= NRUN --------|         |                 | CRKFLG = 1

                          |         |                 | UNDSP = 1

      ECTCNT < 8 ---------|OR ------|                 |

                          |                           | --- ELSE ---

      PIPCNT < NCNT ------|                           | 

                                                      | A stall has occured

                                                      | 

      CRKFLG = 0 -------------------|                 | CRKFLG = 1

       (RUN or UNDERSPEED mode)     |                 | UNDSP = 1

                                    |AND -------------| ECTCNT = 0

      N < NSTALL -------------------|                 |

                                                      |

                                                      | --- ELSE ---

                                                      |

      CRKFLG = 1 ---------|                           |

                          |OR ------|S Q -------------| UNDERSPEED mode

      N < UNRPM ----------|         |                 | CRKFLG = 0

                                    |                 | UNDSP = 1

      N > UNRPM + UNRPMH -----------|C                |

                                                      |

                                                      |

                                                      | --- ELSE ---

                                                      |

                                                      | RUN mode

                                                      | CRKFLG = 0

                                                      | UNDSP = 0



















































                                         4-5


                      CRANK/UNDERSPEED/RUN MODE SELECTION - GUF0

                              Copyright 1989 FoMoCo





                             ENGINE RUNNING REINIT STRATEGY





      The reinit strategy attempts to differentiate an engine running reinit from a

      normal  start engine runup.  After a reinit, a "first RPM" is calculated from

      the first two PIP rising-edges.  If the calculated RPM is greater  than  idle

      RPM, then a reinit is assumed.







      TSLPIP >or= 800 msec ---------------------| Set N = 0

                                                | Set FIRST_PIP = 0

































































































                                         4-6

























                                      CHAPTER 5



                           THROTTLE MODE SELECTION STRATEGY



































































































                                         5-1


                            THROTTLE MODE SELECTION - GXQ0

                              Copyright 1989 FoMoCo





                           THROTTLE MODE SELECTION STRATEGY





      OVERVIEW



           The throttle mode scheduler is used to determine what  engine  operating

      region is currently extant.  The variable APT (At Part Throttle flag) is used

      to indicate throttle mode and is assigned the following values:



                Throttle Mode            APT

                ------------------       ---

                CLOSED THROTTLE          -1

                PART THROTTLE             0

                WIDE OPEN THROTTLE        1



      The value of APT is determined by the logic  shown  on  the  following  page.

      Briefly,  throttle  angle breakpoints, in terms of counts, are used to define

      the CLOSED/PART_THROTTLE and PART/WIDE_OPEN_THROTTLE transitions.  Hysteresis

      is incorporated in both breakpoints to prevent jitter between modes.



      The variable RATCH is the output of a ratchet  algorithm  which  continuously

      seeks the minimum throttle angle corresponding to a CLOSED THROTTLE position.

      This alleviates the necessity to set  the  throttle  position  sensor  at  an

      absolute  position and compensates for system changes and differences between

      vehicles.  The ratchet algorithm uses  filtered  throttle  position  for  the

      determination of RATCH.



      A more detailed explanation of the throttle position  ratchets  and  throttle

      position filter is contained in the SYSTEM EQUATIONS section.































































                                         5-2


                            THROTTLE MODE SELECTION - GXQ0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  APT = Status of Part Throttle.  (Set = -1 = Closed Throttle) (Set =  1  =

          Wide Open Throttle) (Set = 0 = Part Throttle)



       -  RATCH = Closed throttle.



       -  TP = Position of Throttle.



      Bit Flag:



       -  CRKFLG = Flag indicating engine mode; 1 = Crank.



      Calibration Constants:



       -  DELTA = CT/PT Breakpoint value above RATCH.



       -  HYST2 = Hysteresis term to enter WOT mode.



       -  THBP2 = PT/WOT Breakpoint value above RATCH.







      OUTPUTS



      Registers:



       -  APT = See inputs above.



      Bit Flags:



       -  CTPTFG = Closed throttle to PT/WOT transition flag.



       -  PTSCR = Part throttle mode since exiting CRANK Flag.











































                                         5-3


                            THROTTLE MODE SELECTION - GXQ0

                              Copyright 1989 FoMoCo





                            THROTTLE MODE SELECTION LOGIC







           The logic described below considers the current position of the throttle

      and  compares  its  value  to  the RATCH, Closed Throttle, plus the change in

      throttle position from the last setting.  If both  flip-flops  in  the  logic

      clear, then Part Throttle is set.





      PROCESS



      TP <OR= RATCH + DELTA ---------------|S  Q -| Closed Throttle mode

                                           |      | APT = -1

      TP <OR=  RATCH + DELTA + HYST2 ------|C     | 

                                                  | --- ELSE ---

                                                  | 

                                                  | 

      TP > (RATCH+THBP2+HYST2) -|S  Q ------------| Wide Open Throttle 

                                |                 | mode

      TP <OR= (RATCH + THBP2) --|C                | APT = 1

                                                  | 

                                                  | --- ELSE ---

                                                  |

                                                  | Part Throttle Mode

                                                  | APT = 0





      NOTE: PTSCR is initialized to 0.





      previous APT = -1 ------------|             

                                    |             

      current APT NOT= -1 ----------|AND ---------| Set CTPTFG = 1

                                    |             | Closed Throttle to

      CRKFLG = 1 -------------------|             | Part Throttle transition

                                                  |

                                                  | --- ELSE ---

      previous APT = -1 ------------|             | 

                                    |             | 

      current APT NOT= -1 ----------|AND ---------| Set CTPTFG = 1

                                    |             | Closed Throttle to

      CRKFLG = 0 -------------------|             | Part Throttle transition

                                                  | Set PTSCR = 1

                                                  |

                                                  | --- ELSE ---

                                                  |

                                                  | Set CTPTFG = 0

                                  























                                         5-4

























                                      CHAPTER 6



                                FUEL CONTROL STRATEGY



































































































                                         6-1


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                          EEC-IV FUEL CONTROL STRATEGY OVERVIEW



      DEFINITIONS



      INPUTS



      Registers:



       -  AMPEM = Air mass flow plus EGR mass flow.



       -  CLFLG = Register that is used solely to indicate fuel mode.

                  (1 = Closed Loop, 0 = Open Loop)



       -  EFTR = Transient Fuel Compensation fuel flow, lb/sec.



       -  EM = EGR mass flow.



       -  FM = Fuel mass flow.



       -  LAMBSE1 and LAMBSE2 = Desired equivalence ratios.



      Calibration Constants:



       -  ENGCYL = Number of cylinders per engine revolution 

                   (NUMCYL/2); or number of PIPs per engine

                   revolution. 



       -  FN1327 = Fuel pulsewidth register map; used to

                   determine which fuel register is used.

                   Output = Fuel Register-left offset.

                   X-input = Injector Output Number

                   Y-input = Null.



       -  LAMMAX = Maximum LAMBSE Clip when in Closed Loop.



       -  LAMMIN = Minimum LAMBSE clip when in Closed Loop.



       -  NUMCYL = Number of cylinders in the engine. 



       -  NUMEGO = Calibration switch indicating number of 

                   Ego Sensors. 1=mono; 2=stereo.







































                                         6-2


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  AEFUEL = Acceleration enrichment desired fuel

                   flow rate (lb/min).



       -  AM = Air mass flow.



       -  BASEFF1 = EGO-1 base fuel flow in Lb/Min.



       -  BASEFF2 = EGO-2 base fuel flow in Lb/Min.



       -  BASEFFT = Total base fuel flow in Lb/Min.



       -  CLFLG = Register that is used solely to indicate fuel mode.

                  (1 = Closed Loop, 0 = Open Loop)



       -  DSLMBS1 = Rescaled LAMBSE1 used for DAC'ing stereo EGO.



       -  DSLMBS2 = Rescaled LAMBSE2 used for DAC'ing mono EGO.



       -  EFTRFF = Equilibrium fuel transfer rate for transient 

                   fuel compensation (lb/min).



       -  FM = Fuel mass flow.



       -  LAMBDA = Air/fuel equivalence ratio.

































































                                         6-3


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                       SEQUENTIAL ELECTRONIC FUEL INJECTION (SEFI)





      The A/F ratio control actuators consist  of  injectors  whose  fuel  metering

      function is affected by energizing and de-energizing the injector solenoids.



      Each injector has a metering needle or  pintle  which  opens  or  closes  the

      injector nozzle to release fuel.



      A high pressure fuel pump delivers fuel to the injectors at approximately  42

      PSI.



      Based upon the  calculated  air  mass  value,  the  software  calculates  the

      injector pulsewidths required to give the desired A/F ratio.



      The desired A/F ratio for all operating conditions is determined by  the  A/F

      strategy and calibration.



      The strategy is designed to handle any reasonable injector configuration  and

      firing patterns.

      Example configurations are:



                1.  1 or 2 output CFI



                2.  1 or 2 output bank EFI



                3.  4, 6 or 8 output Sequential EFI



      The strategy can  run  on  4,  6  or  8-cylinder  engines.   The  calibration

      parameters ENGCYL and NUMCYL control the engine type.  The user must set both

      parameters for the strategy to work correctly.



      On SEFI applications, each cylinder has an injector  located  in  the  intake

      port near the intake valve.  The injectors are individually fired in an order

      that matches the firing order of the engine.   The  injector  output  numbers

      correspond   to   engine   cylinder  numbers.   This  allows  for  consistent

      nomenclature for the module pinouts and the  wiring  harness.   Under  normal

      engine  running,  each injection is timed to occur at an optimum point in the

      intake event.  Injector timing is determined by strategy and calibration.



      Timed sequential fuel injection requires a signature  PIP  distributor.   The

      signature  PIP  allows  the computer to identify cylinder #1.  The PIP signal

      for cylinder #1 has a unique duty cycle, that is smaller than the normal  50%

      duty  cycle.   The  computer  recognizes the signature PIP to synchronize the

      fuel injections.































                                         6-4


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                         STEREO EGO FUEL SYSTEM CONFIGURATION









                The following Side 1 and Side 2 designations are used.













       |                                                      |

       |                                                      |

       |                                                      |

       |       EGO SENSOR ----- E     E ----- EGO SENSOR      |

       |       EGO-1                             EGO-2        |

       |       HEGO-1                            HEGO-2       |

       |                                                      |

       |                                                      |

       |                                                      |

       |                        -------                       |

       |                       | I   I |                      |

       | SIDE 1 INJECTORS -->  | I   I |  <-- SIDE 2 INJECTORS|

       |                       | I   I |                      |

       |                    #1 | I   I |                      |

       |                        -------                       |

       |                                                      |

       |                                                      |

       |                                                      |

       |                                                      |

       |                                                      |

       \______________________________________________________/



                                FRONT OF VEHICLE

                                   (TOP VIEW)











                                     NUMEGO





      A calibration switch exists which is used to tell the computer how  many  EGO

      sensors  are  present.   If  NUMEGO  = 1, the system is treated as a mono EGO

      sensor system and all fuel pulsewidths are calculated  from  the  single  EGO

      sensor  (treated  as  EGO-1).  If NUMEGO = 2:  Fuel pulsewidths for the EGO-2

      injectors are calculated from EGO-2 sensor information; Fuel pulsewidths  for

      the  EGO-1  injectors  are  calculated from EGO-1 sensor information.  FN1327

      links the injector outputs to the appropriate EGO sensor.



















                                         6-5


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                              EFI FUEL CALIBRATION UNITS









                                   ***** NOTE *****









      Lambdas are used for all A/F calibration parameters.





      Lambda is defined as:







                         AM/(14.64*FM) = (AMPEM - EM)/(14.64*FM)











                                      LAMBDA CLIPS





      LAMBSE1 and LAMBSE2 (the desired equivalence ratios)  are  clipped  as  shown

      below:









      CLOSED LOOP FUEL CONTROL -------------| CLIP LAMBSE1 AND

                                            | LAMBSE2 BETWEEN

                                            | LAMMIN AND LAMMAX

                                            |

                                            | --- ELSE ---

                                            |

                                            | CLIP LAMBSE1 AND

                                            | LAMBSE2 BETWEEN

                                            | 0.0000305 AND

                                            | 1.9999695





                                  *****************































                                         6-6


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                                SPECIAL DAC REGISTERS





      Special registers have been added to assist  in  calibration  development  by

      increasing the resolution of key parameters for display purposes.





      DSLMBS1 and DSLMBS2 are calculated as shown:



                                 DSLMBS1 = LAMBSE1 - 1.0



                                 DSLMBS2 = LAMBSE2 - 1.0



      Because DSLMBS1 and DSLMBS2 are signed word quantities, a value of zero  will

      be output as 5 volts.



      CLFLG is the Closed Loop flag (if set to 1, fuel mode is closed loop).



      All fuel flow registers have Lb/Min units for easy display  and  comparisons.

      They  are:   BASEFF1  (EGO-1 base fuel flow), BASEFF2 (EGO-2 base fuel flow),

      BASEFFT (total base fuel flow), AEFUEL (acceleration enrichment desired  fuel

      flow  rate)  and  EFTRFF  (equilibrium  fuel transfer rate for transient fuel

      compensation); all units are lb/min.











































































                                         6-7


                       FUEL CONTROL STRATEGY - OVERVIEW - GUE0

                              Copyright 1989 FoMoCo





                                 EFI BASE FUEL STRATEGY







      Fuel control strategy is divided into 2 mutually exclusive modes:





           OPEN LOOP

           CLOSED LOOP





   OPEN LOOP MODE



      During open  loop  operation,  the  computer  calculates  the  injector  fuel

      pulsewidths  required  to provide a pre-determined A/F ratio or lambda value.

      The desired lambda values (LAMBSE1, LAMBSE2) can vary with  engine  operating

      conditions  and  are calibration-dependent.  During open loop, LAMBSE1 equals

      LAMBSE2.



   CLOSED LOOP MODE



      During closed loop operation, the computer ramps the  desired  lambda  values

      (LAMBSE1,  LAMBSE2)  in  a limit cycle manner about stoichiometry.  Using the

      EGO (Exhaust Gas Oxygen) sensor, the computer increases or  decreases  lambda

      at  a  calculated  rate  of  change.   The  rate  at  which lambda changes is

      calibration dependent.  For Stereo EGO operation, LAMBSE1  and  LAMBSE2  vary

      independently using EGO-1 and EGO-2 sensors.  For Mono EGO operation, LAMBSE1

      equals LAMBSE2.

































































                                         6-8


                 FUEL CONTROL STRATEGY - CLOSED LOOP/OPEN LOOP - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS



      INPUTS



      Registers:



       -  ATMR1 = Time since start (time since exiting crank

                  mode), sec.



       -  ATMR2 = Time since ECT became greater than

                  TEMPFB, sec.



       -  CTNTMR = Closed throttle neutral timer.



       -  EGOSSS = EGO switches since start.



       -  HLTMR = High Load Timer, sec.



       -  LOAD = Universal Load parameter, unitless.

               = Aircharge normalized to Sea Level.



       -  NACTMR = Time not at Closed throttle, sec.



       -  PERLOAD = Percent of Peak LOAD at any altitude, unitless.



       -  PPCTR = PIP counter for Fuel Ramp, unitless.



       -  TCSTRT = Temperature of ECT at Cold Startup, deg F.



      Bit Flags:



       -  CHKAIR = Thermactor Status flag.



       -  HSPFLG = High Speed Mode Flag; 1 = High speed alternate

                   Fuel/Spark.



       -  MFAFLG = Managed Fuel/Air State flag.



       -  NDSFLG = Flag = 0 if transmission in neutral; = 1 if in gear.



       -  WMEGOL = WRMEGO was 1 at least once.



       -  WRMEGO = EGO sensor should be warm flag.



      Calibration Constants:



       -  CTHIGH = Hot Start Minimum Engine coolant Temperature,

                   Deg F.



       -  CTLOW = Cold Start Maximum ECT, deg F.



       -  EGOCL1 = Number of EGO switches since start required

                   to set WRMEGO = 1.



       -  FN320A(ECT) = Upper PERLOAD Limit for Closed Loop fuel control,

                  unitless.









                                         6-9


                 FUEL CONTROL STRATEGY - CLOSED LOOP/OPEN LOOP - GUE0

                              Copyright 1989 FoMoCo





       -  HLCTM = Time delay before high load forced open loop, sec.



       -  HLODH = Hysteresis term for FN320A(ECT), unitless.



       -  LOLOD = Minimum LOAD to enter Closed Loop, unitless.



       -  LOLODH = Closed Loop Enable LOAD hysteresis.



       -  MFASW = Calibratible switch, which if set, indicates

                  Managed Fuel Air logic is being used.



       -  NIOLD = Maximum time to allow closed loop fuel if in

                   neutral at idle, secs.



       -  OPCLT1 = ATMR1 Closed Loop enable time delay for

                   TCSTRT <or= CTLOW.



       -  OPCLT2 = ATMR1 Closed Loop enable time delay for

                   CTLOW < TCSTRT < CTHIGH.



       -  OPCLT3 = ATMR1 Closed Loop Enable Time delay for

                   TCSTRT >or= CTHIGH.



       -  OPCLT4 = ATMR2 Closed Loop enable time delay for

                   TCSTRT <or= CTLOW.



       -  OPCLT5 = ATMR2 Closed Loop Enable Time Delay for

                   CTLOW < TCSTRT < CTHIGH.



       -  PIPNUM = Number of steps to Ramp Fuel, unitless.



       -  THBP5 = Throttle breakpoint above RATCH for Open Loop Fuel, counts.







      OUTPUTS



      Registers:



       -  CLFLG = Register that is used solely to indicate fuel mode.

                   1 = Closed loop; 0 = Open loop



       -  EGOSSS = See Inputs above.



      Bit Flags:



       -  NFLG = Neutral idle flag.



       -  OLFLG = Flag indicating Open loop if set (1); indicating

                   Closed loop if cleared (0).



       -  WMEGOL = WRMEGO was 1 at least once.



       -  WRMEGO = EGO sensor should be warm flag.













                                         6-10


                 FUEL CONTROL STRATEGY - CLOSED LOOP/OPEN LOOP - GUE0

                              Copyright 1989 FoMoCo





      PROCESS





      APT = 0 -----------------|

                               |OR -------|

      CTNTMR <OR= NIOLD -------|          |

                                          |

      WRMEGO = 1 -------------------------|

       (SEE BELOW)                        |

                                          |

      CHKAIR = 1 -------------------------|AND -----| CLOSED LOOP

       (USE INDEX)                        |         | CLEAR OLFLG = 0

                                          |         | SET CLFLG = 1

                                          |         |

      PPCTR = PIPNUM ---------------------|         | --- ELSE ---

                                          |         |

                                          |         | OPEN LOOP

      MFAFLG = 0 ---------------|         |         | SET OLFLG = 1

       (USE INDEX)              |         |         | CLEAR CLFLG = 0

                                |OR ------|

      MFASW = 0 ----------------|         |

       (USE INDEX)                        |

                                          |

      HSPFLG = 0 -------------------------|

       (NOT in High Speed Open Loop)      |

                                          |

      LOAD > LOLOD ----------|S Q---------|

                             |            |

      LOAD < LOLOD - LOLODH -|C           |

                                          |

      HLTMR <OR= HLCTM -------------|     |

                                    |OR --|

      PERLOAD < FN320A(ECT) ---|S Q-|     |

                               |          |

      PERLOAD > FN320A(ECT) ---|          |

                + HLODH                   |

                                          |

      TP <OR= (RATCH + THBP5) -|S Q ------|

                               |          |

      TP > (RATCH+THBP5+HYST2)-|          |

                                          |

      LDFLG = 0 --------------------------|

       (NOT IN LUGGING MODE)



































                                         6-11


                 FUEL CONTROL STRATEGY - CLOSED LOOP/OPEN LOOP - GUE0

                              Copyright 1989 FoMoCo





                                      WRMEGO LOGIC





      TCSTRT >OR= CTHIGH ------------|

                                     |AND ---|

      ATMR1 >OR= OPCLT3 -------------|       |

                                             |

      CTLOW < TCSTRT < CTHIGH -------|       |

                                     |AND ---|OR --|

      ATMR1 >OR= OPCLT2 -----|       |       |     |

                             |AND ---|       |     |

      ATMR2 >OR= OPCLT5 -----|               |     |

                                             |     |

      TCSTRT <OR= CTLOW -------------|       |     |AND --| Set WRMEGO = 1

                                     |AND ---|     |      | Set WMEGOL = 1

      ATMR1 >OR= OPCLT1 -----|       |             |

                             |AND ---|             |

      ATMR2 >OR= OPCLT4 -----|                     |

                                                   |

      EGOSSS >OR= EGOCL1 --------------------------|

                                                          





                                      EGOSSS LOGIC





      EGO_SWITCH -------------------| INCREMENT EGOSSS (CLIP AT 255)

                                    |

                                    | --- ELSE ---

                                    |

                                    | FREEZE EGOSSS







                                       NFLG LOGIC





      APT = -1 (CLOSED THROTTLE) ----|

                                     |AND ---| SET NFLG = 1

                                     |       |

      NDSFLG = 0 (NEUTRAL) ----------|       | --- ELSE ---

                                             |

                                             | SET NFLG = 0



































                                         6-12


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  APT = At Part Throttle. -1 = Closed throttle; 0 = Part

                throttle; 1 = Wide Open throttle.



       -  ATMR1 = Time since start (time since exiting crank mode), sec.



       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio

                    for EGO-2 injectors. LAMBSE2 appears in the

                    fuel pulsewidth equation for EGO-2.



       -  LAMMUL = Multiplier which is used to prevent cold-engine 

                   stalls following transmission engagement.



       -  MFAMUL = MFA table ramp-in Multiplier, unitless.



       -  MULTMR = Time since incrementing LAMMUL, sec.



       -  PERLOAD = Percent of peak LOAD at any altitude.



       -  TCSTRT = Temperature of ECT at Cold Start, deg F.



      Bit Flags:



       -  DNDSUP = Drive Neutral select.



       -  HSPFLG = High speed mode flag; 1 = High Speed alternate fuel/spark.



       -  IDLFLG = Flag indicating transmission in Drive and at Idle.



       -  LDFLG = "Lugging" mode open loop flag.



       -  MFAFLG = Managed Fuel/Air State flag.



       -  NDSFLG = Flag = 0 if transmission in Neutral; = 1 if in

                   gear.



       -  NEUFLG = N/D transition occurred.



       -  NFLG = Neutral Idle Flag.



       -  OLFLG = Flag indicating Open loop if set = 1; Closed

                   loop if set = 0.



       -  WMEGOL = Flag set if WRMEGO set.



       -  WRMEGO = If set, EGO sensor should be warm and flag set to

                   1 if EGO sensor is switching; and reset to 0 if it

                   has cooled down. Its state is controlled by the

                   WRMEGO logic.











                                         6-13


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





      Calibration Constants:



       -  CTHIN = Maximum TCSTRT value to use NUMPR.



       -  CTLOW = Cold Start Maximum ECT, deg F.



       -  FN022B = Temperature normalizing function; used for table

                   lookup.

                   Input = FRCBFT *ACT + (1-FRCBFT) * ECT 

                   --OR--

                   Input = FRCSFT * ACT + (1-FRCSFT) * ECT



       -  FN035(N) = Maximum LOAD at sea level (29.4 dry barometer,

                     100 deg. f) Input = N (RPM).



       -  FN072A = PERLOAD normalizing function; used for table lookup.

                   Input = PERLOAD and Output = Normalized perload.



       -  FN082 = Load normalizing function; generates table entry

                  point. Input = LOAD and Output = Normalized Load.



       -  FN083 = RPM normalizing function; generates table entry

                  point. Input = N and Output = Normalized N.



       -  FN300 = Multiplier as a function of ACT, modifies FN1305.



       -  FN301 = Closed Throttle Open Loop Fuel Multiplier as a

                  function of RPM. 



       -  FN301N = Neutral Open Loop Fuel Multiplier as a

                   function of engine speed N.



       -  FN303 = WOT Fuel Multiplier as a function of engine speed N.



       -  FN308 = Sea level fuel multiplier, RPM.



       -  FN309 = Altitude lugging fuel multiplier, RPM.



       -  FN311 = MFA altitude multiplier, unitless.



       -  FN371 = Initial LAMMUL as a function of ECT. This is a Fuel

                  Multiplier to provide fuel compensation during Drive

                  Engagement.



       -  FN393F = Time between Lammul decrements - forward gear.



       -  FN396A = High Speed Fuel enrichment, mph.



       -  FN1306 = Startup Open Loop Fuel table = a 10 x 8 table of

                   lambda values as a function of [FRCSFT*ACT + (1

                   - FRCSFT)*ECT] and ATMR1. TABSFT is the Synonym

                   for this Table.



       -           FN022B = Temperature normalizing function (X-input).

                   FN018 = Time (ATMR1) normalizing function (Y-input).



       -  FN1307 = Base Open Loop Fuel table = a 10 x 8 table of lambda

                   values as a function of [FRCBFT*ACT + (1 - FRCBFT)*ECT]

                   and PERLOAD. TABBFT is the Synonym for this Table.



                                         6-14


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





       -           FN022B = Temperature normalizing function (X-input).

                   FN072A = PERLOAD normalizing function (Y-input).



       -  FN1328 = Manage Fuel Air Fuel Table, 10 x 8 table of multipliers 

                   as a function of engine speed N and LOAD.



       -           X-input = Normalizing function for N - FN070 

                   Y-input = Normalizing function for PERLOAD - FN072A



       -  FRCBFT = Act fraction for FN1305 lookup.



       -  FRCSFT = ACT fraction for FN1306 lookup.



       -  LDEL = Minimum ECT to enable Lugging Open Loop, deg.F.



       -  LDEM = Maximum ECT to enable Lugging Open Loop, deg.F.



       -  LDLTM = Minimum time in Lugging Mode (High MAP low RPM)

          before entering Lugging Open Loop, seconds.



       -  LDTM = Minimum time delay after start up to enable Lugging

          Open Loop, seconds.



       -  LDMH = Minimum PERLOAD to enable Lugging Open Loop (near W.O.T.).



       -  LDMHH = Hysteresis for LDMH.



       -  MFARMP = MFAMUL Ramp increment, unitless.



       -  MFASW = Calibratible switch which, if set, indicates

                  Managed Fuel Air logic is being used.



       -  NUMPR = Open Loop Fuel multiplier.



       -  OLMCL = Open Loop Fuel Calibration multiplier.



       -  OLMTD1 = NUMPR Open Loop fuel multiplier time delay,

                   sec.



       -  PRLDSW = Switch which determines the formula for computing PERLOAD.

                   1 -> PERLOAD = LOAD

                   0 -> PERLOAD = LOAD/PEAK_LOAD



       -  TRLOAD = Transmission Load switch.

                   0 = Manual Transmission, no clutch or gerar switches,

                       forced neutral state (NDSFLG = 0).

                   1 = Manual Transmission, no clutch or gear switch.

                   2 = Manual Transmission, one clutch or gear switch.

                   3 = Manual Transmission, both clutch and gear switches.

                   4 = Auto Transmission, non-electronic, neutral drive switch.

                   5 = Auto Transmission, non-electronic, neutral pressure switch,

                       (AXOD).

                   6 = Auto Transmission, electronic, PRNDL sensor - park, reverse,

                       neutral, overdrive, manual 1, manual 2.







      OUTPUTS





                                         6-15


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





      Registers:



       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio

                    for EGO-1 injectors. LAMBSE1 appears in the

                    fuel pulsewidth equation for EGO-1.



       -  LAMMUL = Multiplier which is used to prevent cold-engine 

                   stalls following transmission engagement.



       -  MFAMUL = MFA table ramp-in Multiplier, unitless.



       -  MULTMR = Time since incrementing LAMMUL, sec.



      Bit Flags:



       -  LDFLG = "Lugging" mode open loop flag.



       -  NEUFLG = N/D transition occurred.





















































































                                         6-16


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





                                  OPEN LOOP FUEL LOGIC





      PARAGRAPH During Open Loop  fuel  Control,  the  desired  equivalence  ratios

      (LAMBSE1  and  LAMBSE2)  are basically calculated from two tables as modified

      for various engine conditions.





      PROCESS



      Open Loop fuel control ------| Set LAMBSE1 = LAMBSE2

                                   |  = C * [(FN300*FN1307)

                                   |    - FN1306] * LAMMUL * OLMCL



      HSPFLG = 1 ------------------| LAMBSE1 = LAMBSE1 * FN396A

                                   | LAMBSE2 = LAMBSE2 * FN396A





                                      LAMMUL LOGIC





      LAMMUL can either jump lean (ramp rich) or jump rich (ramp  lean),  depending

      upon whether neutral to drive transitions cause rich or lean errors.





                                     RAMP BACK LOGIC





      MULTMR >OR= FN393F -------|                  | (LAMMUL was RESET RICH)

       (In Forward)             |AND --------------| LAMMUL = LAMMUL

                                |                  |    + 0.0039

      LAMMUL < 1.0  ------------|                  | MULTMR = 0

                                                   |

                                                   | Clip LAMMUL to

                                                   | 1.0 as a maximum

                                                   |

                                                   | --- ELSE ---

                                                   |

      MULTMR >OR= FN393F -------|                  | (LAMMUL was RESET LEAN)

       (In Forward)             |AND --------------|

                                |                  | LAMMUL = LAMMUL

      LAMMUL > 1.0  ------------|                  |    - 0.0039

                                                   | MULTMR = 0

                                                   |

                                                   | Clip LAMMUL to

                                                   | 1.0 as a minimum

                                                   |



























                                         6-17


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





                                   LAMMUL RESET LOGIC





      TRLOAD <OR= 3 ------------|                 

       (Manual Transmission)    |                 | No LAMMUL RESET

                                |OR --------------| No change to LAMMUL

      CLOSED LOOP --------------|                 | No change to NEUFLG

       (OLFLG = 0)                                |

                                                  | --- ELSE ---

      DNDSUP = 1 ---------------|                 |

       (Transmission in gear)   |                 | LAMMUL RESET

                                |AND -------------| LAMMUL = FN371

      NEUFLG = 1 ---------------|                 | NEUFLG = 0

       (Transition from neutral)|                 |

                                                  | --- ELSE ---

                                                  |

      DNDSUP = 0 ---------------------------------| NEUFLG = 1   

       (Transmission in neutral)



      NOTE:  LAMMUL and FN371 have a range of 0 through 1.99.

















































































                                         6-18


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





                                     'C' DEFINITION





      LDFLG = 1 --------------------------| LUGGING MODE

                                          | 'C' = FN308 * FN212A

                                          |  + FN309 * FN129A

                                          |

      DNDSUP = 1 (DRIVE) ----------|      | --- ELSE ---

                                   |      |

      APT = -1 (CLOSED THROTTLE) --|AND --| 'C' = FN301

                                   |      |

      WRMEGO = 0 ------------------|      |

                                          |

                                          | --- ELSE ---

                                          |

      NFLG = 1 --------------------|      |

                                   |      |

      CTLOW < TCSTRT < CTHIN ------|AND --| 'C' = FN301N * NUMPR

                                   |      |

      ATMR1 < OLMTD1 --------------|      |

                                          |

                                          | --- ELSE ---

                                          |

      MFAFLG = 1 ------------------|      |

                                   |AND --| 'C' = 1 + (FN1328 *

      MFASW = 1 -------------------|      |  FN311 * MFAMUL)

                                          |

                                          | --- ELSE ---

                                          |

      NFLG = 1 ---------------------------| 'C' = FN301N

                                          |

                                          | --- ELSE ---

                                          |

      APT = 1 (WIDE OPEN THROTTLE) -------| 'C' = FN303

                                          |

                                          | --- ELSE ---

                                          |

                                          | 'C' = 1













































                                         6-19


                    FUEL CONTROL STRATEGY - OPEN LOOP FUEL - GUE0

                              Copyright 1989 FoMoCo





                                "LUGGING" OPEN LOOP FLAG





      The strategy provides the capacity of Open Loop Fuel Control during "lugging"

      conditions  (Part  throttle,  high  Load,  low RPM).  The "lugging" Open Loop

      multiplier is adjusted for altitude much like Spark  and  EGR  (by  means  of

      FN212A and FN129A).



      CALIBRATION NOTES:  LDMH and LDMHH should  correspond  to  high  loads  (near

      WOT).  LDLTM must be less than or equal to LUGTIM (since LUGTMR is clipped to

      LUGTIM).



      The logic below sets LDFLG -- the flag which indicates whether  lugging  Open

      Loop is in process or not.





      APT = 0 (PART THROTTLE) --------------|

                                            |

      LDEL < ECT < LDEH --------------------|

                                            |

      LUGTMR >OR= LDLTM --------------------|AND ---| LDFLG = 1

                                            |       |

      PERLOAD >OR= LDMH + LDMHH -|S Q-------|       | --- ELSE ---

                                 |          |       |

      PERLOAD < LDMH ------------|C         |       | LDFLG = 0

                                            |

      WMEGOL = 1 ---------------------------|





                                      MFAMUL LOGIC





      The MFAMUL ramps in the MFA tables (FN1328, FN1124 and FN1223).  The fuel  is

      systematically ramped lean with corresponding changes to Spark and EGR.



      MFAFLG = 0 --------------------| MFAMUL = 0

                                     |

                                     | --- ELSE ---

                                     |

                                     | MFAMUL = MFAMUL

                                     |  + MFARMP

                                     | Clip MFAMUL to 1.0

                                     |  as a maximum



































                                         6-20


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                                CLOSED LOOP FUEL STRATEGY





                                   STEREO EGO SYSTEMS





      The following description applies to each side of an engine if  operating  in

      stereo EGO mode.



          1.  Independent closed loop ramp rates and jumpback (LAMBSE1 and LAMBSE2)

          amounts are calculated.



          2.  Calibration values for peak-to-peak amplitude,  bias,  and  transport

          delay are common to both sides.



          3.  ANPIP, ENPIP, and LAMBSE calculations are unique to each side.



          4.  The injector pulsewidths, FUELPW1 and FUELPW2,  are  calculated  from

          LAMBSE1 and LAMBSE2, respectively.



      NOTE:  If system uses only one EGO sensor, the strategy uses 

             LAMBSE1 and FUELPW1 for the desired LAMBSE and fuel 

             Pulsewidth.  (Set NUMEGO = 1)





      INTENT



      The goals of the closed loop strategy are:



      1.  To add capability of introducing large amounts of Air/Fuel biasing (up to

          45% expressed as ratio of bias to peak-to-peak amplitude).



      2.  To maximize the feedback limit cycle frequency for all bias values.



      3.  To adapt to EGO sensor slow down as the sensor  ages  (see  Adaptive  EGO

          Strategy).



      4.  To maintain a simple calibration procedure to describe  the  closed  loop

          limit cycle.





      APPROACH



      The fuel flow is driven in a limit cycle manner about  stoichiometry.   Using

      the  EGO (Exhaust Gas Oxygen) sensor, the computer increases or decreases the

      injector pulsewidths in a controlled manner.  If  the  EGO  reads  rich,  the

      pulsewidths will be decreased (made leaner) at a calculated rate.  If the EGO

      reads lean, the pulsewidths will be increased (made richer) at  a  calculated

      rate.























                                         6-21


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





      When an EGO switch occurs, an instantaneous change (or "jumpback") is made in

      the  air/fuel ratio back towards stoichiometry.  The jump is made relative to

      the A/F ratio (lambda) value at the EGO switch.



      The limit cycle can be biased to operate on the average richer (or leaner) of

      stoichiometry.



      An example of the closed loop limit cycle  is  shown  after  the  definitions

      section.







































































































                                         6-22


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                                CLOSED LOOP FUEL STRATEGY





      DEFINITIONS



      INPUTS



      Registers:



       -  ANPIP = Actual number of PIP signals since the last EGO  switch;  clipped

          to a maximum of 255; reset to zero when not in closed loop; reset to zero

          after the EGO switches and the jumpback distance is calculated.



       -  BIAS = Closed Loop biasing term = FN1353(N,LOAD), defined below.



       -  EGO = Exhaust Gas Oxygen Sensor.  (GX has mono and stereo  EGO  capacity,

          EGO-1  and  EGO-2  represent  the  EGO  sensors  in  stereo mode; generic

          represent = EGO-n).



       -  ENPIP = Expected number of PIP signals between EGO switches; reset  to  1

          when not in closed loop.



       -  FUELPW1 = EGO-1 injector pulsewidths, clock ticks.



       -  FUELPW2 = EGO-2 injector pulsewidths, clock ticks.



       -  LAMBDA = Air/Fuel equivalency ratio.



       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio for  EGO-1

          injectors.  LAMBSE1 appears in the fuel pulsewidth equation for EGO-1.



       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio for  EGO-2

          injectors.  LAMBSE2 appears in the fuel pulsewidth equation for EGO-2.



       -  PIPRAT = Ratio of the actual number of PIP signals  since  the  last  EGO

          switch  to  the  expected  number  of  PIP  signals between EGO switches;

          clipped to a maximum of 1.0.



       -  TSLAMU = Time since last LAMBDA update.



      Bit Flags:



       -  LEGOFG1 = Lack of EGO-1 switching.   (LEGOFG2  reflects  state  of  EGO-2

          switching).



       -  OLFLG = Flag indicating Open Loop if set (1); indicating Closed  Loop  if

          cleared (0).



      Calibration Constants:



       -  ENGCYL = Number of PIPs per engine revolution; or Number of cylinders/2.



       -  FN339 = Closed  Loop  ramp  rate  Multiplier  versus  absolute  value  of

          BIAS/PTPAMP.  Input = |BIAS/PTPAMP| and Output = Ramp rate multiplier.



       -  FN342 = Closed Loop Jumpback distance  Multiplier  versus  |BIAS/PTPAMP|.

          (Toward   BIAS)  Input  =  |BIAS/PTPAMP|  and  Output  Jumpback  distance

          Multiplier.





                                         6-23


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





       -  FN344 = Closed Loop Jumpback Distance  Multiplier  versus  |BIAS/PTPAMP|.

          (Opposite  BIAS)  Input  =  |BIAS/PTPAMP|  and Output = Jumpback distance

          multiplier.



       -  FN346 = Expected number of PIPs multiplier.  Input  =  |BIAS/PTPAMP|  and

          Output = Multiplier.



       -  FN1351(N,LOAD) = System transport lag time; time delay from when  a  fuel

          change  is  made  until  the  EGO sensor indicates this change, units are

          REVs.  X-input = FN039 - Normalized engine speed, RPM; Y-input = FN071  -

          Normalized engine load, LOAD; Output = Transport delay, REVs.



       -  FN1352(N,LOAD) = Closed Loop Peak-to-Peak amplitude, units  are  lambdas.

          X-input  =  FN039  -  Normalized  engine  speed,  RPM;  Y-input = FN071 -

          Normalized engine load ,LOAD; Output = Peak-to-Peak amplitude, PTPAMP.



       -  FN1353(N,LOAD) = Amount of Bias from stoichiometry,  X-input  =  FN039  -

          Normalized  engine  speed,  RPM; Y-input = FN071 - Normalized engine load

          ,LOAD; Output = Bias from stoichiometry.  (Store in register).



       -  LAMSW = Lambda reset switch.



       -  LMBJMP = Desired Rich correction.



       -  NUMEGO = Number of EGO sensors present; mono or stereo only.



       -  PTPAMP = Limit cycle peak-to-peak amplitude, FN1352(N,LOAD).



































































                                         6-24


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  ANPIP = Actual number of PIP signals since the last EGO  switch;  clipped

          to a maximum of 255; reset to zero when not in closed loop; reset to zero

          after the EGO switches and the jumpback distance is calculated.



       -  BIAS = Value factored into the Jumpback and Ramping equations,  its  sign

          indicates  direction  of  of these functions (as described in Closed Fuel

          Section).



       -  ENPIP = Expected number of PIP signals between EGO switches; reset  to  1

          when not in closed loop.



       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio for  EGO-1

          injectors.  LAMBSE1 appears in the fuel pulsewidth equation for EGO-1.



       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio for  EGO-2

          injectors.  LAMBSE2 appears in the fuel pulsewidth equation for EGO-2.

















































































                                         6-25


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                               LIMIT CYCLE DESCRIPTION

                                 (lean bias example)





      - - - - - - - - - *

      |               * *                                           *

      |             *   *                                         *

      |           *     *              LEAN                     *

      |         *       *                                     *

      |       *         *                                   *

      |     *           *                                 *

      |   *       |       *                             *

      | *-  -  - --- -  -  -* -  -  -  -  -  -  -  -  *  -  - AVERAGE

      |                       *                       *       A/F RATIO

      |                         *                     *

      | --------------------------*-------------------*----- STOICHIOMETRY

      |           |                 *                 *

      |           |                   *               *

      |         BIAS                    *             *

      |         TERM                      *           *

      |                                     *         *

      |                         RICH          *       *

      |--PEAK TO PEAK                           *     *

      |  AMPLITUDE                                *   *

      |                                             * *

      - - - - - - - - - - - - - - - - - - - - - - - - *





                                  EGO SENSOR STATUS



      RICH **************                             ********************

                        *                             *

                        *                             *

                        *                             *

      LEAN              *******************************





                              INJECTOR PULSEWIDTH STATUS



      ON **      ****     *****    ******   *******  *******    *****     

          *      *  *     *   *    *    *   *     *  *     *    *   *     

          *      *  *     *   *    *    *   *     *  *     *    *   *     

          *      *  *     *   *    *    *   *     *  *     *    *   *     

      OFF ********  *******   ******    *****     ****     ******   ******

                        |                             |

      <--DECREASING --->|<---------INCREASING ------->|<---DECREASING --->

         PULSEWIDTH     |          PULSEWIDTH         |    PULSEWIDTH







      The bias term is used to make the limit cycle operate at an average A/F ratio

      rich  or  lean  of  stoichiometry.   For  zero bias, the average A/F ratio is

      stoichiometry.















                                         6-26


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





      Based on calibration information supplied by the user,  the  fuel  pulsewidth

      ramp rates and jumpback distances are calculated automatically to produce the

      proper limit cycle.



      The calibration items are:  FN1351(N,LOAD), FN1352(N,LOAD), FN1353(N,LOAD).





                                    ***** Note *****



      The direction of the bias is controlled by the sign of the  bias  value.   If

      the bias term is negative, a rich bias is indicated.  If the sign of the bias

      term is positive, a lean bias is indicated.



                                   ****************





      FN1352(N,LOAD) is also a calibration constant.  System  transport  lag  time;

      time  delay  from  when  a fuel change is made until the EGO sensor indicates

      this change; varies with engine speed, units are REVs.





                               ***********************

                                 ***** WARNING *****

                                   ***************



      It is imperative that an accurate value  for  the  system  transport  lag  be

      entered.   An  incorrect  value  will  result  in  greatly  reduced  catalyst

      efficiencies due to excessively fast or slow ramp rates,  incorrect  jumpback

      amounts, etc.



                                   ***************

                                 ***** WARNING *****

                               ***********************





      Two methods of achieving the desired bias are employed.



      1.  Variable jumpback distance on one side of the limit cycle with  symmetric

          pulsewidth ramp rates.



      2.  No jumpback on one side of the limit  cycle  with  asymmetric  pulsewidth

          ramp rates.





































                                         6-27


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





      The logic used to achieve biasing depends on the absolute value of

      BIAS/PTPAMP (|BIAS/PTPAMP|): where;

          BIAS = Amount of bias from stoichiometry, FN1353(N,LOAD)



          PTPAMP = Limit cycle peak-to-peak amplitude, FN1352(N,LOAD)





      Any calculated value of |B/P| exceeding 0.45 is clipped to 0.45.

      This is done to avoid extremely long limit cycle periods.





      FOR NO BIAS  |BIAS/PTPAMP| = 0



      The limit cycle has full jumpback on both sides of stoichiometry

      and uses symmetric pulsewidth ramp rates.



      FOR SMALL BIAS  0 < |BIAS/PTPAMP| <OR= 0.171573  (0.171573 = 3 - SQRT(8))



      The limit cycle has a partial jumpback on one side of stoichiometry

      to achieve biasing and uses symmetric pulsewidth ramp rates.



      FOR LARGE BIAS  0.171573 < |BIAS/PTPAMP| <OR= 0.45



      The limit cycle has no jumpback on one side of stoichiometry and uses

      asymmetric pulsewidth ramp rates to achieve biasing.



      Examples of biasing are shown on the next page.



































































                                         6-28


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                           CLOSED LOOP LIMIT CYCLE EXAMPLES

                                 (not drawn to scale)





                            NO BIAS   | BIAS/PTPAMP | = 0

           *       *       *       *       *

          **      **      **      **      **

         * *     * *     * *     * *     * *     SYMMETRIC RAMP RATES

        *  *    *  *    *  *    *  *    *  *     FULL JUMPBACK IN

      -----*---*---*---*---*---*---*---*---*---  BOTH DIRECTIONS

            *  *    *  *    *  *    *  *    *

             * *     * *     * *     * *     *

              **      **      **      **      *

               *       *       *       *       *





                       SMALL BIAS   | BIAS/PTPAMP | < 0.171573

           *          *          *          *

          **         **         **         ** 

         * *        * *        * *        * *         SYMMETRIC RAMP RATES

        *  *       *  *       *  *       *  *         PARTIAL JUMPBACK

      -----*------*---*------*---*------*---*----     IN ONE DIRECTION

           *     *    *     *    *     *    *

            *   *      *   *      *   *      *   *

             * *        * *        * *        * *

              **         **         **         **

               *          *          *          *





                      MODERATE BIAS   | BIAS/PTPAMP | = 0.171573

           *           *           *           *

          **          **          **          **              

         * *         * *         * *         * *    SYMMETRIC RAMP RATES

        *  *        *  *        *  *        *  *    NO JUMPBACK

      -----*-------*---*-------*---*-------*---*--  IN ONE DIRECTION

           *      *    *      *    *      *    *

           *     *     *     *     *     *     *

            *   *       *   *       *   *       *

             * *         * *         * *         *

              *           *           *              





                       LARGE BIAS   | BIAS/PTPAMP | > 0.171573

           *                    *

         * *                  * *

       *   *                *   *                *   SYMMETRIC RAMP RATES

           *              *     *              *     NO JUMPBACK

      -----*------------*-------*------------*-----  IN ONE DIRECTION

           *          *         *          *

           *        *           *        *

            *     *              *     *

             *  *                 *  *

              *                    *





      Note:  Limit cycle frequency decreases with increasing bias.









                                         6-29


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





      After an EGO switch, a finite amount of time (equal  to  the  transport  lag)

      should  pass  before  the  EGO  can switch.  Noise in the EGO system could be

      interpreted by the computer as EGO switches.  These  phantom  switches  could

      occur at a faster rate than dictated by the system transport lag time.  Since

      the jumpback is made from the lambda when the EGO switches, phantom  switches

      could make the jumpback go beyond the average Air/Fuel ratio.  A high rate of

      phantom switches would create a high rate of jumps.  A special feature of the

      closed loop strategy prevents this problem.



      A full jumpback is done only if the proper transport lag  time  has  elapsed.

      If  not, the jumpback distance is reduced to match the reduction in transport

      lag time.  The actual  strategy  uses  PIP  signal  counts  to  control  this

      feature.



      The jumpback distance is multiplied by the ratio PIPRAT.



      PIPRAT = Ratio of the actual number of PIP signals since the last EGO  switch

      to  the  expected  number  of  PIP signals between EGO switches; clipped to a

      maximum of 1.0.  PIPRAT is a temporary register.





                                  PIPRAT = ANPIP/ENPIP





      ANPIP = Actual number of PIP signals since the last EGO switch; clipped to  a

      maximum  of  255;  reset to zero when not in closed loop; reset to zero after

      the EGO switches and the jumpback distance is calculated.



      ENPIP = Expected number of PIP signals between EGO switches; reset to 1  when

      not in closed loop.





      The transport delay (FN1351) is entered as REVS.  The strategy uses units  of

      both seconds and PIPS.  The transport delay in PIPS is:



                             TDPIP = FN1351(N,LOAD) * ENGCYL



      Transport delay in seconds is:



                              TDSEC = FN1351(N,LOAD) * 60/N





      TDPIP and TDSEC are temporary registers.



































                                         6-30


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                JUMPBACK and ENPIPn CALCULATIONS BASED BIAS and EGO STATE







                                      EGO-n SWITCH





      BIAS >OR= 0 -----------|       | LAMBSEn = LAMBSEn + [PTPAMP

                             |AND ---|  + | BIAS |] * FN344

      EGO-N SWITCH from Lean |       |  * PIPRATn

       to Rich --------------|       |

                                     | ENPIPn = TDPIP 

                                     |

                                     | ANPIPn = 0

                                     |

                                     | --- ELSE ---

      BIAS >OR= 0 -----------|       |

                             |       |

      EGO-n SWITCH from Rich |AND ---| LAMBSEn = LAMBSEn - PTPAMP *

       to Lean --------------|       |  FN342 * PIPRATn

                                     |

                                     | ENPIPn = TDPIP * FN346(|BIAS/PTPAMP|)

                                     | 

                                     | ANPIPn = 0

                                     |

                                     | --- ELSE ---

      BIAS < 0 --------------|       |

                             |AND ---| LAMBSEn = LAMBSEn + 

      EGO-n SWITCH from Lean |       |  PTPAMP * FN342 * PIPRATn

       to Rich --------------|       |

                                     | ENPIPn = TDPIP * FN346(|BIAS/PTPAMP|)

                                     |

                                     | ANPIPn = 0

                                     |

                                     | --- ELSE ---

      BIAS < 0 ---------------|      |

                              |AND --| LAMBSEn = LAMBSEn -[PTPAMP +

      EGO-n SWITCH from Rich  |      |  | BIAS |]* FN344 * PIPRATn

       to Lean ---------------|      | ANPIPn = 0

                                     | ENPIPn = TDPIP 









































                                         6-31


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                   RAMP-RATE CALCULATIONS BASED ON BIAS AND EGO STATE



                              EGO-n SENSOR HAS NOT SWITCHED







      BIAS >OR= 0 ---------|      | LAMBSEn = LAMBSEn - 

                           |AND --|

                           |      | (PTPAMP - |BIAS|)*(1-FN339)*TSLAMUn

      EGO-n Lean ----------|      |  -------------------------

                                  |          TDSEC

                                  |

                                  | --- ELSE ---

                                  |

      BIAS < 0 ------------|      | LAMBSEn = LAMBSEn -

                           |AND --|

                           |      | (PTPAMP - |BIAS|)*FN339*TSLAMUn

      EGO-n Lean ----------|      |  ----------------------

                                  |          TDSEC

                                  |

                                  | --- ELSE ---

                                  |

      BIAS >OR= 0 ---------|      | LAMBSEn = LAMBSEn +

                           |AND --|

                           |      | (PTPAMP - |BIAS|)*FN339*TSLAMUn

      EGO-n Rich ----------|      |  ----------------------

                                  |          TDSEC

                                  |

                                  | --- ELSE ---

                                  |

      BIAS < 0 ------------|      | LAMBSEn = LAMBSEn +

                           |AND --|

                           |      | (PTPAMP - |BIAS|)*(1-FN339)*TSLAMUn

      EGO-n Rich ----------|      |  -------------------------

                                  |          TDSEC











      An EGO switch is defined as either:



      1.  The EGO sensor reads rich during the current background loop and it reads

          lean during the previous background loop.



      2.  The EGO sensor reads lean during the current background loop and it reads

          rich during the previous background loop.



























                                         6-32


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                          CLOSED LOOP LAMBSE1 AND LAMBSE2 LOGIC





      CLOSED LOOP --------------|      | MONO EGO OR STEREO

                                |AND --| EGO WITH LACK OF

      LEGOFG1 = 1 ---------|    |      | EGO-2 SWITCHING.

       (see TIMER section) |    |      | USE EGO-1 SENSOR

                           |OR -|      | ONLY FOR CLOSED LOOP

      NUMEGO = 1 ----------|           | CONTROL OF LAMBSE1 AND

       (MONO EGO)                      | SET LAMBSE2 = LAMBSE1

                                       |

                                       | --- ELSE ---

                                       |

                                       | STEREO EGO WITH LACK

                                       | OF EGO-1 SWITCHING.

      CLOSED LOOP ---------------|     | USE EGO-2 SENSOR

                                 |AND -| ONLY FOR CLOSED LOOP

      LEGOFG1 = 1 ---------------|     | CONTROL OF LAMBSE2 AND

       (see TIMER section)             | SET LAMBSE1 = LAMBSE2

                                       |

                                       | --- ELSE ---

                                       |

      CLOSED LOOP ---------------------| NORMAL STEREO EGO.

                                       | USE EGO-1 SENSOR

                                       | FOR CLOSED LOOP

                                       | CONTROL OF LAMBSE1

                                       |         AND

                                       | USE EGO-2 SENSOR

                                       | FOR CLOSED LOOP

                                       | CONTROL OF LAMBSE2





























































                                         6-33


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                                   LAMBDA RESET LOGIC







      LAMBSE is reset to 1.0 under the conditions listed below, provided it  is  in

      Closed  Loop  fuel  control.   LAMBSE  is not reset in Open Loop Fuel Control

      because the value of LAMBSE is calculated using the  Open  Loop  Fuel  logic.

      LAMBSE is reset in Closed Loop as described below.



          1) When entering or exiting the Filtered Idle Air Mass Regions (FAM);



          2) When Changing load states within FAM; and/or



          3) Any time a transition is made from  Open  Loop  to  Closed  Loop  Fuel

          control.



      LAMBSE is always clipped to 1.0 as a maximum.  The intent is  to  allow  rich

      errors and to prevent lean errors, given that running rich does not cause any

      drivability concerns.





                       LAMBSE RESET - ENTERING/EXITING FAM REGION





      REFFLG = 1 ----------------|       | Set JMPFLG = 1

                                 |AND ---| Clip LAMBSE1 and LAMBSE2

      JMPFLG = 0 ----------------|       |  to 1.0 as Maximum.

       (Entry into FAM Region)           |

                                         | --- ELSE ---

                                         |

      REFFLG = 0 ----------------|       | Set JMPFLG = 0

                                 |AND ---| Set LAMBSE1 = LAMBSE1

      JMPFLG = 1 ----------------|       |  - LMBJMP

       (Exit from FAM Region)            | Set LAMBSE2 = LAMBSE2

                                         |  - LMBJMP







                        LAMBSE RESET - LOAD STATE CHANGE AT IDLE





      APT = -1 -------------------|AND -----| Clip LAMBSE1 and LAMBSE2

       (Closed throttle)          |         |  to 1.0 as maximum.

                                  |

      ISFLAG NOT= ISLAST ---------|

       (Load state change)





























                                         6-34


                   FUEL CONTROL STRATEGY - CLOSED LOOP FUEL - GUA0

                              Copyright 1989 FoMoCo





                   LAMBSE RESET - OPEN LOOP TO CLOSED LOOP TRANSITION





      Previous OLFLG = 1 ---------|AND -----| Clip LAMBSE1 and LAMBSE2

       (Last state = Open Loop)   |         |  to 1.0 as Maximum.

                                  |

      Current OLFLG = 0 ----------|

       (Current state = Closed    |

        Loop)                     |

                                  |

      LAMSW = 1 ------------------|



































































































                                         6-35


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                                  ADAPTIVE FUEL CONTROL





      BACKGROUND





      Fuel injected systems may exhibit vehicle to vehicle steady state  A/F  ratio

      errors due to normal variability in fuel system components.



      The  adaptive  fuel  strategy  attacks  this  problem   by   memorizing   the

      characteristics  of  the  individual  fuel system being used.  This memorized

      information is used to  predict  what  the  system  will  do  based  on  past

      experience.



      The ability to predict fuel system  behavior  improves  both  open  loop  and

      closed  loop  fuel  control.  As an example, the memorized information can be

      used on cold starts to achieve better open loop fuel contol  before  the  EGO

      sensor reaches operating temperature.



      The chief benefit of the adaptive fuel strategy will be to reduce the effects

      of product variability in the field.



      The memorized or adaptive information is stored in table  form  in  the  Keep

      Alive  Memory (KAM).  KAM is continuously powered by the vehicle battery even

      when the vehicle is shut off.  As a result, the table is not lost on  vehicle

      shutdown.







      ADAPTIVE EGO STRATEGY deleted (GXZ0)





























































                                         6-36


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                           DEFINITIONS - ADAPTIVE FUEL CONTROL





      INPUTS



      Registers:



       -  ACT = Air charge temperature, deg F.



       -  ADPTMR = Adaptive learning enable timer (see 

                   TIMER section).



       -  AEFUEL = Acceleration enrichment fuel flow (lb/min).



       -  BIAS = Closed loop biasing term = FN1353(N,LOAD).



       -  CHKSUM = KAM memory word which contains the sum of the

                   LTMTB1 or LTMTB2 contents.



       -  COLTBU = A register which contains the column number of

                   the Adaptive Learning Cell to be updated.



       -  EFTR = Transient fuel compensation fuel flow (lb/sec).



       -  EGO = Exhaust Gas Oxygen Sensor. (GX has mono and stereo EGO

                 capacity, EGO-1 and EGO-2 represent the EGO sensors in

                 stereo mode; generic represent = EGO-n).



       -  EGOCT1 = Number of EGO-1 switches since last Adaptive

                   Fuel Update.



       -  EGOCT2 = Number of EGO-2 switches since last Adaptive

                   Fuel Update.



       -  ISCFLG = ISC MODE Flag (1 = RPM CONTROL Mode).



       -  ISFLAG = Flag that indicates the degree of loading on the

                   engine at Idle.  See the ISC Chapter.

               0 = Drive

               1 = Drive + A/C (WAC Relay De-Energized)

               2 = Neutral

               3 = Neutral + A/C (WAC Relay De-Energized)



       -  KAM = Keep Alive Memory.



       -  KAMRF1/KAMRF2 = Adaptive Fuel strategy correction factor.

                  It is composed of the value LTMTB1rc + .5.



       -  KWUCTR = KAM warm_up counter. Stores number of warm_ups in KAM.

                    Reset to zero if KAM is corrupted. (battery disconnect,

                    etc.)



       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio

                    for EGO-1 injectors. LAMBSE1 appears in the

                    fuel pulsewidth equation for EGO-1.



       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio

                    for EGO-2 injectors. LAMBSE2 appears in the

                    fuel pulsewidth equation for EGO-2.



                                         6-37


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





       -  LEGOFG1 = Lack of EGO-1 switching.



       -  LEGOFG2 = Lack of EGO-2 switching.



       -  LPCT1L = Number of background loops that the LAMBSE1 

                   was outside a deadband in the rich direction, with

                   EGO-1 sensor reading lean.



       -  LPCT2L = Number of background loops that the LAMBSE2

                   was outside a deadband in the rich direction, with

                   EGO-2 sensor reading lean.



       -  LPCT1R = Number of background loops that the LAMBSE1 was

                   outside a deadband in the lean direction, with EGO-1

                   sensor reading rich.



       -  LPCT2R = Number of background loops that the LAMBSE2 was

                   outside a deadband in the lean direction, with EGO-2

                   sensor reading rich.



       -  LSTCOL = Last normalized column value.



       -  LSTROW = Last normalized row value.



       -  LTMTB1rc = EGO-1 Adaptive Fuel cell which corresponds to

                     r = Integer part of FN021 (LOAD) and

                     c = Integer part of FN070 (N).



       -  LTMTB2rc = EGO-2 Adaptive Fuel cell which corresponds to

                     r = Integer part of FN021 (LOAD) and

                     c = Integer part of FN070 (N).



       -  N = Engine revolutions, RPM.



       -  NRMCES = Current normalized column number.



       -  NRMRLD = Current normalized row number.



       -  RANNUM = Random number adder.



       -  ROWTBU = Register which contains the row number of the

                   Adaptive Fuel cell to be updated.



       -  TCSTRT = Temperature of ECT at cold start, deg. F



      Bit Flags:



       -  AFMFLG = ACT Failure Mode (FMEM) flag.



       -  CFMFLG = ECT FMEM flag.



       -  EFMFLG =  EGR FMEM flag.



       -  HCAMFG = Flag indicating state of Hi Cam.



       -  MFMFLG = MAP/MAF FMEM flag.









                                         6-38


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





       -  REFFLG = Indication of Idle Air Flow (1 = Idle Air Flow).



       -  TFMFLG = TP FMEM flag.



       -  WARM_UP = Indicates engine warmup occured.



      Calibration Constants:



       -  ADAPTM = Adaptive learning enable time delay 

                   (seconds).



       -  ADEFTR = Maximum transient fuel compensation fuel 

                   flow to allow adaptive learning (lb/sec).



       -  ADEGCT = EGO switch requirement to increment counters.



       -  AELIM = Maximum acceleration enrichment fuel flow to 

                  allow adaptive learning (lb/min). 



       -  AFACT1 = Minimum ACT to Update Adaptive Fuel Table

                   deg F.



       -  AFACT2 = Maximum ACT to update Adaptive Fuel Table,

                   deg F.



       -  DELCOL = Calibration constant (normalized engine 

                   speed N) which provides the ability to lock 

                   out table updates under transient conditions; 

                   establishes an operating range (engine speed) 

                   within which the appropriate loop counter may 

                   be incremented.



       -  DELROW = Same function as DELCOL but for normalized 

                   load LOAD.



       -  DELAMB = Deadband (around LAMBSE1 = 1.0) within which 

                   loop counter values are not altered. 



       -  FAEGCT = Fast Adaptive EGO count. Number of EGO switches required to

                   permit adaptive learning when KWUCTR < KWUCNT.  Should be

                   set to 0 to permit fast adaptive learning for the first

                   few warm_up cycles.   



       -  FN021 = LOAD normalizing function for LTMTB1(LTMTB2) 

                  and FN1325. Input = Load and Output = Normalized

                  Load.



       -  FN070 = N normalizing function.



       -  FN1325rc = LTMTB1 and LTMTB2 learning/use control table.

                    X-input = FN070 - Normalized RPM.

                    Y-input = FN021 - Normalized Load.



       -  HCAMSW = Calibratible switch which allows selection of when

                   and which adaptive fuel cells are to be used.



       -  KWUCNT = Maximum mumber of warm_up cycles to use fast adaptive EGO

                   count.  It should be set to approx. 3 to 5 warm_ups.





                                         6-39


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





       -  MAXADP = Maximum adaptive correction.



       -  MINADP = Minimum adaptive correction.



       -  NUMEGO = Switch indicating number of EGO sensors present;

                   Select mono or stereo.



       -  RANMUL = Multiplier for Random number generation.



       -  VECT3 = Minimum coolant temperature (engine on), deg. F



       -  VECT5 = Starting coolant temperature for warm_up counter, deg. F







      OUTPUTS



      Registers:



       -  CHKSUM = KAM memory word which contains the sum of the

                   LTMTB1 or LTMTB2 contents.



       -  COLTBU = A register which contains the column number of

                   the Adaptive Learning Cell to be updated.



       -  EGOCT1 = Number of EGO-1 switches since last Adaptive

                   Fuel Update.



       -  EGOCT2 = Number of EGO-2 switches since last Adaptive

                   Fuel Update.



       -  KAMRF1/KAMRF2 = Adaptive Fuel strategy correction factor.

                  It is composed of the value LTMTB1rc + .5.



       -  KWUCTR = KAM warm_up counter. Stores number of warm_ups in KAM.

                   Reset to zero if KAM is corrupted. (battery disconnect,

                   etc.)



       -  LPCT1L = Number of background loops that the LAMBSE1 

                   was outside a deadband in the rich direction, with

                   EGO-1 sensor reading lean.



       -  LPCT2L = Number of background loops that the LAMBSE2

                   was outside a deadband in the rich direction, with

                   EGO-2 sensor reading lean.



       -  LPCT1R = Number of background loops that the LAMBSE1 was

                   outside a deadband in the lean direction, with EGO-1

                   sensor reading rich.



       -  LPCT2R = Number of background loops that the LAMBSE2 was

                   outside a deadband in the lean direction, with EGO-2

                   sensor reading rich.



       -  LSTCOL = Last normalized column value.



       -  LSTROW = Last normalized row value.







                                         6-40


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





       -  LTMTB1rc = EGO-1 Adaptive Fuel cell which corresponds to

                     r = Integer part of FN021 (LOAD) and

                     c = Integer part of FN070 (N).



       -  LTMTB2rc = EGO-2 Adaptive Fuel cell which corresponds to

                     r = Integer part of FN021 (LOAD) and

                     c = Integer part of FN070 (N).



       -  NRMCES = Current normalized column number.



       -  NRMRLD = Current normalized row number.



       -  RANNUM = Random number adder.



       -  ROWTBU = Register which contains the row number of the

                   Adaptive Fuel cell to be updated.



      Bit Flags:



       -  WARM_UP = Indicates engine warmup occured.

















































































                                         6-41


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                                   ADAPTIVE FUEL TABLE





      The adaptive fuel tables, LTMTB1 and  LTMTB2,  are  2-dimensional  arrays  of

      learned  fuel  system  corrections.  Ideally, if LAMBSE1 = 1.0, LAMBSE2 = 1.0

      and data from a mature adaptive fuel table  is  used,  a  stoichiometric  A/F

      ratio  would  result at whatever speed-load point adaptive learning had taken

      place.



      Present table size is 8(rows) x 10(columns) or 80  cells  for  each  Adaptive

      Fuel Table, plus depending on the strategy family, either 4 or 6 special idle

      adaptive cells.  There will always be 86 total cells per table



      The total learned fuel system correction for the EGO-1 side of the engine  is

      called  KAMRF1  where  KAMRF1  =  0.5  +  LTMTB1rc.   The  corresponding fuel

      correction for the EGO-2  side  is  called  KAMRF2,  where  KAMRF2  =  0.5  +

      LTMTB2rc.



      During adaptive learning, only the LTMTB1  and  LTMTB2  cells  are  modified.

      Therefore,  the  ranges  of  each of the KAMRF1 and KAMRF2 multipliers (0.5 +

      0.0) to (0.5 + 1.0) or 0.5 to 1.5.



      The range of the LTMTB1 and LTMTB2 cells can be further restricted by use  of

      the calibration parameter clips, MINADP and MAXADP.



      The precise location where KAMRF1 and KAMRF2 are used is shown  in  the  fuel

      pulsewidth equation.



      If KAM fails the KAM validation test (described later), all LTMTB1 and LTMTB2

      cells  are  initialized  to  0.5 or 80 (HEX) resulting in a value of KAMRF1 =

      KAMRF2 = 0.5 + 0.5 = 1.0.



      When allowed, updates to LTMTB1 and LTMTB2 are statistically  distributed  in

      the  vicinity  of  the  speed-load operating point, except in the case of the

      idle  cells.   Only  the  current  idle  cell  is  updated,  no   statistical

      distribution is done.



      Data extracted from the table undergoes a 4-point linear interpolation.  This

      is  explained further under the FN1325 description.  Note that the idle cells

      do not undergo four point interpolation.  Only the current idle cell is used.



      LTMTB1, LTMTB2 and FN1325 share the same normalizing functions.  FN021 is the

      LOAD normalizing function.  FN070 is the engine speed N normalizing function.



      As an example of an adaptive fuel table, LTMTB1, is shown on the  next  page.

      EGO-2 Adaptive Fuel Table, LTMTB2, uses similar nomenclature.





























                                         6-42


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                             ADAPTIVE FUEL TABLE (LTMTB1)







                                    LTMTB1rc CELLS



                           (LTMTB2 has similar designation)







           Special idle  ------>|80 81 82 83 84 85

           adaptive cells       |

                           7    |70 71 72 73 74 75 76 77 78 79 

                                |

                           6    |60 61 62 63 64 65 66 67 68 69

                                |

                           5    |50 51 52 53 54 55 56 57 58 59

                                |

               FN021       4    |40 41 42 43 44 45 46 47 48 49

             NORMALIZED        

               ENGINE      3    |30 31 32 33 34 35 36 37 38 39

               LOAD             |  

              (LOAD)       2    |20 21 22 23 24 25 26 27 28 29

                                |   

                           1    |10 11 12 13 14 15 16 17 18 19

                                |   

                           0    |00 01 02 03 04 05 06 07 08 09

                                ------------------------------



                                  0  1  2  3  4  5  6  7  8  9



                                        FN070 NORMALIZED

                                          ENGINE SPEED

                                              (N)





      The special Adaptive Idle cells are not defined by FN021 or FN070;  they  are

      defined by the value of the ISFLAG.  (See ISFLAG definition)













































                                         6-43


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                                   FN1325 DESCRIPTION





      FN1325 is a 9(rows) x 10(columns) table containing 1  cell  corresponding  to

      each  cell in the adaptive fuel table LTMTB1 or LTMTB2.  (The 9th row is used

      to reference the idle cells and is not accessible from FN021 which only  goes

      from 0 to 7).



      The normalizing functions for FN1325, LTMTB1 and LTMTB2 are shared.  FN021 is

      the  LOAD  normalizing  function.   FN070  is  the engine speed N normalizing

      function.



      FN1325 is designed to do the following:



      1.  Identify LTMTB1 and LTMTB2 cells where learning is allowed to occur.



          Learning is allowed in any LTMTB1 and LTMTB2  cells  whose  corresponding

          FN1325rc  cell  contains  a  value  >OR=  0.  Negative FN1325 cell values

          disallow learning in the corresponding LTMTB1 and LTMTB2 cell(s).



      2.  Define a high confidence speed-load region that can  be  referenced  from

      any other speed-load point.



          This occurs whenever a negative value is entered into a FN1325 cell.  The

          negative  number  serves  as an offset to LTMTB100 and LTMTB200.  If 1 of

          the 4 cells used by the 4-point linear  interpolation  LTMTB1  or  LTMTB2

          table   lookup  routine  contained  -42,  the  cell  value  used  by  the

          interpolation routine for the cell that contained the -42  would  be  the

          value  found  in the LTMTB1 or LTMTB2 cell located at the intersection of

          row 4 and column 2.  In the extreme, if -42 was entered into  every  cell

          of  FN1325rc  except for the cell corresponding to LTMTB142 and LTMTB242,

          learning would be allowed only in cell  LTMTB142  and  LTMTB242  and  the

          learned  correction  in  LTMTB142  and  LTMTB242  would be applied to all

          speed-load points for fuel calculations  referencing  EGO-1  (every  cell

          referenced  by the 4-point linear interpolation routine during the LTMTB1

          table lookup would point to cell LTMTB142).  This calibration for  FN1325

          is shown on the next page.



      3.  Specify the values of the  Loop  Counters  (LPCT1L,  LPCT1R,  LPCT2L  and

      LPCT2R) required to update an individual LTMTB1 or LTMTB2 cell(s).



          This is done by entering a value into FN1325 that is >OR= 0.   The  value

          entered  represents 1/2 the required update value.  A value of 20 entered

          would require (LPCT1R, LPCT1L, LPCT2L and LPCT2R) to be greater  than  40

          for an update to occur.



          NOTE:  FN1325 controls the update rate and update area  for  both  LTMTB1

          and LTMTB2.

























                                         6-44


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                 LTMTB1 AND LTMTB2 LEARNING/USE CONTROL TABLE FN1325











                                     FN1325 CELLS







          Special idle

          adaptive cells ---->|-42 -42 -42 -42 -42 -42

                              |

                         7    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42

                              |

                         6    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42

                              |

                         5    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42

                              |

             FN021       4    |-42 -42  20 -42 -42 -42 -42 -42 -42 -42

           NORMALIZED         |

             ENGINE      3    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42

             LOAD             |

            (LOAD)       2    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42

                              |

                         1    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42 

                              |

                         0    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42 

                               ---------------------------------------



                                 0   1   2   3   4   5   6   7   8   9



                                         FN070 NORMALIZED

                                           ENGINE SPEED

                                               (N)



















































                                         6-45


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                       LOOP COUNTER LOGIC FOR PACING ADAPTIVE LEARNING



          AFMFLG = 1 ---------------------------|

                                                |

          CFMFLG = 1 ---------------------------|

                                                |

          MFMFLG = 1 ---------------------------|

                                                |

          TFMFLG = 1 ---------------------------|OR --| Disable Adaptive Learning

                                                |     | 

                                                |     | SET LPCT1R = 0

          OPEN LOOP FUEL CONTROL ---------------|     | SET LPCT1L = 0

                                                |     | SET LPCT2R = 0

          ADPTMR < ADAPTM ----------------------|     | SET LPCT2L = 0 

                                                |     | EGOCT1 = 0 

          REFFLG = 1 -------------|             |     | EGOCT2 = 0

                                  |AND ---------|     |

          ISCFLG NOT= 1 ----------|                   | EXIT Adaptive Fuel

                                                      |      Routine

                                                      |

                                                      | --- ELSE ---

          REFFLG = 1 -------------|                   |

                                  |AND ---------------| Special Idle Cells

          ISCFLG = 1 -------------|                   |

                                                      | SET NRMCES = ISFLAG

                                                      | SET COLTBU = ISFLAG

                                                      | SET NRMRLD = 8

                                                      | SET ROWTBU = 8

                                                      |

                                                      | --- ELSE ---

                                                      |

          REFFLG = 0 ---------------------------------| Look up Normal Cell

                                                      | coordinates

                                                      |

                                                      | RANNUM = RANNUM * RANMUL

                                                      | NRMCES = NORM_N70

                                                      | NRMRLD = NORM_MAPOPE21

                                                      | ROWTBU = NRMRLD + 0.5 +

                                                      | lower byte of RANNUM

                                                      | COLTBU = NRMCES + 0.5 +

                                                      | upper byte of RANNUM

                                                      |





































                                         6-46


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





          FN1325rc < 0 ---------------------|

                                            |

          |NRMRLD - LSTROW| > DELROW -------|OR ------| Change Adpative Region

                                            |         |

          |NRMCES - LSTCOL| > DELCOL -------|         | SET LSTROW = NRMRLD

                                                      |  (Current Normalized

                                                      |   Row number)

                                                      | SET LSTCOL = NRMCES

                                                      |  (Current Normalized

                                                      |   Column number)

                                                      | SET LPCT1R = 0

                                                      | SET LPCT1L = 0

                                                      | SET LPCT2R = 0

                                                      | SET LPCT2L = 0

                                                      | EGOCNT1 = 0; EGOCNT2 = 0

                                                      | EXIT Adaptive Fuel

                                                      | Routine

                                                      |

                                                      | --- ELSE ---

                                                      |

          SWTFLn = 1 ---------------------------------| Increment EGOCTn if EGOn

                                                      | switched







          AEFUEL > AELIM -------------------|         | Disable Adaptive Learning

                                            |         |

          |EFTR| >OR= ADEFTR ---------------|OR ------| SET LPCT1R = 0

                                            |         | SET LPCT1L = 0

          REFFLG = 0 -----------|           |         | SET LPCT2R = 0

                                |AND -------|         | SET LPCT2L = 0

          ROWTBU = 8 -----------|           |         | EGOCT1 = 0; EGOCT2 = 0

                                            |         |

          ACT <OR= AFACT1 ------------------|         | EXIT Adaptive Fuel

                                            |         |      Routine

          ACT >OR= AFACT2 ------------------| 

















































                                         6-47


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                              EGO-1 LOOP COUNTER UPDATE



                                 (LPCT1L and LPCT1R)





          EGOCT1 >OR= "A" -----------------|

                                           |

          EGO-1 is RICH -------------------|AND --| Increment LPCT1R      

                                           |      |

          LAMBSE1 >OR= (1+ BIAS + DELAMB) -|      | --- ELSE ---

                                                  | 

          EGO-1 is LEAN -------------------|      |

                                           |AND --| Increment LPCT1L

          LAMBSE1 <OR= (1+BIAS - DELAMB) --|

                                           |

          EGOCT1 >OR= "A" -----------------|







                              EGO-2 LOOP COUNTER UPDATE



                                 (LPCT2L and LPCT2R)





          EGOCT2 >OR= "A" ----------------|

                                          |

          EGO-2 is RICH ------------------|

                                          |AND --| Increment LPCT2R

          LAMBSE2 >OR= (1+BIAS + DELAMB) -|      |

                                                 | --- ELSE ---

          EGO-2 is LEAN ------------------|      |

                                          |AND --| Increment LPCT2L

          LAMBSE2 <OR= (1+BIAS - DELAMB) -|

                                          |

          EGOCT2 >OR= "A" ----------------|





          Where:  (See next page)













































                                         6-48


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                                    WARM_UP COUNTER LOGIC





      WARM_UP = 0 -----------|

                             |

      TCSTRT < VECT5 --------|

                             |AND ---| Set WARM_UP = 1

      ECT > VECT3 -----------|       | Set KWUCTR = KWUCTR + 1

                             |       | Clip KWUCTR to 255

      RUN MODE --------------|       





      Note:  The above logic is actually done in Continuous Self Test.





      KWUCTR < KWUCNT ---------------| "A" = FAEGCT

      (First few warm_up cycles)     | (Use fast learning rate)

                                     |

                                     | --- ELSE ---

                                     | 

      KWUCTR >OR= KWUCNT ------------| "A" = ADEGCT

                                     | (Use normal learning rate)







      INPUTS/OUTPUTS





      KWUCTR = KAM warm_up counter.  Stores number of warm_ups in  KAM.   Reset  to

      zero if KAM is corrupted.  (battery disconnect, etc.)







      CALIBRATION CONSTANTS





      FAEGCT = Fast Adaptive EGO count.  Number of EGO switches required to  permit

      adaptive  learning  when  KWUCTR < KWUCNT.  Should be set to 0 to permit fast

      adaptive learning for the first few warm_up cycles.



      KWUCNT = Maximum mumber of warm_up cycles to use fast adaptive EGO count.  It

      should be set to approx.  3 to 5 warm_ups.





































                                         6-49


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                  ADAPTIVE LEARNING CONDITIONS FOR LTMTB1 (EGO-1) TABLE





      LTMTB1 cells are updated when the following conditions are satisfied:





      FN1325rc >OR= 0 ----------|     

                                |     

      LPCT1R > 2*FN1325rc ------|AND -| LTMTB1rc = LTMTB1rc - 0.0039

                                |     |  (1 bit)

      LTMTB1rc > MINADP --------|     | 

                                      | DECREMENT CHKSUM

                                      | SET LPCT1R = 0

                                      | SET EGOCT1  = 0

                                      |

                                      | --- ELSE ---

                                      |

      LPCT1L > 2*FN1325rc ------|     | LTMTB1rc = LTMTB1rc + 0.0039

                                |     |  (1 bit)

      LTMTB1rc < MAXADP --------|AND -| INCREMENT CHKSUM

                                |     | SET LPCT1L = 0

      FN1325rc >OR= 0 ----------|     | SET EGOCT1 = 0













































































                                         6-50


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                  ADAPTIVE LEARNING CONDITIONS FOR LTMTB2 (EGO-2) TABLE





                                   

      FN1325rc >OR= 0 ----------|  

                                |  

      LPCT2R > 2*FN1325rc ------|     | LTMTB2rc = LTMTB2rc - 0.0039

                                |AND -| DECREMENT CHKSUM

      LTMTB2rc > MINADP --------|     | SET LPCT2R = 0

                                      | SET EGOCT2  = 0

                                      |

                                      | --- ELSE ---

                                      |

      LPCT2L > FN1325rc --------|     | LTMTB2rc = LTMTB2rc + 0.0039

                                |AND -| INCREMENT CHKSUM

      LTMTB2rc < MAXADP --------|     | SET LPCT2L = 0

                                |     | SET EGOCT2 = 0

      FN1325rc >OR= 0 ----------|





      LPCT2L and LPCT2R logic is shown in the Loop Counter  update  Section.   NOTE

      that During Adaptive Learning r = ROWTBU and c = COLTBU.













      The Adaptive Fuel Strategy statistically distributes the  learned  values  to

      the four adjacent cells to a given speed load point by adding a random number

      to the normalized inputs.  However, if the engine is operating in one of  the

      Idle  regions  (Row  8,  Columns  0  -  5),  the  software  does  not use the

      statistical distribution.























































                                         6-51


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                              USE OF KAM ADAPTIVE FUEL DATA





      The adaptive fuel table stored in KAM is used as a reference  for  both  open

      and closed loop fuel control.



      The adaptive fuel table is referenced as shown below.







      CRKFLG = 1 ------------------|

       (CRANK Mode)                |

                                   |OR --| KAMRF1 = 1.0

      LEGOFG1 = 1 ---------|       |     | KAMRF2 = 1.0

                           |AND ---|     | Use no interpolation

      LEGOFG2 = 1 ---------|             | 

                                         | --- ELSE ---

      REFFLG = 1 ----------|             | 

       (In FAM)            |             | 

                           |AND ---------| KAMRF1 = 0.5 + LTMTB1rc

      HCAMFG = 0 -----|    |             | KAMRF2 = 0.5 + LTMTB2rc

       (no RPM adder) |OR -|             | r = 8, c = ISFLAG

                      |                  | Use no interpolation

      HCAMSW = 0 -----|                  | 

       (ignore HCAMFG)                   | --- ELSE ---

                                         |

                                         | KAMRF1 = 0.5 + LTMTB1rc 

                                         | KAMRF2 = 0.5 + LTMTB2rc

                                         | Use 4 point interpolation







           HCAMSW is a calibration switch allowing the developer to select how  the

      adaptive fuel idle cells are to be used.  If HCAMSW is set to 0, the adaptive

      fuel idle cells are used as soon as the filtered air mass region  is  entered

      (REFFLG  =  1).  If HCAMSW is set to 1, the adaptive fuel idle cells are used

      only when in the filtered air mass region and no RPM adder above base idle is

      present (HCAMFG = 0).  This includes FN825A, FN825B, FN26 and BZZRPM.





           For purposes of interpolation, the LTMTBn 80 to LTMTBn 85 cells are  not

      included.  These cells should correspond to the special idle cells.





































                                         6-52


                         FUEL STRATEGY - ADAPTIVE FUEL - GUE0

                              Copyright 1989 FoMoCo





                               LACK OF EGO SWITCHING KAMRF







      LEGOFG2 = 1 ---------|

                           |OR ----------| KAMRF2 = KAMRF1

      NUMEGO = 1 ----------|             |

                                         | --- ELSE ---

                                         |

      LEGOFG1 = 1 -----------------------| KAMRF1 = KAMRF2









      Note: For purposes of Interpolation, the Idle Adaptive

            cells are treated as containing 0.5.  These cells 

            should correspond to Idle Mode.







      The use of KAMRF1 and KAMRF2 is shown in the pulsewidth 

      equation in the FUEL section.













































































                                         6-53


                    FUEL STRATEGY - ACCELERATION ENRICHMENT - GXM0

                              Copyright 1989 FoMoCo





                        ACCELERATION ENRICHMENT FUEL DESCRIPTION





      In the RUN and UNDERSPEED modes, whenever the  rate  of  change  of  throttle

      angle  exceeds  a  minimum  value,  acceleration enrichment fuel is delivered

      until the manifold filling effect is completed (LOAD stops increasing).   The

      fuel is delivered at a rate determined by AEFUEL.



      AE fuel is delivered synchronous with the base fuel pulse.  AEFUEL  is  added

      into  the  FUELPW  calculation  (See  the  FUELPW  logic  and equations).  No

      separate AE pulses are delivered.



































































































                                         6-54


                    FUEL STRATEGY - ACCELERATION ENRICHMENT - GXM0

                              Copyright 1989 FoMoCo





      DEFINITIONS







       -  CRANK = Engine startup strategy.



       -  RUN = Normal engine control strategy, (used once engine

                has maintained a certain speed and does not stall).



       -  UNDERSPEED = Strategy to assist the transition from CRANK

                 to RUN; it also is called whenever the engine stalls

                 or stumbles.





      INPUTS



      Registers:



       -  AEFUEL = Rate of AE fuel delivery in LB/MIN.



       -  AELOAD = Filtered LOAD (defined in System Equations).



       -  LOAD = Normalized ARCHG divided by SARCHG.



       -  N = Engine speed (revs/min).



       -  NEW_AE = Handshaking flag between background and EOS.



       -  OLDTP = Previous TP sensor value, counts.



       -  TAR = Throttle Angle Rate of change, deg/sec.



       -  TP = Throttle position sensor.



      Bit Flags:



       -  AEOFLG = Indicates whether the LOAD rate of change

                    reflects the manifold filling effect. After the

                    LOAD begins to increase, the AEOFLG is set to

                    one to signal manifold filling effect. 



       -  CRKFLG = Flag indicating engine mode; 1 = Crank.







      Calibration Constants:



       -  AEACLD = Change in LOAD indicating that the Intake

                   Manifold is filling, "Hg.



       -  AEM = A calibratible multiplier for AE fuel.



       -  AETAR = Calibratible minimum TAR, deg/sec.



       -  FN019B = Throttle angle rate normalizing function;

                   used to clip and scale for table look-up.

                   Input = throttle angle rate and Output =

                   Normalized throttle angle rate.





                                         6-55


                    FUEL STRATEGY - ACCELERATION ENRICHMENT - GXM0

                              Copyright 1989 FoMoCo





       -  FN020B = Temperature normalizing function; used to clip

                   and scale for table look-up. Input = ECT and

                   Output = Normalized Temperature.



       -  FN331B = A multiplier as a function of the present

                   throttle angle minus the lowest measured

                   throttle angle (TP - RATCH).



       -  FN378 = A multiplier as a function of BP. Input = BP

                  and Output = Multiplier.



       -  FN1303 = Acceleration enrichment desired fuel flow table.

                   Output = AE desired fuel flow. TAE is its synonom.

                   X-input = Normalized throttle angle rate - FN019B

                   Y-input = Normalized ECT - FN020B



       -  FRCTAE = TAE ACT to ECT proportioning factor.



       -  TAE (FN1303) = An 8x7 table of fuel flow as a function 

                 of throttle angle rate of change (TAR) and

                 temperature. The temperature input can be ECT or

                 ACT as defined by the combination [FRCTAE*ACT

                 +(1-FRCTAE)*ECT].

                 The normalizing function for TAR is FN019B. The

                 normalizing function for the ECT/ACT temperature

                 combination is FN020B.



       -  TPDLTA = Minimum TP change that indicates throttle plate

                   travel.







      OUTPUTS



      Registers:



       -  AEFUEL = Rate of AE fuel delivery in LB/MIN.



       -  NEW_AE = Handshaking flag between background and EOS.



       -  OLDTP = Previous TP sensor value, counts.



       -  TAR = Throttle Angle Rate of change, deg/sec.



      Bit Flags:



       -  AEOFLG = Indicates whether the LOAD rate of change

                    reflects the manifold filling effect. After the

                    LOAD begins to increase, the AEOFLG is set to

                    one to signal manifold filling effect. 





















                                         6-56


                    FUEL STRATEGY - ACCELERATION ENRICHMENT - GXM0

                              Copyright 1989 FoMoCo





                                      AEFUEL LOGIC







      CRKFLG = 1 (CRANK) -------------|

                                      |OR ---| AEFUEL = 0

      TAR <OR= AETAR -----------------|      |

                                      |      |

      LOAD - AELOAD <OR= AEACLD -|    |      |

       (Manifold is full)        |    |      |

                                 |AND-|      |

      AEOFLG = 1 ----------------|           |

       (Manifold was/is filling)             |

                                             | --- ELSE ---

                                             |

               AEM*TAE*FN331B*FN378          |         AEM*TAE*FN331B*FN378

      AEFUEL < ------------------------|OR --| AEFUEL = --------------------

                     60                |     |                   60

                                       |     |

      NEW_AE = 1 ----------------------|     | CLEAR NEW_AE = 0







      TAE (8x7 table of fuel flow function) is used in  the  above  logic  diagram.

      The X and Y inputs to this table are TAR and Temperature.  For throttle angle

      rates of change below  that  of  the  first  column  of  the  TAE  Table  (17

      degrees/second),  TAE  is  set  to zero.  For TAR values between AETAR and 17

      deg/sec, AEFUEL should be constant (to avoid effects of TAR jitter.



      NEW_AE = a handshaking flag between background and EOS.  It  is  set  in  the

      FUEL_SERVICE  routine  (rising  or  falling  edge  of PIP) and indicates that

      current value of AEFUEL has been used.  It is cleared by the background  when

      the  AEFUEL  calculation  is done.  When set, the background allows AEFUEL to

      decrease if needed.  This guarantees that AE will always be output for  short

      tip-in's.



















































                                         6-57


                    FUEL STRATEGY - ACCELERATION ENRICHMENT - GXM0

                              Copyright 1989 FoMoCo





      The AE fuel is turned off by setting TAR equal to zero, if  the  driver  tips

      out  (TP  decreases).   TP  is  saved  as  OLDTP  to  permit  recognition  of

      instantaneous accels or decels.  TPDLTA must be set  large  enough  to  avoid

      treating A/D jitter as a decel condition.





      OLDTP - TP > TPDLTA (DECEL) -------| Set TAR = 0





                                      AEOFLG LOGIC



      The AEOFLG indicates whether the LOAD rate of change indicates the occurrence

      of  the  manifold  filling effect.  The rate of change of LOAD represents the

      engine response to the driver demand command.  There is a short delay between

      the  TP change and the LOAD change.  During this delay, the AEOFLG remains at

      zero.  After the LOAD begins to increase, the AEOFLG is set to one to  signal

      the occurrence of the manifold filling effect.  After the manifold has filled

      (LOAD stops increasing), the software turns off the AE fuel regardless of the

      status of the TAR circuit.





      TAR > AETAR ---------------|

                                 |AND --|S  Q--| SET AEOFLG = 1

      LOAD - AELOAD > AEACLD ----|      |      | (Manifold filling)

                                        |      | OLDTP = TP

                                        |      | 

      TAR = 0 --------------------------|C     | --- ELSE ---

                                               |

                                               | SET AEOFLG = 0

                                               | (Manifold not filling)

                                               | OLDTP = TP



























































                                         6-58


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





                          TRANSIENT FUEL COMPENSATION STRATEGY







      BACKGROUND





      Transient Fuel is variously referred to as manifold wall  wetting,  puddling,

      filling, fuel film condensation/evaporation.



      A liquid fuel film resides on the walls of the  intake  manifold.   The  film

      mass  varies  primarily  with  manifold  absolute  pressure and manifold wall

      temperature.  During steady state conditions, the film mass is constant.  The

      rates  of  condensation  and  evaporation  on  the  manifold walls are equal.

      During transients, the film mass changes creating air/fuel ratio errors.



          . During accelerations, the film  mass  increases.   Fuel  will  condense

          faster  on  the  manifold  walls  until  equilibrium  is  reached.  In an

          uncompensated  system  at  stoichiometry,  fuel  is  diverted  from   the

          cylinders, resulting in a momentary lean condition.



          . During decelerations, the film mass  decreases.   Fuel  will  evaporate

          faster  from  the  manifold  walls  until  equilibrium is reached.  In an

          uncompensated system at stoichiometry, fuel is added  to  the  cylinders,

          resulting in a momentary rich condition.



      The problem is magnified in closed loop fuel systems because the fuel control

      will incorrectly chase the transient air/fuel excursions.







      INTENT



      The Transient Fuel Compensation Strategy (TFC) augments the closed/open  loop

      fuel control to keep cylinder events at the desired air/fuel ratio during all

      engine transients.  The goals are:



          . To eliminate lean air/fuel excursions during accelerations.



          . To eliminate rich air/fuel excursions during decelerations.









































                                         6-59


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





      APPROACH





      . The computer adjusts fuel flow to match the transient fuel flow to or  from

      the manifold fuel film.





      COMPENSATED   CLOSED/OPEN LOOP   FILM MASS RATE OF CHANGE

       FUEL FLOW  =    FUEL FLOW     +   OR FUEL FLOW

       (ACTUAL)      (BASE STRATEGY)    (TFC STRATEGY)





      . The film mass rate of change is proportional to the  amount  of  fuel  that

      must be added to or subtracted from the manifold film.





                                          /                     \

        FILM MASS           1            |  STEADY       ACTUAL  |

        RATE OF      = --------------- * |  STATE    -           |

        CHANGE          TIME CONSTANT    | FILM MASS   FILM MASS |

                                          \                     /





      . The time constant and steady state film mass are calculated from APELOD and

      temperature variables and must be calibrated for different applications.





      . The actual film mass is a time integration of the film mass rate of change.





                                 /                           \ 

       ACTUAL      ACTUAL       | FILM MASS        TIME SINCE |

       FILM     =  FILM    +    | RATE OF     *      LAST     |

       MASS        MASS         | CHANGE            UPDATE    |

                                 \                           / 



















































                                         6-60


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





                         TRANSIENT FUEL COMPENSATION STRATEGY





      DEFINITIONS



       -  CRANK = Engine Starting Strategy.



       -  RUN = Normal engine control strategy.



       -  UNDERSPEED = Engine Strategy which makes the transition

                from CRANK to RUN mode; it also operates when the

                engine stalls or stumbles.





      INPUTS



      Registers:



       -  AISF = Actual Intake Surface Fuel.



       -  ATMR1 = Time since exiting Crank Mode, secs.



       -  DELTIM = Time since last AISF update.



       -  EFTR = Equilibrium Fuel Transfer Rate during the 

                 previous program pass.



       -  ISCFLG = ISC Mode Flag (1 = RPM Control Mode).



      Bit Flags:



       -  CRKFLG = Flag indicating engine mode. Set to 1,

                   if engine Cranking. Set to 0 for other

                   modes.



       -  DFSFLG = Indicates Decel Fuel Shutoff.



       -  EFFLG1 = Equilibrium Fuel Flag. This flag controls

                   the initialization of AISF.



       -  UNDSP = Flag set to 1 if engine in UNDERSPEED or CRANK

                mode, set to zero otherwise.





































                                         6-61


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





      Calibration Constants:



       -  AISFM = Multiplier on AISF when in DFSO. Determines Fuel Puddle

                  size upon re-entering normal fuel.



       -  ALPHA = A multiplier proportioning the dependency 

                  of ACT TO ECT.



       -  EFTC = Equilibrium fuel time constant.

               = TEFTC(FN1322) = An 10 X 8 table of equilibrium

                 fuel transfer time constants as a function of:

                 ALPHA * ACT + (1 - ALPHA)*ECT and APELOD.



       -  EISF = TEISF(FN1321) = An 10 X 8 table of fuel mass 

                 values as a function of:

                 ALPHA*ACT + (1 - ALPHA)*ECT and APELOD.



       -  FN071 = Load Normalizing function; used for table

                  lookup. Input = LOAD and Output = Normalized

                  load.



       -  FN374 = Open Loop Fuel multiplier, RPM.



       -  FN1321 = Equilibrium Intake Surface Fuel Table. TEISF

                   is the synonym for this Table.

                   X-input = Normalized ALPHA * ACT + (1-ALPHA)

                             * ECT = FN022A

                   Y-input = Normalized Load = FN071.



       -  FN1322 = Equilibrium Fuel Transfer Constant. TEFTC is

                   the synonym for this Table.

                   X-input = Normalized ALPHA * ACT + (1-ALPHA)

                             * ECT = FN022A

                   Y-input = Normalized Load = FN071.



       -  KFT = Multiplier (can be used to disable transient

                fuel compensation by setting equal to zero).



       -  MEFTRA = Multiplier for accelerations. 



       -  MEFTRD = Multiplier for decelerations. 



       -  MTEFTC = Equilibrium Fuel transfer constant

                   multiplier.



       -  MTEISF = Equilibrium intake surface fuel multiplier.



       -  TEISF =  Load Normalizing function; used for table

                  lookup. Input = LOAD and Output = Normalized

                  load.

                   X-input = Normalized ALPHA * ACT + (1-ALPHA)

                             * ECT = FN022A

                   Y-input = Normalized Load = FN071.



       -  TFCDED = Percentage deadband around Equilibrium Intake Surface

                   Fuel to turn off transient fuel.









                                         6-62


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





       -  TFCISW = Transient fuel compensation initialization

                   switch.



       -  TFCTM = Time delay after start before enabling

                  Transient Fuel compensation.



       -  TFSMN = Maximum RPM deadband above Idle RPM to disable

                  Transient Fuel during Dashpot Mode, RPM.







      OUTPUTS



      Registers:



       -  AISF = Actual Intake Surface Fuel.



       -  AEFTRFF = The upper word of the sum of (AEFUEL/2) and (EFTRFF/2).



       -  EFTR = Equilibrium Fuel Transfer Rate during the 

                 previous program pass.



       -  EFTRFF = Transient fuel flow in LB/MIN.



       -  EFTRFFL = The lower word of the sum of (AEFUEL/2) and (EFTRFF/2).



      Bit Flags:



       -  EFFLG1 = Equilibrium Fuel Flag. This flag controls

                   the initialization of AISF.





























































                                         6-63


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





                   TRANSIENT FUEL COMPENSATION STRATEGY CONTROL LOGIC









      CRANK mode ---------------|

      (CRKFLG = 1)              |

                                |

      UNDERSPEED mode ----------|OR -----| DO NOT RUN TRANSIENT

      (UNDSP = 1)               |        | FUEL COMPENSATION

                                |        | EFFLG1 = 0 (CLEAR)

      ATMR1 < TFCTM ------------|        | EFTR = 0

                                |        |

                                         | --- ELSE ---

                                         |

      EFFLG1 = 0 ---------------|        |

                                |        |

      RUN mode -----------------|AND ----| DO NOT RUN TRANSIENT

      (CRKFLG = 0, UNDSP = 0)   |        | FUEL COMPENSATION

                                |        | INITIALIZE

      TFCISW = 1 ---------------|        | AISF = MTEISF 

       (assume wet manifold              |       * FN1321(TEISF)

        at startup)                      | EFFLG1 = 1 (SET)

                                         |

                                         |

                                         | --- ELSE ---

                                         |

                                         |

      EFFLG1 = 0 ---------------|        |

                                |        |

      RUN mode -----------------|AND ----| DO NOT RUN TRANSIENT

                                |        | INITIALIZE

      TFCISW = 0 ---------------|        | AISF = 0

       (assume dry manifold              | EFFLG1 = 1 (SET)

        at startup)                      |

                                         |

                                         | --- ELSE ---

      RUN Mode -----------------|        |

                                |        |

      DFSFLG = 1 ---------------|AND ----| DO NOT RUN TRANSIENT

       (in DFSO)                |        | FUEL COMPENSATION

                                |        | INITIALIZE AISF =

      EFFLG1 = 1 ---------------|        | MTEISF*FN1321(TEISF) * AISFM

                                         | EFFLG1 = 1 (SET)

                                         | EFTR = 0

                                         |

                                         |

      EFFLG1 = 1 ---------------|        |

                                |AND ----| RUN TRANSIENT

      RUN mode -----------------|        | FUEL COMPENSATION

      (CRKFLG = 0, UNDSP = 0)            | DO ACTUAL INTAKE SURFACE

                                         | FUEL CALCULATIONS

                                         | DO EQUILIBRIUM FUEL

                                         | TRANSFER CALCULATIONS













                                         6-64


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





                         EQUILIBRIUM FUEL TRANSFER CALCULATIONS





      These calculations are performed during each program pass  (background  loop)

      while  transient  fuel compensation is enabled.  The general form of the rate

      calculation is:





                  EFTR = KFT * [(EISF * MTEISF - AISF)/(EFTC * MTEFTC)]





      EISF and EFTC are defined as follows:  (NOTE:  EISF and EFTC may not be saved

      as  dedicated  registers.   They  appear  here  as  an  aid  in  showing  the

      calculations.)





      AISF -- Actual Intake Surface Fuel Calculation.



      This calculation is performed during  each  program  pass  (background  loop)

      while  TFC  is  enabled.   AISF is a time integration of the fuel flow to and

      from the manifold puddle.





                              AISF = AISF + (EFTR * DELTIM)













      EFTR - TRANSIENT FUEL FLOW CALCULATION/MULTIPLIER





      REFFLG = 1 ------------------------|

       (in FAM region)                   |

                                         |

      ISCFLG > 0 ------------------------|

       (RPM control or lockout)          |

                                         |

      ISCFLG = -1 -----------|           |

                             |AND -------|

      N - DSDRPM < TFSMN ----|           |

       (low RPM decel)                   |

                                         |

      MTEISF * FN1321 = AISF ------------|OR ----| EFTRFF = 0

       (values are equal or 0)           |       | (stop adding transient

                                         |       |  fuel to pulsewidth,    

      |(MTEISF * FN1321 - AISF)/         |       |  continue AISF update)

       (MTEISF * FN1321)| <OR= TFCDED ---|       |

       (percentage difference is small)          | --- ELSE ---

                                                 |

      MTEISF * FN1321 < AISF --------------------| EFTRFF=EFTR*60*MEFTRD

       (decrease puddle)                         | (use decel multiplier)

                                                 |

                                                 | --- ELSE ---

                                                 |

                                                 | EFTRFF=EFTR*60*MEFTRA

                                                 | (use accel multiplier)





                                         6-65


                        FUEL STRATEGY - TRANSIENT FUEL - GUAA

                              Copyright 1989 FoMoCo





      Determine total fuel requirements due to manifold filling (AEFUEL) and

      wall wetting (EFTRFF) and provide that value to the fuel pulsewidth

      equation. The value is divided by two assuming equal distribution between

      banks.





                        AEFTRFF,EFTRFFL = (AEFUEL/2) + (EFTRFF/2)











































































































                                         6-66


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





                              DECEL FUEL SHUT OFF STRATEGY





      The Fuel Shutoff strategy is divided into two sub-strategies:



          1) Decel Fuel Lean Out.



          2) Manual Transmission Shift Fuel Lean Out.





      The Decel Fuel Lean Out strategy reduces the fuel flow during  specific  load

      and  RPM  condition  only  during  Closed  Throttle  Mode.   The  FUELPWs are

      multiplied by FN374 during a decel until the RPM is within the  band  created

      by  [DSFRPM  - DSFRPH] of the idle RPM range.  Typically, FN374 is calibrated

      to provide a lean limit air/fuel ratio during the decel RPM range.



      The Manual Transmission Shift Fuel Lean out strategy reduces (or  eliminates)

      fuel  flow  at  the  beginning of the shift, until the RPM is within the band

      created by [SHFRPM - SHFHYS] of the idle speed (or until the transmission has

      been  in  Neutral  for  DSTM2 seconds.  Typically, FN374 can be calibrated to

      zero during the range of shift RPMs.















































































                                         6-67


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  APT = If = -1, Closed Throttle.



       -  ATMR1 = Time since start, sec.



       -  CTTMR = Time since entering Closed throttle mode, secs.  CTTMR is used to

          delay Decel Fuel Shutoff (DFSO).



       -  DLTMR = Decel fuel low load timer, sec.



       -  DSDRPM = Desired engine speed.



       -  ECT = Engine Coolant Temperature, deg F.



       -  LOAD = Normalized ARCHG divided by SARCHG.



       -  N = Engine speed, RPM.



       -  NACTMR = Not at Closed Throttle timer, sec.



       -  NDDTIM = Time since Transmission shift, sec.  In the DFSO Strategy,  this

          timer  is  used  to  delay  Decel Fuel Shutoff if a vehicle with a manual

          transmission shifts into Neutral during the decel.



       -  PPCTR = PIP counter for Fuel Ramp, unitless.



       -  RATCH = Warm curb Idle Throttle Position, counts.



       -  TP = Throttle position, counts.



       -  VSBAR = Vehicle speed, MPH.



      Bit Flags:



       -  AFMFLG = Flag indicating that ACT sensor is in/out of range.



       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.



       -  DMFLG = Decel fuel low load timer enabled flag, 1 = Count up timer.



       -  EFMFLG = Flag indicating that EVP EGR sensor has failed.



       -  MFAFLG = Managed Fuel/Air state flag.



       -  MFMFLG = Flag indicating that MAF sensor has failed.



       -  NDSFLG = Neutral/Drive Flag, 1 = Drive.



       -  TFMFLG = Flag indicating that TP sensor has failed.











                                         6-68


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





      Calibration Constants:



       -  AGB = Decel fuel shutoff time delay, sec.



       -  CTDFSO = Minimum time delay after  entering  Closed  Throttle  to  enable

          DFSO, sec.



       -  CTEDSO = Decel Fuel Shutoff time delay during extended decels.  This time

          delay  allows  DFSO during extended decels (ie., down mountains), even if

          times at Part Throttle are very short (light Tip-ins), sec.



       -  DFLDH = Decel Fuel low load hysteresis.



       -  DFLDL = Decel Fuel low load shut off.



       -  DFLOD = Maximum load to enable decel Fuel Shut-off.



       -  DFLODH = Hysteresis for DFLOD.



       -  DFSECT = Minimum ECT to allow Decel Fuel Shutoff.



       -  DFSVS = Minimum VSBAR for Decel fuel shut off, mph.



       -  DFSVSH = Hysteresis for DFSVS.



       -  DLDFSO = Decel Fuel low load shut off time, sec.



       -  DMIN = Minimum FN379 clip during Fuel Ramp Back, unitless.



       -  DSFRPH = Hysteresis for DSFRPM, unitless.



       -  DSFRPM = Minimum RPM for Decel fuel shutoff, RPM.



       -  DSFTM = Minimum Time at Part Throttle  (or  WOT)  to  permit  Decel  Fuel

          Shutoff  AFTER CTDFSO seconds, sec.  This time requirement prevents decel

          fuel shutoff when parking the vehicle.



       -  DSTM1 = Maximum time that Decel Fuel Shutoff is enabled  if  decelerating

          in Neutral, sec.



       -  DSTM2  =  Maximum  time  that  DFSO  logic  is  enabled   during   manual

          transmission shifts, secs.



       -  FN374 = Open Loop Fuel multiplier, RPM.



       -  PIPNUM = Number of PIPS to remain in Open Loop Fuel after DFSO.  Prevents

          LAMBSE from ramping rich due to normal transport delay time.  Set to 1 to

          calibrate out.



       -  PTDFSW = Part Throttle Decel Fuel shut off switch; 1 = Do  Part  Throttle

          DFSO, 0 = Do Closed Throttle DFSO.



       -  SHFHYS = Hysteresis term, rev/min.  If the RPM  drops  this  amount,  the

          normal Fuel Strategy operates.



       -  SHFRPM = Minimum RPM at which DFSO  logic  is  enabled,  Rev/min.   (This

          corresponds to the RPMs during the shift.)







                                         6-69


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





          TRLOAD = Transmission Load switch.

                   0 = Manual Transmission, no clutch or gerar switches,

                       forced neutral state (NDSFLG = 0).

                   1 = Manual Transmission, no clutch or gear switch.

                   2 = Manual Transmission, one clutch or gear switch.

                   3 = Manual Transmission, both clutch and gear switches.

                   4 = Auto Transmission, non-electronic, neutral drive switch.

                   5 = Auto Transmission, non-electronic, neutral pressure switch,

                       (AXOD).

                   6 = Auto Transmission, electronic, PRNDL sensor - park, reverse,

                       neutral, overdrive, manual 1, manual 2.







      OUTPUTS



      Registers:



       -  DLTMR = Decel fuel low load timer, sec.



       -  PPCTR = PIP counter for Fuel Ramp, unitless.



      Bit Flags:



       -  DFSFLG = Indicates DECEL Fuel shutoff.



       -  DMFLG = Decel fuel low load timer enabled flag, 1 = Count up timer.



































































                                         6-70


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





                                DECEL FUEL SHUT OFF LOGIC





      "A" ---------|

                   |OR ------------------------------|

      "B" ---------|                                 |

                   |                                 |AND -| 'D'=FN374

      "C" ---------|                                 |     | PPCTR = 1

                                                     |     |

                                                     |     |

      N - DSDRPM > DSFRPM -------------|S Q----------|     |

                                       |             |     |

      N - DSDRPM < DSFRPM - DSFRPH ----|C            |     |

       (DECEL RPM)                                   |     | --- ELSE ---

                                                     |     |

                                                     |     |

      ATMR1 > AGB --------------------|              |     |

       (START UP DELAYS)              |OR -----------|     |

                                      |              |     |

      ECT >OR= DFSECT ----------------|              |     |

                                                     |     |

      MFAFLG = 0 ------------------------------------|     |

       (NOT MANAGED FUEL AIR)                        |     |

                                                     |     | Driver wants

      RUNNING = 0 -----------------------------------|     | to accelerate

       (NOT IN VIP)                                  |     | 'D' = 1.0

                                                     |     | Increment PPCTR

      AFMFLG = 0 ------------------------------------|     | once per PIP

                                                     |     | period

      CFMFLG = 0 ------------------------------------|     | Clip  PIPNUM

                                                     |     

      TFMFLG = 0 ------------------------------------|

                                                     |

      EFMFLG = 0 ------------------------------------|

                                                     |

      MFMFLG = 0 ------------------------------------|







           When fuel is shut off  (FN374)  a  flag  is  set  -  DFSFLG  to  disable

      Transient fuel.  See Transient Fuel Compensation Logic for details.



      FN374 = 0 -----------------| DFSFLG = 1

                                 |

                                 | --- ELSE ---

                                 |

                                 | DFSFLG = 0



























                                         6-71


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





                                        "A" LOGIC





       (Normal Decel)

      LOAD < DFLOD ----------------------|S Q -------|

                                         |           |

      LOAD > DFLOD + DFLODH -------------|C          |

                                                     |

      NDSFLG = 1 ---------|                          |

       (Trans. in gear)   |OR -----------|S Q -------|

                          |              |           |

      TRLOAD < 2 ---------|              |           |

       (ignore N/D input)                |           |

                                         |           |

      TRLOAD >OR= 4 ------|              |           |

                          |OR -|         |           |

      NDDTIM >OR= DSTM1 --|    |         |           |

                               |AND------|C          |AND ----| "A"

      NDSFLG = 0 --------------|                     |

                                                     |

      CTTMR > CTDFSO --------------------|           |

                                         |AND --|    |

      APT = -1 --------------------------|      |    |

                                         |      |    |

      CTTMR > CTEDSO ---------------|    |      |    |

       (LONG DECEL)                 |OR -|      |    |

                                    |           |    |

      NACTMR > DSFTM ----------|S Q-|           |    |

       (CRUISE)                |                |OR -|

                               |                |    |

      0 < NACTMR <OR= DSFTM ---|C               |    |

       (SHORT TIP IN)                           |    |

                                                |    |

      PTDFSW = 1 -------------------------------|    |

                                                     |

      VSBAR >OR= DFSVS --------|S Q -----------------|

                               |

      VSBAR < DFSVS - DFSVSH --|C













































                                         6-72


                      FUEL STRATEGY - DECEL FUEL SHUT OFF - GUE0

                              Copyright 1989 FoMoCo





                                        "B" LOGIC





         (MANUAL TRANSMISSION SHIFT)



      APT = -1 -------------------------------|

       (Closed Throttle)                      |

                                              |

      TRLOAD <OR= 3 --------------------------|

       (Manual trans.)                        |

                                              |

      NDSFLG = 0 -----------------------------|

                                              |

      NDDTIM < DSTM2 -------------------------|AND -| "B"

                                              |

      N - DSDRPM > SHFRPM ---------------|S Q-|

                                         |

      N - DSDRPM <OR= SHFRPM-SHFHYS -----|C

       (Short RPM)





                                        "C" LOGIC



      DMFLG = 1 --------------------|

       (Decel and Closed Throttle)  |AND ----| "C"

                                    |

      DLTMR < DLDFSO ---------------|

       (Start of Decel)







      CALIBRATION HINTS:



      The use of Decel Fuel Shutoff can aggravate Clunk.   Therefore,  DFSO  should

      occur  only  at low airflow (low MAP) in order to minimize the rate of change

      of Torque.  CTDFSO can be used to delay DFSO.



      FN374 should be calibrated to avoid lean misfires.  Therefore, it  should  be

      either  zero  (Decel Fuel Shutoff) or greater than the lean limit (Decel Fuel

      Lean Out).



      CTEDSO should be greater than CTDFSO to prevent DFSO after Tip-in, Tip-out.



      For MANUAL TRANSMISSIONS:  SHFRPM should be greater than DSFRPM.

































                                         6-73


            FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BASE FUEL FLOW - GUF0

                              Copyright 1989 FoMoCo





                               BASE FUEL FLOW CALCULATIONS





      OVERVIEW





           Using the assumption of equal air flow (AM) between bank 1 and bank 2, a

      calculation  can  be  made  of  the  amount of fuel required by the engine to

      operate at stoichiometry.





      DEFINITIONS



      INPUTS



      Registers:



       -  AM = Air mass flow for the engine (lb/min).



       -  ARCHG = Air charge inducted per intake stroke.  Value is updated once per

          background loop at the time that AM is computed, (lb).



       -  KAMRFn = Fuel correction factor obtained from the  adaptive  fuel  tables

          that use the EGO sensor(s) for input.  KAMRFn = [0.5 + LTMTBn (r,c)]

          where:

                  c = column

                  n = bank number

                  r = row



       -  LAMBSEn = The stoichiometric equivalence value.  (n=bank number).



       -  N = Engine speed in revolutions per minute.



      Calibration Constants:



       -  ENGCYL = The number of cylinders in an engine revolution.

















































                                         6-74


            FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BASE FUEL FLOW - GUF0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  ARCHG_BG = Air charge inducted per intake stroke.  Value is updated  once

          per background loop at the time that base fuel flow is computed.



       -  BASEFFn = The fuel flow for bank (n).  (lb/min).







      The base fuel flow for each bank is:



                 0.5 * AM * KAMRF1

      BASEFF1 =  -----------------

                 14.64 * LAMBSE1



                 0.5 * AM * KAMRF2

      BASEFF2 =  -----------------

                 14.64 * LAMBSE2





      where:



      AM = ARCHG * N * ENGCYL



      and:



      ARCHG_BG = ARCHG after the calculation of BASEFF1 and BASEFF2.































































                                         6-75


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





                                     BACKGROUND FUEL





      OVERVIEW



           The fuel pulsewidth for each bank of the  engine  is  calculated  during

      each  pass  through the background loop.  This calculation consists of a base

      fuel calculation, BASEFFn, that is a determination of the amount of fuel  the

      bank would need to remain at or near stoichiometry during steady state engine

      operation.  Additionally, there is a need to modify  this  value  with  other

      values that reflect the fuel needs of the engine under non-steady conditions.

      Under all operating conditions except CRANK mode the fuel equation is:



                    FUELPWn = D * (BASEFFn + AEFTRFF) * PWCF + FN367



      As one of the controlling elements, the speed limiter  logic  turns  off  the

      fuel  when the engine speed becomes excessively high.  This logic operates as

      an overspeed protection, like a software governor.  This action  reduces  the

      power  output of the engine and causes the speed to drop to a more reasonable

      level.





      DEFINITIONS



      INPUTS



      Registers:



       -  AEFTRFF = The upper word of the sum of (AEFUEL/2) and (EFTRFF/2).



       -  AEFUEL = Rate of acceleration enrichment fuel delivery (lb/min).



       -  APT = At Part Throttle - indicates throttle mode; -1 = closed throttle,

                0 = part throttle, and 1 = wide open throttle.



       -  BASEFFn = Base Fuel Flow associated with "n" EGO.  (n = 1,2) (lb/min).



       -  BP = Barometric Pressure (inches of Mercury).



       -  CRKTMR = Timer indicating time in Crank mode.



       -  D = Deceleration Fuel Shutoff multiplier.



       -  ECT = Engine Coolant Temperature.



       -  EFTRFF = Equilibrium fuel transfer rate for transient  fuel  compensation

          (lb/min).



       -  EFTRFFL = The lower word of the sum of (AEFUEL/2) and (EFTRFF/2).



       -  N = Engine speed in revolution per minute.



       -  VBAT = Battery voltage inferred from IIVPWR, volts.















                                         6-76


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





      Bit Flags:



       -  BFULSW = Force  Background  Fuel  Switch  (1  =  Do  not  calculate  fuel

          pulseswidth in foreground at any time).



       -  CRKFLG = Engine mode flag.  (1 = Crank Mode, 0 = Not in Crank Mode).



       -  FAM_FLG = Indicates that the engine is in the operating  region  where  a

          filter  is being applied to the air mass value to reduce fluctuations and

          that filtered value is to be used in the fuel pulsewidth as a replacement

          for AM.



       -  FOFFLG =  Alternate  injector  fire  enable  flag;  1  =  fire  alternate

          injectors.



       -  HSPFLG = High speed mode flag; 1 = High speed alternate fuel/spark.



       -  IMFMFLG = Instantaneous mass air flow sensor FMEM flag.



       -  MFMFLG = Air Meter failure flag.



       -  NLMT_FLG = Engine Speed Limiter Flag - (1 = limit engine speed by turning

          off the fuel; 0 = normal engine speed).



       -  UNDSP = Run/Underspeed Engine Mode Flag.  (1 = Underspeed/Crank, 0 =  Run

          Mode).



      Calibration Constants:



       -  AHISL = High fuel flow injector slope (lb/sec).



       -  ALOSL = Low fuel flow injector slope (lb/sec).



       -  ENGCYL = Number of cylinders per engine revolution.



       -  FN306(CRKTMR) = Cranking fuel pulsewidth as a function of time in crank.



       -  FN348(ECT) = Crank fuel pulsewidth as a function of ECT.



       -  FN367(VBAT) = Injector offset as a function of VBAT.



       -  FN387(ECT) = Fuel pulsewidth muliplier as a function of ECT.



       -  FN389(VBAT) = Dual slope injector breakpoint.  Input =  VBAT,  volts  and

          Output = lb/rev.



       -  INJOUT = Number of injectors fired by each output port.



       -  MTCF = Milliseconds to clock ticks conversion factor.



       -  NLMT = Overspeed RPM.



       -  NLMTH = Hysteresis for overspeed RPM.



       -  NUMOUT = Number of injector output ports.



       -  PIPOUT = Number of PIP's between injector outputs on each injector port.







                                         6-77


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  BGFULn = Background Fuel Pulsewidth for bank "n" (n = 1,2).



       -  FFULCn = The value that is added in the foreground fuel pulsewidth.



       -  FFULMn = The value that is multiplied by the ratio of air charges in  the

          foreground fuel pulsewidth equation for bank "n".



       -  FUELFLOWn = Desired fuel flow for the "n" bank (n = 1,2).



       -  LBMF_INJn = The pounds mass of fuel per injection that is calculated  for

          summing to be sent out on the Data Output Link (DOL).



       -  PWCF = Computed value to convert amount of fuel for the engine to  amount

          of fuel to be delivered by each injector.



       -  PWOFF = Injector pulsewidth offset (clock ticks).



       -  PWOFS = Injector pulsewidth offset (milliseconds).



      Bit Flag:



       -  FFULFLG = Foreground  Fuel  Flag  -  (1  =  compute  fuel  pulsewidth  in

          foreground  using  latest  integrated  air  charge,  0  =  use background

          calculated fuel pulsewidth.

































































                                         6-78


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





   Calculate the value of the pulsewidth conversion factor (PWCF):





                  1         2 * PIPOUT

      PWCF =  ---------- * ---------------

              N * ENGCYL   NUMOUT * INJOUT







   Determine the value of the underspeed and deceleration fuel multipliers:





      UNSPD = 1 -----| fuel_a = FN387(ECT) * D

                     |

                     | --- ELSE ---

                     |

                     | fuel_a = D







   Determine the intersection point, in fuelflow, of the two slopes of the injector

      flow vs time transfer functions.





                              fuel_f = FN389(VBAT) * N / 2











      NOTE: Lower case designators indicate temporary registers that are

            not accessible. (i.e. fuel_a)

























































                                         6-79


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





   Calculate the crank fuel and dechoke pulsewidth,  and  the  underspeed/run  fuel

      flow amounts:





      CRKFLG = 1 ----|

                     |AND ------------| BGFUL1 = BGFUL2 = 0

      APT = 1 -------|                |

      (Wide Open                      |

       Throttle)                      |

                                      |

                                      | --- ELSE ---

                                      |

      CRKFLG = 1 ---------------------| BGFUL1 = FN348 * (BP/29.875) * 

                                      |                   FN306(CRKTMR)

                                      |

                                      | BGFUL2 = BGFUL1

                                      |

                                      | --- ELSE ---

                                      |

      NLMT_FLG = 1 -------------------| BGFUL1 = 0

                                      | BGFUL2 = 0 

                                      |

                                      | --- ELSE ---

                                      |

                                      | FUELFLOW1 = fuel_a * (BASEFF1 + AEFTRFF)

                                      |

                                      | FUELFLOW2 = fuel_a * (BASEFF2 + AEFTRFF)



































































                                         6-80


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





   Determine on which slope the  injector  is  operating  and  calculate  the  fuel

      pulsewidth  (BGFULn)  and  foreground  fuel  intermediate  values (FFULMn and

      FFULCn).





      FUELFLOW1 <OR= 

                fuel_f -| BGFUL1 = FUELFLOW1 / ALOSL * PWCF

                        |

                        | FFULM1 = fuel_a * BASEFF1 / ALOSL * PWCF

                        |

                        | FFULC1 = fuel_a * AEFTRFF / ALOSL * PWCF

                        |

                        | --- ELSE ---

                        |

                        |          { fuel_f   FUELFLOW1   fuel_f }

                        | BGFUL1 = { ------ + --------- - ------ } * PWCF

                        |          { ALOSL     AHISL      AHISL  }

                        |

                        | FFULM1 = (fuel_a * BASEFF1 / AHISL) * PWCF

                        |

                        |          {fuel_f   fuel_f  (fuel_a * AEFTRFF)}

                        | FFULC1 = {------ - ------ + ---------------- } * PWCF

                        |          {ALOSL    AHISL         AHISL       }





      FUELFLOW2 <OR= 

                fuel_f -| BGFUL2 = FUELFLOW2 / ALOSL * PWCF

                        |

                        | FFULM2 = fuel_a * BASEFF2 / ALOSL * PWCF

                        |

                        | FFULC2 = fuel_a * AEFTRFF / ALOSL * PWCF

                        |

                        | --- ELSE ---

                        |

                        |          { fuel_f   FUELFLOW2   fuel_f }

                        | BGFUL2 = { ------ + --------- - ------ } * PWCF

                        |          { ALOSL     AHISL       AHISL }

                        |

                        | FFULM2 = (fuel_a * BASEFF2 / AHISL) * PWCF

                        |

                        |          {fuel_f   fuel_f  (fuel_a * AEFTRFF)}

                        | FFULC2 = {------ - ------ + ---------------- } * PWCF

                        |          {ALOSL    AHISL         AHISL       }



































                                         6-81


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, BACKGROUND FUEL - GUF1

                              Copyright 1989 FoMoCo





   Compute the pounds mass per injector for use by the Data Output Link (DOL):





      CRKFLG = 1 ---------| LBMF_INJ1 = ALOSL * BGFUL1

                          | LBMF_INJ2 = ALOSL * BGFUL2

                          |

                          | --- ELSE ---

                          |

                          | LBMF_INJ1 = FUELFLOW1 * 2 / (ENGCYL * N)

                          | LBMF_INJ2 = FUELFLOW2 * 2 / (ENGCYL * N)





   Determine the state of the flag which allows updates to  fuel  pulsewidth  using

      the latest computed air charge in foreground:





      BFULSW = 1 ------------------------|

                                         |

      IMFMFLG = 1 -----------------------|

                                         |

      MFMFLG = 1 ------------------------|

                                         |

      CRKFLG = 1 ------------------------|

                                         |

      FAM_FLG = 1 -----------------------|

                                         |OR ------| FFULFLG = 0

      NLMT_FLG --------------------------|         |

                                         |         | --- ELSE ---

      FOFFLG = 1 ------------------------|         |

                                         |         | FFULFLG = 1

      HSPFLG = 1 ------------------------|





      Calculate the injector pulsewidth offset:



                       PWOFF = PWOFS * MTCF = [FN367(VBAT)] * MTCF

















































                                         6-82


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, FOREGROUND FUEL - GUF0

                              Copyright 1989 FoMoCo





                                     FOREGROUND FUEL





      OVERVIEW



           This module is designed to calculate an updated  fuel  pulsewidth  using

      the latest air charge value upon the completion of the air charge computation

      during the PIP interrupt.  Included within this module is a a check for a 10%

      change  in computed pulsewidth, a determination of whether to update the fuel

      pulsewidth, and a new request for a new computation of the injector timing.





      DEFINITIONS



      INPUTS



      Registers:



       -  ARCHFG = The integrated value of air  charge  as  computed  at  each  PIP

          interrupt (lb).



       -  ARCHG_BG = The  value  of  air  charge  that  was  used  to  compute  the

          intermediate values for the foreground fuel calculation and additionally,

          the air charge value that is divided into the latest air charge to  scale

          the new fuel pulsewidth (lb).



       -  BGFULn = The fuel pulsewidth that is calculated in  background  for  each

          bank.  (n = 1,2).



       -  DT12S = The period of time between two adjacent rising edges of PIP.



       -  FFULCn = The  computed  value  that  is  added  in  the  foreground  fuel

          pulsewidth calculation.



       -  FFULMn = The computed value that is multiplied by  the  scaled  value  of

          ARCHI  divided  by ARCHG_BG in the foreground fuel pulsewidth calculation

          for each bank.



       -  PWOFF = The offset in the transfer function for injector  fuel  delivered

          versus time in clockticks.



      Bit Flag:



       -  FFULFLG = Foreground Fuel Flag (1 = compute fuel pulsewidth in foreground

          using  the latest integrated air charge, 0 = use background computed fuel

          pulsewidth).



      Calibration Constants:



       -  PIPOUT = The number of PIP  periods  between  the  start  of  consecutive

          injections.



      Constant:



       -  STCF = Seconds to clock ticks conversion factor.











                                         6-83


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, FOREGROUND FUEL - GUF0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Register:



       -  FUELPWn = The injector pulsewidth in clock ticks (n = 1,2).



      Bit Flag:



       -  CHANGE_FUELPW = A flag that indicates that  the  desired  pulsewidth  for

          in-progress  fuel  injections  needs  to  be  modified because the latest

          calculated value for that injection has changed by more than 10 percent.



































































































                                         6-84


           FUEL CONTROL STRATEGY - FUEL PULSEWIDTH, FOREGROUND FUEL - GUF0

                              Copyright 1989 FoMoCo





   Following the completion of the ARCHFG calculation in foreground,  determine  if

      the  foreground  fuel  flag  (FFULFLG)  is set, and if so, calculate the fuel

      pulsewidth at that time, otherwise use the background computed pulsewidth.





      PROCESS





      FFULFLG = 1 --------| fuelpw1 = [(FFULM1 * ARCHFG) / ARCHG_BG] + FFULC1

                          | fuelpw2 = [(FFULM2 * ARCHFG) / ARCHG_BG] + FFULC2

                          |

                          | --- ELSE ---

                          |

                          | fuelpw1 = BGFUL1

                          | fuelpw2 = BGFUL2



      then convert into clockticks:



      FUELPW1 (ticks) = fuelpw1 * STCF

      FUELPW2 (ticks) = fuelpw2 * STCF





      Determine if the fuel requested is  greater  than  the  amount  that  can  be

      delivered  when  the  injectors  are  on  full time, and if so, clip the fuel

      pulsewidth to a full-on pulsewidth.





      DT12S < 65536 ticks ------|

                                |AND ---| fgbeta = PIPOUT - 0.03125

      (FUELPWn / DT12S)         |       | FUELPWn = fgbeta * DT12S

       >OR= PIPOUT -------------|       | 





      Determine if the latest pulsewidth calculated for each bank is  a  change  of

      more  than  10%  from  the previous pulsewidth for that bank.  If so, set the

      flag CHANGE_FUELPW, which will cause any injection in progress for that  bank

      to be altered to reflect the latest calculated pulsewidth.



        /                             \

       | |(new FUELPWn - old FUELPWn)| |

       | ----------------------------- | > 0.010 ----| CHANGE_FUELPW = 1

       |         old FUELPWn           |

        \                             /



































                                         6-85


                    FUEL CONTROL STRATEGY - FUEL PULSEWIDTH - GXX0

                              Copyright 1989 FoMoCo





                           DUAL SLOPE BREAKPOINT DETERMINATION





                                  FN389 CALIBRATION





      1.  Plot fuel flow per pulsewidth as a function of

          Pulsewidth at various battery voltage.

          (see Fuel Mass versus Fuel Pulsewidth figure on

           next page)



      2.  Make a table of fuel flow breakpoints, at which

          the injector slope changes.



          NOTE:  The breakpoint is the FUELFLOW -- not

                 the pulsewidth.



      3.  Convert the breakpoints into FN389-y parameters.





      FN389 y-value = BREAKPOINT * NUMOUT*INJOUT * ENGCYL

                                   -------------

                                     PIPOUT





      The BREAKPOINT is equal to the fuel flow at which the injector slope  changes

      for the corresponding battery voltage, lb/pulsewidth.





      For example, the injectors used on a 5.0L  engine  have  two  slopes.   These

      slopes intercept at 3.0 mg/pw at VBAT = 13.5V.  Thus,



      FN389 = 3.0     lb      8*1

              ----- * ----- * ------ * 4 = 2.64*10E-5 lb/rev.

              1000    454g      8





      NOTE: FN367 breakpoints may require recalibration.













































                                         6-86


                    FUEL CONTROL STRATEGY - FUEL PULSEWIDTH - GXX0

                              Copyright 1989 FoMoCo





                       FUEL MASS VERSUS FUEL PULSEWIDTH DIAGRAM





                |

                |

               6|

                |                                 AHISL-->  *

                |                                        .         .

                |                                     .          .

                |                                  .           .

             4.5|                               .             .

      Fuel      |                              .            .

      Mass      |                            .            .

                |                           .           .

      Mg/Pulse  |                         .           .

               3|          FN389(VBAT1) .          .

                |                |     .         .

      (f(x))    |                V  .         .

                |     ALOSL -->  *          .

                |              .          * <--FN389(VBAT2)

             1.5|            .          .

                |           .         .  

                |          .        .

                |         .       .

                |        .       .

                |      .       .                         

               0 -----|------|-------------|------------|-----------|--

                 .5   |     1.5           2.5          3.5         4.5

                      |

                      V

                    FN367(VBAT1)      FUEL PULSEWIDTH (msec) (x)



























































                                         6-87


                         FUEL STRATEGY - SPEED LIMITER - GUE0

                              Copyright 1989 FoMoCo





                                      SPEED LIMITER





      The speed limiter logic protects vehicle function in three stages,  depending

      upon the engine speed and vehicle speed (inferred from AM).  These stages are

      shown below.



          1) Stage One:  Reduces the engine's power output in a gradual  manner  by

          enriching  the fuel and retarding the spark (See Open Loop Fuel and Spark

          Strategies).



          2) Stage Two:  Further reduces the engine output by disabling the outputs

          to  one-half  of  the injector ports.  This action will occur only if the

          fuel and spark strategy in Stage One is ineffective.



          3) Stage Three:  Turns off  the  fuel  if  the  engine  RPM  exceeds  its

          "red-line" limit.





      NOTE:  NLM_SH should approximate the engine's "red line" limit.

















































































                                         6-88


                         FUEL STRATEGY - SPEED LIMITER - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS



      INPUTS



      Registers:



       -  N = Engine RPM



       -  VSBAR = Filtered Vehicle Speed.



      Bit Flag:



       -  FOFFLG = Alternate INJ fire enable flag.



      Calibration Constants:



       -  HVS_CL = Disable Stage 1 Speed Limiter.



       -  HVS_SH = Enable Stage 1 Speed Limiter.



       -  VVS_CL = Disable Stage 2 Speed Limiter.



       -  VVS_SH = Enable Stage 2 Speed Limiter.



       -  NLM_SH = Overspeed RPM, sets stage 3 fuel limiter.



       -  NLM_CL = RPM to clear Stage 3 Fuel Limiter, RPM.



       -  VSTYPE = Vehicle speed sensor/Cruise control H/W present switch  0  =  No

          integrated cruise control and no Vehicle Speed Sensor.  1 = Vehicle speed

          sensor present (VSS) 2 = Integrated  cruise  control  and  Vehicle  Speed

          Sensor (VSS+VSC)







      OUTPUTS



      Bit Flags:



       -  FOFFLG = Alternate INJ fire enable flag.



       -  HSPFLG = High Speed Mode Flag, = 1  means  High  Speed  Alt.   Fuel/Spark

          Speed Limit.



       -  NLMT_FLG = Overspeed limiter flag, stage 3.































                                         6-89


                         FUEL STRATEGY - SPEED LIMITER - GUE0

                              Copyright 1989 FoMoCo





                                EXAMPLE OF SPEED LIMITER



                                       NORMAL FUEL







             ----                                 ----

            |    |                               |    |

      INJ-1 |    |                               |    |

                  -------------------------------      ---------------



                  ----                                  ----

                 |    |                                |    |

                 |    |                                |    |

      INJ-5 -----      --------------------------------      ---------



                       ----                                   ----

                      |    |                                 |    |

                      |    |                                 |    |

      INJ-4 ----------      ---------------------------------      ----



                            ----

                           |    |

                           |    |

      INJ-2 ---------------      --------------------------------------



       .                       .

       .                       .

       .                       .



                                             ----     

                                            |    |    

                                            |    |    

      INJ-8 --------------------------------      ----------------------





















































                                         6-90


                         FUEL STRATEGY - SPEED LIMITER - GUE0

                              Copyright 1989 FoMoCo





                                   SPEED LIMITED FUEL







             ----                                 ----

            |    |                               |    |

      INJ-1 |    |                               |    |

                  -------------------------------      ---------------



      INJ-5 ----------------------------------------------------------



                       ----                                   ----

                      |    |                                 |    |

                      |    |                                 |    |

      INJ-4 ----------      ---------------------------------      ----



      INJ-2 -----------------------------------------------------------



       .                       .

       .                       .

       .                       .



                                        ---- 

                                       |    |

                                       |    |

      INJ-7 ---------------------------      --------------------------



      INJ-8 -----------------------------------------------------------

































































                                         6-91


                         FUEL STRATEGY - SPEED LIMITER - GUE0

                              Copyright 1989 FoMoCo





                             ALTERNATE FUEL/SPARK LOGIC AND

                             ALTERNATE INJECTOR FIRING LOGIC

                             (Vehicle Overspeed Protection)





      N > NLM_SH --------------------|S   Q ---------| STAGE 3

                                     |               | Set NLMT_FLG

      N < NLM_CL --------------------|C





      VSTYPE = 0 ------------------------------------| HSPFLG = 0

       (No VSS sensor)                               | FOFFLG = 0

                                                     |

                                                     | --- ELSE ---

                                                     | 

      VSBAR > VVS_SH -----------|S  Q ---------------| STAGE 2

       (Very High Speed)        |                    | Fire Alternate

                                |                    | Injectors using

      VSBAR < VVS_CL -----------|C                   | Normal Fuel strategy

                                                     | FOFFLG = 1

                                                     | 

                                                     | --- ELSE ---

                                                     |

      VSBAR > HVS_SH -----|                          | 

       (High Speed)       |OR --|S  Q ---------------| STAGE 1

                          |     |                    | Do Fuel Enrichment

      FOFFLG = 1 ---------|     |                    | and Spark Retard

                                |                    | HSPFLG = 1

      VSBAR < HVS_CL -----------|C                   | FOFFLG = 0

                                                     |

                                                     | --- ELSE ---

                                                     |

                                                     | HSPFLG = 0























































                                         6-92


              FUEL CONTROL STRATEGY - INJECTOR TIMING, BACKGROUND - GUAA

                              Copyright 1989 FoMoCo





                                BACKGROUND CALCULATION

                                   INJECTOR TIMING



      Injector timing is the delay before each injector output is fired.  The delay

      is  taken from TDC of the reference PIP signal for each injector output.  The

      units for injector timing are absolute engine crank degrees.   The  range  is

      0 degrees TDC to 720 degrees ATDC with 4 degree resolution.



      Either edge (on or off) of the injector pulse can be timed.  The  calibration

      switch INJREF defines the reference edge for injector timing.



          INJREF = 0, Use start of fuel pulse.



          INJREF = 1, Use end of fuel pulse.



      Regardless of which edge is used, the injector delay is used only to start  a

      fuel pulse.  Once started, pulsewidth accuracy has top priority.



      When the system is  not  in  sync  (SYNFLG  =  0),  the  injector  timing  is

      coincident  with  the relevant PIP signal.  The injector outputs are fired in

      sequence after receiving the  rising  edge  of  the  reference  PIP  signals.

      Actual  timing  will  be  the result of the random link between signature PIP

      (cylinder #1) and #1 injector output.



      When the system is in sync (SYNFLG = 1), injector timing is  calculated  from

      the following equation:





      FUEL_IN_SYNC = 0 --------------| Signature PIP is recognized

                                     |  but fuel timing has not

                                     |  yet SYNC'ed. INJDLY is set

                                     |  by the EOS

                                     |

      DNDSUP = 0 -----------|        | --- ELSE ---

                            |        |

      CINTSW = 1 -----------|AND ----| Neutral Timing

                            |        | INJDLY = 

      "A" ------------------|        |  UROLAV (CINTV,TCINJD)

                                     |

                                     | --- ELSE ---

      IDLFLG = 1 -----------|        |

                            |AND ----| Idle Timing (in drive)

      CIDRSW = 1 -----------|        | INJDLY = 

                                     |  UROLAV (MIDTV,TCINJD)

                                     |

                                     | --- ELSE ---

                                     |

      MFAFLG = 1 --------------------| MFA Mode Injector Timing

                                     | INJDLY =

                                     |  UROLAV (MINTV,TCINJD)

                                     |

                                     | --- ELSE ---

                                     |

                                     | temp = IDKMUL * FN1315 + IDKADD

                                     | INJDLY = UROLAV (temp,TCINJD)











                                         6-93


              FUEL CONTROL STRATEGY - INJECTOR TIMING, BACKGROUND - GUAA

                              Copyright 1989 FoMoCo





                  STARTUP_DELAY LOGIC FOR FIXED IDLE INJECTOR TIMING





      TCSTRT >OR= CTHIGH -------------|

                                      |AND --|

      ATMR1 >OR= NITMR3 --------------|      |

                                             |

      CTLOW < TCSTRT < CTHIGH --------|      |

                                      |AND --|OR --| "A"

      ATMR1 >OR= NITMR2 ------|       |      |

                              |AND ---|      |

      ATMR2 >OR= NITMR5 ------|              |

                                             |

      TCSTRT <OR= CTLOW --------------|      |

                                      |AND --|

      ATMR1 >OR= NITMR1 ------|       |

                              |AND ---|

      ATMR2 >OR= NITMR4 ------|





















































































                                         6-94


              FUEL CONTROL STRATEGY - INJECTOR TIMING, FOREGROUND - GUAA

                              Copyright 1989 FoMoCo





                               FOREGROUND INJECTOR TIMING



      OVERVIEW





           Each time a new fuel pulse start time is calculated and the  delay  from

      the  current PIP edge is between 0.5 and 1.5 PIP periods, a request for a new

      delay calculation is requested.



      DEFINITIONS



      INPUTS



      Registers:



       -  INJDLY = Delay in degrees from the reference PIP to the  referenced  edge

          in the fuel pulse.



       -  TOTAL_DELAYn = Delay in percent of PIP period from the reference  PIP  to

          the starting edge of the fuel pulse.



      Calibration Constants:



       -  DEGPIP = Engine degrees per PIP period.



       -  INJREF = Indicates which edge of the fuel pulse is the reference edge for

          fuel timing, INJDLY.  (0 = start edge).



       -  NUMCYL = Number of cylinders in the engine.





      OUTPUTS



      Register:



       -  TOTAL_DELAYn = Same as above.

















































                                         6-95


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





      NOTES:



      1.  The change in injector timing between  consecutive  injector  firings  is

      limited  to  a  maximum  of  45 degrees.   This has the effect of walking the

      injector timing for large timing changes.



      2.  The final value of injector delay is limited to the  range  0 degrees  to

      720 degrees.   Intermediate  calculations  and  results  are maintained in an

      unlimited fashion.



      3.  The user must set DEGPIP to match his engine.  DEGPIP is  the  number  of

      engine  crank  degrees  per  PIP  interval.   (90  for  8-cylinder,  120  for

      6-cylinder, 180 for 4-cylinder)































































































                                         6-96


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





      DEFINITIONS





       -  RUN = Engine strategy designed to operate normal engine running.



      INPUTS



      Registers:



       -  ACT = Air Charge Temperature, deg F.



       -  ATMR1 = Time since exiting crank mode, sec.



       -  ATMR2 = Time since engine coolant temperature became greater

                  than TEMPFB, sec.



       -  CID = Camshaft Cylinder Number 1 identification

                sensor.



       -  ECT = Engine Coolant Temperature, deg F.



       -  HFDLTA = Latest elapsed time from PIP_UP_EDGE to PIP_DOWN_EDGE,

                   clock ticks.



       -  INJDLY = Injector delay in degrees.



       -  LOAD = Normalized ARCHG divided by SARCHG.



       -  N = Engine speed, RPM.



       -  PIP = Profile Ignition Pickup (RPM sensor)



       -  SYNCTR = Counter which counts PIP signals until its value

                  is equal to NUMCYL (Number of cylinders). SYNCTR is

                  initialized to 0.



       -  TCSTRT = Temperature of engine coolant (ECT) at initial startup, deg F.



      Bit Flags:



       -  FUEL_IN_SYNC = Fuel synchronized with PIP.



       -  IDLFLG = Flag indicating transmission in Drive and at Idle.



       -  MFAFLG = Managed Fuel Air State flag.



       -  NDSFLG = Neutral/Drive flag  1 = Drive.



       -  NEW_IDELAY = Flag controlled by EOS. If set (1) this flag

              triggers injector delay calculation in the background

              loop; if clear (0), no injector delay calculation is done.



       -  SIGPIP = Flag which is set if Signature PIP has occurred;

                   Flag which is cleared if Signature PIP has not.

                   This flag is initialized to 0.



       -  UNDSP = Run/Underspeed flag. (1 = Underspeed (or CRANK),

                  0 = RUN).





                                         6-97


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





       -  WMEGOL = Flag set if WRMEGO set.



      Calibration Constants:



       -  CIDRSW = Calibration switch to enable Special Fuel Timing at

                   Idle, unitless. If set to 1, Enable; 0, Disable.



       -  CINTSW = Cal Switch to enable special fuel timing in

                   Neutral, unitless.



       -  CINTV = Injector Timing Value in Neutral, deg.



       -  CTHIGH = Coolant temperature at Hot start, deg F.



       -  CTLOW = Coolant temperature at Cold start, deg F.



       -  DEGPIP = Engine degrees per PIP period, deg.

                   (90 deg = 8 cyl;120 deg = 6; 180 = 4 cyl)



       -  ENGCYL = Number of PIPs per engine revolution. 2,3 & 4 for

                   4,5, & 6 respectively.



       -  FKINJD = Filter constant for INJDLY, (NOTE: This filter

                   may require treating INJDLY as a word during

                   the actual filtering), unitless.



       -  FN070 = Normalizing function for engine speed N as

                  X-input to FN1315.



       -  FN082 = Load normalizing function; generates table entry

                  point. Input = LOAD and Output = Normalized Load.



       -  FN083 = RPM Normalizing function; generates table entry

                  point. Input = N and Output = Normalized N.



       -  FN085 = Normalizing function for LOAD as Y-input to FN1315.



       -  FN131 = Wide Open Throttle base spark advance versus

               engine speed to provide base WOT Spark advance.

               Input = Engine speed, RPM and Output = spark advance.



       -  FN1315 = An 10x8 table which gives injector delay as 

                   a function of engine speed and load.

                   X-input = FN070 - Normalized Engine Speed (N).

                   Y-input = FN085 - Normalized Load.



       -  HP_CID = A flag indicating cylinder # Identification Hardware

                    is present.



       -  HP_CIDSEL = A flag indicating type of hardware present,

                       0 = Hall Effect; 1 = VRS.



       -  IDKADD = Injector delay timing adder.



       -  IDKMUL = Injector delay timing multiplier. 



       -  INJREF = Reference edge for injector timing:

                   0 = indicates the start of the fuel pulse.

                   1 = indicates the end of the fuel pulse.



                                         6-98


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





       -  MHPFD = Signature PIP difference check value.



       -  MIDTV = Injector timing value for Idle in Drive, deg. 

                  Range of 0 to 720.



       -  MINTV = Injector Timing value for Lean Cruise Mode, Deg.

                  (Enabled by MFAFLG) Range of 0 to 720.



       -  NITMR1 = ATMR1 timed delay to enter Closed Loop fuel after Cold

                   start, sec. Range of 0-255 sec., accuracy 1 sec.



       -  NITMR2 = ATMR1 timed delay to enter Closed Loop fuel after Medium

                   start, sec. Range of 0-255 sec., accuracy 1 sec.



       -  NITMR3 = ATMR1 timed delay to enter Closed Loop fuel after Hot

                   start, sec. Range of 0 to 255 sec., accuracy 1 sec.



       -  NITMR4 = ATMR2 timed delay to enter Closed Loop fuel after Cold

                   start, sec. Range of 0 to 255 sec., accuracy 1 sec.



       -  NITMR5 = ATMR2 timed delay to enter Closed Loop fuel after Medium

                   start, sec. Range of 0 to 255 sec., accuracy 1 sec.



       -  NUMCYL = Number of cylinders.



       -  PIPOUT = Number of PIPs between injector outputs on each

                   injector port.







      OUTPUTS



      Registers:



       -  HFDLTA = Latest elapsed time from PIP_UP_EDGE to PIP_DOWN_EDGE,

                   clock ticks.



       -  INJDLY = Injector delay in degrees.



       -  SYNCTR = Counter which counts PIP signals until its value

                  is equal to NUMCYL (Number of cylinders). SYNCTR is

                  initialized to 0.



      Bit Flags:



       -  FUEL_IN_SYNC = Fuel synchronized with PIP.



       -  SYNC_UP_FUEL = Fuel synchronization  request.



       -  SIGPIP = Flag which is set if Signature PIP has occurred;

                   Flag which is cleared if Signature PIP has not.

                   This flag is initialized to 0.



       -  SYNFLG = Flag indicating whether AE fuel is synchronous

                 (set = 1) or asynchronous (set = 0). Initialized to 0.











                                         6-99


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





                               INJECTOR TIMING EXAMPLES



                                 INJDLY = 400 DEGREES





                                     ENGINE CYCLE





         TDC            BDC            TDC             BDC





          |              |              |               |                |

          |              |              |               |                |

          |<----POWER--->|<---EXHAUST-->|<---INTAKE---->|<-COMPRESSION-->|

          |     STROKE   |    STROKE    |    STROKE     |  STROKE        |

          |              |              |               |                |





         360            540            720             180             360



          | 1ST PIP



      PIP SIGNAL



          | #1 PIP

          |

         ****  *****    *****  *****   *****   *****   *****   *****    **

         *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *

         *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *

         *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *

        **  ****   ******   ****   *****   *****   *****   *****   ******

          |    |        |      |       |       |       |

          0   80       170    260     350     440     530



         TDC                                 |

          |                                  |

          |<--------- INJDLY = 400 --------->|

          |                                  |

          |ON       INJECTOR  1         ******

          |                             *    *

          |                             *    *

          |OFF             INJREF = 1   *    *

      ***********************************    ******************************



          |                                  |

          |         INJECTOR  1              |

          |         INJREF = 0               ******

          |                                  *    *

          |                                  *    *

          |                                  *    *

      ****************************************    *************************



















                                        6-100


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





                               INJECTOR SYNCHRONIZATION





      There are two possible mechanisms for recognition of cylinder number one  for

      purposes  of  fuel  synchronization:   Signature  PIP  or  Camshaft I.D.  The

      Signature PIP is a narrow pulsewidth from  the  Hall  Effect  Sensor  on  the

      Distributor.   The CID is a signal timed to the number-one cylinder cam.  CID

      is designed for use with distributorless Ignition Systems.



                                A. CID EDGE PROCESSING

                                     (HP_CID = 1)



      HP_CID is the flag set by the calibrator  to  indicate  which  kind  of  fuel

      synchronization system is being used.  If HP_CID is set to 1, CID hardware is

      present and SIGPIP will ALWAYS be set to zero.  If HP_CID is set to  0,  then

      Signature PIP logic is utilized.



      When HP_CID is set to 1 then the HP_CIDSEL is the flag set by the  calibrator

      to  indicate  which  kind  of CID hardware is present, Hall Effect sensing or

      Variable Reluctance sensing (Hall = 0 and VRS = 1).

















































































                                        6-101


                    FUEL CONTROL STRATEGY - INJECTOR TIMING - GUAA

                              Copyright 1989 FoMoCo





                              B. SIGNATURE PIP DETECTION





      This portion of the strategy is only activated if the HP_CID is set equal  to

      0.   The  system is allowed to synchronize during RUN MODE only.  (The SYNFLG

      is cleared during CRANK or UNDERSPEED.)



      Note:  MHPFD is a calibration constant which is dependent only on the  number

      of cylinders and the Signature PIP Duty Cycle.  The user must calibrate MHPFD

      to the appropriate value, as shown in the table below.





                  CYLINDERS     SIGNATURE DUTY CYCLE     MHPFD



                      8           =OR< 35 percent         .20

                      6           =OR< 30 percent         .24

                      4           =OR< 30 percent         .29



                  NOTE:  If Signature PIP Distributor is NOT present,

                         then MHPFD = .99.

















































































                                        6-102


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                           INJECTOR OUTPUT CONTROL PHILOSOPHY







      1.  The injector pulse start should be based on pulsewidth and timing  values

          calculated from the most recent input data (PIP, LOAD, lambda, etc.).



      2.  The injector timing value is used  only  to  start  the  injector  pulse,

          regardless of which edge is used as the reference.



      3.  Pulsewidth accuracy has top priority after an injector pulse is started.



      4.  If possible, the pulsewidth should be updated while in progress  to  take

          advantage of the most recent input data.  That is, the injector pulse can

          end early or extend later as conditions change.



      5.  Each time a fuel PW is outputted or corrected, the Data Output Link  Fuel

          Summation, FUEL_SUM is updated.  FUEL_SUM = FUEL_SUM + LBMF_INJn (N=1, if

          FUELPW1 is outputted; n=2 if FUELPW2 is outputted.)



















































































                                        6-103


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                 INJECTOR OUTPUT CONTROL





                                       DEFINITIONS



      REGISTERS/FLAGS:



       -  CRANK = Strategy for Start up mode of engine.



       -  CRKFLG = Flag indicating status of engine  mode.   (Set  to  1,  when  in

          Crank)



       -  FGFFLG = Toggle flag for alternate Injector Firing, = 1 No firing on this

          injector.



       -  FOFFLG = Alternate Injector Firing enable flag.



       -  FUELPW1/FUELPW2 = EGO-1 (or EGO-2) injector pulse- width, clock ticks.



       -  PWOFF = Injector pulsewidth offset (clock ticks).



       -  RUN = Normal engine operation strategy.



       -  SYNFLG = Flag indicating synchronous fuel, if set =  1;  asynchronous  if

          set = 0.  It is initialized to 0.



       -  UNDERSPEED = Strategy used to make the transition between CRANK and  RUN.

          It is also used when the engine stalls or stumbles.



      CALIBRATION CONSTANTS:



       -  CRKPIP = Number of PIP periods per Injector(s) firing(s).   (NOTE:   Must

          be INTEGER value.)



       -  EDSEL = Switch for selective Crank Fuel Timing at Falling- Edge of PIP.



       -  ENGCYL = Number of PIPs per engine revolution, or Number of cylinders/2.



       -  FN1327 = Fuel pulsewidth register  map,  used  to  determine  which  fuel

          register  is  used.   Output  =  Fuel  Register-left  offset.   X-input =

          Injector output number.  Y-input = Null.



       -  FN1329 = Injector firing order used for correcting  Inj_Fank  to  correct

          the  firing  order.   Output  =  fuel  injector  to  be fired.  X-input =

          INJ_BANK Y-input = Null



       -  NUMEGO = Number of EGO sensors present; mono or stereo.



       -  NUMOUT = Number of injector output ports.



       -  OUTINJ = Calibration switch to select between sequential and simultaneous

          injections (OUTINJ = 1 for sequential, OUTINJ = 2 for simultaneous).



       -  PIPOUT = Number of PIPs between injector outputs on each injector port.













                                        6-104


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                 INJECTOR OUTPUT CONTROL





      CRKFLG = 1 ----|

      (CRANK)        |

                     |AND --| WOT CRANK DE-CHOKE FUNCTION

      FUELPW1 = 0 ---|      | .No injector output.

                            |

                            | --- ELSE ---

                            |

      CRKFLG = 1 ---|       | NORMAL CRANK - Falling Edge Timing

      (CRANK)       |AND ---| .Fire NUMOUT injector outputs every CRKPIP

      EDSEL = 0 ----|       |  number of PIP's, upon receiving the falling

                            |  edge of the proper PIP signal.

                            | .Outputs included are INJ-1 thru INJ-NUMOUT.

                            | .FN1327 governs the use of FUELPW1 or FUELPW2

                            |  as the injector pulsewidth.

                            | .The injector offset PWOFF is included in

                            |  the actual injector pulse output.

                            | .Add FUELPWn to FUEL_SUM; increment

                            |    PULSCT

                            |

                            | --- ELSE ---

                            |

      CRKFLG = 1 -----------| NORMAL CRANK - Rising Edge Timing

                            | .Fire NUMOUT injector outputs every CRKPIP

                            |  number of PIP's, upon receiving the rising

                            |  edge of the proper PIP signal.

                            | .Outputs included are INJ-1 thru INJ-NUMOUT.

                            | .FN1327 governs the use of FUELPW1 or FUELPW2

                            |  as the injector pulsewidth.

                            | .The injector offset PWOFF is included in

                            |  the actual injector pulse output.

                            | .Add FUELPWn to FUEL_SUM; increment

                            |    PULSCT

                            |

                            | --- ELSE ---

                            |

                            |     ...continued next page...











































                                        6-105


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                            |

                            |    ...continued from previous page...

                            |

                            | RUN OR UNDERSPEED, NOT IN SYNC

                            | .Fire the appropriate injector outputs upon

                            |  receiving the rising edge of the proper PIP

                            |  signal. Injector timing is random.

                            | .If OUTINJ = 1, the outputs are fired

      SYNFLG = 0 -----------|  sequentially. If OUTINJ = 2, NUMOUT outputs

      (NOT IN SYNC)         |  are fired simultaneously.

                            | .Outputs included are INJ-1 thru INJ-NUMOUT.

                            | .PIPOUT and NUMOUT define the firing pattern.

                            | .FN1329 governs the firing order.

                            | .FN1327 governs the use of FUELPW1 or FUELPW2

                            |  as the injector pulsewidth.

                            | .The injector offset PWOFF is included in

                            |  the actual injector pulse output.

                            | .Add FUELPWn to FUEL_SUM; increment

                            |    PULSCT

                            |

                            | --- ELSE ---

                            |

                            | RUN IN SYNC, SINGLE FIRE

                            | .Fire the appropriate injector outputs at the

                            |  desired injector timing. Injector timing is

                            |  defined by strategy and calibration.

                            | .If OUTINJ = 1, the outputs are fired

                            |  sequentially. If OUTINJ = 2, NUMOUT outputs

                            |  are fired simultaneously.

                            | .Outputs included are INJ-1 thru INJ-NUMOUT.

      PIPOUT=ENGCYL --------| .PIPOUT and NUMOUT define the firing pattern.

      (SINGLE FIRE)         | .FN1329 governs the firing order.

                            | .FN1327 governs the use of FUELPW1 or FUELPW2

                            |  as the injector pulsewidth.

                            | .The injector offset PWOFF is included in

                            |  the actual injector pulse output.

                            | .Upon the "not in sync" to "sync" transition,

                            |  injector timing is initialized to match

                            |  the pre-sync random timing. Injector timing

                            |  then walks to desired timing.

                            | .Add FUELPWn to FUEL_SUM; increment

                            |    PULSCT

                            |

                            | --- ELSE ---

                            |

                            |    ...continued next page...





























                                        6-106


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                            |

                            |    ...continued from previous page...

                            |

                            | RUN, IN SYNC, DOUBLE FIRE

                            | .Fire the appropriate injector outputs upon

                            |  receiving the rising edge of the proper PIP

                            |  signal. Injector timing is random.

                            | .If OUTINJ = 1, the outputs are fired

                            |  sequentially. If OUTINJ = 2, NUMOUT outputs

                            |  are fired simultaneously.

                            | .Outputs included are INJ-1 thru INJ-NUMOUT.

                            | .PIPOUT and NUMOUT define the firing pattern.

                            | .FN1329 governs the firing order.

                            | .FN1327 governs the use of FUELPW1 or FUELPW2

                            |  as the injector pulsewidth.

                            | .The injector offset PWOFF is included in

                            |  the actual injector pulse output.

                            | .Upon the "not in sync" to "sync" transition,

                            |  the injector firing pattern is adjusted to

                            |  line up INJ-1 with signature PIP.

                            | .Add FUELPWn to FUEL_SUM (for the DOL_COUNT

                            |  Calculation

                            | 

                            | .Increment PULSCT









































































                                        6-107


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





      During the Fuel Pulsewidth output routine, the Speed Limiter flag is  checked

      to  see  if  alternate injectors should be turned off.  This strategy reduces

      the power output of the engine without a sudden drop in RPM.





      FOFFLG = 0 ------------------|  Output pulse to appropriate

        (Normal Engine Operation)  |    injector.

                                   |  FGFFLG = 0

                                   |

                                   | --- ELSE ---

                                   |

      FGFFLG = 0 ------------------|  Output pulse to appropriate

                                   |    injector.

                                   |  Set Flag to disable next

                                   |    fuel pulse output.

                                   |  FGFFLG = 1

                                   |

                                   | --- ELSE ---

                                   |

                                   |  Do NOT output pulse.

                                   |  Clear flag to enable

                                   |    next fuel pulse.

                                   |  FGFFLG = 0 





      NOTE: the appropriate output is determined by FN1329.





































































                                        6-108


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                  INJECTOR OUTPUT LOAD





      On stereo EGO applications, each injector output must be linked to the proper

      EGO  sensor.   FN1327 is a 1x9 table that is used to match injector output to

      EGO sensor.  Each slot in the table corresponds  to  an  individual  injector

      output.   The  table value is an address offset to select between FUELPW1 and

      FUELPW2.



          IF FN1327 = 0, use FUELPW1.



          IF FN1327 = 2, use FUELPW2.



      For this register addressing scheme, FUELPW1 and FUELPW2 must be  consecutive

      word registers and FUELPW1 must be first.



      The FN1327 table reserves space to control up to 8 injector outputs (the zero

      slot  is never referenced).  The actual number is determined by NUMOUT, which

      is the number of injector ports.  The user must fill the table  locations  to

      match NUMOUT.



      The FN1327 table must be calibrated for all applications, regardless  of  the

      EGO type (stereo or mono).  NOTE that if NUMEGO = 1 (mono-EGO), all values in

      FN1327 must be zero (corresponding to FUELPW1), or no fuel will  be  sent  to

      Bank 2.







































































                                        6-109


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                           5.0L INJECTOR OUTPUT LOAD EXAMPLES



                                                  2 CHANNEL CFI

                            SEFI                BANK TO BANK EFI

                           STEREO EGO           STEREO EGO

                           NUMOUT=8,NUMEGO=2    NUMOUT=2,NUMEGO=2

      TABLE    INJECTOR    ------------------  ------------------

       SLOT     OUTPUT     FN1327 PULSEWIDTH   FN1327 PULSEWIDTH

      ------   --------    ------ -----------  ------ -----------

        0      NOT USED       0   FILLER          0    not used

        1      INJ-1          2   FUELPW2         2    FUELPW2

        2      INJ-2          2   FUELPW2         0    FUELPW1

        3      INJ-3          2   FUELPW2         X    not used

        4      INJ-4          2   FUELPW2         X    not used

        5      INJ-5          0   FUELPW1         X    not used

        6      INJ-6          0   FUELPW1         X    not used

        7      INJ-7          0   FUELPW1         X    not used

        8      INJ-8          0   FUELPW1         X    not used







                                                 2 CHANNEL CFI

                           SEFI                 BANK TO BANK EFI

                           MONO-EGO             MONO-EGO

                           NUMOUT=8,NUMEGO=1    NUMOUT=2,NUMEGO=1

                          ------------------  ------------------

                          FN1327 PULSEWIDTH   FN1327 PULSEWIDTH

                          ------ -----------  ------ -----------

                             0   FILLER          0    not used

                             0   FUELPW1         0    FUELPW1

                             0   FUELPW1         0    FUELPW1

                             0   FUELPW1         X    not used

                             0   FUELPW1         X    not used

                             0   FUELPW1         X    not used

                             0   FUELPW1         X    not used

                             0   FUELPW1         X    not used

                             0   FUELPW1         X    not used















































                                        6-110


                    FUEL STRATEGY - INJECTOR OUTPUT CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                  INJECTOR FIRING ORDER





      On SEFI applications, each injector output is linked to it's matching  engine

      cylinder.   The injector output number is the cylinder number.  The injectors

      must be fired in the proper order to achieve sequential operation.



      FN1329 is a 1x8 table which is used to control  the  injector  firing  order.

      The table contains the firing order of the engine.









                           5.0L INJECTOR FIRING ORDER EXAMPLES





                                      2 CHANNEL CFI

                       SEFI           BANK TO BANK EFI

      FN1329        NUMOUT = 8          NUMOUT =2

      TABLE       ---------------     ---------------

       SLOT       FN1329  OUTPUT      FN1329  OUTPUT

      ------      ------ --------     ------ --------

        0           1    INJ-1          1    INJ-1

        1           5    INJ-5          2    INJ-2

        2           4    INJ-4          X    not used

        3           2    INJ-2          X    not used

        4           6    INJ-6          X    not used

        5           3    INJ-3          X    not used

        6           7    INJ-7          X    not used

        7           8    INJ-8          X    not used





























































                                        6-111


                       FUEL STRATEGY - FUEL PUMP CONTROL - MXD0

                              Copyright 1989 FoMoCo





                                 FUEL PUMP CONTROL LOGIC





      EFI vehicles are equipped with  an  electric  fuel  pump  controlled  by  the

      computer  via  a  relay.   The  fuel pump relay is energized according to the

      logic below;











      TSLPIP < 1 SECOND -----------------| ENABLE PUMP

                                         |

                                         | --- ELSE ---

                                         |

                                         | DISABLE PUMP











      PIP interrupt ---------------------| TSLPIP = 0

                                         |

                                         | --- ELSE ---

                                         |

                                         | Count up TSLPIP







                                       DEFINITIONS



          TSLPIP = Timer which track time since last PIP, msec.

























































                                        6-112

























                                      CHAPTER 7



                               IGNITION TIMING STRATEGY



































































































                                         7-1


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                IGNITION TIMING STRATEGY





      The base engine spark advance strategy provided by the  computer  depends  on

      the  engine  operating mode.  The base spark advance for each engine mode can

      then be  adjusted  for  unusual  engine  conditions  by  one  or  more  spark

      modulators.



      The spark strategy is divided into four modes:







          1. CRANK/UNDERSPEED mode

          2. CLOSED THROTTLE mode

          3. PART THROTTLE mode

          4. WIDE OPEN THROTTLE mode

























































































                                         7-2


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  ACT = Air Charge Temperature, deg F.



       -  APT = Throttle Mode Flag.

                (Set = -1 = Closed Throttle)

                (Set =  1 = Wide Open Throttle)

                (Set = 0 = Part Throttle)



       -  ATMR1 = Time since start (time since exiting CRANK

                  mode), sec.



       -  DIFCTR = Counter for TL0FLG state changes.



       -  DIFF0 = Steady State Spark TL0 error.



       -  DIFF1 = Transient Spark TL0 error.



       -  DSDRPM = Idle speed control desired RPM.



       -  DT12S = Last PIP period.



       -  DT23S = Previous PIP period before DT12S.



       -  DTPCYC = PIP period ENGCYL * 2 + 1 cylinders previous.



       -  DTSIG = PIP period of last signature PIP.



       -  ECT = Engine Coolant Temperature, deg F.



       -  HFDLTA = Last period from PIP up-edge to down-edge.



       -  HFPCYC = Period from PIP up to down-edge ENGCYL * 2 cylinders 

                   previous.



       -  KAYCTR = A counter to indicate how often to update MKAY.



       -  LOAD = Universal normalized load parameter.



       -  LUGTMR = Load transition timer defined in the TIMER

                   section.



       -  MFAMUL = MFA table ramp-in multiplier, unitless.



       -  MKAY = Half period multiplier to correct for average error caused by

                 hall effect sensor in distributor and armature.



       -  N = Engine RPM, RPM.



       -  PHFDLT = Previous time elapsed between up-edge to

                   down-edge of PIP.









                                         7-3


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  PIPACL = Percentage of PIP that PIP will decrease

                   under Maximum Acceleration, Beta. Initial

                   value = 14%.



       -  PSGDLT = Previous uncorrected signature PIP half period.



       -  SAF = Final spark advance in degrees.



       -  SAPW = Spark Angle Pulse Width, msec.



       -  SIGDC = Signature PIP Duty Cycle.



       -  SIGDLT = Uncorrected signature PIP half period.



       -  SIGKAL = Signature PIP half period multiplier 

                   - initial value = 1.66666 for 30% duty cycle signature PIP

                                   = 1.42857 for 35% duty cycle signature PIP.



       -  SPKAD(n) = Spark adder for the nth cylinder. It is added to

                     SAF and may be positive or negative degrees.



       -  SPKMUL = Spark Feedback multiplier used to enhance idle

                   speed control. It is used in closed throttle mode 

                   only and is calculated within the Idle Speed

                   Control Strategy.



       -  TCSTRT = Temperature of ECT at startup, deg. F.



       -  TEMDWL = Time required for coil to charge to 100% percent

                   of desired voltage.



       -  TIPRET = Tip in retard, degrees.



       -  TL0FLG = Transient Spark calculation flag.



       -  TSLPIP = Timer indicating time since last PIP Low-to

                   High transition, sec.



       -  VBAT = Time-dependent rolling average filter of

                 instantaneous battery voltage.



       -  VSBAR = Filtered vehicle speed.



      Bit Flags:



       -  CRKFLG = Flag indicating Engine in Crank mode if set

                   to one.



       -  DOUBLE_EDGE FLAG = Foreground (EOS) flag used to indicate

                  current spark output calculation method.



       -  HSPFLG = High Speed Mode flag; 1 = High Speed alternate fuel/spark.



       -  MFAFLG = Managed Fuel Air State Flag.



       -  NDSFLG = Neutral/Drive flag, 1 = Drive.









                                         7-4


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  NFLG = Neutral Idle flag.



       -  SIGPIP = A flag that indicates that signature PIP half period

                   has been identified.



       -  SYNFLG = Flag when set indicates Signature PIP

                   has been identified; else Signature PIP not

                   yet seen. It is initialized to 0.



       -  UNDSP = Flag indicating engine in Underspeed Mode or

                  Crank.



      Calibration Constants:



       -  CCDSW = Calibration Switch to select Computer Controlled

                  Dwell. (1 = Computer Controlled Dwell;

                  0 = TFI Controlled Dwell)



       -  CTHIGH = Coolant Temperature at Hot start, deg F.



       -  DELTA = Closed throttle/Part throttle breakpoint value

                  above RATCH.



       -  DFMIN0 = Minimum number of TS0FLG 1 to 0 state changes.



       -  DFMIN1 = Minimum number of TS0FLG 0 to 1 state changes.



       -  DWLTBP = Temperature switch point that controls

                   function use, Deg F.



       -  DWLTSW = Switch point for change of maximum

                    permitted DWELL,sec.



       -  DWLWF = Weighting factor determining effect of ECT

                  and ACT on Base Dwell, unitless. 



       -  ENGCYL = The number of cylinders in one engine revolution.



       -  FKMKAY = Filter constant of update rate to MKAY.



       -  FKSKAY = Filter constant of update rate to SIGKAL.



       -  FN033 = ECT normalizing function.



       -  FN071 = Load normalizing function; used for table lookup.

                  Input = LOAD and Output = Normalized Load.



       -  FN082 = Load normalizing Function; generates table entry

                  point. Input = LOAD and Output = Normalized Load.



       -  FN083 = RPM Normalizing function ;generates table entry

                  point. Input = N and Output = Normalized N.



       -  FN111 = Closed Throttle Base spark advance as a function

                  of engine speed N. Input = Engine speed, RPM and

                  Output = spark advance, deg BTDC.









                                         7-5


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  FN112 = Closed Throttle Spark advance adder as a

                  function of Engine Coolant Temperature ECT (to

                  generate cold temperature spark advance).

                  Input = ECT, deg F and Output = spark adder.



       -  FN115 = Spark adder as a function of Barometric Pressure BP.

                   Input = BP and  Output = spark adder.



       -  FN125 = LOM Load function, used to activate LOM spark

                  strategy, RPM.



       -  FN126 = Spark advance adder as a function of ACT (Air

                  Charge Temperature).



       -  FN129A = LOMALT table multiplier as a function of

                   Barometric Pressure, BP.



       -  FN131 = Wide Open Throttle Base spark advance as a

                  function of engine speed N, DEG BTDC.



       -  FN133 = Wide Open throttle Spark advance adder as

                  a function of BP (Barometric Pressure), Deg.



       -  FN134 = Wide Open throttle Spark advance adder as a

                  function of ECT, Deg.



       -  FN135 = Wide Open Throttle Spark Adder as a function

                  of ACT, Deg.



       -  FN160A = Minimum DWELL time versus VBAT (below

                   77 deg F, sec.



       -  FN160B = Minimum DWELL time versus VBAT (above 77

                   deg F, sec.



       -  FN179A = High Speed Spark retard, mph.



       -  FN180(CTNTMR) = Idle Spark subtractor, deg.



       -  FN212A = LOMSEA table multiplier as a function of

                   Barometric Pressure, BP.



       -  FN311 = MFA altitude multiplier, unitless.



       -  FN396A = High Speed Fuel enrichment, mph.



       -  FN400 = Time since startup kicker time delay, sec.

                  It's input is TCSTRT and has a maximum

                  repetition of 6. 



       -  FN839 = Spark multiplier vs. DASPOT.

                  Input = Dashpot air flow adder (DASPOT)

                  Output = Multiplier (SPKMUL)



       -  FN841D = Spark Multiplier vs. RPM Error to provide spark

                   feedback for Idle Speed Control, in Drive

                   Input = Speed Error (DSDRPM (word) - N)

                   Output = Multiplier (SPKMUL)





                                         7-6


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  FN841N = Spark Multiplier vs. RPM Error to provide spark

                   feedback for Idle Speed Control, in Neutral

                   Input = Speed Error (DSDRPM (word) - N)

                   Output = Multiplier (SPKMUL)



       -  FN901 (SPKSEA) = Base sea level table.

                  X-input = FN070 - Normalized Engine speed, RPM

                  Y-input = FN071 - Normlized load



       -  FN904A (LOMSEA) = Sea level LOM table.

                  X-input = FN070 - Normalized engine speed, RPM

                  Y-input = FN071 - Normalized load



       -  FN905A (LOMALT) = Altitude LOM table.

                  X-input = FN070 - Normalized engine speed, RPM

                  Y-input = FN071 - Normalized load



       -  FN1119 = Torque Truncation Table.



       -  FN1121 = Spark advance adder for EGR as a function of RPM and LOAD;

                   X-input = Normalized engine speed on RPM - FN070,

                   Y-input = Normalized LOAD - FN071,

                   Output = Spark advance adder for EGR, deg per 1 percent EGR.



       -  FN1124 = 4 x 3 table of spark adders as a function of 

                   engine speed N and LOAD. The (X-input) normalizing 

                   function for N is FN083 and the (Y-input)

                   normalizing function for LOAD is FN082.



       -  FN1133(ECT,LOAD) = Part throttle spark modifier table.

                            X-input = Normalized ECT (FN033)

                            Y-input = Normalized LOAD (FN071).



       -  FN1223 = Managed fuel Air EGR Table.

                   X-input = FN083 - Normalized Engine Speed, RPM

                   Y-input = FN082 - Normalized load.

                   Output = Multiplier.



       -  FN1328 = Managed fuel air fuel table.

                   X-input = Normalized engine speed, RPM - FN070

                   Y-input = Normalized Perload - FN072A



       -  FRCBFT = ACT Fraction for FN1305 lookup.



       -  FRCSFT = ACT fraction for FN1306 lookup.



       -  HCSD = Minimum RPM for High CAM Spark Retard.



       -  HCSDH = Hysteresis for HCSD.



       -  HP_HIDRES = Hardware present - High Data Rate Electronic Spark.



       -  KCS1 = Closed throttle spark adder. 



       -  KLLIM = Lowest value for MKAY multiplier - initial value = 0.9.



       -  KULMT = Highest value for MKAY multiplier - initial value = 1.1.







                                         7-7


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  KPS1 = Part throttle spark advance adder. 



       -  KWS1 = Wide Open Throttle spark advance adder, Deg.



       -  LUGTIM = Engine load transition time, sec.



       -  MHPFD = Calibration constant dependent on number of 

                 cylinders and Signature PIP Duty Cycle.



       -  MINDLA = Minimum DWELL clip above 20 msec PIP

                   period, Beta.



       -  MINDLB = Minimum DWELL clip below 20 msec PIP

                   period, Beta.



       -  NSADD = Neutral spark adder, deg.



       -  NTIP = Maximum RPM to enable Tip-in retard (restricted

                 to less than or equal to 2000 to assure TIPRET

                 ramp back function.)



       -  NUMCYL = Number of cylinders in the engine.



       -  PACLIM = Maximum limit of PIP acceleration in

                   percent of PIP period, Beta. 



       -  PACOFF = Offset for linear equation describing PIP

                   Period and percent of PIP period for

                   acceleration, (Units = (Beta - cyl)/Rev).



       -  PACPER = PIP period when equation for PIPACL changes,

                   (Units = (Rev - seconds)/cyl). 



       -  PACSLO = Slope for linear equation describing PIP

                   period and percent of PIP period for

                   acceleration, (Units = Beta/second).



       -  SIGKLL = Lowest value for signature PIP multiplier 

                    - initial value = 1.42857 for 30% duty cycle signature PIP

                                    = 1.25000 for 35% duty cycle signature PIP.



       -  SIGKLU = Highest value for signature PIP multiplier 

                    - initial value = 1.99996 for 30% duty cycle signature PIP

                                    = 1.66666 for 35% duty cycle signature PIP.



       -  SPKLIM = Maximum allowable advance in spark timing

                   between spout outputs, Beta.



       -  SPKSWH = Value (in clock ticks) equivalent to a minimum

                   RPM threshold, at which the strategy will time the

                   next SPOUT during the previous Rising-Edge of PIP

                   without any adjustments during the Falling-Edge.



       -  SPKSWL = Value (in clock ticks) equivalent to maximum RPM

                   at which the strategy will correct the timing of

                   the next SPOUT during the Falling-Edge of PIP. The

                   difference between SPKSWH and SPKSWL provides

                   hysteresis. (NOTE: SPKSWL is longer than SPKSWH).





                                         7-8


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  SPLCLP = Lower limit spark clip for rotor registry.



       -  SPTADV = Percentage of PIP that spark may be advanced,

                   (Percent of PIP).



       -  SPUCLP = Upper limit spark clip for rotor registry.



       -  SSFCTR = Steady state factor for MKAY and signature KAY

                   calculations.



       -  TICKS_DOUBLE = Value (in clock ticks) when there is

                   insufficient time to put out spark from Rising-Edge

                   Calculation to put out spark from Falling-Edge.

                   (Current value = 0.0012 seconds).



       -  TICKS_SINGLE = Value (in clock ticks) indicating there is

                   insufficient time to put out spark from Falling-Edge

                   of PIP (Current value = 0.0010 seconds).



       -  TRSRPM = Minimum RPM to enable transient spark routine.



       -  TRSRPH = Hysteresis for TRSRPM.



       -  TTNOV = RPM - Vehicle Speed (N/V) ratio corresponding

                    to first gear.



       -  Y = Normal Part throttle spark multiplier. 







      OUTPUTS



      Registers:



       -  DIFCTR = Counter for TL0FLG state changes.



       -  DTPCYC = PIP period ENGCYL * 2 + 1 cylinders previous.



       -  DTSIG = PIP period of last signature PIP.



       -  DWLBSE = Base amount of DWELL as a function of VBAT and

                  TEMDWL, sec.

                  Initial value = 0.005.



       -  HFDLTA = Last period from PIP up-edge to down-edge.



       -  HFPCYC = Period from PIP up to down-edge ENGCYL * 2 cylinders 

                   previous.



       -  KAYCTR = A counter to indicate how often to update MKAY.



       -  MKAY = Half period multiplier to correct for average error caused by Hall

                 effect sensor in distributor and armature.



       -  PIPACL = Percentage of PIP that PIP will decrease

                   under Maximum Acceleration, Beta. Initial

                   value = 14%.







                                         7-9


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  PSGDLT = Previous uncorrected signature PIP half period.



       -  SAF = Final spark advance in degrees.



       -  SAFTOT = Total spark advance, including knock and tip-in

                   retard, deg BTDC.



       -  SIGDLT = Uncorrected signature PIP half period.



       -  SIGKAL = Signature PIP half period multiplier 

                    - initial value = 1.66666 for 30% duty cycle signature PIP

                                    = 1.42857 for 35% duty cycle signature PIP.



       -  TL0FLG = Transient Spark calculation flag.









      SAFTOT, a DAC-able parameter has been added to  the  Spark  Chapter.   SAFTOT

      allows  dac'ing  of  total spark advance.  It is updated each background loop

      and will NOT display every SPKAD/TIPRET term if the background loop  time  is

      longer  than  a  PIP  period.   (NOTE:   SPKAD(n) refers to the current SPKAD

      referenced by the PIP_Counter [being added to Spark]) The equation for SAFTOT

      is as follows:



                            SAFTOT = SAF + SPKAD(n) + TIPRET





































































                                         7-10


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      1. CRANK/UNDERSPEED MODE SPARK:





      In the crank or underspeed mode, spark advance  is  fixed  at  10  deg  BTDC.

      Spark is fired when the rising edge of the PIP signal is received.







      2.  CLOSED THROTTLE MODE SPARK:



      Normal Closed Throttle Spark is a function of RPM and ECT,  modified  by  the

      Spark Feedback Multiplier, SPKMUL.  During High Cam (as determined by RPM and

      Startup Timer ATMR1), the spark advance is reduced by FN115 to light off  the

      catalysts  (by  heating up the exhaust gas).  Spark is adjusted by a function

      of BP, which can only occur when the Engine RPM rises above a set value.   If

      the  Engine  RPM  dips  below the value set by HCSD - HCSDH (these values are

      calibratible), then BP correction is no longer required.   FN400  provides  a

      maximum time for altitude compensation to spark.





      APT = -1 (CLOSED THROTTLE) ----|

                                     |

      N > HCSD ------------|S Q------|       | "Hi Cam" Spark

                           |         |AND ---| SAF = (FN111 + FN112

      N < HCSD - HCSDH ----|C        |       |        - FN115 + KCS1-'C')

                                     |       |         * SPKMUL

                                     |       |

      ATMR1 < FN400 -----------------|       | --- ELSE ---

                                             |

      NFLG = 1 ------------------------------| Normal Closed Throttle

       (Closed Throttle, Neutral)            |  Spark

                                             | SAF = (FN111(N) + FN112(ECT)

                                             |       + NSADD - FN180(CTNTMR)

                                             |       + KCS1-'C') * SPKMUL

                                             |

                                             | --- ELSE ---

                                             |

      APT = -1 ------------------------------| SAF = (FN111 + FN112 + KCS1

                                             |        - 'C' * SPKMUL)





      SPKMUL is a calibratible constant which is set in the Idle Speed Logic to one

      of  two  possible  functions  (FN839 and FN841N/D), giving it a range of 0 to

      0.996.  The input to FN839 is the Dashpot Air flow  Adder  (DASPOT)  and  the

      input  to  FN841  is  the  speed  error  (DSDRPM minus N).  SPKMUL provides a

      correction factor to the spark advance.  FN841N  and  FN841D  are  separately

      calibratible  for  neutral or drive.  (See Idle Speed Duty Cycle calculations

      at the end of ISC chapter).



      'C' Logic is defined in Part Throttle Spark Section.





















                                         7-11


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      3.  PART THROTTLE MODE SPARK:





      Normal Part throttle is (FN904A * FN212A + FN905A * FN129A).



      During normal part throttle operation, the logic "interpolates"  between  sea

      level table (FN904A) and altitude table (FN905A) to calculate base spark.



      Tip-in Spark (LOM) is (1 - LUGTMR/LUGTIM) * FN901



      On accelerating from a standstill, the strategy uses a more aggressive  spark

      table  (FN901) for improved performance.  Over a period of time (LUGTIM), the

      spark shifts from LOM spark to normal part throttle spark.  The LUGTMR  logic

      is described in the Timer Chapter.





                           BASE SPARK - LOM SPARK RELATIONSHIP





               --------------------------------------------

               |                                          |

               |                                          |

        LOAD   |                    Use FN904A            |

               |                          or              |

      FN125 -> |-----                   FN905A            |

      BOUNDARY |      \                                   |

               |       \                                  |

               | LOM    \                                 |

               | Use     \                                |

               | FN901    \                               |

               |           \                              |

               --------------------------------------------



                                    N





      Actual percent EGR, EGRACT, modifies spark via FN1121 (RPM,LOAD) and high air

      charge temperature via FN126(ACT).













































                                         7-12


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                    TEMPERATURE COMPENSATION - [FN1133(ECT,LOAD)]





      The temperature compensation serves these functions:



          1.  Provide spark  advance  for  improved  fuel  economy  (at  very  cold

          temperatures);



          2.  Provide cold start spark  retard  to  light  off  the  catalysts  for

          improved emissions.



          3.  Adjust spark during engine overtemp.



          4.  Adjust temperature compensated spark for LOAD.





                      MANAGED FUEL AIR - 'B' LOGIC (FN1124 * FN311)





      During MFA mode, the strategy may use Open Loop Fuel FN1328 (usually lean  of

      stoichiometry) and modified EGR (FN1223).  The base spark is further advanced

      by FN1124.  The amount of spark advance increment is reduced at  altitude  by

      FN311.   To  avoid  spark jumps during the transition from normal mode to MFA

      Mode, the strategy ramps the MFA spark using  MFAMUL  (defined  in  the  Fuel

      Strategy).





                      TORQUE TRUNCATION SPARK - 'C' LOGIC (FN1119)





      If the AXOD (or AOD) transmission is in 1st gear or reverse,  the  torque  of

      the  engine  may  exceed  the  capacity  of the transmission.  Therefore, the

      torque truncation strategy  is  designed  to  reduce  the  engine  torque  by

      retarding  the  spark.   FN1119  should  be calibrated to achieve this torque

      reduction for all speed-load points.



      Because the strategy is unable to  directly  distinguish  between  first  and

      second gear, first gear is inferred from N/V, TTNOV.  TTNOV should correspond

      to the RPM-Speed ratio for first gear.





                                  OVERSPEED PROTECTION





      If the vehicle speed is too high, the spark advance  is  reduced  by  FN179A.

      Under these circumstances, the Fuel Strategy forces Open Loop Fuel enrichment

      (FN396A).



      Note:  FN396A should be calibrated to 0.996 if FN179A is equal to 0.























                                         7-13


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                        SAF LOGIC





                    SAF = Y * ['S' + B - C + FN1133(ECT,LOAD)] + KPS1





      HSPFLG = 1 -----------------------| SAF = SAF - FN179A(VSBAR)







                                        'B' LOGIC





      MFAFLG = 1 ------------------------| Managed Fuel Air Mode

                                         | 'B' = FN1124 * FN311

                                         |      * MFAMUL

                                         |

                                         | --- ELSE ---

                                         |

                                         | 'B' = 0





                                        'C' LOGIC

                              (Used in all Throttle modes)





      N > TTNOV * VSBAR ---------------------------| Torque Truncation Spark

                                                   | 'C' = FN1119

                                                   |

                                                   | --- ELSE ---

                                                   |

                                                   | 'C' = 0

























































                                         7-14


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      NOTE: 1) FN212A should be equal to 1.0 at Sea Level and 0

               at high altitudes;



            2) FN129A should be equal to 1.0 at high altitudes

               and 0 at Sea Level;



            3) LUGTIM should be non-zero;



            4) LOM spark may be calibrated out by setting

               FN125 = 0.







      4. WIDE OPEN THROTTLE MODE SPARK:





      At Wide Open throttle, SAF is determined from the following equation.  It  is

      the  combined  result  of  FOUR  VARIABLE Spark Advance Adders based upon the

      functions of engine speed (N), BP, ECT, ACT, and ONE CONSTANT  spark  advance

      adder (KWS1).





                    SAF = FN131 + FN133 + FN134 + KWS1 + FN135 - 'C'





      HSPFLG = 1 -----------------------| SAF = SAF - FN179A(VSBAR)





































































                                         7-15


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                          NOTE



              1.  The displayed SAF does not  include  the  output  of  the

              individual  cylinder  knock  strategy.   The knock registers,

              SPKAD(n) and TIPRET may be displayed separately and are added

              to SAF by the EOS when the waiting time is calculated.  Refer

              to the knock strategy documentation within this  chapter  for

              additional information.





              2.  The final value of  spark  advance,  [SAF  +  SPKAD(n)  +

              TIPRET], is limited to the range:



                    SPLCLP <OR= [SAF + SPKAD(n) + TIPRET] <OR= SPUCLP



              SPLCLP is the lower spark clip.  SPUCLP is  the  upper  spark

              clip.   SPLCLP  and  SPUCLP are calibrated to match the rotor

              registry of the distributor.  Intermediate spark calculations

              and results are maintained in an unlimited fashion.





              3.  The software allows the lower spark clip, SPLCLP,  to  be

              calibrated  to  values  down  to  -10 deg (10 deg ATC).  This

              feature has been initially provided for the sole use  of  the

              Ignition  Department  in  performing  rotor  registry  tests.

              Unless prior approval has been  received  from  the  Ignition

              Department,  Engine Systems engineers are hereby requested to

              refrain from calibrating SPLCLP to a value which is less than

              the  minimum value of the "Spark Range" which is shown on the

              Rotor Registry page  of  this  Chapter.   Otherwise,  such  a

              calibration may result in mis/crossfire.





              4.  Due to physical time constraints for arming the coil  and

              firing  the  next  spark,  the largest spark advance increase

              allowed  between  consecutive  spark  events  is  limited  to

              SPKLIM*360/ENGCYL  degrees.   There is no limit on the amount

              of  spark  advance  decrease  allowed  on  consecutive  spark

              events.   NOTE:   SPKLIM  is  set  to  .06  and should not be

              increased  without  the  prior  approval  of   the   Ignition

              Department.





      Final SAF <OR= Previous SAF + SPKLIM * 360/ENGCYL

































                                         7-16


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                   SPOUT CALCULATIONS





      Two Spout calculation routines are used in the strategy:



          1.  RISING-EDGE SPARK



          2.  FALLING-EDGE SPARK





      RISING-EDGE SPARK



      This method calculates the Spout output time based upon the times of the last

      two  Pip rising edges and assumes that the next Pip rising edge will occur at

      the same delta-time.







                                                   SPOUT

                                                     :

                :                   :                :

                :.......DT12S.......:                :

                :                   :                :

                                                     :

                .---------.         .---------.      :  .----

                |         |         |         |      :  |

      PIP       |         |         |         |      :  |

      SIGNAL    |         |         |         |      :  |

                |         |         |         |      :  |

            ----.         .---------.         .---------.



                :                   :                :

                :                   :..WAITING TIME..:

                :                   :                :

               RE1                 RE2

           (10 deg B)          (10 deg B)











      SPOUT = RE2 + WAITING TIME



            = RE2 + {[(360/ENGCYL) + 10 - SAF] / (360/ENGCYL)} * DT12S

































                                         7-17


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      2.  FALLING-EDGE SPARK



      This method calculates the  spout  output  time  based  upon  the  delta-time

      between  the rising edge and falling edge of the current Pip and assumes that

      the next Pip rising edge will occur at the same delta-time after the  falling

      edge.



      However, a problem exists with the Hall Effect sensor  which  results  in  an

      inaccurate  recognition  of  the  falling  edge.   The  accuracy  varies as a

      function of the sensor's temperature and voltage.   To  compensate  for  this

      inaccuracy,  an  adaptive correction factor, MKAY, is continuously calculated

      and applied to the observed falling edge time to create a  corrected  falling

      edge  time,  FEC, as shown in the sketch below.  The MKAY/SIGKAL calculations

      are shown on the next page.









                                                   SPOUT

                :                 :                  :

                :......HFDLTA.....:                  :

                :                 :                  :

                                                     :

                .-----------------...                :  .----

                |                 | :                :  |

      PIP       |                 | :                :  |

      SIGNAL    |                 | :                :  |

                |                 | :                :  |

            ----.                 .---------------------.



                :                 : :                :

                :                 : :.....WAITING....:

                :                 : :      TIME      :

               RE                FE FEC

            (10 deg B)







      where,

      RE = Rising Edge Time

      FE = Falling Edge Time

      FEC = Corrected Falling Edge Time







      SPOUT = FEC + WAITING TIME



            = FE + {{[(180/ENGCYL) + 10 - SAF] / (180/ENGCYL)} * MKAY



              - (1-MKAY)} * HFDLTA





















                                         7-18


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                MKAY/SIGKAL CALCULATIONS





      1.a. At every PIP down-edge transition, clear SIGPIP. (existing)



        b. PIP down-edge transition ----------|

                                              |AND --| Set SIGPIP

           Signature half period identified --|



        c. SIGPIP is set ------------------|

                                           |       | PSGDLT = SIGDLT

           SYNFLG is set ------------------|AND ---| SIGDLT = HFDLTA

                                           |       | HFDLTA = (HFDLTA*SIGKAL)/MKAY

           PIP down-edge transition -------|





      2. PIP up-edge transition -----------|

                                           |       |

         SIGPIP is set --------------------|AND ---| Do Signature Kay 

                                           |       |     Calculation

         SYNFLG is set --------------------|





      3. Signature Kay Calculation



         |DT12S - DTSIG| < SSFCTR * DT12S -----|       | DTSIG = DT12S

                                               |       | sigkal' = DT12S/(SIGDLT*2)

         |DT12S - DT23S| < SSFCTR * DT12S -----|AND ---| SIGKAL = FKSKAY*sigkal' +

                                               |       |        (1 - FKSKAY)*SIGKAL

         |SIGDLT - PSGDLT| < SSFCTR * SIGDLT --|       | SIGKLL < SIGKAL < SIGKLU

                                                       | 

                                                       |--- ELSE ---

                                                       |

                                                       | DTSIG = DT12S



      4. PIP up_edge transition ---------------|       | Increment KAYCTR

                                               |AND ---| Do MKAY Calculation

         KAYCTR <OR= ENGCYL * 2 ---------------|       |

                                                       |- - - ELSE - - - - - 

                                                       |

         PIP up_edge transition -----------------------| Set KAYCTR = 1

                                                       | Set DTPCYC = DT12S

                                                       | Set HFPCYC = HFDLTA





      5. MKAY Calculation 

         SIGPIP = 0 ------------------------------|

                                                  |

         KAYCTR > ENGCYL * 2 ---------------------|       | mkay' =

                                                  |       |  0.5*(DT12S+DTPCYC)/

         |DT12S - DTPCYC| <or= SSFCTR * DT12S ----|AND ---|    (HFDLTA + HFPCYC)

                                                  |       | MKAY = 

         |HFDLTA - HFPCYC| <or= SSFCTR * HFDLTA --|       |  FKMKAY * mkay' +

                                                  |       |    (1 - FKMKAY) * MKAY

         mkay' < 1.2 -----------------------------|       |

                                                          | KLLIM < MKAY < KULMT



      (NOTE: KAYCTR must be incremented prior to MKAY calculation!)





                                         7-19


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                          RISING-EDGE vs FALLING-EDGE DECISION







      The decision of which method to use is based upon the real time which is 

      available to do the Spout calculation and scheduling after the falling edge 

      of PIP is recognized. If sufficient time is available, the falling-edge 

      calculation will be used. Otherwise, the rising-edge calculation will be

      used.



      The available time to send Spout after receiving the falling edge of PIP is

      equal to the distance in degrees between the two events divided by the

      velocity in degrees/second, or;



                       DISTANCE   (180/ENGCYL) + 10 - SAF

      AVAILABLE TIME = -------- = -----------------------

                       VELOCITY      ENGINE RPM * 6





      SPKSWH and SPKSWL are provided to  allow  the  switch  to  Rising-Edge  spark

      calculation above some RPM when the error in detection of the Falling-Edge of

      PIP  or  other  factors  will  cause  excessive  spark  scatter   using   the

      Falling-Edge  spark  calculation.   Because  SPKWSH  and  SPKSWL  are used in

      foreground, the value entered in VECTOR for each must be in clock-ticks.   To

      convert  the  desired  values  of RPM into clock-ticks, perform the following

      conversions:





      SPKSWH = 60/(ENGCYL * "Clock_Frequency" * upper switch RPM)



      SPKSWL = 60/(ENGCYL * "Clock_Frequency" * lower switch RPM)





      Where Clock_Frequency is 3.0E-6 for 12 MHz and 2.4E-06 for 15 MHz.  The lower

      switch  RPM  should be a minimum of 25 RPM and and a maximum of 250 RPM below

      upper switch RPM, if used.  Both SPKSWL and SPKSWH are normally  set  to  the

      equivalent  of  6375  RPM,  which  will  disable this portion of the decision

      routine.



      NOTE:  SPKSWH and SPKSWL should not be changed without consultation with  the

      ESD Strategy Section.







































                                         7-20


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      The following logic is used for the Falling versus Rising-Edge decision.





      All values in ticks.





      Dual_Edge -----------------------------|           | Use Single Edge

         (In Falling-Edge Mode)              |AND -------| (Rising-Edge)

                                             |           |

      DT12S < SPKSWH ------------------|     |           |

                                       |OR --|           | --- ELSE ---

      AVAILABLE TIME < Ticks_Single ---|                 |

                                                         | Use Dual_Edge

      Single_Edge ----------------------------|          | (Falling-Edge)

        (In Rising-Edge Mode)                 |          |

      AVAILABLE TIME > Ticks_Double ----------|AND ------|

                                              |

      DT12S > SPKSWL -------------------------|





      Based upon this logic, if the desired spark advance, SAF, is assumed to be 30

      degrees, then the maximum RPM at which the Falling-edge spark calculation can

      be used is 11667, 6667, and 4167  for  the  4,  6,  and  8-cylinder  engines,

      respectively.  The Rising-edge calculation is used at higher engine speeds.









































































                                         7-21


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                     HIGH DATA RATE ELECTRONIC SPARK (HIDRES) SYSTEM

                                     (HP_HIDRES = 1)





      The High Data Rate Electronic Spark System consists of three components:



          a) EEC-IV processor

          b) HESC module

          c) a 36-tooth wheel and sensor



      The 36 tooth wheel is located on the crankshaft with  a  variable  reluctance

      sensor  (VRS) to produce a signal.  The wheel is missing one tooth at 90 BTDC

      for one cylinder to allow signal reference.



      The HESC module is an EED supplied module which has the capability to receive

      the  output of the VRS sensor, as well as a signal from the EEC-IV processor.

      The HESC module provides coil  switching  for  distributorless  ignition  and

      outputs signals to the coil for charging and firing.  In addition, the module

      provides a signal to the EEC-IV processor, specifically, a synthetic 50% duty

      cycle  with  the  low-to-high  transition  occuring  at 10 degrees BTDC and a

      high-to-low transition occuring at 100 degrees BTDC for each  cylinder.   The

      module  also  provides  LOS  function  whenever the EEC-IV processor fails to

      provide a Spark Angle Pulse Width (SAPW) within the accepted window for  each

      cylinder.



      The EEC-IV processor uses the synthetic  50%  duty  cycle  as  reference  for

      scheduling fuel and spark pulse widths.  The EEC-IV processor calculates:  1)

      The  time  that  the  Spark  Output  (SPOUT)  line  to  the  HESC  should  be

      transitioned from low-to-high, (with a targeted position of 20 degrees ATDC);

      2) The SAPW; and 3) The time of the SPOUT high-to-low transition.





      The following strategy modules are disabled  in  the  EEC-IV  processor  when

      HIDRES is in use.



          a) Dwell Calculation

          b) MKAY Calculation

          c) Transient Spark Determination and Calculation

          d) Rising Edge/Falling Edge decision logic

          e) Double Edge Spark Calculation

          f) PIP echoed SPOUT during CRANK and UNDERSPEED

          g) 6% spark advance limit





































                                         7-22


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      The "desired_spark" calculated in the EEC-IV processor is  composed  of  SAF,

      Tip-in  retard,  and Knock Spark Adder.  "Desired_spark" is checked to ensure

      that it is within the HESC module limits, (-10 to +57.5), and then  converted

      into SAPW by the following:



          a) Calculate and schedule SPOUT low-to-high transition at:



               up_transition_time = LAST_HI_PIP + (30 * ENGCYL / 360) * DT12S



               where:

               LAST_HI_PIP is the time of the latest PIP up-edge

               ENGCYL is the number of cylinders firing per engine revolution

               DT12S is the time between the last two PIP up-edges

               30 is the number of degrees after PIP up-edge to start pulsewidth

               360 is the number of degrees per revolution



          b) Calculate and schedule SPOUT high-to-low transition at:



               down_transition_time = up_transition_time + SAPW



               where:

               SAPW = 1540 - ((256 * "desired_spark") / 10)

               and

               68 usec <OR= SAPW <OR= 1796 usec



      SPOUT is initialized low on EEC-IV processor power-up  and  will  remain  low

      through CRANK and UNDERSPEED engine modes causing spark to be delivered at 10

      degrees BTDC.  Upon transition into  RUN  mode,  the  EEC-IV  processor  will

      schedule  a  low-to-high  transition of the SPOUT line to occur at 20 degrees

      ATDC of each cylinder followed by a high-to-low transition SAPW  microseconds

      later.  If the SPOUT line remains in either a high or low state for more than

      one PIP period or if the pulsewidth of the signal is outside the clip limits,

      the  HESC  module will assume an EEC-IV processor failure and revert to spark

      placement at 10 degrees BTDC.





















































                                         7-23


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                            EEC-CONTROLLED DWELL (CCDSW = 1)



      In the past, the EEC only provided spark timing to the  Thick  Film  Ignition

      (TFI)  module, which, in turn, controlled the Dwell.  This algorithm provides

      a software replacement to the TFI Dwell with opportunities for improved spark

      control  and shorter coil-on time.  The following strategy can be used with a

      distributorless ignition system.





      Perform the following calculations in background:





      The following determines the minimum time required for the coil to charge  to

      100%  of desired voltage.  The charging time is a function of battery voltage

      and coil temperature.  The values for  FN160A,  FN160B  and  the  temperature

      switch  point between them has been determined by the Ignition Department and

      should NOT be changed without their approval.



                        TEMDWL = DWLWF * ACT + (1 - DWLWF) * ECT





      TEMDWL <OR= DWLTBP -------------| DWLBSE = FN160A (VBAT)

                                      |

                                      | --- ELSE ---

                                      |

                                      | DWLBSE = FN160B (VBAT)



      NOTE: If CCDSW = 0, the TFI module determines the

            dwell. The output will then transition from High

            to Low at SPOUT time and HFDLTA.



      The following logic and calculations are performed in foreground:



      DWLTOT (Dwell turn-on time) is the time when the coil should  start  charging

      to allow sufficient charging time (DWLBSE) as well as time for maximum engine

      acceleration movement of PIP (PIPACL) and maximum change of  requested  spark

      advance allowed (6% of PIP) (SPTADV).



                DWLTOT = SPOUT - DWLBSE + [1 - (SPTADV + PIPACL)] * DT12S











































                                         7-24


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      PIPACL is set by the following conditions and calculations:



      PIPACL (a function of Engine Speed) is  the  maximum  possible  rate  of  PIP

      acceleration.   The  latest  engine speed is available as DT12S (PIP Period),

      PIPACL is described as two equations  to  produce  an  approximation  to  the

      expontential  function describing the initial engine speed and the percentage

      of a PIP period that PIP may change.





      DT12S >OR= PACPER/ENGCYL -----------| PIPACL = PACSLO * DT12S

                                          |  - (PACOFF / ENGCYL)

                                          | Clip PIPACL to PACLIM

                                          |

                                          | --- ELSE ---

                                          |

                                          | PIPACL = 2(BETAs/seconds)

                                          |   * DT12S





                                      DWLTOT LOGIC





      DWLTOT is clipped to 50% of PIP period (MINDLA) at low RPMs and to 20% of PIP

      period  (MINDLB) at ALL other times, to prevent excess coil charge time.  The

      spout output is  sent  low  at  DWLTOT  only  in  Run  mode.   In  Crank  and

      Underspeed, Spout is sent low on PIP-down edge.





      (DWLTOT - SPOUT)/DT12S <OR=  

          MINDLA ------------------|        | DWLTOT = SPOUT + MINDLA

                                   |AND ----|  * DT12S

      DT12S > DWLTSW --------------|        |

                                            | --- ELSE ---

                                            |

      (DWLTOT - SPOUT)/DT12S <OR= MINDLB ---| DWLTOT = SPOUT + MINDLB

                                            |   * DT12S

















































                                         7-25


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      TSLPIP > 800 msec ------------|

                                    |OR ---| Set SPOUT_OUTPUT

      CRKFLG = 1 -------------------|      |  to High

                                           |

      CRKFLG = 1 --------------|           | --- ELSE ---

                               |AND-|      |

      PIP High-to-Low          |    |      | Set SPOUT_OUTPUT

       transition -------------|    |      |  to Low on

                                    |OR ---|  PIP High-to-Low

      CRKFLG = 0 --------------|    |      |  transition

                               |    |      |

      UNDSP = 1 ---------------|AND-|      |

                               |           |

      PIP High-to-Low          |           |

       transition -------------|           |

                                           | --- ELSE ---

      CRKFLG = 0 -------------------|      |

                                    |AND --| Set SPOUT_OUTPUT

      UNDSP = 0 --------------------|      |  to Low at

                                           |  time DWLTOT





      Note the diagrams below.







            -----    -----    -----    -----          /

        PIP |   |    |   |    |   |    |   |          | FIRST PIP

      ______|   |____|   |____|   |____|   |______--> | INTERRUPT IS

                                                      | UP EDGE

                                                      |

      ----------|    |---|    |---|    |---|          |

        SPOUT   |    |   |    |   |    |   |          |

                |____|   |____|   |____|   |______--> |





      ______    ____    ____    ____    ____          /

           |   |   |   |   |   |   |   |   |          |

       PIP |   |   |   |   |   |   |   |   |          |

           |___|   |___|   |___|   |___|   |______--> | FIRST PIP

                                                      | INTERRUPT

                                                      | IS DOWN EDGE

      ______    ____    ____    ____    ____          |

           |   |   |   |   |   |   |   |   |          |

      SPOUT|   |   |   |   |   |   |   |   |          |

           |___|   |___|   |___|   |___|   |______--> |





























                                         7-26


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                           TRANSIENT SPARK COMPENSATION LOGIC





          :<---------DT23S----------->:<-----------DT12S---------->:



          :<- PHFDLT ->:              :<- HFDLTA ->:



          .------------.              .------------.               .---

          |            |              |            |               |

          |            |              |            |<-----TL0----->|

          |            |              |            |               |

      ----.            .--------------.            .---------------.



                                                   :<--TSPKUP-->:

                                                   :            :

                                                 TPPLW        SPOUT





      After a PIP up-edge occurs, the following logic is executed:







      DIFF0 <OR= DIFF1 ---|

                          |AND ---|

      TL0FLG = 1 ---------|       |

                                  |OR -----| DIFCTR = DIFCTR + 1

      DIFF0 > DIFF1 ------|       |        | 

                          |AND ---|        | --- ELSE ---

      TL0FLG = 0 ---------|                |

                                           | DIFCTR = 0







      DIFF0 <OR= DIFF1 ---|

                          |AND ---| TL0FLG = 0

      DIFCTR >OR= DFMIN0 -|







      DIFF0 > DIFF1 ------|

                          |AND ---| TL0FLG = 1

      DIFCTR >OR= DFMIN1 -|







      DIFF0 = |DT12S - 2 * HFDLTA * MKAY|



      DIFF1 = |DT12S - HFDLTA - (HFDLTA * (DT23S - PHFDLT))/PHFDLT|

























                                         7-27


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      After a PIP down-edge occurs, TL0FLG  is  checked  and  the  appropriate  TL0

      calculation is included for SPOUT.





      TL0FLG = 1 ---------------------|

                                      |

      N > TRSRPM -----------|S   Q ---|AND ---| TL0 = HFDLTA * (DT12S

                            |                 | - PHFDLT * MKAY)/

      N < TRSRPM - TRSRPH --|C                | PHFDLT

                                              |

                                              | --- ELSE ---

                                              |

                                              | TL0 = HFDLTA * MKAY































































































                                         7-28


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                SIGNATURE PIP DISTRIBUTOR







      The Signature Pip Distributor has a unique duty cycle on the shutter used  to

      fire  cylinder  #1.   The purpose of this unique shutter is to allow the fuel

      injectors to be fired at some optimum time relative to intake valve position.

      This  is  accomplished  by  first  identifying  the  cylinder #1 Pip and then

      synchronizing the fuel injectors to it as described in the fuel section.





      The engineer must indicate which type of distributor is used as follows:



      If a Signature Pip Distributor is used, then set  MHPFD  to  the  appropriate

      value as defined in the injector synchronization routine.



      If a Conventional Pip Distributor is used, then set MHPFD = .99.





      When  MHPFD  <  .99,  then  another  consideration  in  the  FALLING-EDGE  vs

      RISING-EDGE  decision  is  the  state  of  SYNFLG.   As described in the fuel

      section, when SYNFLG = 0, then the Signature Pip has not yet been identified.

      Only the RISING-EDGE calculation is allowed during this time.





      When SYNFLG =  1,  then  the  Signature  Pip  has  been  identified  and  its

      delta-time,  HFDLTA,  can be normalized.  Signature PIP may not be exactly 30

      or 35%; thus, any error from these values will introduce error in the  output

      spark.   To  prevent  this  error,  the  Signature  PIP will be normalized by

      replacing the HFDLTA with the HFDLTA from the previous PIP period (PHFDLT).



                       HFDLTA (for Sig Pip) = HFDLTA / (2 * SIGDC)



      The normalized falling edge, FE, is generated as follows:



                         FE (for Sig Pip) = RISING EDGE + HFDLTA





      When SYNFLG = 1 and the RPM is low enough, then the FALLING-EDGE  calculation

      is  performed  in  the standard manner except that the times generated by the

      Signature Pip are first normalized.







































                                         7-29


                           IGNITION TIMING STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                             EEC DISTRIBUTOR ROTOR REGISTRY



      Although the computer signals the ignition module and the ignition coil  when

      to  fire the spark, the computer does not know which cylinder it is trying to

      ignite.  In order to get the spark from the  ignition  coil  to  the  correct

      cylinder,  it  is necessary for the distributor rotor to be lined up with the

      correct terminals on the cap so that only a small air  gap  need  be  jumped.

      This  condition  is achieved by adjusting mechanically the orientation of the

      distributor rotor and cap with respect to the crank position sensor which may

      be a part of distributor or remote from it.



      A slight error in registry may cause mis/crossfire at one end  of  the  spark

      range.



      The range of rotation in which the spark will go to the correct  cylinder  is

      given in the chart below



      ENGINE    TOTAL     PIP SENSOR     SPARK          LOS

      SIZE      REGISTRY  LOCATION       RANGE          SPARK

      4-CYL     60        10 BTDC        0-60           10

      6-CYL     50        10 BTDC        0-50           10

      8-CYL     42        10 BTDC        5-47           10



      All values are in Engine Degrees. LOS spark is BTDC.

      It is also necessary that the distributor adjustments be specified with these

      values.   For  this  reason,  the Ignition Department must be notified of any

      changes in these clip values or pip sensor location (initial timing), so that

      production  distributors will be correct.  It is important that the 543 chart

      affecting rotor alignment be updated by the engine design activity involved.



      ADJUSTMENT PROCEDURE:



      The Universal Distributor will be assembled with the correct rotor  registry,

      and  the  Hall  Effect Sensor (PIP Sensor) located at the correct position in

      relation to the rotor registry constants.  It  is  necessary  to  locate  the

      distributor correctly, in relation to the crankshaft position of the engine.



      When a Universal Distributor is installed in the engine, it is held in  place

      by  two screws.  To set the initial timing of 10 deg BTDC unplug the EEC from

      memory or disconnect the SPOUT wire and adjust distributor  angular  location

      by rotating the body till 10 deg BTDC is observed with a timing light.







































                                         7-30


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                          INDIVIDUAL CYLINDER KNOCK STRATEGY





                              KNOCK HARDWARE DESCRIPTION



      The knock sensor is a piezo-electric accelerometer that resonates  at  engine

      knock frequencies of approximately 5.45, 5.7, 6.0 or 8.05 kHz.  The bandwidth

      of the resonant frequency is quite narrow (<+/- 150 Hz)  to  avoid  resonance

      due  to  noise  from  other  sources.   The  resonation  causes the sensor to

      transmit a positive voltage,  KNOCK,  to  the  EEC  hardware  circuit.   This

      hardware  circuit  compares  the KNOCK voltage to a threshold voltage, NOISE.

      When KNOCK > NOISE, the hardware circuit sends a KNOCK INPUT  signal  to  the

      EEC software.  This event is represented on the next page as KI = 1.  The EEC

      software stores this information  until  the  next  rising  edge  of  PIP  is

      received.   At  that  time,  the  information  is  used by the KNOCK LOGIC as

      described in the remainder of this document.



      NOISE, the threshold voltage, is a positive voltage in an RC circuit which is

      proportional to the Knock Input level at the time that a charging pulse, KTS,

      is output.  This threshold voltage  is  established  to  avoid  treating  rod

      knock, piston slap, valve train noise and other noise as spark knock.



      During normal engine operation, the software opens and closes a  window  once

      per  PIP  period.   While the window is open, KTS charges up the capacitor in

      the RC  circuit.   While  the  window  is  closed,  the  NOISE  level  decays

      (decreases)  at  a  steady  rate  determined  by  the time constant of the RC

      circuit.



             NOISE ~ (D.C. Bias + KNOCK(A))*(1-exp(-KTS/RC)) + LAST NOISE



            where,  NOISE is the noise threshold level



                    KNOCK(A) is the Knock input level at the time

                             KTS is being output.



                    KTS is the pulsewidth (secs) of the charging pulse.

                    KTS Start time is calculated as follows:

                     NEWTIME = LAST_HIPIP + (WINDOW_BETA*MKAY*2*HFDLTA)



                    RC is the RC time constant.



                    LAST NOISE is the noise level at the time

                             KTS is output.



      WARNING:  To avoid raising the NOISE threshold level too high, the KTS  pulse

      should  charge  the  RC  circuit  only  during that portion of the PIP period

      wherein no Knock is indicated, normally late in the  current  PIP  period  or

      early  in  the  following  PIP period.  The calibration of the pulsewidth and

      timing of the window is described in the Knock Threshold Sense Logic  section

      of this strategy.



      Since the noise level is a function of RPM,  the  NOISE  threshold  tends  to

      increase  with  increasing RPM.  At high RPM and heavy detonation conditions,

      knock usually continues well into the following PIP period.  To avoid opening

      the window during the knock period, the software withholds KTS for WINCLD PIP

      periods to avoid raising the noise threshold too high.









                                         7-31


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                           INDIVIDUAL CYLINDER KNOCK STRATEGY





                                       DEFINITIONS





      INPUTS



      Registers:



       -  APT = Throttle Mode Flag.

                (Set = -1 = closed throttle)

                (Set =  1 = wide open throttle)

                (Set =  0 = part throttle)



       -  ECT = Engine coolant temperature, deg F.



       -  KI = Knock indicated, knock level is higher than noise level;

               called KNK_HIGH in code.



       -  KNK_HIGH = Knock level input flag.



       -  KWCTR = Cancel window counter incorporated each PIP period.



       -  LOAD = Universal normalized load parameter.



       -  N = Engine speed, RPM.



       -  N_BYTE = Low resolution RPM.



       -  RETINC = Calculated as a function of RPM and is subtracted

                   from each SPKAD corresponding to a knocking 

                   cylinder. (positive degree)



       -  SAF = Final spark advance in degrees.



       -  SPKADn = Spark adder terms for the nth cylinder.  It is added

                   to SAF, may be positive or negative degrees.



       -  TBART = Average Filtered Throttle Position = UROLAV (TP,TCTPT)



       -  TCF = Value of the difference between Throttle position

                (TP) and TBART.



       -  TIPRET = Tip-in retard.



       -  TP = Instantaneous throttle position, counts.



       -  TSLADV = Free-running millisecond timer which counts the

                   time since the spark was last advanced by the

                   KNOCK Strategy.



















                                         7-32


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      Bit Flags:



       -  CTFLG = Flag set to 1 to indicate closed throttle Tip-in.



       -  KNOCK_DETECTED = Flag set to 1 if Knock occured in current

                           PIP half period.



       -  KNOCK_ENABLED = Knock Strategy enabled.



       -  KNOCK_OCCURED = Flag set to 1 (in the knock routine), if

                         knock occured in the current or last PIP 

                         period.



       -  TIPFLG = Flag set to 1 to indicate a Tip-in.



      Calibration Constants:



       -  ADVLIM = Maximum degrees of advance control.



       -  ECTIP = Minimum ECT to enable Tip-in Retard, deg F.



       -  ECTNOK = Disable Knock control below this value of ECT.



       -  ENGCYL = Number of cylinders per engine revolution

                   (NUMCYL/2); or number of PIPs per engine revolution.



       -  FN143A = Retard increment versus RPM, deg.



       -  FN144A = Variable knock Threshold window open time,

                   msec. Input is Engine speed in RPM; output

                   is fraction of PIP Period.



       -  FN145A = Variable Knock threshold window position.

                   Input = Engine Speed in RPM, output =

                   fraction of PIP period. 



       -  FN146B = Spark advance Rate versus RPM, sec/deg.



       -  KACRAT = Change in TP equivalent to a

                   Tip-in Retard, counts.



       -  KIHP = Knock Hardware Present Switch.

                 1 = Knock sensor present.



       -  KNKCYL = Change in TP equivalent to a Tip-in Retard,

                   counts. 



       -  LODNOK = Minimum load for knock control. 



       -  NTIP = Maximum RPM to enable Tip-in retard (restricted

                 to less than or equal to 2000 to assure TIPRET

                 ramp back function.)



       -  RETLIM = Maximum degrees of retard control.



       -  RPMCNL = Threshold RPM below which the window is

                   always open. 







                                         7-33


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





       -  RPMMIN = Disable Knock control below this RPM.



       -  TCTPT = Time constant for TBART (TP filter).



       -  TIPHYS = TIPLOD Hysteresis term to prevent multiple Tip-in

                  retards, unitless. 



       -  TIPINC = Advance per PIP following a Tip-in retard.

                   (Must be a positive number; units are degrees)



       -  TIPLOD = Minimum Load to clear CTFLG for Tip-in Retard.



       -  TIPMAX = Initial amount of retard following a Tip-in.

                   (Must be a negative number; units are degrees)



       -  WINCLD = Number of PIPs threshold window is to be closed.



       -  WINLEN = Minimum amount of time threshold window is open,

                   msec. 



       -  WOPEN = Position of window opening, Beta. 



       -  Y = Normal Part throttle spark multiplier. 







      OUTPUTS



      Registers:



       -  KWCTR = Cancel window counter incorporated each PIP period.



       -  RETINC = Calculated as a function of RPM and is subtracted

                   from each SPKAD corresponding to a knocking 

                   cylinder. (positive degree)



       -  SPKADn = Spark adder terms for the nth cylinder.  It is added

                   to SAF, may be positive or negative degrees.



       -  TIPRET = Tip-in retard.



       -  TSLADV = Free-running millisecond timer which counts the

                   time since the spark was last advanced by the

                   KNOCK Strategy.



      Bit Flags:



       -  CTFLG = Flag set to 1 to indicate closed throttle Tip-in.



       -  KNOCK_DETECTED = Flag set to 1 if Knock occured in current

                           PIP half period.



       -  KNOCK_OCCURED = Flag set to 1 (in the knock routine), if

                         knock occured in the current or last PIP 

                         period.



       -  TIPFLG = Flag set to 1 to indicate a Tip-in.







                                         7-34


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                               KNOCK  SIGNAL DETECTION







              :                                       :

              :............. PIP PERIOD ..............:

              :                                       :



              ---------------------                   ----------

              |                   |                   |

      PIP     |                   |                   |

              |                   |                   |

         ------                   ---------------------



              :                                        :

              :<-- (WOPEN + FN145(N)) * PIP PERIOD --> :

              :                                        :



               ------                                  ------

               |    |                                  |    |

      KTS  --->|    |<--- WINLEN+FN144(N)*PIP PERIOD   |    |

               |    |                                  |    |

      ----------    ------------------------------------    ----



               :    :                                  :    :

               :    :                                  :    :

               :    :                                  :    :

               :    :                **                :    :

               :    :               *  *               :    :

               :    :              *    *              :    :

               :    :             *      *             :    :

               :    :-------     *        *            :    :---

      NOISE    :   /:       ----*--        *           :   /:

      -        :  / :          *   -------  *          :  / :

       ----    : /  :         * :         ---*---      : /  :

         -------/   :        *  :             *  -------/   :

               :    :       *   :            : *       :    :

               :    :      *    :            :  *      :    :

               :    :     *     :            :   *     :    :

      KNOCK    :    :    *      :            :    *    :    :

      SENSOR   :    :   *       :            :     *   :    :

           *************        :            :      ************

                                :            :

                                :            :

                                :            :

                                :            :



                                --------------

                                |            |

      KI                        |            |

                                |            |

          -----------------------            -------------------



          (IF KNOCK > NOISE, KI=1; OTHERWISE, KI=0)













                                         7-35


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                                     STRATEGY DESCRIPTION



      The Individual Cylinder Knock Strategy consists of four major sub-strategies:



          1. KNOCK STRATEGY ENABLE LOGIC

          2. KNOCK THRESHOLD SENSE LOGIC

          3. SPARK RETARD LOGIC





      1. KNOCK STRATEGY ENABLE LOGIC



      The following logic is checked every background loop:





      KIHP = 1 ------------|

                           |

      LOAD > LODNOK -------|

                           |

      ECT > ECTNOK --------|AND ----| ENABLE KNOCK STRATEGY

                           |        |

      N_BYTE > RPMMIN -----|        | --- ELSE ---

                                    |

                                    | DISABLE KNOCK STRATEGY

                                    | SET SPKAD (ALL) = 0

                                    | SET TSLADV = 0





      LODNOK, ECTNOK, and RPMMIN define  the  minimum  engine  operating  conditions  to

      enable  the  Knock  Control Strategy.  These are calibration parameters accessible

      through VECTOR and through the calibration console.



      SPKAD(ALL) are spark adder terms; SPKAD1, SPKAD2, SPKAD3, ....  SPKADn; where n  =

      KNKCYL.   If  KNKCYL  is  calibrated  to be equal to the number of cylinders, then

      there is a unique SPKAD term for each cylinder -- INDIVIDUAL CYLINDER  KNOCK.   If

      KNKCYL  is calibrated to 1, the Knock Strategy functions as a Multi-Cylinder Knock

      Strategy; i.e., there is only one SPKAD term.  It is applied to all cylinders.  If

      one  cylinder  knocks,  then all cylinders get retarded an equal amount.  Negative

      values for SPKAD mean that spark is being retarded.













































                                         7-36


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      2.  KNOCK THRESHOLD SENSE (KTS) LOGIC



      The software periodically opens a window which allows a Noise  threshold  charging

      pulse  called KTS to raise the Knock Threshold level of the Hardware circuit.  The

      window always opens once per PIP period unless the RPM exceeds RPMCNL.  The engine

      developer defines the window during which the charging pulse is on by means of two

      fox functions and two calibration constants.  The pulsewidth of  KTS  defines  the

      period  of  time  that  the capacitor in the RC circuit will be charged.  Wide KTS

      pulses cause the threshold to increase.  The timing of the KTS pulse must coincide

      with  the  optimum  non-knocking  portion  of  the PIP period over all engine RPM.

      Since Knock tends to to extend longer through the PIP period with increasing  RPM,

      the  KTS  pulse  should  be  timed  late in the current PIP period or early in the

      following PIP period (95-110% PIP period).



      Noise threshold elevation will result when the  capacitor  charging  rate  greatly

      exceeds  the  discharge  rate or when the KTS pulse is output during conditions of

      Knock.  When knock occurs at high RPM, the charging pulse window  is  kept  closed

      for  WINCLD  PIP  periods to prevent elevating the NOISE threshold to the level of

      KNOCK, thereby preventing the EEC hardware circuit from sensing  additional  spark

      knock.





      The calculations shown below are checked every rising edge of PIP:





      The pulsewidth of KTS is equal to:



                           WINLEN + FN144 (N) * ("LAST PIP PERIOD")



      Where, WINLEN is minimum KTS pulsewidth, clock ticks.



          FN144(N) is fraction of pip period, BETA Units.



          "LAST PIP PERIOD" is equal to 60/(ENGCYL*N).



          ENGCYL is number of PIPs per revolution.





      The timing of KTS is equal to:



                            (WOPEN + FN145(N))*("LAST PIP PERIOD")



      Where, WOPEN is the minimum delay after the rising edge  of  PIP  before  the  KTS

      pulse will be output.



      FN145(N) is a fraction of PIP period, BETA Units.



      Note:  The KTS pulse is output even if the knock strategy is disabled  to  refresh

      the  threshold  level  in  the event that the Knock strategy becomes enabled.  The

      absence of the KTS pulse for more than a few PIP  periods  would  result  in  full

      retard upon entering Knock strategy.



















                                         7-37


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      The following logic is checked every PIP UP edge before calculating spout.





      KIHP = 0 ---------------------------| NO KNOCK SENSOR

                                          | Do not output KTS

                                          |

                                          | --- ELSE ---

                                          |

      N <OR= RPMCNL ---------------|      |

                                   |      |

      KWCTR > WINCLD --------------|OR ---| SET KWCTR = 0

                                   |      | OPEN WINDOW AT 

      KNOCK_DETECTED = 0 ---|AND --|      |   CALCULATED TIME

                            |             | 

                            |             | --- ELSE ---

       (no KNOCK in current |             | 

        PIP half period)    |             | INCREMENT KWCTR

                            |             | DO NOT OPEN WINDOW

      NOT SIGNATURE PIP ----|





      RPMCNL is the threshold RPM below which the WINDOW is always open.  The WINDOW  is

      not  opened  during  a  signature  PIP  period  (if  Signature  PIP distributor is

      present), or if KNOCK has been detected during the current PIP first half period.



      KNOCK_DETECTED = 1 ----|

                             |AND ----| KNOCK_OCCURRED = 1

      KNK_HIGH = 1 ----------|        |

                                      | --- ELSE ---

      KNOCK_DETECTED = 1 ----|        |

                             |AND ----| KNOCK_OCCURRED = 1

      KNK_HIGH = 0 ----------|        | KNOCK_DETECTED = 0

       (KI currently                  |

        indicates NO KNOCK)           | --- ELSE ---

                                      |

                                      | KNOCK_OCCURRED = 0



      The following line of logic is executed "almost in real time".



      KIHP = 0 ----------------| Prevent knock interrupts

                               | from occuring

                               |

                               | --- ELSE ---

                               | 

                               | Allow knock interrupts

                               | to occur





      NOTE:  KNOCK_DETECTED & VIP_KNOCK are both set in the Knock Interrupt Routine.























                                         7-38


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





              |<--"LAST PIP PERIOD"-->|

              _____________           _____________           ____

              |           |           |           |           |

              |           |           |           |           |

              |           |           |           |           |

      PIP  ___|           |___________|           |___________|



              |<-----------A------->|



             _____                   _____

             |   |                   |   |

             |<B>|         |         | | |         |           |

             |   |                   |   |

       KTS  _|   |___________________|   |__________________________







                     ___________ 

                     |         | 

               |     |     |   |       |           |           |

                     |         |

       KI   ---------|         |------------------------------------





                     ___________________

                     |                 |

                     |                 |

               |     |     |           |           |

       KNOCK ________|                 |_______________________|____

       DETECTED



                                       _________________________

                                       |                       |

               |           |           |           |           |

                                       |                       |

       KNOCK __________________________|                       |_____

       OCCURRED





                    Where A = (WOPEN + FN145)*("LAST PIP PERIOD")

                     B = WINLEN + FN144*("LAST PIP PERIOD") = KTS



      Note: Range of A is typically 90 - 110 % of PIP period.



































                                         7-39


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      3. SPARK RETARD LOGIC



      Whenever the Knock strategy is  enabled,  the  software  calculates  RETINC  as  a

      funcion  of  RPM.   RETINC  is  subtracted  from  each SPKAD that corresponds to a

      "knocking" cylinder.  The software keeps track of the cylinders by means of a "PIP

      counter".   The  "PIP  counter" is incremented once per PIP period and is set to 1

      every time it exceeds  KNKCYL.   To  prevent  excessive  retard  (perhaps  due  to

      erroneous knock sense) each SPKAD is clipped to RETLIM.



                                     RETINC = FN143A (N)



      During a particular PIP period ("PIP counter" = n), the software makes adjustments

      to SPKAD(n-1) based on whether Knock was sensed during the previous PIP period and

      uses SPKAD(n), calculated during the previous engine  cycle  (KNKCYL  PIP  periods

      ago) to determine the final value of spark advance for the next spark output.





      KNOCK STRATEGY ENABLED -|

                              |

      KNOCK_OCCURRED = 1 -----|

       (knock sensed          |

        during last PIP       |AND --| SET SPKAD(n-1) = SPKAD(n-1)

        Period)               |      |    - RETINC

                              |      | (Clip min. SPKAD(n-1) to RETLIM)

      TIPRET = 0 -------------|      







































































                                         7-40


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





   THROTTLE POSITION FILTER (TBART)





      The TBART calculation is a time-dependent rolling average filter of  instantaneous

      throttle  position  (TP).   It  is  updated  each  background pass while in RUN or

      UNDERSPEED mode.  The TBART time constant TCTP, is a calibratable parameter.



                                  TBART = UROLAV (TP,TCTPT)





      A separate part of the retard logic responds to Tip-in  detonation,  and  even  to

      potential Tip-in detonation, by retarding the spark TIPRET degrees.



      Tip-in detonation is a result of the relatively slow response of both LOAD and  N,

      which  are  average values during a PIP period, to the sudden increase in manifold

      pressure and decrease in engine speed, respectively,  which  occur  within  a  PIP

      period  during  a Tip-in.  The result is that the delivered spark is over-advanced

      for the instantaneous conditions until the LOAD calculation has updated to reflect

      the  higher  manifold  pressure  and the engine speed has recovered.  The recovery

      from a Tip-in is normally complete within a few PIP periods.



      The KNOCK STRATEGY is designed to anticipate detonation following  a  Tip-in  from

      idle  (the  worst case Tip-in condition) and respond by retarding the spark before

      detonation occurs.  Tip-in from part- throttle results in retarded spark  only  if

      knock  is  sensed.  In both cases, Tip-in retard is applied to whichever cylinders

      follow the Tip-in,  not  to  individual  cylinders  as  is  usually  done  in  the

      individual  cylinder  knock  strategy.   Thus,  there is no need to wait an entire

      engine cycle before responding to Tip-in detonation.



      The Tip-in condition is recognized by comparing TP to a filtered TP, called TBART.

      (NOTE that TBART is initialized to the same initialization value as RATCH) If TCF,

      the difference between TP and TBART, exceeds KACRAT,  and  if  either  the  Tip-in

      occurred   from   idle  or  if  the  knock  is  sensed  following  a  Tip-in  from

      part-throttle, then the spark for the next PIP is retarded by TIPMAX degrees.   On

      the  ensuing PIPS, the amount of retard is decremented by TIPINC degrees until all

      Tip-in retard is removed.  The Tip-in logic can be disabled by  setting  KACRAT  =

      1023.















































                                         7-41


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      The following Tip-in logic is checked every background loop:





      ECT > ECTIP ----------|

                            |

      TCF >OR= KACRAT ------|AND -----| SET TIPFLG = 1

                            |         |

      N < NTIP -------------|         | --- ELSE ---

                                      |

                                      | TIPFLG = 0







      APT = -1 --------|AND ----|S Q--| SET CTFLG = 1

                       |        |     |

      LOAD < TIPLOD ---|        |     | --- ELSE ---

                                |     |

      LOAD > TIPLOD + TIPHYS ---|C    | SET CTFLG = 0



      NOTE: The Sum of TIPLOD + TIPHYS is clipped to 1.99



      The following Tip-in logic is checked before SPOUT issues (rising

      or falling edge of PIP):





      TIPRET = 0 --------------------|

                                     |

      TIPFLG = 1 --------------------|AND --| SET TIPRET = TIPMAX

                                     |      | TBART = TP

      KNKCYL NOT=1 ---------|AND-|   |      |

                            |    |   |      |

                            |    |   |      |

      KNOCK_ENABLE = 1 -----|    |   |      |

                            |    |   |      |

      KNOCK_OCCURRED = 1 ---|    |OR-|      | --- ELSE ---

        (knock sensed)           |          |

                                 |          |

      CTFLG = 1 -----------------|          | SET TIPRET = TIPRET + TIPINC

                                            | (CLIP MAX TIPRET TO 0)











































                                         7-42


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      4. SPARK ADVANCE LOGIC



      The following logic is checked every rising edge of PIP:





      KNOCK STRATEGY ENABLED -|

                              |AND --| SET SPKAD(ALL) = SPKAD(ALL) + 

      TSLADV >OR= FN146B/4 ---|      |   0.25 deg.  (CLIP MAX 

                                     |   SPKAD(ALL) TO ADVLIM)

                                     | SET TSLADV = TSLADV - FN146B/4







      If the Knock Strategy is enabled, all of the spark adders, SPKAD1  through  SPKADn

      are  incremented  0.25  degrees  every  FN146B/4 seconds.  Each of the SPKADn's is

      clipped to ADVLIM.  If ADVLIM = 0, the KNOCK STRATEGY will not advance  the  spark

      beyond SAF.



      NOTE:  If the Knock Strategy is enabled and no cylinders are knocking,  the  spark

      to  each  cylinder  will  advance  to  SAF  + ADVLIM.  If a particular cylinder is

      knocking, the Retard Strategy will tend to dominate the advancing  mechanism.   To

      insure that the spark to knocking cylinders is retarded more than the strategy can

      advance it, FN146B should be greater than or equal  to  1/FN143A.   FN146B  is  in

      degrees  of  advance  per  second  while  FN143  is  in degrees of retard per PIP,

      therefore, FN143 must be converted to degrees per second at  a  given  RPM  for  a

      valid comparison to be made.  When FN146B is large, then the spark advance rate is

      small.  For example, FN146B = 0.5 is equivalent to  a  spark  advance  rate  of  2

      degrees/sec.  FN146B = 0.25 is equivalent to spark advance rate of 4 degrees/sec.

































































                                         7-43


                           IGNITION TIMING STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                                     SUMMARY AND EXAMPLE





      The final value of spark advance is calculated by the  EOS  immediately  prior  to

      calculating the waiting time:



      CALCULATED SPARK OUT (n+1) = SAF + SPKAD(n+1) + TIPRET



      The table shown below is included as an illustration of  the  Individual  Cylinder

      Knock Control adjustment to the Spark Advance.





                     Example of Individual Cylinder Knock Control (4 cyl)



                         _________________________________________

                         |         |         |         |         |

         PIP Counter     |    1    |    2    |    3    |    4    |

                         |_________|_________|_________|_________|

                         | TIPRET+ | TIPRET+ | TIPRET+ | TIPRET+ |

         Adjustment      | SPKAD1  | SPKAD2  | SPKAD3  | SPKAD4  |

         to Spark        |  = +2   |  = +4   |  = -6   |  = +6   |

                         |_________|_________|_________|_________|

                         |         |         |         |         |

         Base Spark      |   24    |   24    |   24    |   24    |

         (SAF)           |_________|_________|_________|_________|

                         |         |         |         |         |

         Calculated      |   26    |   28    |   18    |   30    |

         Spark Out       |_________|_________|_________|_________|

                         |         |         |         |         |

         Actual          |   26    |   28    |   18    |   28.8  |

         Spark Out       |_________|_________|_________|_________|





      Due to the physical time constraints for arming  the  coil  and  firing  the  next

      spark, the maximum spark advance increase between consecutive spark events must be

      no more than SPKLIM*360/ENGCYL degrees.



      In this example, SPKLIM = .06 and  ENGCYL  =  2.   Therefore,  the  largest  spark

      advance  increase allowed between cylinders is 10.8 deg.  There is no limit on the

      amount of spark advance decrease allowed between cylinders.









































                                         7-44

























                                         CHAPTER 8



                                       EGR STRATEGY



































































































                                         8-1


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





      DEFINITIONS



      INPUTS



      Registers:



       -  AM = Air mass flow (lb/min).



       -  AMPEM = Air mass flow plus EGR mass flow.



       -  APT = Throttle Mode Flag.

                (Set = -1 = Closed Throttle)

                (Set =  1 = Wide Open Throttle)

                (Set = 0 = Part Throttle)



       -  ATMR1 = Time since start (time since exiting

                  Crank mode), sec.



       -  ATMR2 = Time since ECT became greater than TEMPBF

                  sec.



       -  BP = Barometric pressure.



       -  DELOPT = Filtered desired EGR valve position.



       -  EGRERR = DELOPT - EVP



       -  EM = EGR mass flow.



       -  EOFF = The EGR valve reading when the valve is

                 fully closed in A/D counts.



       -  EVP = EGR valve position reading in A/D counts.



       -  ISCFLG = Mode Indicator Flag

                   -1 = Dashpot, 0 = Pre-pos.

                    1 = RPM Control, 2 = MAP RPM Control



       -  MFAMUL = MFA table ramp-in multiplier, unitless.



       -  PEXH = Absolute exhaust pressure (in Hg).

               = FN074A(AM)*29.875/BP + BP



       -  TCSTRT = Temperature of ECT at cold start, deg F.



      Bit Flags:



       -  AFMFLG = Flag indicating that ACT sensor has failed.



       -  BFMFLG = Flag indicating that BP sensor has failed: 1 -> failure.



       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.



       -  CRKFLG = Flag indicating engine status, set to 1 if

                   in Crank mode.



       -  EFMFLG = Flag indicating that EVP EGR sensor has failed (This

                   flag performs for both Sonic and PFE EGR).





                                         8-2


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





       -  EGREN = Flag which indicates EGR enabled if set

                  to 1.



       -  EGRFLG = Flag that indicates whether DCOFF has been 

                   added to EGRDC.



       -  MFAFLG = Managed Fuel/Air Ratio Flag. This is

                   set to one if MFA is being used.



       -  MFMFLG = Flag indicating that MAF sensor has failed.



       -  TFMFLG = Flag indicating that TP sensor has failed.



      Calibration Constants:



       -  CTHIGH = Hot Start Minimm Engine Coolant Temperature,

                   Deg F.



       -  CTLOW = Cold Start maximum ECT, deg F.



       -  DCOFF = Duty cycle required to start to open the valve

                  equivalent to LGA0O in the Vent/Vac system.



       -  EGRDED = Deadband value for EVP - DELOPT, counts.



       -  EGRMPT = Calibration time delay to ramp EGR in, sec.

                   (EGRATE Ramp time for TCSTRT <or= CTLOW)



       -  EGRTD1 = EGR time delay (TCSTRT <or= CTLOW) for low

                   mileage. 



       -  EGRTD2 = EGR time delay (CTLOW < TCSTRT < CTHIGH) for

                   low mileage. 



       -  EGRTD3 = EGR time delay (TCSTRT >or= CTHIGH) for low

                   mileage. 



       -  EGRTD4 = EGR time delay (TCSTRT <or= CTLOW) for high

                   mileage or NO IMS hardware. 



       -  EGRTD5 = EGR time delay if CTLOW < TCSTRT < CTHIGH for

                   high mileage or no IMS hardware. 



       -  FN070 = Engine speed N normalizing function for FN908A and

                  FN908B, generates table entry point. Input = N and

                  Output = table entry point.



       -  FN074 = EGR Valve upstream pressure. Input: AM * KAMRF1 and

                  Output = H2O.



       -  FN082 = LOAD normalized function for FN1223. Input =

                   LOAD and Output = Row Number (table entry point).



       -  FN083 = RPM normalizing function; generates table entry

                 point. Input = N and Output = Normalized N.



       -  FN211 = Part throttle EGR multiplier as a function of

                  Engine Coolant Temperature ECT.





                                         8-3


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





       -  FN212A = EGRSEA multiplier as a function of Barometric

                   Pressure BP.



       -  FN217A = EGRALT multiplier as a function of Barometric

                   Pressure BP.



       -  FN219A = EGR mass flow as a function of EGR valve

                  position (EVP-EOFF).



       -  FN220 = Multiplier as a function of Air Charge Temperature ACT.



       -  FN221 = EGR valve position as a function of desired mass flow.



       -  FN239 = Change in EVR duty cycle as a function of

                  the position error, EGRERR (IF PFEHP = 0);

                  or as a function of Pressure Error PRESER

                  (If PFEHP = 1).



       -  FN246 = EGR Mass flow as a function of DELPR, lb/min.



       -  FN247 = Desired Pressure Drop as a function of Desired

                  EGR Mass flow, inches H2O.



       -  FN311 = MFA altitude multiplier, unitless.



       -  FN908A (EGRSEA) = Sea level EGR table.

                 X-input = FN070 - Normalized engine speed, RPM

                 Y-input = FN071 - Normalized load.

                 Output = Percent EGR



       -  FN908B (EGRALT) = Altitude EGR table.

                 X-input = FN070 - Normalized engine speed, RPM

                 Y-input = FN071 - Normalized load.



       -  FN1223 = (Managed fuel air EGR table) 4 x 3 table of

                   multipliers.

                 X-input = FN083 - Normalized engine speed, RPM

                 Y-input = FN082 - Normalized Load



       -  KPEI = Part throttle EGR adder.



       -  PFEHP = Switch to select EGR strategy. 1 = PFE; 0 = Sonic;

                  2 = No EGR.



       -  TCDLOP = Time constant for DELOPT, sec.



       -  TCDP = Time constant fpr DESDP, sec.



       -  TCEACT = Time constant for EGRACT, sec.



       -  TSEGRE = Accumulated time EGR is enabled.



       -  X = EGR table multplier. 















                                         8-4


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  DELOPT = Filtered desired EGR valve position.



       -  DESEM = Desired EM, lb/min. (EGRATE * AMPEM /100)



       -  EGRACT = Actual EGR percent = 100*EM/AMPEM.



       -  EGRATE = Desired EGR rate in percent.



       -  EGRDC = Duty cycle of the EVR output, fraction.



       -  EM = EGR mass flow.



      Bit Flags:



       -  EGREN = Flag which indicates EGR enabled if set

                  to 1.



       -  EGRFLG = Flag that indicates whether DCOFF has been 

                   added to EGRDC.











































































                                         8-5


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                                     EGR STRATEGY

                                       OVERVIEW





      The GX strategy provides the capability to select one  of  two  EGR  systems:

      Sonic EGR or PFE EGR.



      The EGR strategy is divided into:



          1) Enable/Disable Logic      -     Common

          2) EGRATE Calculation        -     Common

          3) EM Calculation            -     Unique

          4) EGR Error Calculation     -     Unique

          5) EGRDC Update              -     Unique

          6) EVR Output Routine        -     Common





      The calibrator selects the desired EGR system by setting  PFEHP  equal  to  1

      (for  PFE EGR - Pressure Feedback EGR); or, to zero (for Sonic EGR); or to 2,

      to disable both EGR strategies.  The Switch logic is described below.





                                    EGR SELECT LOGIC





      PFEHP = 0 -------------------------| Do SONIC EGR Control

                                         |

                                         | --- ELSE ---

                                         |

      PFEHP = 1 -------------------------| Do PRESSURE FEEDBACK EGR

                                         | Control

                                         |

      PFEHP = 2 -------------------------| --- ELSE ---

                                         |

                                         | EGR disabled, NO EGR Control

                                         | required

                                         |

                                         | Set EM = 0

                                         | Set EGRACT = 0

                                         |

                                         | Return







































                                         8-6


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                                EGR ENABLE LOGIC - COMMON



      The following logic describes the operating conditions during  which  EGR  is

      enabled  (When  PFEHP  = 2, no EGR is required and the EGR strategy is always

      disabled).





      TCSTRT >OR= CTHIGH ---------|

                                  |AND --|

      ATMR1 >OR= EGRTD3 ----------|      |

                                         |

                                         |          

      CTLOW < TCSTRT < CTHIGH ----|      |

                                  |AND --|OR -|AND -| ENABLE EGR

      ATMR1 >OR= EGRTD2 ----|     |      |    |     | EGREN = 1

                            |AND -|      |    |     |  

      ATMR2 >OR= EGRTD5 ----|            |    |     | --- ELSE ---

                                         |    |     | 

                                         |    |     | EGREN = 0

      TCSTRT <OR= CTLOW ----------|      |    |     | DISABLE EGR

                                  |      |    |     | EGRATE = 0

                                  |AND --|    |     | DESEM = 0

      ATMR1 >OR= EGRTD1 ----|     |           |     | EGRACT = 0

                            |AND -|           |

      ATMR2 >OR= EGRTD4 ----|                 |

                                              |

      APT = 0 (PART THROTTLE) ----------------|

                                              |

      EVP >OR= EOFF - EGRDED ----|            |

                                 |OR ---------|

      PFEHP = 0 -----------------|            |

                                              |

      CRKFLG = 0 -----------------------------|

                                              |

      AFMFLG = 0 ------------|                |

                             |                |

      CFMFLG = 0 ------------|                |

                             |                |

      EFMFLG = 0 ------------|AND ------------|

                             |

      MFMFLG = 0 ------------|

                             |

      TFMFLG = 0 ------------|

                             |

      BFMFLG = 0 ------------|































                                         8-7


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





      DESIRED EGR FLOW RATE EQUATIONS - COMMON





      If EGR is enabled, the base amount of EGR to be added is determined from  two

      10  x  8  tables  the  format of which is identical to that used for the PART

      THROTTLE spark timing determinations.



      The table values are a function of engine speed N and LOAD.



      The base amount can be adjusted by several EGR modulators to reflect  special

      engine operating conditions.



      The amount of EGR to be added is determined as shown below.







      MFAFLG = 1 -------| EGRATE = ['E' * (1 - {FN1223

                        |   * MFAMUL * FN311})] + KPEI

                        |

                        | --- ELSE ---

                        |

                        | EGRATE = 'E' + KPEI





      'E' is defined below.





            'E' = X*'R'*[FN211 * FN220 * (FN908A * FN212A + FN908B * FN217A)]





      'R' is defined below.





                          'R' = TSEGRE/EGRMPT (CLIPPED AT 1.0)





                                      TSEGRE LOGIC





      TCSTRT > CTLOW -------------| SET TSEGRE = EGRMPT ('R' = 1)

                                  |

                                  | --- ELSE ---

                                  |

      EGR ENABLED ----------------| INCREMENT TSEGRE

                                  |  (CLIP AT EGRMPT)

                                  |

                                  | --- ELSE ---

                                  |

                                  | FREEZE TSEGRE























                                         8-8


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                          SONIC EGR VALVE STRATEGY (PFEHP = 0)



      The Sonic Exhaust Gas Recirculation (EGR) system  offers  a  high  degree  of

      flexibility.   The  chief  benefit  is  improved drive and fuel economy.  The

      abilities are:



          1.  EGR flow can be precisely  varied  depending  upon  engine  operating

          conditions.



          2.  Spark advance can be precisely adjusted to compensate for the  actual

          EGR flow.



      The Sonic EGR system consists of:



          1.  Sonic EGR valve



          2.  EGR valve position (EVP) sensor



          3.  Electronic Vacuum Regulator (EVR)



      The EGR valve controls the flow of exhaust gases to the intake manifold.  The

      pintle   valve  and  seat  assembly  are  designed  such  that  EGR  flow  is

      proportional to pintle position.  Further, the output of the  EVP  sensor  is

      directly  proportional  to  the  pintle  position.  This design allows direct

      calculation of EGR flow.



      The EGR valve is operated by manifold vacuum.  The EVR:



          1.  Applies vacuum to the EGR valve (increases EGR flow).



          2.  Holds in existing EGR valve vacuum (maintains EGR flow).



          3.  Vents EGR valve vacuum to atmosphere (decreases EGR flow).



      The strategy enables EGR during various engine operating modes.  These  modes

      are  calibration  items.   Typical  calibrations  will  enable EGR when these

      conditions are met:



          1.  Time since start is greater than a calibration value.



          2.  Engine is in part throttle mode.



          3.  Current EGR  valve  position  is  not  less  than  the  fully  closed

          position.

































                                         8-9


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





      ACTUAL EGR MASS FLOW EQUATIONS - SONIC (PFEHP = 0)





      For interactive spark and EGR control:



          1.  The EGR mass flow is calculated based upon actual valve position.



          2.  The percent EGR is then calculated  and  used  to  modify  the  spark

          advance.







                           EM CALCULATION - SONIC (PFEHP = 0)





      ISCFLG = 1 OR 2 ----------|

        (Idle RPM Control)      |AND -|OR --| (EGR is OFF)

                                |     |     | EM = 0

      DELOPT = 0 ---------------|     |     |

                                      |     | --- ELSE ---

                                      |     |  

      AFMFLG = 1 ---------------|     |     | EM = FN219A * 

                                |     |     |  BP/29.875

      CFMFLG = 1 ---------------|     |

                                |     |

      EFMFLG = 1 ---------------|OR --|

                                |

      MFMFLG = 1 ---------------|

                                |

      TFMFLG = 1 ---------------|





      Percent EGR = EGRACT = (EM/AMPEM)*100























































                                         8-10


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                        DESIRED EGR MASS FLOW - SONIC (PFEHP = 0)





      The desired EGR mass flow = 0.01 * EGRATE * AMPEM * 29.875/BP





      To enhance the control of the  EGR  valve,  the  valve  is  controlled  to  a

      filtered desired position as follows:





      EGREN = 1 ------------| DELOPT = 

       (EGR Enabled)        |  UROLAV (FN221+EOFF,TCDLOP)

                            |

                            | --- ELSE ---

                            |

                            | DELOPT = 0



      Notes:



      1.  When the desired EGR rate EGRATE equals zero, DELOPT is then set to zero.

      This action will close the EGR valve when zero EGR is requested.



      2.  When the desired EGR rate EGRATE is nonzero  and  DELOPT  is  zero,  then

      DELOPT is set to EOFF before the DELOPT filter is run.  This makes the DELOPT

      filter start at the closed EGR valve position when EGR is desired.



      3.  DELOPT is clipped to 922 counts (90% of VREF).



































































                                         8-11


                                 EGR STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                       SONIC EGR VALVE OUTPUT CONTROL (PFEHP = 0)





      The EGR valve is controlled  in  a  closed  loop  manner  using  proportional

      control,  and  the  EGR  valve  position, EVP, as the feedback variable.  The

      valve is moved to the desired EGR position DELOPT through output commands  to

      the Electronic Vacuum Regulator, EVR.





      EGR FLOW                  EVR OUTPUT

      ---------------           -------------------



      HOLD                      MAINTAIN DUTY CYCLE



      INCREASE                  INCREASE DUTY CYCLE



      DECREASE                  DECREASE DUTY CYCLE



      NONE                      DUTY CYCLE = 0

      (FULLY CLOSED)







      The change in the EVR duty cycle is a function of the sign and  magnitude  of

      the error in control pressure according to the following logic.







      DELOPT = 0 ------------------------|  EGRDC = 0 

                                         |  CLEAR EGRFLG

                                         |

                                         | --- ELSE ---

      EVP <OR= EOFF + EGRDED -|          |

                              |AND ------|  EGRDC = DCOFF +

      EGRFLG CLEAR -----------|          |        FN239(EGRERR)

                                         |  SET EGRFLG

                                         |

                                         | --- ELSE ---

                                         |

      EVP > EOFF + EGRDED ---------|     |

                                   |OR --|  EGRDC = EGRDC +    

      EVP <OR= EOFF + EGRDED-|     |     |        FN239(EGRERR) 

                             |AND -|

      EGRFLG SET ----------- |



      EGRDC is clipped to 0.90





      An EVR calibration method, EVR.MEM, is available in the Strategy  group  user

      area.  Copies can be made by exercising the Xerox option as explained on page

      2 of this Strategy Book.



















                                         8-12


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





               PRESSURE FEEDBACK ELECTRONIC (PFE) EGR STRATEGY (PFEHP = 1)





      The PFE EGR system was developed as a subsonic alternative to the  Sonic  EGR

      system.   The  PFE  EGR provides a projected reliability improvement over the

      Sonic system while still providing the  flexibility  and  spark  compensation

      characteristics of Sonic EGR.



      Like the Sonic EGR subsystem,  PFE  EGR  precisely  regulates  the  EGR  flow

      according  to  calibrated  Tables  and  fox  functions.  However, the PFE EGR

      strategy uses pressure (EPT)  as  the  feedback  signal  rather  than  pintle

      position (EVP).





      The PFE_EGR system consists of:



          1) Tapered pintle ported EGR valve.



          2) Downstream pressure sensor (EPT).



          3) Control orifice.



          4) Electronic Vacuum Regulator (EVR).



      Since PFE EGR is a subsonic flow system, the EGR flow is proportional to  the

      pressure  drop  across  a  sharp-edged  orifice  (PE - DP).  PE, the upstream

      pressure, is calculated by the software.  DP,  the  downstream  pressure,  is

      measured  by  means  of  a  piezo-resistive  transducer (EPT).  The EGR valve

      itself operates as the downstream pressure  regulator.   When  the  valve  is

      closed, the downstream and upstream pressures are equal.  As the valve opens,

      the downstream pressure decreases due to the influence of the intake manifold

      vacuum.







                                         Fig. 1



                Control               EGR

                Orifice              Valve

                   |                   |

                   V                   V

                ---------------------------------------------

                   |                 \    /

                   |                  \  /      Intake 

          PE, "H20       DP, "H20      \/      Manifold

                   |                   /\       Vacuum

                   |  Control chamber /  \

                   |                 /    \    

               ----------------------------------------------























                                         8-13


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      The EEC operates the EGR valve by outputting a variable  duty  cycle  to  the

      EVR.   The  EVR  applies  a  vacuum signal, which is proportional to the duty

      cycle, to the EGR valve.  The frequency of the duty cycle ranges from  90-180

      Hz.  The operation of the EVR is described near the end of this Chapter.



      The strategy enables EGR during various engine operating modes.  These  modes

      are  calibration  items.   Typical  calibrations  will  enable  EGR  when the

      following conditions are met:



          1) Time since start is greater than a calibration value.



          2) Engine is in part throttle mode.

































































































                                         8-14


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





               PRESSURE FEEDBACK ELECTRONIC (PFE) EGR STRATEGY (PFEHP = 1)

      DEFINITIONS



      INPUTS



      Registers:



       -  AM = Air mass flow, (lb/min).



       -  AMPEM = Air mass plus EGR mass flow.



       -  BP = Barometric pressure, "Hg.



       -  

          BPCOR = BP corrected = FN004(BP).  FN074  should  be  calibrated  at  sea

          level  since  the altitude correction is made by the (29.875/BPCOR) term.

          Note that the altitude correction used to be (29.875/BP)  however  actual

          data  obtained  from  the  altitude chamber disagreed with the calculated

          correction.   Therefore  FN004(BP)  was  added  to  allow  an   empirical

          correction.   If no correction is desired, calibrate FN004 on a diagonal,

          that is (0,0), (31.875,31.875).  Actual data indicates that  backpressure

          does  not increase linearly with BP, but at about half that rate, roughly

          (0,8), (31.875,31.875).  This will generate a corrected BP to be used  in

          calculating a more accurate PEXH and PE (PFE EGR only).



       -  

          DELPR = Pressure drop across the control orifice, " H20

                = PE - DP



       -  DESEM = Desired EM, lb/min. (EGRATE * AMPEM/100)



       -  DESDP = Filtered desired downstream pressure, " H2O.

                = ROLAV (DP',TCDP)



       -  DP = Downstream pressure, " H2O (gauge).

             = XFREPT * (EPTBAR - EPTZER)

          DP' = PE - DESDEL



       -  EGRACT = Actual EGR percent = 100*EM/AMPEM.



       -  EGRATE = Desired EGR rate in percent.



       -  EGRCNT = Background EGR ON-TIME counter.



       -  EGRDC = Duty cycle of the EVR output, fraction.



       -  EGRERR = Error in EGR valve position (DELOPT-EVP).



       -  EGRPER = Foreground EGR period.



       -  EM = Actual EGR mass Flow.



       -  EPTBAR = Rolling average of the synchronously sampled

                   EPT sensor (time constant = TCEPT), secs.



       -  EPTZER = Rolling average of the synchronously sampled

                   EPT sensor at idle (time constant = TCEPT),

                   stored in Keep Alive Memory, counts.





                                         8-15


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





       -  PE = Upstream pressure, " H2O (gauge).

             = (29.875/BPCOR) * FN074.



       -  PRESER = EPTBAR - CONPR, counts.



      Bit Flags:



       -  EGREN = Flag which indicates EGR enabled if set

                  to 1.



       -  EGRFLG = Flag that indicates whether DCOFF has been 

                   added to EGRDC.



      Calibration Constants:



       -  DCOFF = Duty cycle required to start to open the valve

                  equivalent to LGA0O in the Vent/Vac system.



       -  FN004 = BP correction for exhaust backpressure calculation, "Hg.



       -  FN074 = Upstream pressure as a function of (AM * KAMREF).

                   (KAMREF = Adaptive fuel correction factor), "H20.



       -  FN211 = Multiplier as a function  of ECT.



       -  FN212A = Multiplier as a function of BP.



       -  FN239 = Change in EVR duty cycle as a function of

                  the pressure error, PRESER (if PFEHP = 1).



       -  FN246 = EGR mass flow as a function of DELPR, lb/min.



       -  IXFRPR = Transfer function  = 1/XFREPT, Counts/" H2O.



       -  KPEI = Constant EGR adder.



       -  PFEHP = Switch to select EGR strategy. 1 = PFE; 0 = Sonic;

                  2 = No EGR.



       -  SQRT (BP/29.875) = Altitude compensation represented by

                    a linear approximation for 21 < BP <OR= 31.875.

                    = (0.1*BP + 2.50)/5.47



       -  TCDP = DP filter time constant.



       -  X = Multiplier.



       -  XFREPT = Transfer function of EPT sensor, " H20/counts.

























                                         8-16


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  CONPR = Desired PRT sensor value.



       -  DESEM = Desired EM, lb/min. (EGRATE * AMPEM/100)



       -  DESDP = Filtered desired downstream pressure, " H2O.



       -  EGRCNT = Background EGR ON-TIME counter.



       -  EGRDC = Duty cycle of the EVR output, fraction.



       -  EGRPER = Foreground EGR period.



       -  EM = Actual EGR mass Flow.



      Bit Flags:



       -  EGRFLG = Flag that indicates whether DCOFF has been 

                   added to EGRDC.













































































                                         8-17


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      ACTUAL EGR MASS FLOW EQUATIONS (PFEHP = 1)



      For interactive spark and EGR control:



          1) The EGR mass flow is calculated based upon the  pressure  drop  across

          the control orifice.



          2) The percent EGR is then  calculated  and  used  to  modify  the  spark

          advance.



          EGREN = 1 ------------------| EM = SQRT (BP/29.875)

           (EGR enabled)              |   * FN246

                                      |

                                      | --- ELSE ---

                                      |

                                      | EM = 0





          EGRACT' = 100 * EM/AMPEM



          EGRACT = UROLAV (EGRACT',TCEACT)







                            DESIRED EGR MASS FLOW (PFEHP = 1)





      The PFE EGR system achieves the desired EGR  flow  by  controlling  it  to  a

      particular  downstream pressure.  The desired flow, DESEM, is calculated from

      the desired EGR rate and actual airflow.  To promote control  stability,  the

      strategy  avoids  operation  in  the  low  flow  non-linear region of the EGR

      transfer function.





      EGREN = 1 -------------------|      | EGR ON

                                   |AND --| DESEM = EGRATE * AMPEM/100

      EGRATE * AMPEM/100           |      | DESDEL = FN247

      >OR= MINDES + DESHYS --|S Q -|      | DP' = PE - DESDEL

                             |            | DESDP = ROLAV (DP',TCDP)

      EGRATE * AMPEM/100     |            | CONPR = (IXFRPR * DESDP)

         < MINDES -----------|C           |  + EPTZER

                                          |

                                          | --- ELSE ---

                                          |

                                          | DESEM = 0

                                          | DESDEL = 0

                                          | DESDP = PE

                                          | CONPR = EPTBAR

























                                         8-18


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                             EVR OUTPUT CONTROL (PFEHP = 1)







      The downstream pressure, DP, is controlled in a closed loop manner using  the

      EPT  sensor  as  the  feedback signal.  The valve pintle is moved until CONPR

      (the control pressure) is equal to the EPTBAR (measured downstream  pressure)

      by means of output commands to the EVR.  The output commands take the form of

      a variable duty cycle voltage output.







      EGR FLOW                        EVR OUTPUT

      ---------------                 -------------------

      HOLD                            MAINTAIN DUTY CYCLE



      INCREASE                        INCREASE DUTY CYCLE



      DECREASE                        DECREASE DUTY CYCLE



      NONE                            DUTY CYCLE = 0

      (FULLY CLOSED)







      The change in the EVR duty cycle is a function of the sign and  magnitude  of

      the error in control pressure according to the following logic.







      DESEM = 0 --------------------------| EGRDC = 0

                                          | CLEAR EGRFLG

                                          |

                                          | --- ELSE ---

                                          |

      EGRFLG CLEAR -----------------------| EGRDC = DCOFF

                                          |  + FN239

                                          | SET EGRFLG

                                          |

                                          | --- ELSE ---

                                          |

                                          | EGRDC = EGRDC 

                                          |  + FN239





      NOTE: During On-Demand Self-Test, EGRDC is to zero.

            The Sonic EGR and PFE EGR strategies BOTH

            use FN239

























                                         8-19


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





      PFEHP = 1 ----------------------| Use PRESER as input

                                      |  to FN239

                                      |

                                      | --- ELSE ---

                                      |

                                      | Use EGRERR as input

                                      |  to FN239



      WARNING:  The Control Algorithm was designed for use with EPT  Sensors  which

      have a POSITIVE sloped transfer function.





      Calibration Guides for both PFE and EVR are available.  Xerox copies  may  be

      obtained  in  the same manner as Strategy Books.  The file names are PFE1.MEM

      and EVR.MEM.



























































































                                         8-20


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                             EVR CONTROL ALGORITHM - COMMON





      The EVR Control Routine was designed to operate the EVR  within  a  90-200 Hz

      frequency  range.   The  algorithm selects an "ON" time, EGRCNT, based on the

      desired duty cycle, EGRDC.  The period is calculated by dividing the  ON-time

      by  the  duty cycle.  (All definitions for this section will be listed in the

      beginning of Chapter 8.)





      0 <OR= EGRDC <OR= 0.08 ----------------| EGRCNT = 0

                                             | (Turn EVR off)

                                             |

                                             | --- ELSE ---

                                             |

      0.08 < EGRDC <OR= 0.18 ----------------| EGRCNT = 1

                                             |

                                             | --- ELSE ---

                                             |

      0.18 < EGRDC <OR= 0.31 ----------------| EGRCNT = 2

                                             |

                                             | --- ELSE ---

                                             |

      0.31 < EGRDC <OR= 0.46 ----------------| EGRCNT = 3

                                             |

                                             | --- ELSE ---

                                             |

      0.46 < EGRDC <OR= 0.59 ----------------| EGRCNT = 4

                                             |

                                             | --- ELSE ---

                                             |

      0.59 < EGRDC <OR= 0.74 ----------------| EGRCNT = 5

                                             |

                                             | --- ELSE ---

                                             |

                                             | EGRCNT = 6







          0 <OR= EGRDC <OR= 0.08 -------| EGRPER = 0

                                        |

                                        | --- ELSE ---

                                        |

          EGRPER <OR= 0 ----------------| EGRPER = (EGRCNT/EGRDC)

                                        |  + EGRPER

                                        | Clip EGRPER to 12 as

                                        |  a maximum



























                                         8-21


                               PFE EGR STRATEGY - GUA0

                              Copyright 1989 FoMoCo





                                   EXAMPLE (EGRDC = 0.40)





             -----------            ------------               ----

             |         |            |          |               |

             +  +   +  +--+--+--+---+  +    +  +--+--+--+--+---+



          Clip EGRPER to maximum of 12.







          EGRCNT > 0 ----------------------------| Turn EVR on

                                                 | EGRCNT = EGRCNT - 1

                                                 | EGRPER = EGRPER - 1

                                                 |

                                                 | --- ELSE ---

                                                 |

                                                 | Turn EVR off

                                                 | EGRPER = EGRPER - 1





          NOTE:  This Algorithm was intended to minimize real-time  execution.   In

          the  experimental version, the EGRCNT and EGRPER calculations are done in

          the  background.   The  foreground  merely  toggles   the   EVR   output.

          (Reference:  ENQDA version)







































































                                         8-22

























                                      CHAPTER 9



                             IDLE SPEED CONTROL STRATEGY



































































































                                         9-1


                          IDLE SPEED CONTROL STRATEGY - GUF0

                              Copyright 1989 FoMoCo





                        ADAPTIVE BYPASS AIR IDLE SPEED CONTROL





   This chapter describes the adaptive air bypass idle speed  control  system.   In

   general,  the ISC system is designed to regulate the duty cycle to an air bypass

   solenoid as necessary to obtain the desired engine speed for all idle  operating

   conditions  (base  idle,  hi-cam,  various  accessory  loads)  and provide for a

   dashpot action.  Predicted airflows for the different load states  at  idle  are

   adaptively corrected to minimize the impact of hardware variability.  Acceptable

   quality on engines utilizing a speed density  determined  air  mass  requires  a

   coupling of the ISC logic with both fuel (adaptive fuel, transient fuel, special

   AM filtering routine) and spark control strategies.

































































































                                         9-2


                          IDLE SPEED CONTROL STRATEGY - GUF0

                              Copyright 1989 FoMoCo





   An overview description is illustrated below:







                       _________

                      (enter ISC)

                       ---------

                           |-------------------|-------------------

                           |            __________________        |

                           |            |   CRANK MODE   |  --------------

                           |            |----------------|  |    FMEM    |

                   ___________________  | FN884(TCSTRT)  |  |            |

                   |-calculate DSDRPM|  ------------------  | ISCDTY =   |

                   |-predict DESMAF  |         |            |  FMMISC    |

                   |-update FAM      |     _________        --------------

                   |-calc DSTPBR     |    (exit ISC )             |

                   -------------------     ---------           --------

                           |                                  (exit ISC)

                           |                                   --------

                   ________________

                  (decrement DASPOT)

                   ----------------

                           |  (Mode Select)

         _________________________________________________

         |              |               |                |

   ______________  ______________  _______________  ________________

   |DAS_PRE_POS |  | DASHPOT    |  | RPM CONTROL |  |  RPM LOCKOUT |

   | ISCFLG=0   |  | ISCFLG=-1  |  | ISCFLG = 1  |  | ISCFLG = 2   |

   |-calc DASPOT|  |-calc spark |  |-calc airflow|  |-calc airflow |

   |-elim spark |  | vs airflow |  |  correction |  |  correction  |

   |  feedback  |  |  (FN839)   |  |-calc spark  |  |-calc spark   |

   --------------  --------------  | mult vs RPM |  |  mult vs RPM |

       |                  |        |   (FN841)   |  |   (FN841)    |

       |                  |        ---------------  ----------------

       |                  |               |                |

       -----------------------------------------------------

                                |

                  _____________________________

                  | -fold in airflow          |

                  |   corrections to DESMAF   |

                  | -calc actual ISC actuator |

                  |   airflow DEBYMA          |

                  | -calc ISCDTY              |

                  -----------------------------

                               |

                    ________________________

                    | -update KAM for      |

                    |   corrected airflows |

                    ------------------------

                               |

                           ________

                          (exit ISC)

                           --------















                                         9-3


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                                   ISC MODE SELECT





                                     DEFINITIONS



      REGISTERS/FLAGS/TIMERS:



       -  CTPTFG = Closed throttle to Part/WOT transition flag, unitless.



       -  FLG_DASMNQ = VSBAR flip-flop flag for minimum Daspot.



      CALIBRATION CONSTANTS:



       -  DASCTK = A background-driven decrement to the dashpot pre-

                   position airflow register (DASPOT).  



       -           It provides a time based dashpot.  Calculate 

                   dashpot time as follows: If the maximum allowed

                   dashpot pre-position (DASPOT) = 0.5 ppm; the DASCTK 

                   value = 0.004 ppm; and, assuming a 0.012 background 

                   time or 83.3 background slices per second, then

                   (83.3 * 0.004) = 0.33 ppm/sec; and therefore, a 

                   0.5 ppm dashpot will last 1.5 seconds.  ..Typical

                   value - 0.004 ppm.



       -  DASMPH = Minimum VSBAR for declutch Daspot Clip, mph.



       -  DASMHYST = Hysteresis for DASMPH, mph.



       -  DASMIN = Minimum Daspot Clip for declutch, ppm.



       -  DELTA = Closed throttle/Part Throttle breakpoint value above

                  RATCH.



       -  DNDSUP = Flag used to delay Strategy response to PRNDL

                   change. If Change occurs, then DNDSUP is set

                   equal to NDSFLG.



       -  ENGCYL = Number of PIPs per engine revolution; or number

                   of cylinders/2.



       -  FAMINC = FAM increment/decrement when entering FAM region,

                   lb/min.



       -  FMMDSD = Failure Mode Management default desired RPM.



       -  FN884(TCSTRT) = ISC Duty Cycle in Crank, deg.



       -  MINMPH = Minimum speed to enter C/L RPM control.



       -           MINMPH applies to systems having VSS only.

                   Resolution of the VSS (3 mph) makes it undesirable

                   at this time to remove the lockout logic.

                   ..Typical value - 0.5 mph.



       -  RPMCTL = Deadband above desired Idle RPM for recognition of

                   Normal Closed Loop Idle.







                                         9-4


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





       -           Added to DSDRPM.  The total defines the engine speed 

                   threshold below which entry into C/L RPM control is 

                   allowed.  This value should be reasonably small to

                   avoid inadvertent entry into C/L ISC. ..Typical

                   value - 90 RPM.



       -  ISCTM = Time interval over which the rate of change in engine

                  speed is evaluated. 



       -          Value should be small enough to avoid prolonged speed 

                  hang-ups if the ISC system were locked out of C/L 

                  speed control, but not too short such that the rate 

                  of speed change check becomes meaningless.

                  ..Typical value - 4 sec.



       -  NDIF = The deviation in engine speed allowed over the ISCTM 

                 specified time interval.  NDIF values too small could

                 lock the ISC system out of C/L speed control indefinitely.

                 Values too large invalidate the check. Typical value 

                 - 32 RPM.



       -  LOWLOD = LOWLOD is a key parameter which is engine specific. 

                   Selected value must differentiate between deceleration

                   and idle conditions over the expected range of operating

                   conditions.



       -  ACLOD = An adder to LOWLOD when A/C is on.



       -          ACLOD should be based on observed differences 

                  between A/C on & A/C off idle LOAD readings.

                  ..Typical value - 2" Hg (engine specific parameter).



       -  DELRAT = Throttle position adder to RATCH.  Should be 

                   set equal to DELTA + HYSTS (See throttle mode select

                   logic).  ..Typical value - 15 counts.



       -  FMMISC = Default Duty cycle to ISC, fraction.



       -  NDDELT = Time before N/D, D/N switch registers.



       -  TRLOAD = Transmission Load.

                   0 = Manual Transmission, no clutch or gerar switches,

                       forced neutral state (NDSFLG = 0).

                   1 = Manual Transmission, no clutch or gear switch.

                   2 = Manual Transmission, one clutch or gear switch.

                   3 = Manual Transmission, both clutch and gear switches.

                   4 = Auto Transmission, non-electronic, neutral drive switch.

                   5 = Auto Transmission, non-electronic, neutral pressure switch,

                       (AXOD).

                   6 = Auto Transmission, electronic, PRNDL sensor - park, reverse,

                       neutral, overdrive, manual 1, manual 2.



















                                         9-5


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                                   ISC MODE SELECT





      This section describes the mode select logic for the air  bypass  idle  speed

      control  system.   There  are  basically four distinct modes in which the ISC

      system functions; however, two modes:  Closed Loop RPM and Lock-out of Closed

      Loop RPM, are identical with respect to actual Idle Speed Control.  A flag is

      used to identify the three primary ISC modes for both calibrator  convenience

      and required interaction with fuel control strategy.



          - ISCFLG = -1 DASHPOT CONTROL (Note:  Cal.  console will show 255).



          - ISCFLG = 0 DASHPOT PRE-POSITION.



          - ISCFLG = 1 CLOSED LOOP RPM CONTROL.



          - ISCFLG = 2 CLOSED LOOP RPM CONTROL (Lock-out entry to RPM control).





      -ENGINE CRANK MODE



      Entry/exit conditions for this mode are defined in  the  engine  mode  select

      logic of the strategy book.  In engine crank mode, the ISC duty cycle (ISDTY)

      is a function of temperature at start,  TCSTRT.   If  the  time  between  PIP

      signals  exceeds two seconds, it is assumed that the operator is not cranking

      and the duty cycle is set to 0%.





      -DASHPOT PRE-POSITION MODE (ISCFLG = 0)



      In engine run/underspeed mode  and  when  operating  at  part  or  wide  open

      throttle,  the  ISC  system  is placed in dashpot pre-position mode.  In this

      mode the ISC duty cycle is incremented a calibratible amount in  anticipation

      of  a  required  dashpot  action.   Proper  dashpot operation is essential on

      systems having speed density fuel controls in order to  avoid  tip-in/tip-out

      stalls and HC (Hydrocarbon) spiking on decels.





      -DASHPOT MODE (ISCFLG = -1)



      In engine run/underspeed mode and  having  just  transitioned  from  part  to

      closed  throttle,  the  system  is  placed  in ISC dashpot control mode.  The

      length of time the  ISC  system  will  remain  in  dashpot  control  is  both

      hardware/strategy   dependent   (some  applications  have  VSS;  some  manual

      transmission applications have gear  and  clutch  switches)  and  calibration

      dependent.   Regardless  of the length of time required to enter RPM control,

      as long as closed throttle operation is  maintained  the  amount  of  airflow

      specified  by  the  dashpot  pre-position (see dashpot pre-position logic) is

      decremented at a constant rate until exhausted (until DASPOT = 0).























                                         9-6


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





      -CLOSED LOOP RPM CONTROL (ISCFLG = 1 OR 2)  NORMAL  CLOSED  LOOP  RPM  CONROL

      (ISCFLG = 1)



      For normal entry into Closed Loop (C/L) RPM control, the following conditions

      must be satisfied:



          .  If VSS hardware used it must indicate a speed less than MINMPH.



          .  If a manual trans.  with gear/clutch switches, must indicate neutral.



          - Note:  Although the system can provide acceptable function without  the

          above-mentioned  hardware,  either  item  will  increase  reliability  in

          production.  The vehicle speed sensor has calibration benefits outside of

          ISC  (lean Cruise control, etc.) and should be considered when specifying

          system assumptions for future applications utilizing ISC.



          .  Regardless whether the above hardware is used, normal entry  into  RPM

          control  requires  that  actual  engine  speed  be  less than or equal to

          (DSDRPM + RPMCTL) and that throttle position be less  than  or  equal  to

          (RATCH + DELRAT).



      -DASHPOT LOCKOUT OF RPM CONTROL (ISCFLG = 2)



      The following discussion will attempt to describe entry into C/L RPM  control

      through the lock-out logic (ISCFLG = 2).



      In a normal deceleration the dashpot bleed time will be short relative to the

      vehicle  coastdown  time.   As soon as engine speed drops low enough, the ISC

      system should enter RPM control.  However, due to hysteresis  in  the  bypass

      valve,  overspecification  of idle airflow requirements prior to adaptive ISC

      learning, and/or ISC learning in an unusually high state of engine load  (400

      psi  A/C  head pressure, etc.), the ISC actuator may pass too much air at the

      specified idle duty cycle to allow normal entry in RPM  control.   When  this

      condition  occurs  the  system  will  remain  in dashpot control until it can

      recognize that it should, in fact, be in RPM control.



      CALIBRATION HINTS:



      This task is easy should  you  have  a  VSS  or  a  manual  calibration  with

      gear/clutch  switches.  If this hardware is not present, then it is difficult

      to differentiate between a constant  deceleration  (as  in  a  coast  down  a

      mountain)  and a true locked-out of Idle condition.  Most of the logic in the

      Dashpot  and  RPM  lockout  Mode  Selection   deals   with   recognition   of

      distinguishing features of each.

































                                         9-7


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





      To differentiate between deceleration and idle, the rate of change in RPM  is

      first  evaluated  over a calibrated period of time (ISCTM).  If the speed has

      remained within a specified deadband (NDIF) for this time  period,  a  second

      check  is  performed to compare LOAD with a calibrated LOAD value (LOWLOD for

      A/C off; LOWLOD + ACLOD for A/C on).  The assumption is that  all  idle  LOAD

      values, (including green engine, altitude effects, etc.) will be greater than

      this calibration parameter; and all true deceleration  conditions,  including

      the   same   variabilities,  will  yield  lower  LOAD.   To  avoid  incorrect

      interpretation of the LOAD value, great care must be taken in  selecting  the

      correct LOWLOD value.



      If the ISC system were locked in dashpot control and both the rate of  engine

      speed  change  and  LOAD  criteria were satisfied, the strategy would then be

      forced into C/L RPM control with ISCFLG indicating 2.  This  state  would  be

      present  until the speed fell below the normal entry point.  The adaptive ISC

      would learn the required correction, assuming sufficient time  at  idle,  and

      subsequent  dashpot  to  RPM control transitions should follow a normal entry

      path.





















































































                                         9-8


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                                   ISC MODE SELECT





      CRKFLG = 1 -------------|              | Set DSTPBR = RATCH

       (in crank mode)        |              |  (set dashpot filtered TP

                              |AND ----------|   to RATCH)

      TSLPIP >OR= 2 sec. -----|              | Set SPKMUL = 0.99

       (no PIPs yet or stall)                | Set ISCDTY = 0

                                             |  (ISC duty cycle = 0%)

                                             |

                                             | --- ELSE ---

                                             |

                                             | Set SPKMUL = 0.99

      CRKFLG = 1 ----------------------------| Set DSTPBR = RATCH

       (in crank mode)                       | Set ISCDTY = FN884(TCSTRT)

                                             | 

                                             | --- ELSE ---

      MFMFLG = 1 -------------|              | 

                              |AND ----------| Set DSDRPM = FMMDSD

      TFMFLG = 1 -------------|              | Set ISCDTY = FMMISC

                                             | Set SPKMUL = 0.99

                                             | 

                                             | --- ELSE ---

                                             | 

                                             | GO TO DSD_RPM

                                             | (calculate desired RPM and

                                             |  base airflow requirements)









      VSBAR > DASMPH + DASMHYST -------|S Q --| SET FLG_DASMNQ = 1

                                       |      | (prepare to add dashpot

      VSBAR <OR= DASMPH ---------------|C     |  to prevent declutch stall)

                                              |

                                              | --- ELSE ---

                                              |

                                              | SET FLG_DASMNQ = 0













































                                         9-9


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





      APT = 0 OR 1 --------------------------| Enter Dashpot Preposition

       (not closed throttle - dashpot        | Set ISCFLG = 0

        pre-position mode)                   | NLAST = N (Save last RPM

                                             |   value)

                                             | ISCTMR = 0 (Reset RPM

                                             |  sampling timer)

                                             | SPKMUL = 0.996

                                             |

                                             | --- ELSE ---

                                             |

                                             | Check Other ISC Modes





                            RPM CONTROL MODE (ISCFLG = 1)







      TRLOAD NOT= 3 ---------|

       (auto trans or manual |

        trans w/o both       |

        switches)            |

                             |OR --|

      TRLOAD = 3 ------|     |     |

       (manual trans   |AND -|     | 

        with both      |           |

        switches)      |           |

                       |           |

      DNDSUP = 0 ------|           |

       (In Neutral)                |AND -|

                                   |     |

      N <OR= DSDRPM + RPMCTL ------|     |

       (RPM within control range)  |     |

                                   |     |

      DASPOT = 0 ------------------|     |

                                   |     |OR -| Set ISCFLG = 1

      VSBAR <OR= MINMPH -----------|     |    | (RPM control mode)

       (vehicle speed                    |    |

        almost zero)                     |    | (RPM within control 

                                         |    | range and TP near 

      RUNNING = 1 -----------------|     |    | closed throttle)

       (In Running Self-Test)      |     |    |

                                   |AND -|

      DASPOT = 0 ------------------|



































                                         9-10


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                            RPM LOCKOUT MODE (ISCFLG = 2)



      VSBAR <OR= MINMPH -------------------------------|

       (vehicle speed almost zero)                     |

                                                       |

      DASPOT = 0 --------------------------------------|

                                                       |

      N > DSDRPM + RPMCTL -----------------------------|

       (RPM too high for RPM control)                  |

                                                       |

      ISCFLG = -1 OR 0 ------------|                   |

       (last mode was dashpot      |                   |

        or pre-position)           |                   |

                                   |AND ---|           |

      ISCTMR >OR= ISCTM -----------|       |OR --------|

       (OK to sample RPM)          |       |           |

                                   |       |           |AND -|Set ISCFLG=2

      |NLAST-N| < NDIF ------------|       |           |     | (RPM LOCKOUT

       (RPM indicates steady state)        |           |     |  MODE)

                                           |           |     | (RPM is steady

      ISCFLG = 1 OR 2 ---------------------|           |     | state, LOAD

       (last mode was RPM                              |     | indicates idle

        control or lockout)                            |     | TP near closed

                                                       |     | throttle, but

      TRLOAD >OR= 3 ------------|                      |     | rpm is too high)

       (auto trans or man. with |                      |     |

        both switches)          |AND -|                |    

                                |     |                |

      DNDSUP = 1 ---------------|     |                |

       (in drive,in gear)             |OR -|           |

                                      |    |           |

      TRLOAD < 3 ---------------------|    |           |

       (manual w/o both switches)          |           |

                                           |           |

      ACCFLG = 1 ---------------|          |           |

       (A/C clutch engaged)     |          |AND -|     |

                                |AND -|    |     |     |

      LOAD >OR= LOWLOD          |     |    |     |     |

       + ACLOD -----------------|     |    |     |     |

       (LOAD near idle)               |    |     |     |

                                      |OR -|     |     |

      ACCFLG = 0 ---------------|     |          |OR --|

       (A/C off)                |     |          |     

                                |AND -|          |     

      LOAD >OR= LOWLOD ---------|                |     

       (LOAD near idle)                          |     

                                                 |     

      TRLOAD >OR= 3 -----------------------|     |     

       (auto trans or manual               |     |     

        with both switches)                |AND -|     

                                           |           

      DNDSUP = 0 --------------------------|           

       (in neutral)                                    















                                         9-11


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                              DASHPOT MODE (ISCFLG = -1)





      VSBAR > MINMPH -----------------|

       (vehicle speed high)           |

                                      |

      DASPOT > 0 ---------------------|

                                      |       

      TRLOAD = 3 -------------|       |

       (Manual Trans with     |       |       |

        both switches)        |AND----|       | Set ISCFLG = -1

                              |       |       | (dashpot mode)

      DNDSUP = 1 -------------|       |       |

       (in gear)                      |       |

                                      |       |

      TRLOAD NOT= 3 -----------|      |OR ----| Set SPKMUL = FN839

       (not manual trans       |      |       | (spark feedback)

        with both switches)    |      |       | 

                               |      |       | (Dashpot not bled

      N > DSDRPM + RPMCTL -----|AND --|       |  down, not OK to

       (RPM too high for RPM   |              |  sample RPM)

        control)               |              |

                               |              | 

      ISCFLG = -1 OR 0 --------|              |

       (last mode was dashpot  |              |  

        or pre-position)       |              |

                               |              |

      ISCTMR < ISCTM ----------|              |

       (Not OK to                             |

         sample RPM)                          |

                                              |  --- ELSE ---



                              (Continued on the next page)























































                                         9-12


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                           (Continued from the previous page)



      VSBAR <OR= MINMPH --------------|       |

       (vehicle speed almost zero)    |       |

                                      |       |

      DASPOT = 0 ---------------------|       |

                                      |       |

      TRLOAD = 3 -----|               |       |

       (manual with   |               |       |

        both switches)|AND ---|       |       |

                      |       |       |       |

      DNDSUP = 0 -----|       |OR ----|       |

       (in neutral)           |       |       |

                              |       |       |

      TRLOAD NOT= 3 ----------|       |       | 

       (not manual with both          |AND ---| Set ISCFLG = -1

        switches)                     |       | (dashpot mode)

                                      |       |

      N > DSDRPM + RPMCTL ------------|       | Set SPKMUL = FN839 

       (RPM too high for RPM control) |       | (spark feedback)

                                      |       |

      ISCFLG = -1 OR 0 ---------------|       | Set NLAST = N 

       (last mode was dashpot or      |       | Set ISCTMR = 0

        pre-position)                 |       | (continue RPM check)  

                                      |       |

      DASPOT = 0 ---------------------|       |

       (Dashpot has bled down)        |       | (Dashpot has bled down, but 

                                      |       |  RPM indicates decel) 

      ISCTMR >OR= ISCTM --------------|       | 

       (OK to sample RPM)             |       |   

                                      |       | --- ELSE ---

      |NLAST - N| > NDIF -------------|       | 

       (RPM Indicates Decel)





                             (continued on the next page)

















































                                         9-13


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                          (continued from the previous page)



      VSBAR <OR= MINMPH ---------------|       |

       (vehicle speed almost zero)     |       |

                                       |       |

      DASPOT = 0 ----------------------|       |

                                       |       |

      TRLOAD = 3 ---------|            |       |

       (manual trans with |AND -|      |       |

        both switches)    |     |      |       |

                          |     |OR ---|       |

      DNDSUP = 0 ---------|     |      |       |

       (in neutral)             |      |       |

                                |      |       |

      TRLOAD NOT= 3 ------------|      |       |

       (not manual with both           |       |

        switches)                      |       |

                                       |       |

      N > DSDRPM + RPMCTL -------------|       |

       (RPM too high for RPM control)  |       |

                                       |       |

      ISCFLG = -1 OR 0 ---|            |       |

       (last mode was     |            |       |

       dashpot or pre-pos)|            |       |

                          |AND -|      |       | Set ISCFLG = -1

      ISCTMR >OR= ISCTM --|     |      |       |  (dashpot mode)

       (due to sample RPM)|     |OR ---|AND ---|

                          |     |      |       | Set NLAST = N

      |NLAST-N| <OR=NDIF -|     |      |       | Set ISCTMR = 0

       (RPM indicates           |      |       |  (continue RPM check)

        steady state)           |      |       |

                                |      |       |  (Dashpot has bled down,

      ISCFLG = 1 OR 2 ----------|      |       |    RPM is steady state

       (last mode was RPM              |       |    but LOAD indicates

        control or lockout)            |       |    decel)



                               Continued on the next page















































                                         9-14


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                            Continued from the previous page



      TRLOAD >OR= 3 --|                |       |

       (auto trans or |                |       |

        man. with     |AND -|          |       |

        both switches |     |          |       |

                      |     |OR -|     |       |

      DNDSUP = 1 -----|     |    |     |       |

       (In Drive, in gear)  |    |     |       |

                            |    |     |       |

      TRLOAD < 3 -----------|    |     |       |

       (manual w/o both          |     |       |

        switches)                |     |       |

                                 |     |       |

      ACCFLG = 1 ----|           |AND -|       |

       (A/C clutch   |AND -|     |             |

        engaged)     |     |     |             |

                     |     |     |             |

      LOAD <OR=      |     |     |             |

      LOWLOD+ACLOD --|     |     |             |

       (decel LOAD)        |OR --|             |

                           |                   |

      ACCFLG = 0 ----|     |                   |

       (A/C off)     |     |                   |

                     |AND -|                   |

      LOAD < LOWLOD -|                         |

       (LOAD indicates decel)                  | 

                                               |

































































                                         9-15


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





      DSTPBR CALCULATION



      The DSTPBR calculation is a time-dependent rolling average filter of throttle

      position. It is updated once per background loop while in RUN or UNDERSPEED

      mode. The two time constants, TCDASU and TCDASD are calibratible. TCDASU is

      used when DSTPBR is filtering UP to TP. TCDASD is used to filter DSTPBR DOWN

      to TP.





      TP > DSTPBR ------------------| DSTPBR = UROLAV (TP,TCDASU)

       (TP increasing)              | 

                                    | (Filter TP w/increasing TP)

                                    |

                                    | --- ELSE ---

                                    |

                                    | DSTPBR = UROLAV (TP,TCDASD)

                                    |

                                    | (Filter TP w/decreasing TP)





          TCDASU = Time constant used when TP is greater than the filtered TP value

          (TP   >  DSTPBR).   The  smaller  the  time  constant  the  more  rapidly

          pre-position airflow will be available  to  respond  to  tip  in/tip  out

          actions.   Fast  response can also be obtained by use of the offset value

          DASPTO without the potential runaway feel that may come with too  fast  a

          time constant/airflow gain (DASPTK) combination.  ..Typical value - 0.49.



          TCDASD = Time constant used when TP is less than or equal to the filtered

          TP  value (TP <OR= DSTPBR).  Should be calibrated such that part throttle

          backouts, where closed throttle is not entered, do not exhibit  a  run-on

          feel.   Too small a time constant can have the effect of greatly reducing

          dashpot airflow prior to entry into dashpot control.  ..Typical  value  -

          0.93.























































                                         9-16


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





                                  DASPOT CALCULATION





          Logic  controlling  the  dashpot  pre-position  airflow  is  intended  to

          increase   the  ISC  duty  cycle  during  part/WOT  operation.   Strategy

          determines the rate  at  which  ISC  valve  flow  increases/decreases  in

          part/WOT  operation, as well as the maximum allowed pre-position airflow.

          Adequate pre-position airflow (DASPOT) is essential prior to entering the

          dashpot  control  mode  in order to avoid HC (Hydrocarbon) spiking and/or

          deceleration stalls.  The calculated pre-position  airflow  increment  is

          added  to an adaptively-corrected idle flow requirement (DESMAF) prior to

          output of the  ISC  duty  cycle.   Pre-position  airflow  (DASPOT)  is  a

          function  of the difference between a filtered throttle position (DSTPBR)

          and a throttle position equal to the Closed Throttle breakpoint (RATCH  +

          DELHYS).   This value is clipped to zero as a minimum, if this difference

          becomes a negative value.  DELHYS should be set equal to  DELTA  +  HYSTS

          (Closed  Throttle  breakpoint).   DASPOT  can  be  clipped to DASMIN as a

          minimum if vehicle speed is high enough to prepare for declutch.



          During Closed  throttle  mode,  the  DASPOT  airflow  is  "bled  off"  by

          decrementing  it.  This action smooths the transition into RPM control by

          gradually eliminating the  DASHPOT  contribution  to  the  idle  airflow,

          DESMAF.  The bleed rate is determined by FN879, unless clipped to DASMIN.

          When vehicle speed falls below DASMPH, normal bleed off will resume.







          APT = -1 --------------------| Bleed off DASPOT

           (Closed throttle -          |

            determine ISC mode)        | Set DASPOT = DASPOT - FN879

                                       |  (Bleed down dashpot)

                                       | Clip DASPOT to 0 as minimum

                                       | Continue through the ISC Mode

                                       |  select logic

                                       |

                                       | --- ELSE ---

                                       |

                                       | Filter DASPOT to Preposition

                                       | Idle speed airflow for next

                                       | decel.

                                       | DASPOT = [DASPTK * (DSTPBR

                                       |  - RATCH + DELHYS)] + DASPTO

                                       | Clip DASPOT at FN882(N) as

                                       |  maximum

                                       | (Clip (DSTPBR-RATCH+DELHYS) to

                                       |  zero if negative.)





          FLG_DASMNQ = 1 ---------------| Clip DASPOT to DASMIN as a minimum

                                        | (add additional minimum airflow

                                        |  to prevent declutch stall)

                                        |

                                        | --- ELSE ---

                                        |

                                        | Allow normal computation and bleed

                                        | down of dashpot









                                         9-17


                       IDLE SPEED CONTROL - MODE SELECT - GUFA

                              Copyright 1989 FoMoCo





          The DASPOT value is adjusted as TP changes to provide the desired dashpot

          action  to  decelerations  as initiated over the range of possible engine

          operating  conditions.    Separate   filter   constants   are   available

          (TCDASU/TCDASD) to control the response of DSTPBR as described above.





          The following calibration constants  control  operation  of  the  dashpot

          pre-position strategy:





          DASPTO = An offset term applied to the DASPOT  calculation.   Insures  at

          least  some  dashpot airflow on rapid tip-in/tip-outs.  ..Typical value -

          0.10 lbs/min.



          DASPTK = Gain associated with the desired DASPOT airflow.   To  calibrate

          this  value  first  determine  the throttle position above RATCH at which

          maximum DASPOT airflow is desired.  Subtract DASPTO from FN882 and divide

          the  result  by the throttle delta between RATCH and this maximum dashpot

          airflow to determine the DASPTK value.  ..Typical value - 0.002  Lbs  per

          min/TP count.



          FN879 = A background driven decrement to the dashpot preposition  airflow

          register  (DASPOT)  as  a function of DASPOT.  FN879 can be calibrated to

          achieve an exponentially decaying dashpot which is useful in decaying the

          large  DASPOT  values  used  to  control  over-rich  tip-out  conditions.

          ...Typical vaues - (0, 0.001) (.1, .002) (.3,  .006)  (.75,  .05)  (2.00,

          .10)



          FN882 = Maximum allowed dashpot pre-position airflow.  DASPOT calculation

          clipped  at  this  value.   ..Typical  value  - 100% of base idle airflow

          requirement.



























































                                         9-18


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





                               DESIRED RPM CALCULATION



      OVERVIEW





           This section describes the ISC logic  designed  to  perform  the  DSDRPM

      calculation each background pass



       -  Calculate the desired engine speed:  The desired engine speed (DSDRPM) is

          used  to  determine  the  correct ISC mode; used as the control speed for

          closed loop RPM ISC; used by the filtered air  mass  logic  to  determine

          entry/exit conditions for filtering.



           .  Desired engine speed  (DSDRPM  =  [base  desired  speed  (NUBASE  for

              neutral DRBASE for drive) + RPM adder (DNAC) if A/C is on + RPM adder

              (DNPOWS) if a power  steering  pressure  switch  is  used  and  power

              steering  load is high + ECT and ACT and start-up modulator functions

              (FN825A, FN825B & FN826)].





       -  Calculate the initial idle airflow requirement:  An open loop  prediction

          of  idle  airflow  required  vs.   the  various  requested idle operating

          conditions is calculated as follows:



           .  Desired idle airflow (DESMAF) = [base  desired  airflow  (FN875N  for

              neutral;  FN875D  for drive)) * an airflow modulator as a function of

              ATMR3 and ECT (FN1861)] + discrete airflow increments for A/C (ACPPM)

              and power steering (PSPPM) if either load is present.





       -  Provide a feed foward mechanism for fuel control:  The filtered air  mass

          value  (FAM)  is  incremented a calibrated amount when unloaded to loaded

          engine transitions are noted to avoid  speed  sags  related  to  manifold

          filling delays.



           .  Neutral to drive change; FAM = (FAM + NDPPM)



           .  Drive to Neutral change, FAM = FAM - DNPPM



           .  A/C off to on change; FAM = (FAM + ACPPM)



           .  Power steering switch off to on; FAM = (FAM + PSPPM)





       -  Control a flag (ISFLAG) which indicates the engine load  state  at  idle:

          Flag tracks state transitions at idle and is used to:



           .  Point to the correct adaptive fuel  cell  at  idle  (LTMTBnrc).   The

              first  four  cells of the first column in the adaptive fuel table are

              dedicated to idle operation eg.  ( ISFLAG = 0 points to adaptive cell

              Row 8/Col.  0; ISFLAG = 1 points to Row 8/Col.  1; etc).



           .  Point to a corresponding adaptive  ISC  correction  (ISCKAMn).   Each

              idle  load  state  has  a  unique correction cell which indicates the

              increment or decrement to a predicted airflow necessary to control to

              the desired engine speed.









                                         9-19


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





           .  Track changes in the load state at  idle.   When  state  changes  are

              noted compensating actions involving fuel and ISC may be made.









      DEFINITIONS



      INPUTS



      Registers:



       -  ACCTMR = A/C state transition timer.  Timer is reset to 0  on  every  A/C

          state change.



       -  ATMR1 = Timer which counts up in run/underspeed mode.



       -  ATMR3 = Timer which counts up in run mode.  (Reset to 0 only at powerup).



       -  DSDRPM = Desired engine speed.  See overview section  for  definition  of

          the various uses of this register.



       -  DESMAF = The desired airflow necessary to operate  at  a  specified  idle

          condition.   This  register  is  fed  with  the  base  calibrated airflow

          requirements in the desired RPM calculation routine each pass through the

          background.  It is later modified in the ISC duty cycle output routine to

          account for the C/L ISC corrections (IPSIBR &  ISCKAM)  and  any  dashpot

          component  (DASPOT).  DESMAF is then used in calculating the input to the

          ISC transfer function (FN800).



       -  DESNLO = High cam portion of the DSDRPM register.  Used to filter DSDRPM.

          DESNLO + NUBASE or DRBASE = DSDRPM.  TCDESN is the time constant.



      Bit Flags:



       -  ACCFLG = A/C engaged flag:  1 -> A/C engaged; 0 -> A/C disengaged.



       -  ACIFLG = A/C engagement impending flag:  1  ->  A/C  about  to  engage  -

          adjust airflow and fuel immediately; 0 -> A/C not about to engage.



       -  DNDSUP = Delayed neutral/drive flag:  0 -> in neutral, no load; 1  ->  in

          drive, loaded.



       -  HWFLAG = Heated windshield flag:  0 -> heated windshield off; 1 -> heated

          windshield on.



       -  HWFLGL = Latched heated windshield flag:   0  ->  heated  windshield  has

          never  been  on;  1  -> heated windshield has been on at least once since

          start-up.



       -  POWSFG = Flag used to indicate that power steering load is  high:   1  ->

          power steering on.



       -  PSPSHP = Flag used to indicate  if  Power  Steering  Pressure  Switch  is

          present; 1 -> switch used; 0 = no switch.



       -  PTSCR = Part throttle since crank mode flag:  0 -> driver has not  tipped

          in since start; 1 -> driver tipped in, kick down desired RPM.





                                         9-20


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





       -  RUNNING = Flag which indicates that idle speed  is  being  controlled  by

          Engine  Running  VIP:   1  ->  in  Engine Running VIP; 0 -> not in Engine

          Running VIP.



      Calibration Constants:



       -  ACCPM = Airflow increment  required  with  A/C  on.   Value  is  used  to

          increment  both  the  desired  flow through the ISC actuator (account for

          increased load) and the filtered air mass - FAM.  ..Typical value -  0.15

          ppm



       -  BZZRPM = RPM adder intended to provide a short increase in RPM for engine

          cleanout  on  start-up.  The buzz-up function is not affected by the part

          throttle kickdown until BZZTM expires.  ..Typical value - 300 RPM.



       -  BZZTM = Time for which BZZRPM adder is in effect.  ..Typical  value  -  3

          seconds.



       -  DACTM = Time to maintain A/C rpm adder after  A/C  has  been  disengaged.

          Used  to  prevent RPM changes when A/C cycles rapidly.  ..Typical value -

          30 sec.



       -  DNAC = RPM increment requested with the A/C on.   ..Typical  value  -  75

          RPM.



       -  DNPOWS = If a power steering pressure  switch  is  used,  this  parameter

          increments  the  desired RPM when an increased load is sensed.  ..Typical

          value - 75 RPM.



       -  DNPPM = Feed forward mechanism for fuel control.  Decrements filtered air

          mass for drive/neutral transition.



       -  DRBASE = Base desired engine speed in drive.



       -  FN825A(ECT) = RPM adder as a  function  of  ECT.   Provides  base  Hi-Cam

          function.



       -  FN825B(ACT) = RPM adder as a function of ACT.  Provides  higher  idle  at

          very low ambients.



       -  FN826A(TCSTRT) = RPM adder as a function of ECT at start.  This adder  is

          deleted  when  either  the  first  part throttle transition since exiting

          crank is observed or the time since  start  exceeds  a  calibrated  value

          (TKDTM).



       -  FN875D(DSDRPM) = Airflow required for closed throttle operation in drive.

          Input to this function is absolute DSDRPM.





              ** Airflow requirements must be measured as  accurately  as  possible

              over  a  representative  population  of  vehicles.   Data  should  be

              collected over a range of anticipated desired speeds on a  stabilized

              engine  for  both neutral and drive (a temperature modulator (FN1861)

              will automatically adjust calibrated airflow to account for increased

              requirements at low ambients).



                   Data can be collected using two methods.   A  hot  wire  can  be

              remotely  mounted  to measure airflow directly over the desired speed

              range.  Equipment is available at APTL to perform this procedure.   A



                                         9-21


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





              second  approach  is  to  use  adaptive  fuel in combination with the

              calculated speed density air mass (AM) to infer the true airflow.  In

              this  case  the engine must be stabilized at each speed and remain in

              C/L fuel control long enough for LAMBSE to be driven into a  deadband

              around  1.0  by  the adaptive fuel strategy.  At this point, readings

              can be taken of:



               -  CALCULATED AIR MASS (AM)

               -  ADAPTIVE FUEL CORRECTION (KAMREF)

               -  IDLE SPEED DUTY CYCLE (ISCDTY)





              The inferred airflow will  equal  (AM  *  KAMREF).   By  knowing  the

              leakage  due to the throttle body, PCV, ISC actuator and gaskets, the

              above obtained ISC duty cycle information can be used to derive/check

              the  ISC  transfer function accurately.  Actual airflow (AM * KAMREF)

              minus the total leakage (ITHBMA -  see  section  on  ISC  duty  cycle

              output)  should  represent  the  ISC valve flow for the recorded duty

              cycle.





       -  FN875N(DSDRPM) =  Airflow  required  for  closed  throttle  operation  in

          neutral.  Input to this function is absolute DSDRPM.



       -  FN880(IDLTMR) = DSDRPM adder vs.  time at idle (IDLTMR).  Used as part of

          the inspection/maintenance strategy.  Rember that any RPM above base idle

          disables ISCKAM adaptive learning via HCAMFG.  Also, IDLTMR requires  RPM

          to  be  below  IDLRPM, an absolute parameter which is not tied to DSDRPM.

          Too high an RPM adder in FN880 could disable IDLTMR.



       -  FN1861(ECT,ATMR3) = Airflow multiplier  vs.   ECT  and  ATMR3.   Used  to

          compensate  for  additional friction at start-up as a function of time in

          addition to normal ECT compensation.  Increased friction effects tend  to

          go  away  after  about one minute.  Inputs are ECT normalizing by FN020C,

          ATMR3 normalizing by FN018B.



       -  HWPPM = Airflow increment required when heated windshield load is sensed,

          ppm.



       -  HWRPM = Minimum neutral idle speed when heated windshield  is  on  (first

          time on only).  ..Typical value - 1400.



       -  ISCLPD = A clip on the maximum desired speed that can be  requested  with

          vehicle  in drive.  Usually the GPAS defined speed allowed at 0.2 mi.  on

          a cold start.  ..Typical value - 1100 RPM.



       -  NDPPM = Expected change in airflow  between  engine  in  neutral  and  in

          drive.  Used as a feed forward mechanism for fuel control (increments the

          filtered air mass on neutral/drive transition).  ..Typical value  -  0.15

          ppm.  NUBASE = Base desired engine speed in neutral.



       -  PSPPM = Airflow increment required when power steering  load  is  sensed.

          Value  increments both the desired flow through the ISC actuator (account

          for increased speed/load) and the filtered air  mass  -  FAM.   ..Typical

          value - 0.10 ppm.



       -  RVIPRPM = Desired RPM controlled by Engine Running VIP strategy.







                                         9-22


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





       -  TCDESN = Time constant for DESNLO, secs.



       -  TKDTM = Time since start after which FN826A is eliminated  as  a  desired

          RPM adder.  ..Typical value - 20 seconds.



       -  TRLOAD = Transmission Load.  0 = Manual Transmission, no clutch or  gerar

          switches, forced neutral state (NDSFLG = 0).  1 = Manual Transmission, no

          clutch or gear switch.  2 =  Manual  Transmission,  one  clutch  or  gear

          switch.   3  =  Manual  Transmission, both clutch and gear switches.  4 =

          Auto Transmission,  non-electronic,  neutral  drive  switch.   5  =  Auto

          Transmission,  non-electronic, neutral pressure switch, (AXOD).  6 = Auto

          Transmission,  electronic,  PRNDL  sensor  -  park,   reverse,   neutral,

          overdrive, manual 1, manual 2.







      OUTPUTS



      Registers:



       -  DSDRPM = See INPUTS above.



       -  DESMAF = See INPUTS above.



       -  DESNLO = See INPUTS above.



      Bit Flags:



       -  HCAMFG = Flag indicating the completion of Hi-Cam.  HCAMFG = 0  indicates

          no  desired  engine speed adder exists; HCAMFG = 1 indicates an RPM adder

          above base idle is present.  Flag is used  in  the  ISC  adaptive  update

          routine to disable updates when HCAMFG = 1.

























































                                         9-23


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





      PROCESS



                       DSDRPM AND PREDICTED DESMAF CALCULATION



           The desired idle RPM, DSDRPM, calculation is divided into three parts:

      A)  START-UP HI-CAM,

      B)  NEUTRAL/DRIVE, and

      C)  ACCESSORY LOAD.



      The  predicted  desired  airflow,  DESMAF  is  also   calculated   based   on

      transmission and accessory load.



           The Hi-Cam adjustments are the  electronic  equivalent  of  an  electric

      choke.   The  engine idles at a higher RPM to compensate for the friction due

      to higher viscosity of cold oil, as well as to warm up the catalyst  and  EGO

      sensor.



                                   A) START-UP HI-CAM



      RUNNING = 1 -------------------------| DSDRPM = RVIPRPM - NUBASE

       (in VIP)                            | FILTER CONSTANT = VKDESN

                                           |

                                           | --- ELSE ---

      ATMR1 < BZZTM -----------------|     | 

       (time for engine cleanout)    |     | 

                                     |AND -| DSDRPM = FN825A(ECT) + FN825B(ACT)

                                     |     |         + FN826A(TCSTRT) + BZZRPM

                                     |     |         + FN880(CTNTMR)

      ATMR1 < TKDTM -----------------|     | (start-up kicker +

       (time for RPM kickdown)             |  Hi-Cam + Buzz Up RPM)

                                           |

                                           |--- ELSE ---

      PTSCR = 0 ---------------------|     |

       (no driver kickdown)          |     | 

                                     |AND -| DSDRPM = FN825A(ECT) + FN825B(ACT)

      ATMR1 < TKDTM -----------------|     |         + FN826A(TCSTRT)

       (time for RPM kickdown)             |         + FN880(CTNTMR)

                                           |  (start-up kicker + Hi-Cam RPM)

                                           |

                                           |--- ELSE ---

                                           |

      ATMR1 < BZZTM -----------------------| DSDRPM = FN825A(ECT) + FN825B(ACT)

       (time for engine cleanout)          |         + BZZRPM + FN880(CTNTMR)

                                           |  (Hi-Cam + Buzz Up RPM)

                                           | 

                                           |--- ELSE ---

                                           | 

                                           | DSDRPM = FN825A(ECT) + FN825B(ACT)

                                           |         + FN880(CTNTMR)

                                           |  (Base Hi-Cam desired RPM increment)





      NOTE:  FN880(CTNTMR) is added to DSDRPM only when CTNFLG  =  1.   This  means

      that FN880 is never used in drive even though CTNTMR = 0.













                                         9-24


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





                             HEATED WINDSHIELD MINIMUM CLIP



      HWFLAG = 1 ------|

                       |

      HWFLGL = 1 ------|AND -----| Clip DSDRPM at (HWRPM - NUBASE)

                       |         | as a minimum

      DNDSUP = 0 ------|



      (Heated Windshield is on for the first time)





                                   DESIRED RPM FILTER



      DESNLO > DSDRPM -------------| Set DESNLO = ROLAV (DSDRPM,TCDESN)

       (filtered RPM > actual RPM  |

                                   |  (filter RPM when RPM is dropping)

                                   |

                                   | --- ELSE ---

                                   |

                                   | Set DESNLO = DSDRPM

                                      (do not filter when RPM is increasing)





                                   "HI-CAM FLAG CHECK"



      DSDRPM = 0 -------------------------| Set HCAMFG = 0

       (Hi-Cam desired RPM = 0)           | (not on Hi-Cam)

                                          |  

                                          | --- ELSE ---

                                          |

                                          | Set HCAMFG = 1

                                          |  (on Hi-Cam, this disables the

                                          |   adaptive airflow update)





           This is the end of the start-up calculation of Desired RPM.  Next  check

      for neutral or drive.















































                                         9-25


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





                                    B) NEUTRAL/DRIVE



      TRLOAD <OR= 3 -----|       | NEUTRAL

       (manual trans)    |OR ----| -------

                         |       | 

      DNDSUP = 0 --------|       | Set DSDRPM = DSDRPM + NUBASE

       (auto trans in neutral)   | 

                                 | 

                                 | --- ELSE ---

                                 |

                                 |

      DNDSUP = 1 ----------------| DRIVE

       (auto trans in drive)     | -----

                                 | Set DSDRPM = DSDRPM + DRBASE







                                    C) ACCESSORY LOAD



      1) If A/C is on add A/C adder to desired RPM



      ACCFLG = 1 -----------|

       (A/C clutch engaged) |

                            |

      ACIFLG = 1 -----------|OR --------| Set DSDRPM = DSDRPM + DNAC

       (A/C load impending) |              ( increase RPM for A/C)

                            |

      ACCTMR < DACTM -------|

       (delay to turn off A/C adder)





      2) If power steering load is on then add power sterring adder to desired RPM.



      PSPSHP = 1 -------------|

                              |AND ---| Set DSDRPM = DSDRPM + DNPOWS

      POWSFG = 1 -------------|       |  (power steering RPM adder)

       (power steering on)            | Set HCAMFG = 1

                                      | (Disable Adaptive Airflow Update)





                                        GPAS CLIP



      TRLOAD >OR= 4 ----|

       (auto trans)     |AND -----| Clip DSDRPM to ISCLPD 

                        |         | as a maximum

      DNDSUP = 1 -------|

       (in drive)       |

                        |

      ATMR3 > CRKTIM ---|























                                         9-26


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





                              PREDICTED DESMAF CALCULATION





      TRLOAD <OR= 3 -------|

                           |OR -----| Set DESMAF = FN875N(DSDRPM) * 

      DNDSUP = 0 ----------|        |              FN1861(ECT,ATMR3)

      (auto trans in neutral)       |             

                                    |

                                    | --- ELSE ---

                                    |

      DNDSUP = 1 -------------------| Set DESMAF = FN875D(DSDRPM) *

       (auto trans in drive)        |              FN1861(ECT,ATMR3)





      Now check for A/C and power steering adders.



      ACCFLG = 1 -----------|

       (A/C clutch engaged) |OR -| Set DESMAF = DESMAF + ACPPM

                            |    |  (increase DESMAF for A/C)

      ACIFLG = 1 -----------|    

       (A/C load impending)





      PSPSHP = 1 ----------| 

                           |AND ---| Set DESMAF = DESMAF + PSPPM

      POWSFG = 1 ----------|       | (increase airflow for P.S.)

       (power steering on)    





      HWFLAG = 1 ------|

                       |

      HWFLGL = 1 ------|AND -----| Set DESMAF = DESMAF + HWPPM

                       |

      DNDSUP = 0 ------|



      (Heated Windshield is on for the first time)

















































                                         9-27


                  IDLE SPEED CONTROL, DESIRED RPM CALCULATION - GUFA

                              Copyright 1989 FoMoCo





                                   ISFLAG/ISLAST LOGIC





           ISLAST reflects the state of ISFLAG on the last program pass.  ISFLAG is

      set according to the following chart:



                                               MANUAL TRANSMISSION or

                            AUTO in DRIVE        AUTO in NEUTRAL

                              (DNDSUP = 1)        (DNDSUP = 0)

         -----------------|-------------------|-------------------

           A/C off        |        0          |         2

         -----------------|-------------------|-------------------

           A/C on         |        1          |         3

         -----------------|-------------------|-------------------



      By comparing ISFLAG and ISLAST, you can determine if there were  any  A/C  or

      N/D transitions since the last program pass.























































































                                         9-28


        IDLE SPEED CONTROL, DESIRED RPM CALCULATIONS - FAM ADJUSTMENTS - GXZ0

                              Copyright 1989 FoMoCo





                                   FAM ADJUSTMENTS



      OVERVIEW





           The Filtered Air Mass, FAM, is adjusted for  load  transitions  at  this

      point  as  a  software  convenience.   Sections A, B, and C are executed each

      program pass in order.





      DEFINITIONS



      INPUTS



      Registers:



       -  BGCNT = Background counter used to pace the filtered AM  algorithm.   See

          SAMRAT.



       -  FAM = Filtered Air Mass.



       -  IBGPSI = Background counter used to control pacing of the C/L  integrator

          value (IPSIBR).



       -  ISLAST = Register which tracks the state of engine load from the previous

          background pass.  Used in determing when it is necessary to increment the

          filtered air mass (FAM) and clip the  C/L  idle  speed  integrator  to  a

          minimum value.



      Bit Flags:



       -  ACCFLG = A/C engaged flag:  1 -> A/C engaged; 0 -> A/C disengaged.



       -  ACIFLG = A/C engagement impending flag:  1  ->  A/C  about  to  engage  -

          adjust airflow and fuel immediately; 0 -> A/C not about to engage.



       -  DNDSUP = Delayed neutral/drive flag:  0 -> in neutral, no load; 1  ->  in

          drive loaded.



       -  POWSFG = Flag used to indicate that power steering load is  high:   1  ->

          power steering on.



       -  PSFLAG = Flag to indicate last pass value of power steering to check  for

          transitions:  1 -> power steering was on.



      Calibration Constants:



       -  ACPPM = Airflow increment  required  with  A/C  on.   Value  is  used  to

          increment  both  the  desired  flow through the ISC actuator (account for

          increased load) and the filtered air mass - FAM.  ..Typical value -  0.15

          ppm.



       -  DACPPM = Filtered air mass decrement used when A/C turns off.



       -  DNPPM = Feed forward mechanism for fuel control.  Decrements filtered air

          mass for drive/neutral transition.









                                         9-29


        IDLE SPEED CONTROL, DESIRED RPM CALCULATIONS - FAM ADJUSTMENTS - GXZ0

                              Copyright 1989 FoMoCo





       -  NDPPM = Expected change in airflow  between  engine  in  neutral  and  in

          drive.  Used as a feed forward mechanism for fuel control (increments the

          filtered air mass on neutral/drive transition).  ..Typical value  -  0.15

          ppm.







      OUTPUTS



      Registers:



       -  FAM = Filtered Air Mass.



      Bit Flags:



       -  PSFLAG = Flag to indicate last pass value of power steering to check  for

          transitions:  1 -> power steering was on.























































































                                         9-30


        IDLE SPEED CONTROL, DESIRED RPM CALCULATIONS - FAM ADJUSTMENTS - GXZ0

                              Copyright 1989 FoMoCo





      PROCESS

                                   FAM ADJUSTMENTS





                              A) NEUTRAL/DRIVE ADJUSTMENTS



      DNDSUP = 1 --|

       (in drive)  |AND ---------| Set FAM = FAM + NDPPM

                   |             |  (immediately increase filtered air mass)

      ISLAST > 1 --|             |

       (last pass was neutral)   |--- ELSE ---

                                 |

      DNDSUP = 0 ---|            |

       (in neutral) |AND --------| Set FAM = FAM - DNPPM

                    |               (immediately decrease filtered air mass)

      ISLAST < 2 ---|

       (last pass was drive)





                                  B) A/C STATE CHANGES



      ACCFLG = 1 ----------|

       (A/C clutch engaged)|OR -|

                           |    |

      ACIFLG = 1 ----------|    |

       (A/C load impending)     |AND -| Set FAM = FAM + ACPPM

                                |     |  (immediately increase filtered air mass)

      ISLAST NOT= 1 OR 3 -------|     |

       (A/C on state change)          |--- ELSE ---

                                      |

      ACIFLG = 0 ---------------|     |

                                |     |

      ACCFLG = 0 ---------------|AND -| Set FAM = FAM - DACPPM

       (A/C clutch not engaged) |        (immediately decrease filtered air mass)

                                |

      ISLAST NOT= 0 OR 2 -------|

       (A/C off state change)





                             C) POWER STEERING STATE CHANGES



      POWSFG = 1 ----------|

       (power steering on) |AND -| Set FAM = FAM + PSPPM

                           |     |  (immediately increase FAM)

      PSFLAG = 0 ----------|     | Set PSFLAG = 1

       (P.S. on state change)    |  (store current state of POWSFG)

                                 | Set IBGPSI = 0

                                 | Set BGCNT = 0

























                                         9-31


        IDLE SPEED CONTROL, DESIRED RPM CALCULATIONS - FAM ADJUSTMENTS - GXZ0

                              Copyright 1989 FoMoCo





                         EXAMPLE OF ANTICIPATORY FAM CHANGES

                                        TO A/C









                                 -----------------------

                                |                       |

                                |                       |

      A3C  OFF -----------------                         ----------

       (Pressure Switch)



              1                   ----------

                                 |          |

                                 |          |

      ACIFLG  0 ----------------- <-IDLCOT-> -----------------------



              ON                             -----------

                                            |           |

                                            |           |

      ACCFLG OFF ----------------|--|--|--|-|            ----------



             A/C ON   1 or 3      ----------------------

                                 |                      |

                      0 or 2     |                      |

      ISLAST A/C OFF ------------  | | | | | | | | | | | ------------



                              -->| |<--Background Loop Time



                                 |      |

                                 V      V



           0.6            ACPPM  |* * *

      FAM  0.4 ------------------       *                         * * 

           0.2                             * * * * * *  *       *

           0.0                                          |     *

                                                         *****















































                                         9-32


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





                    DESIRED IDLE AIRFLOW AND ISC DUTY CYCLE OUTPUT





      This section describes the following features of the ISC strategy:





       -  ISC and fuel responses to state changes at idle:   When  either  the  FAM

          logic  has  just  been  entered  or a load change at idle has been sensed

          (ISLAST does not equal ISFLAG), the following actions are taken:



           .  The C/L RPM integrator (IPSIBR) is clipped to 0 as a minimum value to

              avoid potential speed dips.



           .  The pacer for the C/L RPM integrator  (IBGPSI)  is  zero'd  to  avoid

              unnecessary reaction by the ISC system.



           .  The flag tracking  the  idle  load  state  (ISLAST)  is  set  to  the

              appropriate state for use the next background slice.





          In addition to the above, if a load state  change  is  sensed,  the  fuel

          control  system  is  in  C/L  operation, the engine is in closed throttle

          operation, and the fuel  control  integrator  (LAMBSE1  and  LAMBSE2)  is

          greater  than 1.0, then LAMBSE1 and LAMBSE2 is reset to 1.0.  This action

          avoids potential lean stall/sag  problems  should  there  be  significant

          differences  between  the degree of maturation of the adaptive fuel cells

          for the various idle states.





       -  Closed loop ISC control:  C/L RPM control logic is entered  as  described

          in the ISC mode selection section.  The intent of C/L speed control is to

          adjust the ISC valve as necessary to provide  the  correct  desired  idle

          speed.   This  is  accomplished  through  integration of a proportionally

          derived airflow correction  which  is  added  to  the  predicted  airflow

          requirement  (DESMAF).  Integration of this correction factor is paced in

          terms of background loop by a calibratible function  (FN860).   Depending

          on  the  direction  of the speed error, and neutal/drive status, separate

          gains are used to calculate the proportional correction factor  used  for

          integration.   (KPSIND,  KPSINU,  KPSIDU,  KPSIDD  are the gains, defined

          below) A common function (FN824) is available for gain  modulation.   The

          speed  error is driven into a calibrated deadband within which integrator

          updates are disabled.  Integrator updates are also disabled when the  ISC

          duty cycle is greater than or equal to 98%.





       -  ISC duty cycle output; Once the desired mass flow value is finalized, the

          appropriate  duty cycle is calculated and output.  The final DESMAF value

          is calculated as follows:





           .  DESMAF = [DESMAF + DASPOT + IPSIBR + ISCKAM]



              Then DESMAF, initial predicted value, is added to the  factors  noted

              above;  and  the  value of ISCKAM is used, where ISFLAG points to the

              correct adaptive cells.  (See discussion on "ISC_KAM update).





          The calibrated leakage term (ITHBMA) is subtracted from DESMAF to  obtain

          the  actual  flow  required  from the ISC actuator (DEBYMA).  This value,



                                         9-33


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





          clipped at DEBYCP as a minimum  allowed  actuator  airflow,  becomes  the

          input to the ISC duty cycle transfer function (FN800).  Output from FN800

          is the specified ISC duty cycle.  The nature of the bypass  air  solenoid

          is  such  that  at high manifold vacuum the device flows less air than at

          idle vacuum levels, assuming a constant duty cycle.  To account for  this

          difference, a modulator (FN820B) is available to increment the duty cycle

          as necessary to hold constant flow.





       -  In addition, the closed throttle spark can be aggressively  modified  via

          SPKMUL  (See  Ignition  Timing  chapter  for  definition and usage).  Two

          functions, FN841N for neutral, and FN841D for drive, are  used  based  on

          RPM error, RPMERR.







      CALIBRATION CONSTANTS:





      The following calibration constants are used in the duty cycle output and C/L

      RPM control routines.





       -  RPMDED = Specifies the engine speed deadband within  which  the  C/L  RPM

          integrator  is  frozen.   To  be  in this zone, the absolute value of the

          engine speed error cannot exceed RPMDED where the speed error is  defined

          as RPMERR = (DSDRPM - N).  ..Typical value - 25 RPM.





       -  KPSIDU = Gain for underspeed condition  in  drive  (same  as  KPSINU  for

          neutral).





       -  VPSINU = VIP gain for underspeed conditions.





       -  KPSINU = Gain for underspeed condition in neutral.   When  multiplied  by

          the  engine  speed  error and the gain modulator (FN824), it provides the

          input for IPSIBR integration.  Using the duty cycle vs.  RPM  information

          generated  for  the airflow predictions, FN875N / FN875D (see Desired RPM

          section), approximate gains can be calculated.  On  2.3l  OHC  EFI  Truck

          calibrations,  a 0.01 ppm change in airflow corresponds to an approximate

          30 RPM speed-delta.   This  assumes  a  transport  delay  of  about  1.25

          seconds.  If the pacing requested for the C/L integrator is less than the

          actual transport delay (which it should to  have  a  responsive  system),

          then  the  gain should be decreased proportionately.  Eg., In the case of

          the 2.3L OHC, (0.01 ppm/30 RPM) = a calculated gain of  0.00033  ppm/RPM:

          If  the  desired pacing for underspeed conditions is 0.36 seconds (assume

          30 background passes 0.012 sec/pass), then the resultant  gain  would  be

          [(0.36  / 1.25) * 0.00033] = 0.000095 ppm/RPM.  ..Typical value - 0.00009

          ppm/RPM.





       -  KPSIND = Gain for overspeed condition in neutral.  Used  same  as  KPSINU

          above.  ..Typical value - 0.000075 ppm/RPM.











                                         9-34


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





       -  VPSIND = VIP gain for overspeed conditions.





       -  KPSIDD = Gain for  overspeed  condition  in  drive  (Same  as  KPSIND  in

          neutral).





       -  ITHBMA = Throttle body idle mass air flow with  throttle  plate  at  idle

          screw stop and 0% ISC duty cycle.





       -  PSIBRM = Maximum allowed value for the  IPSIBR.   Must  provide  adaquate

          range  of  authority  to  correct  for  anticipated errors in the initial

          airflow predications.  ..Typical value - 0.25 ppm.





       -  VSIBRM = Maximum allowed value for IPSIBR when in running VIP.





       -  PSIBRN = Minimum allowed value for IPSIBR.  Range is -1.0 to 0.0.





       -  DEBYCP = Minimum allowed airflow through the ISC actuator.





       -  VSIBRN = Minimum allowed value for IPSIBR when in running VIP.





       -  FN860 = Function which paces the integration of the C/L  RPM  correction.

          Input  to  this  function  is  the  engine  speed  error.   Typically the

          integration is paced more rapidly the further  under  the  control  speed

          that  the  engine  speed  falls.   In overspeed conditions, the pacing is

          slowed to provide an overdamped response to a torque disturbance at idle.

          ..Typical values





       -  V860 = VIP calibration parameter which sets pacing  intergration  of  the

          C/L RPM correction.





                    RPM ERROR          Pacing (BACKGROUND PASS)

                    ---------          ------------------------

                      -500                    250

                      -200                    150

                      -125                    125

                      - 25                    125

                      + 25                     45

                      + 75                     25

                      +150                     15     RPMERR =

                                                      DSDRPM - N







       -  FN824(N_BYTE) = Gain multiplier vs.  RPMERR (RPMERR =  DSDRPM  -  N)  for

          KPSINU  and  KPSIND  used  to  vary  the  response  of  the  proportional

          correction term in C/L RPM control.









                                         9-35


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





       -  FN800 = Transfer function for the ISC actuator.  Initial values for  this

          function  should  come  directly from flow data provided by fuel systems.

          Data must be generated at the  expected  idle  vacuum  setting  for  each

          particular   application.   Subsequent  data  generated  in  the  airflow

          prediction study, as described in the desired RPM section, can be used to

          fine-tune  the  transfer  function  as sufficient numbers of vehicles are

          sampled.

|  

|      -  FN810 = Adder to  DEBYMA  vs.   RPM.   This  function  is  similar  to  a

|         proportional control term.  It adds air flow to correct dips in RPM.



       -  FN820B = ISC duty cycle multiplier vs.   LOAD.   Used  to  hold  constant

          actuator airflow on a decel.  after a dashpot action is complete.



       -  FN841D = ISC Spark Multiplier versus RPM Error in Drive.  Input =  RPMERR

          in RPM.



       -  FN841N = ISC Spark Multiplier versus  RPM  Error  in  Neutral.   Input  =

          RPMERR in RPM.







      KEY REGISTERS/FLAGS:





      The following registers/flags are used in the duty cycle  output  and/or  C/L

      RPM control routines.





       -  DEBYMA_FM = DEBYMA  without  BP  correction,  for  MAF  FMEM,  units  are

          lbma/min.





       -  IBGPSI = Background counter used to control pacing of the C/L  integrator

          value (IPSIBR).





       -  IPSIBR = Integrated value of the proportional C/L RPM correction.













































                                         9-36


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





                       TOTAL DESMAF CALCULATION and LAMBSE CLIP

                                 (DESMAF and DEBYMA)





      ISFLAG = ISLAST --------|                     

       (No Idle Load Change)  |                      

                              |AND ----------------| Set DESMAF = DESMAF

      CTPTFG = 0 -------------|                    | + IPSIBR + DASPOT

      (no transition from C.T.)                    | 

                                                   | --- ELSE ---

                                                   |

                                                   | Clip IPSIBR to zero

                                                   |  as a minimum

                                                   |

                                                   | DESMAF = DESMAF + IPSIBR

                                                   |  + DASPOT

                                                   | IBGPSI = 0

                                                   | BGCNT = 0





                                 ISCKAM QUALIFICATION





      KAM_ERROR = 0 ------------------| DESMAF = DESMAF + ISCKAM(n)

        (KAM is ok)                   |  n = ISFLAG





      NOTE:  LAMBSE resets are done when:



       -  entering/exiting FAM region

       -  load state changes at closed throttle at idle

       -  open loop to closed loop transition





      See the LAMBSE RESET LOGIC in the Closed Loop Fuel section.



















































                                         9-37


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





                              ISC DUTY CYCLE CALCULATION

                                       (ISCDTY)





      ISCFLG = 1 OR 2 -----------|          | Set RPMERR = DSDRPM - N

       (RPM control or lockout)  |          |  (determine RPM error)

                                 |AND ------| Set SPKMUL = FN841N

      DNDSUP = 0 ----------------|          |  (spark feedback, neutral)

       (neutral)                            | Set IBGPSI = IBGPSI + 1

                                            |  (increment C/L correction

                                            |   pacer)

                                            | 

                                            | --- ELSE ---

      ISCFLG = 1 OR 2 -----------|          |

                                 |AND ------| Set RPMERR = DSDRPM - N

      DNDSUP = 1 ----------------|          | Set SPKMUL = FN841D

       (drive)                              | Set IBGPSI = IBGPSI + 1

                                            |

                                            | --- ELSE ---

                                            |

      ISCFLG = -1 OR 0 ---------------------| GO TO DEBYMA calculation

       (dashpot or pre-position)





      |RPMERR| > RPMDED --------------------| Set ISCTMR = 0

       (RPM not within deadband)            |  (set RPM sampling timer

                                            |   to 0)

                                            | 

                                            | --- ELSE ---

                                            |

                                            | GO TO DEBYMA calculation





      RUNNING = 0 ----------|

       (normal strategy)    |AND --|

                            |      |

      IBGPSI >OR= FN860 ----|      |OR -----| Set IBGPSI = 0

       (OK to correct RPM)         |        |  (reset C/L correction

                                   |        |   pacer)

      RUNNING = 1 ----------|      |        |

       (in self test)       |      |        | 

                            |AND --|        | --- ELSE ---

      IBGPSI >OR= V860 -----|               |

                                            | GO TO DEBYMA calculation





      N < DSDRPM - RPMCTL ----|

       (RPM is too low)       |

                              |

      RUNNING = 0 ------------|AND ---------| GO TO DEBYMA calculation

       (not in VIP)           |

                              |

      ISCDTY >OR= 0.98 -------|

       (ISC duty cycle 

         already at maximum)











                                         9-38


                    IDLE SPEED CONTROL - DUTY CYCLE OUTPUT - GUFB

                              Copyright 1989 FoMoCo





      RPMERR < 0 ---------------------------| Set ISCPSI = "B" *

       (overspeed error)                    |  RPMERR * "F"

                                            |  (determine C/L overspeed

                                            |   air mass correction)

                                            |

                                            | --- ELSE ---

                                            |

      RPMERR >OR= 0 ------------------------| Set ISCPSI = "C" *

                                            |  RPMERR * "F"

                                            |  (determine C/L

                                            |   underspeed air mass

                                            |   correction)

                                            | Set IPSIBR = IPSIBR 

                                            |  + ISCPSI

                                            |  (update C/L air mass

                                            |   correction)

                                            |

                                            | Clip IPSIBR to

                                            |  "D" as a maximum

                                            |  "E" as a minimum

                                            |

                                            | GO TO DEBYMA calculation





|     Enter DEBYMA calculation ---| Set DEBYMA = ((DESMAF - ITHBMA) +

|      (calculate corrected,      |  FN810) * (29.92/BP)

|       actual airflow)           | DEBYMA_FM = (DESMAF - ITHBMA) + FN810

                                  | (calculate airflow through

                                  |  the bypass solenoid)

                                  | Clip DEBYMA and DEBYMA_FM 

                                  |  at DEBYCP as a minimum

                                  |

                                  | Set ISCDTY = "A" * FN800

                                  |  

                                  |  (calculate ISC duty cycle)

                                  | Clip ISCDTY at 1.0 as a

                                  |  maximum

                                  |

                                  | GO TO KAM_UPDATE

                                  |  (update keep alive cells)





      RUNNING = 0 ----------------| "A" = FN820B     "D" = PSIBRM

       (normal strategy)          | "B" = KPSIND     "E" = PSIBRN

                                  | "C" = KPSINU     "F" = FN824(N_BYTE)

                                  |

                                  | --- ELSE ---

                                  |

      RUNNING = 1 ----------------| "A" = V820A      "D" = VSIBRM

       (in self test)             | "B" = VPSIND     "E" = VSIBRN

                                  | "C" = VPSINU     "F" = 1.0

                                  |                  (VIP GAIN MULTIPLIER)

















                                         9-39


                           IDLE SPEED CONTROL - KAM UPDATE

                              Copyright 1989 FoMoCo





                                    ISC_KAM_UPDATE





      This section describes the adaptive ISC update routine.   In  general,  under

      steady  state  conditions  on  a  stabilized engine at idle, the adaptive ISC

      logic will evaluate whether the open  loop  prediction  of  airflow  requires

      correction.   If  a  correction  factor was applied and IPSIBR has a non-zero

      value, then adaptive ISC strategy will roll this correction  value  into  KAM

      and  drive  the  IPSIBR  term back to zero.  Control of the rate at which the

      IPSIBR value is driven to zero is calibration dependent.



      There are four ISCKAM cells designated for idle corrections.  The appropriate

      cell is pointed to by the flag ISFLAG which tracks the load state at idle.  A

      checksum has also been added, ISKSUM, (see KAM Chapter),  the  total  of  the

      four ISCKAM cells minus the value in ISKSUM must be less than or equal to one

      during  Power  Up  Sequencing;  otherwise,  a  reinitializing  occurs.    The

      following logic must be satisfied to update KAM:



       *  In RPM control.

       *  Within the RPM deadband for a calibrated time interval (UPDISC).

       *  No hi-cam adder present (HCAMFG = 0).

       *  IBGPSI >OR= UPDATM.





      ISCKAM corrections are clipped to the same maximum and minimum limits as  the

      C/L  RPM  integrator  (PSIBRM/PSIBRN).   Each  time  the  update criteria are

      satisfied both IPSIBR and ISCKAM  are  adjusted  one  bit  (0.00024  ppm)  in

      opposite directions until IPSIBR = 0.







      CALIBRATION CONSTANTS



      The following calibration constants are used to  control  the  ISCKAM  update

      routine:





       -  UPDISC = Time that engine speed must be  within  the  specified  deadband

          (RPMDED) prior to KAM update.  ..Typical value - 3 seconds.





       -  UPDATM = Pacing at which the IPSIBR correction factor is rolled into KAM.

          Value  is  in  terms  of  background  loop  counts.   ..Typical value - 5

          background passes.

































                                         9-40


                           IDLE SPEED CONTROL - KAM UPDATE

                              Copyright 1989 FoMoCo





                                      KAM_UPDATE





      ISCFLG NOT= 1 --------------|           | Exit KAM_UPDATE

       (not in RPM control mode)  |           |  (do not update KAM)

                                  |           |

      ISCTMR < UPDISC ------------|OR --------| END OF ISC LOGIC

       (not at DSDRPM long enough)|           |

                                  |           |

      HCAMFG = 1 -----------------|           |

       (on hi-cam)                |           |

                                  |           |

      IPSIBR = 0 -----------------|           |

       (closed loop ISC           |           |

        correction is 0)          |           |

                                  |           |

      IBGPSI < UPDATM ------------|           |

       (not time to update KAM)               | --- ELSE ---

                                              |

      IPSIBR > 0 -----------------|           | Increment ISCKAM(N)

       (positive C/L correction)  |AND -------|  (roll correction into

                                  |           |   KAM)

      ISCKAM(N) < PSIBRM ---------|           | Increment ISKSUM

       (< max allowed value)                  | Decrement IPSIBR

                                              |  (balance DESMAF equation)

                                              | 

                                              | Set IBGPSI = 0

                                              |  (reset closed loop

                                              |   correction to 0)

                                              |

                                              | END OF ISC LOGIC

      IPSIBR <OR= 0 --------------|           |

       (negative C/L correction)  |           | --- ELSE ---

                                  |AND -------|

      ISCKAM(N) > PSIBRN ---------|           | Decrement ISCKAM(N)

       (> min allowed value)                  |  (roll correction into

                                              |   KAM)

                                              | Decrement ISKSUM

                                              | Increment IPSIBR

                                              |  (balance DESMAF equation)

                                              | 

                                              | Set IBGPSI = 0

                                              |  (reset closed loop

                                              |   correction to 0)

                                              | 

                                              | END OF ISC LOGIC

                                              |

                                              | --- ELSE ---

                                              |

                                              | IBGPSI = 0





















                                         9-41


                           IDLE SPEED CONTROL - FAM - GUAA

                              Copyright 1989 FoMoCo





                 FILTERED AIR MASS (FAM) LOGIC/AIR MASS DETERMINATION





      This section describes logic associated with filtering of the calculated  air

      mass at idle.  Specifically it details:





       -  Entry/Exit conditions for FAM region.  Air mass filtering is required  to

          provide acceptable engine performance at stabilized idle operation.  When

          conditions (throttle position, desired engine speed, actual  idle  speed)

          indicate  filtering  is  desired,  a  control flag (REFFLG) is set and an

          adaptation of the common rolling average filter routine is entered.  This

          action,  in  effect, drives the filtered air mass (FAM) into a calibrated

          deadband  approximately  centered  about  the  instantaneous   air   mass

          (N*ENGCYL*ARCHG).   This  procedure should provide a near fixed AM signal

          at idle.





       -  Determination  of  the  idle  air   mass:    Either   the   instantaneous

          (N*ENGCYL*ARCHG)  or the filtered (FAM) air mass can feed the AM register

          at idle for use in the fuel pulsewidth calculation.  In  general  if  the

          control  flag  (REFFLG) is set, the filtered air mass value will feed the

          AM register -- unless  the  instantaneous  air  mass  exceeds  FAM  by  a

          calibrated  percent  difference  (DELTAM).  When FAM is referenced, it is

          clipped at a calibrated percent  (MAXFAM)  above  (N*ENGCYL*ARCHG)  as  a

          maximum  allowed  value.   The AM register is always clipped at a minimum

          value (MINAM) regardless of whether the filtered or instantaneous  AM  is

          used.





      CALIBRATION CONSTANTS:



      The following calibration constants are used to specify entry conditions into

      the  FAM  region,  control  of  the  filter  routine  and  selection  of  the

      appropriate AM value.





       -  AMDESN = Defines the desired engine speed below which air mass  filtering

          can  be  enabled.   Should  be  kept  at  a  minumum to avoid unnecessary

          activation of the FAM filter routine.  ..Typical value - 900 RPM.





       -  AMRPM = Incremental adder to DSDRPM; total defines an engine speed  limit

          below which air mass filtering can occur.  Should be kept to a minimum to

          avoid unnecessary activation of the FAM filter routine.  ..Typical  value

          - 75 to 125 RPM.





       -  AMRPMH = Hysteresis term for AMRPM; after entry into the FAM  region  the

          total of DSDRPM + AMRPM + AMRPMH defines the engine speed exit condition.

          Should be large enough so that it not triggered by normal fluctuations in

          engine  speed at idle due to load transitions (eg.  A/C or power steering

          cycling).  ..Typical value - 350 RPM.





       -  DELRAT = Throttle position adder to RATCH.  Used to describe  a  throttle

          position  below which air mass filtering is enabled.  Should be set equal

          to DELTA + HYSTS (see throttle mode select logic).  ..Typical value -  15

          counts.



                                         9-42


                           IDLE SPEED CONTROL - FAM - GUAA

                              Copyright 1989 FoMoCo





       -  DLHYST = TP hysteresis on exit from FAM.





       -  EFAMPH = Upper (AMPEM-EM) clip on entry to FAM.





       -  EFAMPL = Lower (AMPEM-EM) clip on entry to FAM.





       -  FAMINC = FAM increment/decrement when entering FAM region, lb/min.





       -  FAMLIM = Establishes a deadband centered around FAM.  The filter  is  run

          only  if the instananeous AM is outside this deadband; (FAM plus or minus

          FAMLIM * N * ENGCYL * ARCHG).  FAMLIM may be thought of as  the  deadband

          size.   Eg.,  if  FAMLIM was 0.05, then the deadband would be FAM plus or

          minus 5 percent of the instantaneous AM.  If FAMLIM  is  too  large,  the

          filter  will  not respond to changes in instantaneous Idle AM.  If FAMLIM

          is too small, the filter will vary with the oscillations in instantaneous

          AM.  Typical value - 0.035.





       -  IFAM = Initial FAM - Upper FAM clip on exit from FAM.





       -  SAMRAT = SAMRAT is used to pace the filter in terms  of  background  loop

          counts.  ..Typical value - 5.



































































                                         9-43


                           IDLE SPEED CONTROL - FAM - GUAA

                              Copyright 1989 FoMoCo





       -  DELTAM = Multiplier of the filtered air mass.   Establishes  a  threshold

          which  if  exceeded  by  the  instantaneous AM, forces the AM register to

          reference the instantaneous AM value.  This provides a breakout  capacity

          of the filtered routine which may be necessary due to unanticipated loads

          at idle.  ..Typical value - 1.15.





       -  MAXFAM = Multiplier of the instantaneous AM value.  When referencing  the

          FAM register at idle, MAXFAM * (N*ENGCYL*ARCHG) establishes an upper clip

          on the AM value.  ..Typical value - 1.25.





       -  MINAM = A minimum clip on the AM register.  TCFAM  =  Time  constant  for

          FAM, sec.





      DEDICATED REGISTERS/FLAGS:



      The following registers/flags are used by this routine.





       -  FAM_FLG = Flag indicating in FAM region and AM = FAM.



       -  FFMTMR = FAM filter Timer, sec.





       -  RATCH = Lowest filtered throttle position (see System Equations  in  this

          book for a better description).





       -  REFFLG = Flag indicating (when set) that conditions to enter the filtered

          region  have  been  satisfied.   Flag is also referenced by adaptive fuel

          control to indicate when to use/update specific idle cells.





       -  BGCNT = Background counter used to pace the filtered AM algorithm.

















































                                         9-44


                           IDLE SPEED CONTROL - FAM - GUAA

                              Copyright 1989 FoMoCo





                            FILTERED AIR MASS LOGIC (FAM)





      ALWAYS ------------------------| AM = N * ENGCYL * ARCHG





      ---->(Tip-in into normal AM)

                                                           

      TP > RATCH + DELRAT + DLHYST ----------------|OR ---| Set REFFLG = 0   

       (not closed throttle)                       |      |  (use AM)

                                                   |      |

      DSDRPM > AMDESN -----------------------------|      | Clip FAM to IFAM

       (desired RPM too high for FAM)              |      |

                                                   |      |

      N_BYTE > DSDRPM + AMRPM + AMRPMH ------------|      |

       (RPM higher than desired idle RPM)                 |

                                                          | --- ELSE ---

                                                          | 

                                                          | Enter FAM region

                                                          | 

                                                          | Set BGCNT = 0 

      ---->(Tip-out into closed throttle and FAM)         | (reset FAM

                                                          |  update counter)

      TP <OR= RATCH + DELRAT ----------------------|AND --|

       (near closed throttle)                      |      | Set REFFLG = 1

                                                   |      | Clip AM to

      DSDRPM <OR= AMDESN --------------------------|      | EFAMPH*FAM as max.

                                                   |      | EFAMPL*FAM as min.

       (desired RPM within FAM region)             |      | Set FAM =

                                                   |      | AM + FAMINC

      N_BYTE <OR= DSDRPM + AMRPM ------------------|      |  

       (RPM closed to desired idle RPM)            |      | 

                                                   |      |  Set FFMTMR = 0

      REFFLG = 0 ----------------------------------|      |  

       (last state was normal AM)                         | (initialize FAM

                                                          |  filter timer

                                                          |  during entry)

                                                          |

                                                          | --- ELSE ---

      ---->(FAM update delay)                             |

                                                          |

      REFFLG = 1 ----------------------------------|      |

       (in FAM region)                             |      |

                                                   |      |

      BGCNT + 1 < SAMRAT --------------------------|AND --| Increment BGCNT

       (sampling counter too low)                  |      |

                                                   |      |

      |(N*ENGCYL*ARCHG) - FAM | >                  |      |

        (N*ENGCYL*ARCHG) * FAMLIM -----------------|      |

       (AM within reasonable limits)                      |

                                                          |

                                                          |

                                                          |

                                                          | --- ELSE ---

                                                          |











                                         9-45


                           IDLE SPEED CONTROL - FAM - GUAA

                              Copyright 1989 FoMoCo





      ---->(FAM update)                                   |

                                                          |

      REFFLG = 1 ----------------------------------|      | Set FAM = UROLAV

       (in FAM region)                             |      |  (AM,TCFAM)

                                                   |      | FFMTMR is the 

      BGCNT + 1 >OR= SAMRAT -----------------------|AND --|  sample period

       (sampling counter OK)                       |      | Set FFMTMR = 0

                                                   |      |  (reset FAM timer

      |(N*ENGCYL*ARCHG) - FAM| > (N*ENGCYL*ARCHG)  |      |   for next update)

        * FAMLIM ----------------------------------|      | Set BGCNT = 0

       (AM within reasonable limits)                      | 

                                                          | --- ELSE ---

                                                          |

                                                          | Set BGCNT = 0

                                                          |  do not update

                                                          |   FAM





   Determine state of FAM_FLG:



      REFFLG = 1 --------------------------------|

                                                 |AND ---| FAM_FLG = 1

      (N * ENGCYL * ARCHG) <OR= (FAM * DELTAM) --|       |

                                                         | --- ELSE ---

                                                         |

                                                         | FAM_FLG = 0





   Determine state of FAMREG:



      REFFLG = 0 ---------------------------| FAMREG = 0

                                            |

                                            | --- ELSE ---

                                            |

      FAM_FLG = 1 --------------------------| FAMREG = 255

                                            |

                                            | --- ELSE ---

                                            |

                                            | FAMREG = 128











































                                         9-46

























                                      CHAPTER 10



                                 A/C CLUTCH STRATEGY



































































































                                         10-1


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                   A/C CLUTCH STRATEGY





      NOTES:



      1.  This strategy is based  on  the  "CH"  version  (6E-031).   Additions  or

      revisions include:





          a)  Minimum A/C enabled time feature.

              ACCTMR replaces ACDTMR.



          c)  A variable time period for WOT A/C

              Cut-out, varies as a function of

              relative throttle position.





      2.  This strategy includes provisions for a  brake  input.   On  applications

      without  the  brake  input,  set  BRKCOT = 0 which will disable this feature.

      Also, software should include the BIFLG Flag with an initial  value  of  ZERO

      (clear).   This also disables the brake input feature as long as the BIFLG is

      kept clear.













































































                                         10-2


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                             AIR CONDITIONER CLUTCH CONTROL





      BRIEF DESCRIPTION:



      This routine controls the state of the A/C clutch.  The strategy can  disable

      the  A/C  clutch  by  energizing  a normally closed relay.  The A/C clutch is

      disabled when the A/C clutch has been enabled for a minimum time  period  and

      when any of the following conditions are met:





          1.  Time since start is less than a calibration value.



          2.  ECT is greater than an "over-heat" calibration value.



          3.  Engine RPM is less than a "near stall" calibration 

              value.



          4.  Brake is applied.  (Duration of A/C

              disable period is a calibration value.



          5.  TP is greater than a "WOT" calibration value.

              (Duration of A/C disable period is a

              calibration value.)





      After the clutch is disabled, the routine prevents it from  being  re-enabled

      until all of the following conditions are met:





          1.  The A/C cycling control switch is closed.



          2.  The clutch has been off longer than a minimum

              off-time.



          3.  If, at closed throttle, the idle speed

              control system has been given time to

              prepare for the impending increase in load.













































                                         10-3


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      DEFINITIONS



      INPUTS



      Registers:



       -  ACBTMR = Time since brake went on.



       -  ACCTMR = Time since A/C clutch transition.



       -  ACITMR = Time since Idle Speed Control system was

                   warned of impending increase in load.



       -  A3CTMR = Free running timer that is reset to 0 on

                   every A3C state change. Described in the

                   TIMER Chapter.



       -  APT = If equal to -1, Closed throttle.



       -  ATMR1 = Time since start.



       -  ECT = Engine Coolant Temperature, Deg F.



       -  HWFLAG = Flag that is set to 1 if the Heated

                        Windshield is on.



       -  HWFLGL = Latched Heated Windshield Flag. 

                    0 -> H/W never actuated,

                    1 -> H/W on for the first time.



       -  HWTMR = Free running timer that is reset to 0 on if A3CTMR > H/W

                  switching frequency. Described in the timer chapter.



       -  LSTA3C = State of A3C the last pass.  DAC same bit number as A3C

                   to see state changes.



       -  N = Engine speed, RPM.



       -  WCOTMR = WOT A/C cut-out timer.



      Bit Flags:



       -  A3C = If equal to 1, A/C cycling control switch is closed.



       -  ACCFLG = If set to 0, A/C clutch is disabled; if

                   set to 1, A/C clutch is enabled.



       -  BIFLG =  If equal to 1, Brake is on.



      Calibration Constants:



       -  ACRT = Air conditioning recognition time threshold, msec.



       -  ACSTRD = Maximum time to keep A/C disabled after start, sec.



       -  ACMNDT = Minimum disable time for A/C clutch, 1/8 sec.









                                         10-4


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





       -  ACMNET = Minimum enable time for A/C clutch. 



       -  ACOFFH = Hysteresis for ACOFFN, RPM.



       -  ACOFFN = Minimum RPM for enabling A/C clutch, RPM.



       -  ACWDLY = Delay time to enable A/C after WOT, 1/8 sec.



       -  A3CTT = Heated windshield transition time  threshold.

                  This is longest time for a H/W frequency half

                  period  and is calibrated to  250 msec.  This

                  Vector calibratable value should not be changed.



       -  BRKCOT = Maximum time to disable A/C due to brake, 1/8 sec.



       -  CTAC = Maximum value of ECT to enable A/C Clutch,

                 Deg F. 



       -  CTACH = Hysteresis for CTAC, Deg F. 



       -  HWRT = Heated Windshield  recognition time threshold.

                 This is time required to set the HWFLAG and is

                 calibrated to 300 msec.  This Vector calibratable

                 value should not be changed.



       -  HWPPM = Airflow increment required when heated windshield load

                  is sensed, ppm.



       -  HWRPM = RPM required for Heated Windshield operation.

                  Should be calibrated to 1400 RPM.



       -  IDLCOT = Maximum time to delay A/C when at idle, msec.

























































                                         10-5


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  A3CTMR = Free running timer that is reset to 0 on

                   every A3C state change. Described in the

                   TIMER Chapter.



       -  HWFLAG = Flag that is set to 1 if the Heated

                        Windshield is on.



       -  HWFLGL = Latched Heated Windshield Flag. 

                    0 -> H/W never actuated,

                    1 -> H/W on for the first time.



       -  HWTMR = Free running timer that is reset to 0 on if A3CTMR > H/W

                  switching frequency. Described in the timer chapter.



       -  LSTA3C = State of A3C the last pass.  DAC same bit number as A3C

                   to see state changes.



      Bit Flags:



       -  ACCFLG = See Inputs above.



       -  ACIFLG = If equal to 1, Flag to indicate that Idle Speed

                   control system should prepare for load increase.



































































                                         10-6


                              A/C CLUTCH STRATEGY - GUE0

                              Copyright 1989 FoMoCo





                                A/C CLUTCH CONTROL LOGIC





      ECT > CTAC ------------|S  Q---|

                             |       |

      ECT < CTAC - CTACH ----|C      |

                                     |

      N < ACOFFN ------------|S  Q---|

                             |       |

      N > ACOFFN + ACOFFH ---|C      |

                                     |

      A3C = 0 -----------------------|

                                     |

      ATMR1 < ACSTRD ----------------|

                                     |OR -|

      BIFLG = 1 -------------|       |    |

                             |AND ---|    |

      ACBTMR < BRKCOT -------|       |    |

                                     |    |

      WCOTMR < ACWDLY ---------------|    |

                                     |    |AND-|OR-| DISABLE A/C

      ACCTMR >OR= ACMNET ----|            |    |   | CLUTCH (A/C Off)

       (Min ON time)         |OR ---------|    |   | (turn OUTPUT on)

                             |                 |   | SET ACCFLG = 0

      ACCFLG = 0 ------------|                 |   | CLEAR ACIFLG = 0

       (Clutch disabled)                       |   | 

                                               |   |

      A3C = 0 ---------------------------------|   |

       (A/C Pressure Switch off)                   | --- ELSE ---

                                                   |

      AC3TMR > ACRT --------------------|          |

       (H/W is off)                     |          |

                                        |          | 

      ACCTMR >OR= ACMNDT ---------------|          | ENABLE A/C

       (Min OFF time)                   |AND ------| CLUTCH (A/C on)

                                        |          | (Turn OUTPUT off)

      APT NOT= -1 --------------|       |          | SET ACCFLG = 1

                                |OR ----|          | CLEAR ACIFLG = 0

      ACITMR >OR= IDLCOT -------|                  | 

                                                   | --- ELSE ---

      ACCFLG = 0 ---------------|                  | 

       (A/C Off)                |                  |

                                |                  |

      ACCTMR >OR= ACMNDT -------|AND --------------| SET ACIFLG = 1

       (Min OFF time)           |                  | (ISC warning flag)

                                |

      A3CTMR > ACRT ------------|

       (H/W is off)

























                                         10-7


                         HEATED WINDSHIELD RECOGNITION - GUE0

                              Copyright 1989 FoMoCo





                        HEATED WINDSHIELD RECOGNITION STRATEGY









           Both the heated windshield and the  A/C  clutch  share  a  common  input

      (ACCS) to the EEC module.  When the A/C is on, the ACCS input is high and the

      CPU flag A3C is 1.  The heated windshield signal is a 5 Hz  (3-8  Hz)  square

      wave  frequency  input.   Recognition  of the frequency input is accomplished

      using two  free  running  millisecond  timers.   A3CTMR  resets  on  any  A3C

      transition  while  HWTMR  is  used  to set the heated windshield flag HWFLAG.

      Many closely spaced A3C transitions will keep the value  of  A3CTMR  low  and

      this indicates that heated windshield is in use.



           EEC has no  control  over  the  heated  windshield.   External  hardware

      performs  all control, switching and timing functions.  The EEC does, however

      increase idle RPM in neutral or park to  increase  alternator  power  output.

      The heated windshield strategy is as follows:





       -  H/W will operate in all driving modes with A/C either on or off.



       -  H/W idle RPM will be a minimum of 1400 RPM in park or neutral and  normal

          RPM in drive.



       -  RPM will be increased for the first H/W actuation only.



       -  RPM will be increased when the H/W is first sensed and will  remain  high

          (even if masked by the A/C on signal) until A/C is off and the H/W signal

          is no longer present.







                        HEATED WINDSHIELD VS. A/C RECOGNITION







      LSTA3C - A3C NOT= 0 -----------| Set LSTA3C = A3C

       (A3C state change)            | Set A3CTMR = 0







      A3CTMR > A3CTT (250 msec) -----| Set HWTMR = 0







      HWTMR > HWRT (300 msec) -|AND -| Set HWFLAG = 1

                               |     | Set HWFLGL = 1

      HWFLAG = 0 --------------|     |  (latch current state of H/W on)

                               |     |

      HWFLGL = 0 --------------|     |--- ELSE ---

       (first time H/W on)           |

                                     |

      A3CTMR > ACRT -----|AND -------| Set HWFLAG = 0

                         |           |  (explicitly turn off H/W)

      A3C = 0 -----------|

       (A/C off)







                                         10-8

























                                      CHAPTER 11



                                    CANISTER PURGE



































































































                                         11-1


                                CANISTER PURGE - GXW0

                              Copyright 1989 FoMoCo





                                 CANISTER PURGE STRATEGY







      Canister Purge refers to the solenoid and valve combination that  is  located

      in  the  line  between the intake manifold and the carbon canister.  When the

      solenoid is energized the valve opens, allowing the flow of vapors  from  the

      canister to the intake manifold.



      The strategy enables canister purge during various  engine  operating  modes.

      These  modes  are  calibration items.  Typical calibrations will enable purge

      when these conditions are met:





          1) Fuel control is in  the  desired  mode.   The  calibrator  can  choose

          between  purging  during  closed  loop  only or during both open loop and

          closed loop.



          2) The engine has warmed up.



          3) The engine has not overheated.



          4) The 'Not at Closed Throttle' delay has been met.





          The strategy includes a feature to prevent the rich surge that may  occur

          on  purge turn on.  When the purge is enabled the output is cycled on and

          off at a 10Hz frequency with a variable duty cycle.  The duty cycle ramps

          up  to  slowly  introduce  the  canister  vapors.  The duty cycle ramp is

          determined from FN600 * FN602 * FN605A.





























































                                         11-2


                                CANISTER PURGE - GXW0

                              Copyright 1989 FoMoCo





          DEFINITIONS



          INPUTS



          Registers:



           -  AM = Air Mass flow (lb/min).



           -  ATMR1 = Time since initial engine startup, secs.



           -  ATMR2 = Time since Engine Coolant Temp (ECT) reached

                      TEMPFB, (sec).



           -  CPRGTMR = Current Purge on time.



           -  ECT = Engine Coolant Temperature, deg F.



           -  N = Engine RPM.



           -  NACTMR = Not at Closed Throttle Timer, sec.



           -  PRGTMR = Total Purge on time.



           -  TCSTRT = Temperature of Engine Coolant at Cold Startup, 

                       deg F.



          Calibration Constants:



           -  CTHIGH = Temperature of Engine Coolant (ECT) at Hot Startup, 

                       deg F.



           -  CTLOW = Temperature of Engine Coolant at Cold Startup, deg F.



           -  CTPRG = Overheat temperature to turn off purge, deg F.



           -  CTPRGH = Hysteresis term for CTPRG, deg F.



           -  EVRPM = Minimum Engine Speed to Purge, RPM.



           -  EVRPMH = Hysteresis term for EVRPM.



           -  EVTDOT = Purge time delay at Part throttle or WOT.



           -  FN600 = Canister Purge Duty Cycle Multiplier

                      X-input = PRGTMR

                      Y-output = Duty Cycle Multiplier.



           -  FN602 = Canister Purge Duty Cycle Multiplier

                      X-input = CPRGTMR

                      Y-output = Duty Cycle Multiplier.



           -  FN605A = Canister Purge Duty Cycle vs. AM

                       X-input = AM

                       Y-output = Purge Duty Cycle.



           -  PRGTD1 = Canister purge cold startup delay time.









                                         11-3


                                CANISTER PURGE - GXW0

                              Copyright 1989 FoMoCo





           -  PRGTD2 = Canister purge medium temp startup delay time.



           -  PRGTD3 = Canister purge hot startup delay time.



           -  PRGTD4 = Canister purge cold startup delay time,

                       used with ATRM2.



           -  PRGTD5 = Canister purge delay timer, used with ATMR2.



           -  PURGSW = Switch to select Open Loop Purge, 1 = Allow Open

                       Loop Purge.



           -  TEMPFB = Minimum ECT required to start ATMR2 timer,

                       deg F.







          OUTPUTS



          Registers:



           -  CPRGTMR = Current Purge on time.



           -  PRGTMR = Total Purge on time.



           -  PURGDC = Canister Purge Duty Cycle.





































































                                         11-4


                                CANISTER PURGE - GXW0

                              Copyright 1989 FoMoCo





                                 CANISTER PURGE LOGIC





          TCSTRT >OR= CTHIGH -----------|

                                        |AND -|

          ATMR1 >OR= PRGTD3 ------------|     |

                                              |

                                              |

          CTLOW < TCSTRT < CTHIGH ------|     |

                                        |AND -|OR -|

          ATMR1 >OR= PRGTD2 ------|     |     |    |

                                  |AND -|     |    |

          ATMR2 >OR= PRGTD5 ------|           |    |

                                              |    |

                                              |    |

          TCSTRT <OR= CTLOW ------------|     |    |

                                        |AND -|    |

          ATMR1 >OR= PRGTD1 ----|       |          |

                                |AND ---|          |

          ATMR2 >OR= PRGTD4 ----|                  |

                                                   |

          ECT < CTPRG - CTPRGH ---|S Q-------------|AND -| ENABLE PURGE

                                  |                |     | 

          ECT > CTPRG ------------|C               |     | SET PURGDC =

           (Over temp. disable)                    |     | FN600(PRGTMR) *

                                                   |     | FN602(CPRGTMR) *

          NACTMR >OR= EVTDOT ----------------------|     | FN605A(AM)

                                                   |     |

                                                   |     | --- ELSE ---

          CLOSED LOOP FUEL CONTROL ------|         |     | 

                                         |OR ------|     | DISABLE PURGE

          PURGSW = 1 --------------------|               | 

           (to allow Open Loop Purge)                    | SET PURGDC = 0





          NOTES;



              1.  When purge is enabled, the purge output is cycled at 10Hz

                  +/- 30%

              2.  Set EVTDOT to 0 to Purge at Closed Throttle.





                                         TIMER LOGIC



          PURGE ENABLED -------|            | COUNT UP PRGTMR

                               |AND --------| COUNT UP CPRGTMR

          FN605A(AM) NOT= 0 ---|            |

                                            | --- ELSE ---

                                            |

                                            | FREEZE PRGTMR

                                            | SET CPRGTMR = 0



















                                         11-5


                                CANISTER PURGE - GXW0

                              Copyright 1989 FoMoCo





             























































































































                                         11-6

























                                      CHAPTER 12



                               THERMACTOR AIR STRATEGY



































































































                                         12-1


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





      This section contains three related strategies which  are  discussed  in  the

      order shown below.



          - Thermactor Air

          - Inlet Air Control

          - Supercharger Strategy





      The THRMHP assists in determining which of the strategies is activated.  This

      is a calibratible switch and has four settings.



          - THRMHP = 0 - Disables Inlet Air Control (IACFLG = 0)

          - THRMHP = 3 - Enables Inlet Air Control (IACFLG = 1)

          - THRMHP = 2 - Enables Supercharger Strategy

          - THRMHP = 1 - Enables Thermactor Air



























































































                                         12-2


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





                                   THERMACTOR AIR STRATEGY





          Thermactor air refers to air added to the exhaust gas  mixture  from  the

          belt driven thermactor air pump.





          The computer controls two solenoids to create  three  mutually  exclusive

          air states:





             Thermactor Air State   TAB Solenoid   TAD Solenoid



                 Upstream                on             on

                 Downstream              on             off

                 Bypass                  off            off

                 Bypass                  off            on





                  TAB - Thermactor Air Bypass (AM1)

                  TAD - Thermactor Air Divert (AM2)





          Upstream refers to air added at or near the exhaust ports.  This is  done

          to  provide  better  oxidation  of  the exhaust gas mixture when a richer

          exhaust gas mixture is anticipated.  It is not  possible  to  operate  in

          closed loop fuel control while air is introduced upstream (the EGO sensor

          may always indicate a lean condition).





          Downstream refers to air added to the catalyst mid-bed.   Downstream  air

          is  compatible with closed loop fuel control and is the normal thermactor

          air state.





          Bypass refers to the condition in which no thermactor air is added to the

          exhaust  gas  mixture.   This  feature  is  used primarily to protect the

          catalyst from over-temperature conditions.





          The THERMACTOR AIR  CONTROL  LOGIC  is  executed  if  the  Off-chip  port

          selection  switch  (THRMHP)  is  set = 1.  In order to disable thermactor

          logic, (without enabling Inlet Air Control  [3.0L  SHO]  or  Supercharger

          (3.8L SC) Strategy), set THRMHP = 0.  The thermactor air control logic is

          shown on the next page.































                                         12-3


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





          DEFINITIONS





      INPUTS



      Registers:



       -  ACT = Air Charge Temperature, deg F.



       -  APT = Part throttle flag.



       -  ATMR1 = Time since Engine Startup, sec.



       -  ATMR2 = Time since ECT greater than TEMPFB, sec.



       -  AWOTMR = Time at WOT, sec.



       -  CTATMR = Closed throttle Upstream Air Timer, sec.  (See Timer Chapter).



       -  ECT = Engine Coolant Temperature, deg F.



       -  HMTMR = High Power Demand Timer, sec.  (See Timer Chapter).



       -  LOAD = Universal Load parameters,  unitless.   It  also  equal  Aircharge

          normalized to sea.



       -  MFATMR = Managed Fuel Air Timer, sec.  (See Timer Chapter)



       -  N = Engine speed, RPM.



       -  NACTMR = Not at Closed throttle Timer, sec.



       -  RATCH = Filtered throttle position.



       -  TCSTRT = Temperature of ECT at startup, deg F.



       -  TP = Throttle Position.



      Bit Flags:



       -  AFMFLG = Flag indicating that ACT sensor has failed.



       -  CFMFLG = Flag indicating that ECT sensor is  in/out  of  range,  0  =  in

          range.



       -  CHKAIR = Thermactor Air Status Flag.   (1  =  Air  diverted  upstream  or

          dumped)



       -  CRKFLG = Flag indicating status of Crank.



       -  CTAFLG = Flag indicating state of CTATMR (Closed  Throttle  Upstream  Air

          timer).



       -  HSPFLG = High Speed Mode flag; 1 = High speed alternate fuel/spark.



       -  LEGOFG1 = Flag indicating lack of EGO-1 switching, if set.









                                         12-4


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





       -  LEGOFG2 = Flag indicating lack of EGO-2 switching, if set.



       -  MFMFLG = Flag indicating that MAF sensor has failed.



       -  TFMFLG = Flag indicating that TP sensor has failed.



       -  UNDSP = Flag if set to 1 indicates Underspeed Mode, or Crank.



      Calibration Constants:



       -  ATBYS = Minimum ACT to Bypass thermactor Air, deg F.



       -  BYHTMR = Bankline timer time delay for Thermactor Bypass.



       -  BYPWOT = Wide Open Throttle Bypass Time delay.



       -  BYSTM1 = ATMR1 Thermactor Bypass Time Delay for TCSTRT <or= CTLOW.



       -  BYSTM2 = ATMR1 Thermactor Bypass Time Delay for CTLOW < TCSTRT < CTHIGH.



       -  BYSTM3 = ATMR1 Thermactor Bypass time Delay for TCSTRT >or= CTHIGH.



       -  BYSTM4 = ATMR2 Thermactor Bypass Time delay for TCSTRT <or=CTLOW.



       -  BYSTM5 = ATMR2 thermactor Bypass Time Delay for CTLOW < TCSTRT < CTHIGH.



       -  CTARTM = Upstream air time delay during Decel, sec.



       -  CTBYS = Minimum ECT to Bypass thermactor Air, deg F.



       -  CTBYSH = Hysteresis for ATBYS and CTBYS.



       -  CTHIGH = Hot start minimum engine coolant temperature, Deg F.



       -  CTLOW = Cold Start Maximum ECT, deg F.



       -  DMPDLY = Managed Fuel Air State Time Delay to Bypass Thermactor Air, sec.



       -  DNLOD = Maximum load for downstream air.



       -  DNLODH = Hysteresis for DNLOD.



       -  DNSTMI = Time delay for Downstream air when not at Closed Throttle, sec.



       -  HMCTM = Upstream Air Time Delay, sec.



       -  HMSTM = Maximum time  that  Upstream  Air  occurs  during  crowds  (after

          startup).



       -  MFATM1 = ATMR1 MFA enable time delay for TCSTRT <or= CTLOW.



       -  MFATM2 = ATMR1 MFA enable time delay for CTLOW < TCSTRT < CTHIGH.



       -  MFATM3 = ATMR1 MFA enable time delay for TCSTRT >or= CTHIGH.



       -  MFATM4 = ATMR2 MFA enable time delay for TCSTRT <or= CTLOW> CTHIGH.









                                         12-5


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





       -  MFATM5 = ATMR2 MFA enable time delay for CTLOW < TCSTRT < CTHIGH.



       -  NIAC = Maximum RPM for single inlet airflow path, RPM.



       -  NIACH = Hysteresis term for turning OFF IAC, RPM.



       -  NUMEGO =  Calibration  switch  which  indicates  number  of  EGO  sensors

          present, mono or stereo.



       -  THRMHP = Off chip port selection switch.

                   = 0 - Disables Inlet Air Control (IACFLG = 0)

                   = 3 - Enables Inlet Air Control (IACFLG = 1)

                   = 2 - Enables Supercharger Strategy

                   = 1 - Enables Thermactor Air



       -  

          TEMPFB = Minimum ECT required to start ATMR2 timer, deg.  F.



       -  THBPSC = Throttle breakpoint for Supercharger Bypass, A/D counts.



       -  THBPSH = Hysteresis for THBPSC, A/D counts.



       -  UPLOD = Minimum Percent LOAD for upstream air.



       -  UPLODH = Hysteresis for UPLODH.



       -  UPRPM2 = Maximum RPM for Decel Upstream Air.



       -  UPRPMH = Hysteresis term for UPRPM.



       -  UPSTM1 = ATMR1 Thermactor Upstream Time Delay for TCSTRT <OR= CTLOW.



       -  UPSTM2 = ATMR1 Thermactor Upstream time delay CTLOW < TCSTRT < CTHIGH.



       -  UPSTM3 = ATMR1 Thermactor Upstream time delay for TCSTRT >OR= CTHIGH.



       -  UPSTM4 = ATMR2 Thermactor Upstream Time Delay for TCSTRT <OR= CTLOW.



       -  UPSTM5 = ATMR2 Thermactor Upstream  Time  Delay  for  CTLOW  <  TCSTRT  <

          CTHIGH.



       -  UPSWOT = WOT Upstream Air Time Delay.







      OUTPUTS



      Bit Flags:



       -  CHKAIR = Thermactor Air Status Flag.   (1  =  Air  diverted  upstream  or

          dumped)



       -  IACFLG = Flag which indicates setting of (IAC).  If set to 1,  IAC  valve

          is open and IAC is enabled; cleared (0), then IAC is disabled.



       -  USAFLG = Upstream Air Flag; 0 = Not in Upstream Air, 1 = In Upstream Air.









                                         12-6


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





                                 UNIVERSAL CHKAIR LOGIC





      Under certain circumstances, it is necessary to force Open Loop fuel  control

      independently of the presence of Thermactor hardware.  The following logic is

      used with and without thermactor air.  If the engine  system  does  NOT  have

      thermactor  air, (THRMHP NOT=1), this CHKAIR logic will only be used to force

      Open Loop fuel.  On systems WITH thermactor air,  this  universal  logic  can

      force air bypass in addition to Open Loop fuel.



      ECT > CTBYS ------------|               |

                              |AND ---|S Q----|

      ACT > ATBYS ------------|       |       |

                                      |       |

      ECT < CTBYS - CTBYSH ---|       |       |

                              |OR ----|C      |

      ACT < ATBYS - CTBYSH ---|               |

                                              |

      NUMEGO = 1 (MONO EGO) ----------|       |

                                      |AND ---|

      LEGOFG1 = 1 --------------------|       |OR --| CHKAIR = 0

                                              |     | (Force Open Loop

      NUMEGO = 2 (STEREO EGO) --------|       |     |  Fuel)

                                      |       |     | (Systems which

      LEGOFG1 = 1 --------------------|AND ---|     |  have Thermactor

                                      |       |     |  Air will Bypass

      LEGOFG2 = 1 --------------------|       |     |  according to the

                                              |     |  Thermactor Logic)

      APT = 1 (WIDE OPEN THROTTLE) ---|       |     |  

                                      |AND ---|     | --- ELSE ---

      AWOTMR >OR= BYPWOT -------------|             |  

                                                    | CHKAIR = 1

                                                    | (Do NOT force

                                                    |  Open Loop Fuel)

                                                    | NOTE: Thermactor

                                                    |  may still set

                                                    |  CHKAIR = 0

                                                    |  if hardware is

                                                    |  present and

                                                    |  Upstream Air is

                                                    |  requested)







































                                         12-7


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





                              THERMACTOR AIR CONTROL LOGIC



      THRMHP NOT= 1 ---------------------------------| Exit Thermactor

                                                     |  strategy

                                                     | (Fuel strategy

                                                     |  will use 

                                                     |  Universal

      AFMFLG = 1 --------------------|               |  CHKAIR logic)

                                     |               |

      CFMFLG = 1 --------------------|               | --- ELSE ---

                                     |               |

      TFMFLG = 1 --------------------|OR ------------| BYPASS AIR

                                     |               | (No change to

      MFMFLG = 1 --------------------|               |   CHKAIR)

                                                     |  SET USAFLG = 0

                                                     |

                                                     | --- ELSE ---

      "A" ------------------------------------|      |

                                              |OR ---| BYPASS AIR

      CHKAIR = 0 -----------------------------|      | SET CHKAIR = 0

         (Universal CHKAIR flag)              |      |  (forced open

                                              |      |   loop fuel)

      HSPFLG = 1 -----------------------------|      |

                                                     | SET USAFLG = 0

      "B" ------------------------------------|      | 

                                              |      | --- ELSE ---

      ATRMR1 <OR= HMSTM --------------|       |      |

                                      |       |      |

      APT = 1 (WIDE OPEN THROTTLE) ---|       |      | 

                                      |AND ---|      |

      AWOTMR < UPSWOT ----------------|       |      |

                                              |      | UPSTREAM AIR

      CTATMR >OR= CTARTM -------------|       |      | SET CHKAIR = 0

                                      |AND ---|OR ---|  (forced open

      CTAFLG = 1 ---------------------|       |      |   loop fuel)

                                              |      | SET USAFLG = 1

      ATMR1 <OR= HMSTM ---------------|       |      |

                                      |       |      |

      HMTMR <OR= HMCTM ---------------|       |      |

                                      |AND ---|      |

      PERLOAD > UPLOD + UPLODH -|S Q -|              |

                                |                    |

      PERLOAD < UPLOD ----------|C                   | --- ELSE ---

                                                     | 

      MFATMR <OR= DMPDLY ---------------------|      | DOWNSTREAM AIR

                                              |AND --| SET CHKAIR = 1

      NACTMR <OR= DNSTMI -------------|       |      |  (not forced

                                      |OR ----|      |   open loop fuel)

      LOAD < DNLOD - DNLODH --|S Q----|              | SET USAFLG = 0

                              |                      | 

      LOAD > DNLOD -----------|C                     | --- ELSE ---

                                                     |

                                                     | BYPASS AIR

                                                     | SET CHKAIR = 1

                                                     |  (not forced

                                                     |   open loop fuel)

                                                     | SET USAFLG = 0







                                         12-8


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





      NOTE: CTAFLG = 1 requirement allows Upstream air immediately 

            during Decel if CTARTM = 0.





                                        "A" LOGIC



      Normal startup Bypass logic:  Air is bypassed as long as time  is  less  than

      the relevant time delay.



      TCSTRT >OR= CTHIGH -------------|

                                      |AND ---|

      ATMR1 < BYSTM3 -----------------|       |

                                              |

      CTLOW < TCSTRT < CTHIGH --------|       |

                                      |AND ---|OR -- "A"

      ATMR1 < BYSTM2 ---------|       |       |

                              |OR ----|       |

      ATMR2 < BYSTM5 ---------|               |

                                              |

      TCSTRT <OR= CTLOW --------------|       |

                                      |AND ---|

      ATMR1 < BYSTM1 ---------|       |

                              |OR ----|

      ATMR2 < BYSTM4 ---------|



                                        "B" LOGIC



      Normal Start Upstream Logic:  Air is diverted upstream as long as it  is  not

      bypassed  and  as long as the time since start is less that the relevant time

      delay.



      TCSTRT >OR= CTHIGH -------------|

                                      |AND ---|

      ATMR1 < UPSTM3 -----------------|       |

                                              |

                                              |

      CTLOW < TCSTRT < CTHIGH --------|       |

                                      |AND ---|OR ----| "B"

      ATMR1 < UPSTM2 ---------|       |       |

                              |OR ----|       |

      ATMR2 < UPSTM5 ---------|               |

                                              |

                                              |

      TCSTRT <OR= CTLOW --------------|       |

                                      |AND ---|

      ATMR1 < UPSTM1 ---------|       |

                              |OR ----|

      ATMR2 < UPSTM4 ---------|

























                                         12-9


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





                             INLET AIR CONTROL (THRMHP = 3)





      When enabled by the THRMHP, the inlet air  control  (IAC)  strategy  opens  a

      normally-closed  valve  to  increase  the  airflow  to the engine and improve

      top-end performance.  The valve is located on one side of  the  split  plenum

      intake  manifold.   The strategy controls the valve through a normally closed

      vacuum solenoid.





      THRMHP NOT= 2 ----------------| IACFLG = 0

                                    |  Exit IAC logic

                                    |

                                    | --- ELSE ---

                                    |

      N > NIAC -----------|S Q------| Open IAC Valve

                          |         | IACFLG = 1

      N < NIAC - NIACH ---|C        |

                                    | --- ELSE ---

                                    |

                                    | Close IAC Valve

                                    | IACFLG = 0













































































                                        12-10


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





                        SUPERCHARGER BYPASS SOLENOID (THRMHP = 2)





      This Section describes the Supercharger Bypass Solenoid  Strategy  which  has

      been designed to support the 3.8L Mass Air Sequential Fuel Injection program.





      THRMHP NOT= 2 ----------------------| No change, exit this

                                          |  Logic.

      TFMFLG = 0 ----------------|        |

                                 |        | --- ELSE ---

      CRKFLG = 0 ----------------|        |

                                 |AND ----| Enable Supercharger

      UNDSP = 0 -----------------|        |  Bypass Output

       (Run Mode)                |        |

                                 |        | --- ELSE ---

      TP > RATCH + THBPSC -|S Q--|        |

                           |              | Disable Supercharger

      TP < RATCH +         |              |  Bypass Output

        THBPSC - THBPSH ---|C





      NOTE:  The initial Supercharger hardware is a three-way vacuum solenoid which

      is  normally  OPEN.   When  the  Supercharger Bypass Output is OFF, vacuum is

      applied to the Actuator.  When the output is ON, the actuator  is  vented  to

      the  atmosphere.   WHEN  THRMHP  NOT=  1,  CHKAIR  must be set = 1 or cleared

      (thermactor logic) to insure Open Loop/Closed loop fuel control.



































































                                        12-11


                    THERMACTOR AIR AND AUXILLARY STRATEGIES - GUE0

                              Copyright 1989 FoMoCo





         























































































































                                        12-12

























                                      CHAPTER 13



                              ELECTRO-DRIVE FAN STRATEGY



































































































                                         13-1


                          ELECTRO-DRIVE FAN STRATEGY -  GXW0

                              Copyright 1989 FoMoCo





                         TWO-SPEED ELECTRO DRIVE FAN CONTROL

                                     (EDFHP = 1)









      The electric fan provides  additional  air  circulation  for  engine  cooling

      purposes  under circumstances where an engine-driven fan is inadequate, i.e.,

      low vehicle  speed  or  unusually  high  engine  temperatures.   To  minimize

      accessory load on the engine, the fan is always turned off during CRANK Mode.



      The EEC controls the state of the cooling fan.  The fan may  be  operated  at

      either high or low speed.  The strategy controls the state of the fan via two

      outputs as shown in the truth table below.



      The cooling fan is turned on at low speed if:



          1) The engine temperature is higher than normal  (approximately  216  deg

          F);



          2) The A/C is ON and the vehicle speed does not  provide  enough  natural

          airflow (approximately 43 MPH).



      The cooling fan will turn on at high speed if:



          1) The engine temperature is higher than desirable (approximately 230 deg

          F) and the fan has been operating at low speed.



          2) ECT sensor is out of specification.



      The cooling fan will turn off if:



          1) The driver demand is high (WOT type Mode as defined

             by A/C Cutout Strategy);

             or

          2) The A/C clutch is not cycling rapidly;

                 OR

          3) Vehicle speed is high enough to provide enough

             airflow for engine cooling.



      provided the engine coolant temperature is not too high.





                              CPU OUTPUT          EEC OUTPUT

                              (Software)          (Hardware)

           

          FAN STATE           EDF   HEDF          EDF   HEDF

          ___ ____            ___   ____          ___   ____

          Off                  1     0            On    Off

          Low speed            0     0            Off   Off

          High speed           0     1            Off   On

          Not Used             1     1            On    On --> NOT USED





          Note: OFF = 12V (Referenced to ground)

                ON = <1V (Referenced to ground)









                                         13-2


                          ELECTRO-DRIVE FAN STRATEGY -  GXW0

                              Copyright 1989 FoMoCo





                                     DEFINITIONS





      INPUTS



      Registers:



       -  ACCTMR = Time since A/C State transition (off to On, or On to Off),  sec.

          (See TIMER chapter).



       -  ECT = Engine Coolant Temperature, deg F.



       -  EDFTMR = Set to 0 when the EDF (low speed fan) is de-energized or  CRKFLG

          = 1.  Otherwise, it is free-running.



       -  HSFFLG = High Speed Fan Flag.



       -  RATCH = Warm curb Idle throttle position, counts.



       -  TP = Throttle Position, counts.



       -  VSBAR = Vehicle Speed, MPH.



       -  WCOTMR = Time since near WOT A/C Cutout.  This timer will  re-enable  the

          A/C  and Fan regardless of the throttle mode after the engine responds to

          the driver (ACWDLY sec).



      Bit Flags:



       -  ACCFLG = Flag that is set to 1 when A/C clutch is enabled.



       -  CFMFLG = Flag indication that ECT sensor is  in/out  of  range;  0  =  in

          range.



       -  CRKFLG = Flag that is set when in CRANK mode.



      Calibration Constants:



       -  ACMNFT = Minimum amount of time that the A/C Clutch  must  be  disengaged

          before  turning  off  the  fan,  secs.   This prevents rapid Fan cycling.

          (This value must be > 2 seconds.)



       -  ACWDLY = Time delay before turning the A/C on and  allowing  the  fan  to

          turn on, ie, at low vehicle speeds.  Units are seconds.  (This value must

          be less than 25 seconds.)



       -  EDFHP = Electro drive fan hardware present switch.



       -  EDFTM = Minimum low speed fan time to turn on high speed fan, secs.



       -  HEDFHP = Two speed fan output present switch.



       -  HSFEC1 = ECT for Grade Load High Speed Fan turn on, lower than HSFEC2.



       -  HSFEC2 = ECT for normal High Speed Fan turn on, higher than HSFEC1.



       -  HSFHYS = Hysteresis for HSFECT, deg F.  (Should  be  6  deg  F,  per  Car

          Engineering Direction)





                                         13-3


                          ELECTRO-DRIVE FAN STRATEGY -  GXW0

                              Copyright 1989 FoMoCo





       -  HSFLOD = Minimum LOAD for Grade Load High Speed Fan.



       -  HSFRPM = Minimum RPM for Grade Load High Speed Fan.



       -  HSFVS = Maximum VSBAR for Grade Load High Speed Fan.



       -  LSFECT = Minimum ECT for Low Speed Fan, deg F.  (Should be 216 deg F, per

          Car Engineering Direction)



       -  LSFHYS = Hysteresis for LSFECT, deg F.  (Should  be  4  deg  F,  per  Car

          Engineering Direction)



       -  LSFVS = Minimum vehicle speed  at  which  electric  fan  cooling  is  not

          required, MPH.  (Should be 48 MPH, per Car Engineering Direction)



       -  LSFVSH = Hysteresis term to prevent cycling of FAN output, MPH.   (Should

          be 5 MPH, per Car Engineering Direction)







      OUTPUTS



      Registers:



       -  EDF = Low Speed Electro-drive Fan Output (See truth table).



       -  EDFTMR = Set to 0 when the EDF (low speed fan) is de-energized or  CRKFLG

          = 1.  Otherwise, it is free-running.



       -  HEDF = High Speed Electro-drive Fan Output (See truth table).



       -  HSFFLG = High Speed Fan Flag.

























































                                         13-4


                          ELECTRO-DRIVE FAN STRATEGY -  GXW0

                              Copyright 1989 FoMoCo





      The electric fan is controlled according to the logic shown below.





      EDFHP = 0 -----------------------------------| No Fan Control

                                                   | Exit logic

                                                   |

                                                   | --- ELSE ---

                                                   |

      CRKFLG = 1 ----------------------------------| TURN FAN OFF

       (crank mode)                                | SET EDFTMR = 0

                                                   | EDF = 1

                                                   | HEDF = 0

                                                   |

                                                   | --- ELSE ---

      HEDFHP = 1 ------------------------|         |

                                         |AND -----| TURN ON HIGH

      HSFFLG = 1 ---------|AND ---|S Q --|         | SPEED FAN

       (overheated)       |       |                | EDF = 0

                          |       |                | HEDF = 1

      EDFTMR >OR= EDFTM --|       |                | 

       (low speed fan on)         |                |

                                  |                |

      ECT < HSFEC1 - HSFHYS ------|C               |

                                                   |

                                                   | --- ELSE ---

      CFMFLG = 1 ---------------------------|      |

                                            |      |

      ECT > LSFECT -----------|S Q ---------|      |

       (hot engine)           |             |      |

                              |             |      |

      ECT < LSFECT - LSFHYS --|C            |      | 

                                            |OR ---| TURN ON LOW

                                            |      | SPEED FAN

      VSBAR < LSFVS - LSFVSH -------|       |      | EDF = 0

       (vehicle speed low)          |       |      | HEDF = 0

                                    |AND ---|      | 

      ACCFLG = 1 -------------------|              | --- ELSE ---

        (A/C on)                                   |

                                                   | 

      ACCTMR >OR= ACMNFT ---------|                | 

        (fan turn off delay)      |AND -----|      | 

                                  |         |      |

      ACCFLG = 0 -----------------|         |      |

                                            |      |

      WCOTMR < ACWDLY ----------------------|OR ---| TURN FAN OFF

        (WOT fan re-enable)                 |      | EDF = 1

                                            |      | HEDF = 0

      VSBAR > LSFVS ------------------------|      | 

        (vehicle speed high)                       | --- ELSE ---

                                                   |

                                                   | NO CHANGE

                                                   | TO FAN STATE



      Where HSFFLG logic is described on the following page:













                                         13-5


                          ELECTRO-DRIVE FAN STRATEGY -  GXW0

                              Copyright 1989 FoMoCo





      N_BYTE >OR= HSFRPM -------|

       (high rpm)               |

                                |

      LOAD >OR= HSFLOD ---------|           |

       (high load)              |AND -------| Set HSFFLG = 1

                                |           | 

      VSBAR <OR= HSFVS ---------|           | (high speed fan flag,

       (low speed)              |           |  grade load condition)

                                |           |

      ECT >OR= HSFEC1 ----------|           | --- ELSE ---

       (lower temp. turn on)                |

                                            |

      ECT >OR= HSFEC2 ----------------------| Set HSFFLG = 1

       (higher temp. turn on)               |

                                            | (high speed fan flag,

                                            |  boilover, no load)

                                            |

                                            | --- ELSE ---

                                            |

                                            | Set HSFFLG = 0

















































































                                         13-6

























                                      CHAPTER 14



                                   DATA OUTPUT LINK



































































































                                         14-1


                               DATA OUTPUT LINK - GXK0

                              Copyright 1989 FoMoCo





                              DATA OUTPUT LINK - TRIPMINDER





      The Data Output Link (DOL) provides a communication line between the EEC  and

      the  vehicle  dashboard  computer,  Tripminder,  for  the  transfer  of  fuel

      consumption information.  The fuel flow information sent by the EEC  is  used

      for  computation  of  instantaneous  and  average fuel economy, which is then

      displayed to the driver.



      The Tripminder requires an appropriate integer number of  pulses  within  100

      msec period.  Therefore, within each background loop or each 100 msec period,

      whichever is shorter, the EEC sums the fuel flow and  through  the  injectors

      output  since  the summing period started, converts this sum into DOL pulses,

      and outputs these pulses  at  a  maximum  frequency  of  500  Hz  during  the

      following summation period.



      The fuel flow is  converted  into  DOL  pulses  according  to  the  following

      equation:





      DOL_COUNT = INTEGER (FUEL_SUM * 7804.19 * INJOUT) + DOL_COUNT



      The FUEL_SUM is then reduced by the amount  converted  into  DOL_COUNTS  (One

      DOL_COUNT = 1.282E-4 lbm).



      where,



          DOL_COUNT = Number of pulses to be output beginning 

                      in the next summation period. One

                      DOL_COUNT = 1.282E-4 lbm.



          FUEL_SUM = Sum of fuel flow per injector, which was

                      initiated since last summation period. It is 

                      updated during the Fuel PW output routine.



          7804.19 = (48000 pulses/gal)/6.15 lbm/gal, pulses/lmb.



          INJOUT = Number of injectors per output port.

                   (See Fuel Strategy)











































                                         14-2


                               DATA OUTPUT LINK - GXK0

                              Copyright 1989 FoMoCo





                               FUEL_SUM = FUEL_SUM + LBMF_INJn



          LBMF_INJn = Fuel Flow per injector, calculated from

                       FUELFLOWn (n= 1, 2). (See Fuel Strategy).





                 ----     ----     ----     ----     ----     ----

                 |  |     |  |     |  |     |  |     |  |     |  |

                 |  |     |  |     |  |     |  |     |  |     |  |

          FUELPW     -----    -----    -----    -----    -----    ------



                 |<-- 1 BACKGROUND LOOP -->|----

                                           ||  |

                                           ||  |

          DOL                               |  |

          OUTPUT ---------------------------    ------------------------

























































































                                         14-3


                               DATA OUTPUT LINK - GXK0

                              Copyright 1989 FoMoCo





             























































































































                                         14-4

























                                      CHAPTER 15



                            VEHICLE SPEED CONTROL STRATEGY



































































































                                         15-1


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                            VEHICLE SPEED CONTROL STRATEGY

                                     (VSTYPE = 2)





      The strategy now utilizies a Vehicle Speed Sensor.  The logic for this sensor

      appears in both Systems Equations and EEC Overview of this Text.



      The integrated Vehicle Speed  Control  (VSC)  models  the  mechanical  Cruise

      Control  of  previous model years.  When activated, the system is designed to

      maintain the vehicle speed within prescribed limits, at  any  driver-selected

      speed  above 25 MPH.  The value added by the integrated VSC includes accurate

      digital control and the Favorite Speed  Set  feature  as  well  as  Component

      complexity  reduction.  While the hardware is no longer provided for Favorite

      Speed Set, the software still exists.  As this  strategy  book  is  meant  to

      represent the total system, the logic for Favorite Speed is included.



          Brake ON/OFF Switch (BOO)

          Neutral/Drive Switch (NDS)

          Throttle Position Sensor (TPS)

          Vehicle Speed Sensor (VSS)

          Speed Control Command Switch (VSCCS)





      The VSC strategy controls the vehicle speed by means of a pulsetrain sent  to

      a  Vent  solenoid  (to  decrease  speed) or to a Vacuum Solenoid (to increase

      speed).





                           Speed Control Command Switch Input



      The driver operates the VSC system by pressing buttons on the steering  wheel

      as  is  done  with  the mechanical system.  The five traditional buttons (ON,

      OFF, ACCEL, RESUME and COAST) are incorporated into  the  integrated  VSC  as

      switches.   ON-OFF is one switch; SET ACCEL-COAST another; and RESUME is on a

      switch by itself.  Depression of  any  of  these  switches  causes  a  unique

      voltage level at the VSCCS input.



      The strategy reads the VSCCS input and  sets  a  flag  corresponding  to  the

      button  pressed.   If  no  buttons  are  currently  depressed,  the  strategy

      interprets the voltage level as a HOLD state (if the VSC is operating)  which

      means  that  the  state  selected  by  the  most  recent button depression is

      maintained.





































                                         15-2


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                     VEHICLE SPEED CONTROL SOFTWARE MODULE OVERVIEW



                     _________________

                    ( ENTER VSC LOGIC )

                     -----------------

                            |

                       -----------      NO      ------

                      < VSTYPE = 2 >-----------( EXIT )

                       -----------              ------

                            | YES

                  _______________________

                 | VEHICLE SPEED CONTROL |

                 | COMMAND SWITCH LOGIC  |

                  -----------------------

                            |

                        _________     Y      _______________

                       < STATE 1 >----------| STATE 1 LOGIC |---

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 2 >----------| STATE 2 LOGIC |---|

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 3 >----------| STATE 3 LOGIC |---|

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 4 >----------| STATE 4 LOGIC-----|

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 5 >----------| STATE 5 LOGIC |---|

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 6 >----------| STATE 6 LOGIC |---|

                        ---------            ---------------    |

                          N |                                   |

                        _________     Y      _______________    |

                       < STATE 7 >----------| STATE 7 LOGIC |---|

                        ---------            ---------------    |

                          N |                                   |

                        _______________                         |

                       | STATE 8 LOGIC |------------------------|

                        ---------------                         |





























                                         15-3


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                        ( cont. )





                             ___________________________________|

                            |

                  ______________________

                 | SET SPEED RAMP LOGIC |

                  ----------------------

                            |

                     _________________

                    | VSC_ERROR LOGIC |

                     -----------------

                            |

                   ____________________

                  | VSC_DC CALCULATION |

                   --------------------

                            |

               _____________________________

              | DUTY CYCLE OUTPUT ALGORITHM |

               -----------------------------

                            |

                          _______

                        ( RETURN )

                         --------









































































                                         15-4


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                       DEFINITIONS





      INPUTS



      Registers:



       -  DEBTMR = IVSCCS debounce timer.



       -  IVSCCS = Input vehicle speed control command switch.



       -  IVSCCS_LST = Last input vehicle speed control command switch.



       -  MPH = Current (or actual) Vehicle speed, MPH.



       -  N = Engine Speed, RPM.



       -  RATCH = Closed Throttle Position, counts.



       -  RES_SPEED = Vehicle Control Speed set by Driver, mph.



       -  SET_SPEED = Current Desired Vehicle Control Speed.



       -  TP = Throttle Position, counts.



       -  VBAT = Filtered Inferred Battery Voltage, volts;

                 it is initialized to 12.5 Volts.



       -  VSC_BUTTONS = Flag register containing VSC button status.



       -  VSC_DC = Vehicle Speed Control output duty cycle.



       -  VSC_STATES = Flag register containing VSC state status,

                        unitless.



       -  VSCCS = Vehicle Speed Control Command Switch.



      Bit Flags:



       -  ACCEL_BUT = Flag that indicates that the ACCEL button is 

                       depressed (1 = ACCEL button depressed).



       -  ACCEL_STATE = Flag that indicates that the VSC is in ACCEL Mode

                        (1 = ACCEL Mode).



       -  BIFLG = Flag that indicates that the brake has been 

                  depressed (1 = Brake depressed).



       -  BRAKE_STATE = Flag that indicates that the Brake has been

                         depressed (1 = Brake depressed).



       -  COAST_BUT = Flag that indicates that the driver depressed 

                       the COAST Button (1 = Button depressed).



       -  COAST_STATE = Flag that indicates that the driver depressed

                         the COAST Button recently.









                                         15-5


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





       -  HOLD_STATE = Flag that indicates normal VSC (1 = Stable Speed).



       -  NDSFLG = Flag that indicates that the transmission is in 

                   drive (1 = Drive).



       -  OFF_BUT = Flag that indicates that the driver depressed 

                     OFF button (1 = Button depressed).



       -  ON_STATE = Flag that is set equal to zero when VSC is OFF.

                      (1 = Enabled).



       -  RESUM_BUT = Flag that indicates that RESUME button was

                       depressed (1 = Button Depressed).



       -  RESUM_STATE = Flag that indicates that the VSC is in RESUME

                         Mode (1 = RESUME Mode).



       -  VSCCS_ERROR = VSC_Buttons error range identifier.



       -  VSC_PULSE = Background flag indicating to EOS that a dither

                       pulse is in progress.



      Calibration Constants:



       -  DEBAMP = Minimum IVSCCS amplitude change, counts.



       -  DEBTIM = Debounce time delay, seconds.



       -  ACLDED = Maximum increment above MPH to which SET_SPEED can

                   increase, mph.



       -  ACLINC = Acceleration ramp rate, MPH/sec.



       -  DCBIAS = DC correction factor.



       -  HACCEL = Input VSCCS input range, counts.



       -  HCOAST = Input VSCCS input range, counts.



       -  HIHOLD = Input VSCCS input range, counts.



       -  HI_OFF = Input VSC command Switch input range, counts.



       -  HLDREF = Offset for the Duty Cycle.



       -  HLDRNG = Error deadband for no pulses required.



       -  HRESUM = Upper limit for recognition of RESUME request,

                   counts.



       -  LACCEL = Input VSCCS input range, counts.



       -  LCOAST = Input VSCCS input range, counts.



       -  LOWBAT = Minimum Reliable Battery Voltage, volts.



       -  LOHOLD = Input VSCCS input range, counts.







                                         15-6


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





       -  LOW_ON = Input VSCCS input range, counts.



       -  LRESUM = Inputs VSCCS input range, counts.



       -  MAXVSP = Maximum Vehicle Speed to Enable Vehicle 

                   Speed Control, MPH.



       -  MINVSP = Minimum Vehicle Speed to enable Vehicle 

                   Speed Control, MPH.



       -  MPHDED = Deadband for Vehicle Speed Control, mph.  If the 

                   actual speed is less than the SET_SPEED - MPHDED, 

                   then the VSC should be disabled.



       -  MPHH = Hysteresis term to promote VSC stability.



       -  NCGSHP = Neutral gear/Clutch switch

                   0 = No switches present;

                   1 = Either/both switches present.



       -  SETGN = SET_SPEED proportional gain.



       -  TAPGN = Throttle position proportional gain.



       -  TRLOAD = Transmission Load.

                   0 = Manual Transmission, no clutch or gerar switches,

                       forced neutral state (NDSFLG = 0).

                   1 = Manual Transmission, no clutch or gear switch.

                   2 = Manual Transmission, one clutch or gear switch.

                   3 = Manual Transmission, both clutch and gear switches.

                   4 = Auto Transmission, non-electronic, neutral drive switch.

                   5 = Auto Transmission, non-electronic, neutral pressure switch,

                       (AXOD).

                   6 = Auto Transmission, electronic, PRNDL sensor - park, reverse,

                       neutral, overdrive, manual 1, manual 2.



       -  VEHGN = Vehicle Speed proportional gain.



       -  VSCFRQ = Desired VSC Frequency, Hz.



       -  VSNMAX = Maximum RPM for vehicle Speed Control function,

                   Rev/Min.



       -  VSTYPE = Vehicle speed sensor cruise control hardware present switch;

                   0 = No vehicle speed and no cruise control,

                   1 = Vehicle speed sensor, no cruise control (VSS),

                   2 = Both vehicle speed sensor and cruise control (VSS+VSC).







      OUTPUTS



      Registers:



       -  DEBTMR = IVSCCS debounce timer.



       -  IVSCCS_LST = Last input vehicle speed control command switch.







                                         15-7


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





       -  RES_SPEED = Vehicle Control Speed set by Driver, mph.



       -  SCVAC = Vacuum solenoid used to increase speed.



       -  SCVNT = Vent solenoid used to decrease speed.



       -  VSCCS = Vehicle Speed Control Command Switch; input, debounced counts.



       -  VSC_ERROR = Vehicle Speed Control Error.



       -  VSC_OFF_COUNT = Number of scheduler passes with output off.



       -  VSC_ON_COUNT = Number of scheduler passes with output on.



      Bit Flags:



       -  ACC_REQ = Flag set when ACCEL_BUT is depressed.



       -  ACCEL_BUT = Flag that indicates that the ACCEL button is 

                       depressed (1 = ACCEL button depressed).



       -  ACCEL_STATE = Flag that indicates that the VSC is in ACCEL Mode

                         (1 = ACCEL Mode).



       -  BRAKE_STATE = Flag that indicates that the Brake has been

                         depressed (1 = Brake depressed).



       -  COAST_BUT = Flag that indicates that the driver depressed 

                       the COAST Button (1 = Button depressed).



       -  COAST_STATE = Flag that indicates that the driver depressed

                         the COAST Button recently.



       -  HOLD_STATE = Flag that indicates normal VSC (1 = Stable Speed).



       -  OFF_BUT = Flag that indicates that the driver depressed 

                     OFF button (1 = Button depressed).



       -  ON_STATE = Flag that is set equal to zero when VSC is OFF.

                      (1 = Enabled).



       -  RESUM_BUT = Flag that indicates that RESUME button was

                       depressed (1 = Button Depressed).



       -  RESUM_STATE = Flag that indicates that the VSC is in RESUME

                         Mode (1 = RESUME Mode).



       -  VSCCS_ERROR = VSC_Buttons error range identifier.



       -  VSC_PULSE = Background flag indicating to EOS that a dither

                       pulse is in progress.



















                                         15-8


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





      The VSCCS debounce logic attempts to reject spurious  noise  on  the  vehicle

      speed control input signal.  The timer, DEBTMR, is loaded with DEBTIM seconds

      whenever the last raw input, IVSCCS_LST, differs from the current raw  input,

      IVSCCS, by more than DEBAMP counts.  If the current raw input does not change

      by more than DEBAMP counts over a period of DEBTIM seconds, DEBTMR is allowed

      to  count down to zero.  Upon reaching zero, the actual vehicle speed control

      register, VSCCS, is loaded with the current raw input, IVSCCS.





                                  VSCCS DEBOUNCE LOGIC





      |IVSCCS_LST - IVSCCS| > DEBAMP ----------| Set DEBTMR = DEBTIM

                                               |  (load debounce timer)

                                               |

                                               | Set IVSCCS_LST = IVSCCS

                                               |  (update last register)



      DEBTMR = 0 ------------------------------| Set VSCCS = IVSCCS



















































































                                         15-9


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                       Vehicle Speed Control Command Switch Logic



      The following logic interprets the speed control switch inputs.



      VBAT > LOWBAT -------------|

       (Check Voltage Range)     |

                                 |AND -----| SET OFF_BUT = 1 

      VSCCS < HI_OFF ------------|         |  (No change to ON_STATE

       (Off Button Depressed)              |   or VSCCS_ERROR)

                                           |

                                           | --- ELSE ---

      VBAT > LOWBAT -------------|         |

                                 |AND -----| SET COAST_BUT = 1

      LCOAST < VSCCS < HCOAST ---|         |  (No Change to ON_STATE

       (COAST button Depressed)            |   or VSCCS_ERROR)

                                           |

                                           | --- ELSE ---

      VBAT > LOWBAT -------------|         |

                                 |AND -----| SET ACCEL_BUT = 1

      LACCEL < VSCCS < HACCEL ---|         |  (No Change to ON_STATE

       (ACCEL button depressed)            |   or VSCCS_ERROR)

                                           |

                                           | --- ELSE ---

      VBAT > LOWBAT -------------|         | 

                                 |AND -----| SET RESUM_BUT = 1

      LRESUM < VSCCS < HRESUM ---|         |  (No Change to ON_STATE

       (RESUME button depressed)           |   or VSCCS_ERROR)

                                           |

                                           | --- ELSE ---

      VBAT > LOWBAT -------------|         |

                                 |AND -----| SET VSCCS_ERROR = 0

      LOHOLD < VSCCS < HIHOLD ---|         |  (No Change to ON_STATE)

       (No Buttons depressed)              |

                                           | --- ELSE ---

                                           |

      VBAT > LOWBAT -------------|         |

                                 |AND -----| SET ON_STATE = 1

      VSCCS > LOW_ON ------------|         |  (No Change to

       (ON button depressed)               |   VSCCS_ERROR)

                                           |

                                           | --- ELSE ---

                                           |

                                           | SET ON_STATE = 0

                                           | SET VSCCS_ERROR = 1

                                           |  (Battery Voltage

                                           |   outside permissible

                                           |   range.)



























                                        15-10


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





      If VBAT < LOWBAT, then Battery Voltage is too low; Vehicle Speed Control must

      be disabled (but NOTE that VBAT is initialized to 12.5 Volts).





      NOTE:  The VSCCS ranges (HI_OFF, LCOAST, HCOAST, etc.)  are  defined  by  EED

      Vehicle  Controls and Convenience Product Systems and Applications Department

      and should not be changed from the base release values unless they have given

      specific permission.









































































































                                        15-11


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                                 VSC SPEED CONTROL LOGIC





      The Integrated Vehicle Speed Control was designed to operate in  the  similar

      manner  as  the  standalone version (Cruise Control).  The driver enables the

      Speed Control by pressing the ON button.  The speed is selected  by  pressing

      SET  ACCEL or COAST (sets current speed).  Continuous depressing of SET ACCEL

      will increase the speed until released and Coast, of  course,  will  slow  it

      down.  Hitting the brake will deactivate it as will shifting the transmission

      into neutral or turning the Vehicle Speed Control  OFF.   The  speed  of  the

      vehicle MUST be above 25 MPH to use Vehicle Speed Control.



      The VSC strategy uses a hierarchical State Diagram Logic.   In  other  words,

      the  strategy  will  enter a particular State if its entry conditions are met

      and if the entry conditions of a higher priority  state  are  not  met.   The

      various  states  are  mutually  exclusive (except for ON_STATE).  In general,

      conditions to disable (turn it Off) or otherwise de-activate (put on standby)

      the VSC are checked first.  Redundant Brake condition is the one exception to

      this rule.



      When all other states are equal to  zero,  the  VSC  strategy  is  either  in

      Standby Mode (ON_STATE = 1) or OFF Mode (ON_STATE = 0).



      The Vehicle speed Control strategy has three parts:







                       A. VSC State Determination

                       B. VSC Duty Cycle

                       C. VSC Duty Cycle Output Routine

                           (Pulsewidth calculation)



























































                                        15-12


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                              A. VSC STATE DETERMINATION



         STATE 1 - DRIVER DEPRESSED OFF-BUTTON OR HAS NOT DEPRESSED ON-BUTTON





      ON_STATE = 0 -------|

       (VSC is OFF)       |OR ---| CLEAR all VSC STATE Flags

                          |      |

      OFF_BUT = 1 --------|      | SET RES__SPEED = 0

       (Off But depressed)       | Set ACC_REQ = 0

                                 | Set VSC_PULSE = 0

                                 | (This forces a 100% duty

                                 |  cycle to the Vent Solenoid)

                                 |

                                 | --- ELSE ---

                                 |

                                 | Check STATE 2





                   STATE 2 - VEHICLE SPEED OUTSIDE ACCEPTABLE RANGE





      If VSC has a fault in the button logic, the  Vehicle  Speed  is  outside  the

      normal  range  of  operation;  or,  the  VSC buttons have a fault.  In either

      instance, Standby Mode is entered and all VSC States,  except  ON_STATE,  are

      cleared  and  Vehicle  Speed  Control is exited.  However, if none of the "OR

      GATE" conditions described below is met, the logic runs through a  comparison

      of  factors  which  should indicate that vehicle speed is within normal range

      and continues on to check STATE 3.





      N > VSNMAX -------------------|

                                    |

      MPH < MINVSP ---------|S Q----|

                            |       |      | Clear All VSC States

      MPH > MINVSP + MPHH --|C      |      |  except ON_STATE and

                                    |OR ---|  BRAKE_STATE

      MPH > MAXVSP ---------|S Q----|      | ACC_REQ = 0

                            |       |      | VSC_PULSE = 0

      MPH < MAXVSP - MPHH --|C      |      | (This will force 100%

                                    |      |  vent pulse)

      VSCCS_ERROR = 1 --------------|      |

                                           | --- ELSE ---

                                           |

                                           | Check STATE 3































                                        15-13


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                  STATE 3 - BRAKE APPLIED OR TRANSMISSION IN NEUTRAL





      When the driver depresses the brake pedal, a flag is  set  which  this  logic

      seeks.   If  BIFLG  is set equal to one (brake depressed), VSC is disengaged,

      but not turned OFF.  The driver may press RESUME  to  attain  the  speed  set

      before braking (or disengagement) took place.





      BIFLG = 0 -------------------|         | Check STATE 4

       (Brake Not Depressed)       |AND -----|

                                   |         |

      NDSFLG = 1 ----------|       |         |

                           |OR ----|         |

      TRLOAD = 0 ----------|                 | --- ELSE ---

                                             | 

      ACCEL_BUT = 1 ----------|              | Button is stuck;disable VSC

       (ACCEL_BUT depressed)  |              | 

                              |              | VSCCS_ERROR = 1

      RESUM_BUT = 1 ----------|OR -----------| Set BRAKE_STATE = 1 

       (RESUM_BUT depressed)  |              | Clear all other states

                              |              | except ON_STATE

      COAST_BUT = 1 ----------|              | ACC_REQ = 0

                                             | VSC_PULSE = 0

                                             | (100% Vent pulse)

                                             |

                                             | --- ELSE ---

                                             |

                                             | (Brake depressed or

                                             |  Transmission in Neutral)

                                             | Set BRAKE_STATE = 1

                                             | Clear all other States

                                             |  except ON_STATE.

                                             | ACC_REQ = 0

                                             | VSC_PULSE = 0

                                             | (100% Vent Pulse)

















































                                        15-14


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                       STATE 4 - VEHICLE SPEED IS COASTING DOWN





      If the driver needs to slow down, the driver may press COAST until  the  new,

      slower speed is reached.





      COAST_BUT = 1 -----------| SET COAST_STATE = 1

       (COAST But depressed)   | CLEAR all other States

                               |  except ON_STATE.

                               | SET_SPEED = MPH

                               | RES_SPEED = MPH

                               | VSC_PULSE = 0

                               | ACC_REQ = 0

                               |  (100% Vent pulse)

                               |

                               | --- ELSE ---

                               |

      COAST_STATE = 1 ---------| Do normal Duty Cycle

       (Driver released button)|  calculation)

                               | SET VSC_PULSE = 1

                               | SET HOLD_STATE = 1

                               | CLEAR all other States

                               |  except ON_STATE

                               | SET SPEED = MPH

                               | RES_SPEED = MPH

                               |

                               | --- ELSE ---

                               |

                               | Check STATE 5







      NOTE:  If the COAST_BUT = 0 and COAST_STATE = 1, the  driver  wants  to  stop

      coasting.



















































                                        15-15


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                          STATE 5 - VEHICLE IS ACCELERATING





      This button actually provides two functions.  It sets the initial  speed  the

      driver  chooses  to  drive;  or  it  can  increase  the  speed  if the driver

      continuously holds it down.





      ACCEL_BUT = 1 -------------|

       (ACCEL Button depressed)  |

                                 |AND ---| SET ACCEL_STATE = 1

      ACCEL_STATE = 0 -----------|       | CLEAR all other STATES

       (Entered ACCEL State)             |  except ON_STATE

                                         | SET VSC_PULSE = 1

                                         | (Do Normal Duty Cycle

                                         |  calculation)

                                         | SET_SPEED = MPH

                                         | RES_SPEED = MPH

                                         |

                                         | --- ELSE ---

                                         |

      ACCEL_BUT = 1 -------------|       | Set ACCEL_STATE = 1

       (ACCEL Button depressed)  |       | Clear all other States

                                 |AND ---|  except ON_STATE

                                 |       | SET VSC_PULSE = 1

      ACCEL_STATE = 1 -----------|       | (Do normal duty cycle

                                         |  calculation)

                                         | (The SET_SPEED will ramp

                                         |  and cause the vehicle

                                         |  to accelerate)

                                         | RES_SPEED = MPH

                                         |

                                         | --- ELSE ---

      ACCEL_BUT = 0 -------------|       |

                                 |AND ---| SET HOLD_STATE = 1

      ACCEL_STATE = 1 -----------|       | CLEAR all other States

       (ACCEL But no                     |  (except ON_STATE)

        longer depressed)                | SET_SPEED = MPH

                                         | RES_SPEED = MPH

                                         | SET VSC_PULSE = 1

                                         |

                                         | --- ELSE ---

                                         |

                                         | Check STATE 6







      NOTE:  If ACCEL_BUT = 0 and ACCEL_STATE = 1, then exit ACCEL Mode.

























                                        15-16


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                  STATE 6 - RESUME VEHICLE SPEED TO RES_SPEED VALUE





      This button allows the driver to resume the vehicle speed that was set before

      braking  or  manually accelerating.  It does not store this "former" speed if

      the VSC is turned OFF (that is the function of Favorite  Speed  setting  when

      the hardware is installed).





      RESUM_BUT = 1 ------------|

       (Driver depressed        |

        resume button)          |

                                |

      RESUM_STATE = 0 ----------|

                                |

      BRAKE_STATE = 1 ----------|AND ----| SET RESUM_STATE = 1

       (Brake was applied)      |        | CLEAR all other states

                                |        | Except ON_STATE

                                |        | SET_SPEED = MPH

      RES_SPEED > MINVSP -------|        | SET VSC_PULSE = 1

       (RESUM speed OK)                  |

                                         | --- ELSE ---

                                         |

                                         | Check State 7  









































































                                        15-17


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                    STATE 7 - ACCEL/DECEL DECISION TO RESUME SPEED





      This logic compares the existing speed against the speed the vehicle traveled

      previous to braking, accelerating or coasting down.  It determines whether it

      needs to increase or decrease speed to meet the former setting.



      RESUM_STATE = 1 -------|        | Set RESUM_STATE = 1

                             |AND ----| Clear all other States except

      MPH < RES_SPEED -------|        |  ON_STATE

                                      | Set VSC_PULSE = 1 

                                      | Set ACC_REQ = 1

                                      | (Ramp speed up)

                                      |

                                      | --- ELSE ---

                                      |

      RESUM_STATE = 1 ----------------| SET HOLD_STATE = 1

                                      | CLEAR all other States

                                      |  except ON_STATE.

                                      | ACC_REQ = 0

                                      | VSC_PULSE = 1

                                      |  (Do normal D.C. Calculations)

                                      | SET_SPEED = RES_SPEED

                                      |

                                      | --- ELSE ---

                                      |

                                      | Check STATE 8 logic



































































                                        15-18


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                           STATE 8 - MAINTAIN VEHICLE SPEED





      HOLD State keeps the VSC at the most recent setting.  It allows a very narrow

      band of fluctuation and functions until the driver depresses a button.





      HOLD_STATE = 1 -------------|      | Set HOLD_STATE = 1

                                  |AND --| Clear all other States

      SET_SPEED <OR= MPH+MPHDED --|      |  except ON_STATE

                                         | Set VSC_PULSE = 1

                                         |

                                         | --- ELSE ---

                                         |

      HOLD_STATE = 1 --------------------| SET BRAKE_STATE = 1

                                         | CLEAR all other States

                                         |  except ON_STATE.

                                         | SET VSC_PULSE = 0





















































































                                        15-19


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                   SET_SPEED RAMP FOR RESUME STATE AND ACCEL STATE





      This logic ramps the SET_SPEED up to RES_SPEED at a rate of  ACLINC  MPH/sec,

      to  provide  smooth acceleration.  The rate of acceleration is clipped to MPH

      as a minimum to prevent the SET_SPEED from lagging.



      ACCEL_REQ = 1 -----|

                         |OR ----|

      ACCEL_BUT = 1 -----|       |

                                 |AND ---| SET_SPEED = SET_SPEED

      SET_SPEED >OR=             |       | + ACLINC* (Time since

       MPH - ACLDED -------------|       |            last update)

                                         |

                                         | --- ELSE ---

      ACCEL_REQ = 1 -------------|       |

                                 |OR ----| SET_SPEED = MPH

      ACCEL_BUT = 1 -------------|





















































































                                        15-20


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                               B. VSC_DC OUTPUT ROUTINE





      For purposes of Strategy Description, the VSC_DC OUTPUT  Routine  is  divided

      into two subroutines:  VSC_DC Calculation and DUTY CYCLE OUTPUT.



                                  VSC_DC CALCULATION





      The VSC_DC is based on the difference between the set speed  and  the  actual

      vehicle  speed  with  some  adjustments  for relative throttle position.  The

      calculation is done in two steps to more closely model the analog system.



      VSC_PULSE = 1 ---------| VSC_ERROR = DCBIAS + [SETGN * SET_SPEED] 

                             |  - [VEHGN * MPH] - TAPGN * (TP - RATCH)

                             |

                             | --- ELSE ---

                             |

                             | VSC_ERROR = 0 (This will force VENT action)







                               VSC_DC = VSC_ERROR - HLDREF







      NOTE:  DCBIAS, SETGN, VEHGN, TAPGN, HLDRNG and HLDREF are hardware constants.

      Any  changes  to  the  base values should be co-ordinated through the Vehicle

      Controls and Convenience Products Systems and Applications Engineering  Dept,

      EED.



      |VSC_DC| < HLDRNG ---------------| Hold position

                                       | VSC_DC = 0

                                       | (Turn OFF SCVAC)

                                       | (Turn ON SCVNT)

                                       |

                                       | --- ELSE ---

                                       |

      VSC_DC < 0 ----------------------| Slow Down

                                       | VSC_DC = |VSC_DC|

                                       | (Turn OFF SCVAC)

                                       | (Duty cycle to SCVNT = VSC_DC)

                                       |

                                       | --- ELSE ---

                                       |

                                       | Speed Up

                                       | (Turn ON SCVNT)

                                       | (Duty cycle to SCVAC = VSC_DC)

























                                        15-21


                             VEHICLE SPEED CONTROL - GUE0

                              Copyright 1989 FoMoCo





                             C. DUTY CYCLE OUTPUT ALGORITHM





      VSC_ON_COUNT = VSC_DC/(VSCFRQ * 1 * 10E-3)



      VSC_OFF_COUNT = (1-VSC_DC) / (VSCFRQ * 1*10E-3)



      OUTPUT to appropriate solenoid.





                           Fixed Frequency/Variable Pulsewidth



      The Fixed Frequency/Variable Pulsewidth method "best  fits"  the  duty  cycle

      (ON_TIME)  to  10  msec.   (If  VSCFRQ = 100) period which is divided into 10

      "slices".  Each of these 10 slices is  equal  to  1  msecs  (10E-6  seconds).

      ON_TIME is "rounded" up or down to the nearest integer.





                  Example of Fixed Frequency/Variable Pulsewidth Method



      ON_TIME   +-+-+-+-+-+-+-+           +-+-+-+-+-+-+-+

                |             |           |

                |             |           |

      OFF_TIME -+             +-+-+-+-+-+-+

                |<--5.0 ms -->|<-5.0 ms ->|



                                    50% Duty Cycle



































































                                        15-22

























                                      CHAPTER 16



                                RIDE CONTROL STRATEGY



































































































                                         16-1


                             RIDE CONTROL STRATEGY - GXY0

                              Copyright 1989 FoMoCo





                            ADJUSTABLE SHOCK ABSORBER OUTPUT





      OVERVIEW



           The adjustable shock absorber module is a stand alone  module,  separate

      from  the  EEC IV, which controls shock absorber firmness.  The EEC IV output

      ACL provides an indication of  vehicle  acceleration  to  the  shock  control

      module.   Other inputs to the shock module come directly from the appropriate

      sensor (VSS brake input, etc.).  The  ACL  output  will  be  energized  under

      engine  running  conditions  by  the  logic  shown  below  to  indicate  hard

      acceleration.  The ACL output may also be energized during key on, engine off

      conditions  by  a  high  TP value in order to verify wiring harness integrity

      during VIP.





      HPACL = 0 ---------------------------------| No change

                                                 | Exit Logic

      CRKFLG = 0 ----------|                     |

       (Underspeed/Run     |                     | --- ELSE ---

        Mode)              |AND ----|            |

                           |        |            | Set ACL = 1

      ARCHG >OR= SHKCHG ---|        |OR ---------| (energize ACL output-

       (high engine load)           |            |  hard acceleration)

                                    |            |

      TP >OR= RATCH+SHKTP ----------|            | --- ELSE ---

       (large throttle opening)                  |

                                                 | Set ACL = 0

                                                 | (deenergize ACL output)































































                                         16-2


                             RIDE CONTROL STRATEGY - GXY0

                              Copyright 1989 FoMoCo





      DEFINITIONS



      INPUTS



      Registers:



       -  ARCHG = Air Charge Mass inducted per Intake Stroke, lbm/Intake.



       -  TP = Instantaneous Throttle Position, counts.



       -  RATCH = Lowest filtered Throttle Position, counts.



      Bit Flag:



       -  CRKFLG = Indicates status of engine, if = 1, engine is in CRANK mode.



      Calibration Constants:



       -  HPACL = Hardware present switch to indicate if module

                   includes output for adjustable shock absorber.

                   1 = Hardware present.



       -  SHKCHG = Minimum ARCHG value to indicate if hard acceleration.

                    Typical value:  .00015



       -  SHKTP = Minimum number of throttle counts above the closed

                   throttle position (RATCH) to indicate hard acceleration. 

                   Typical value:  650 counts.





      OUTPUT



      Bit Flag:



       -  ACL = Provides an indication of vehicle acceleration

                to the shock control module. 

















































                                         16-3


                             RIDE CONTROL STRATEGY - GXY0

                              Copyright 1989 FoMoCo





         























































































































                                         16-4

























                                      CHAPTER 17



                      ELECTRONICALLY CONTROLLED ACCESSORY DRIVE



































































































                                         17-1


                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE - GXY0

                              Copyright 1989 FoMoCo





                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE (ECAD)





   OVERVIEW



        The Electronically Controlled Accessory Drive  (ECAD)  module  is  a  stand

   alone  unit.   It  determines  alternator  demand, and if alternator demand will

   allow half speed accessory drive operation, the module inputs a  signal  to  the

   EEC-IV  processor.   This  signal  is  essentially  asking  EEC to check certain

   additional conditions, necessary before half speed  mode  can  be  allowed.   If

   these  conditions  (outlined  below)  do exist, EEC outputs a signal to the ECAD

   module telling it to operate at half speed.  The ECAD module then actuates  half

   speed operation.



        The following conditions are checked in every case:



         -  ECAD unit is asking for half speed mode



         -  ECT is below a maximum temperature



         -  Engine speed is above a minimum RPM, and



         -  Vehicle speed is above a minimum value.



   Additionally, if the system has Thermactor Air (THRMHP = 1), the  progam  checks

   that  an  upstream air condition does not exist.  On non-thermactor systems, the

   program checks that a minimum temperature  and  time  since  start-up  has  been

   reached.





   DEFINITIONS



   INPUTS



   Registers:



         -  ECT = Engine Coolant Temperature.



         -  N_BYTE = Engine speed, RPM.



         -  VSBAR = Filtered Vehicle Speed.



   Bit Flags:



         -  ECADI = Input from stand alone ECAD module to EEC:   0  ->  full  speed

            mode only; 1 -> half speed mode allowed.



         -  USAFLG = Upstream air flag:  0 -> not in upstream air; 1 -> in upstream

            air.



   Calibration Constants:



         -  ECADECT = ECT threshold for ECAD.  If the ECT is greater than  ECADECT,

            then the ECAD unit must be in full speed mode.



         -  ECADHP = Hardware present switch for ECAD:  1 -> ECAD hardware present.









                                         17-2


                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE - GXY0

                              Copyright 1989 FoMoCo





         -  ECADN = RPM threshold for ECAD.  If N_BYTE is greater than ECADN,  then

            the ECAD unit may go into half speed mode.



         -  ECADVS = Vehicle speed threshold for  ECAD.   If  VS  is  greater  than

            ECADVS, then the ECAD unit may go into half speed mode.



         -  EDETHYS = ECAD ECT hysteresis term = ECADECT - bandwidth.



         -  EDNHYS = ECAD RPM hysteresis term = ECADN - bandwidth.



         -  EDTM1 = ATMR1 ECAD time delay for TCSTRT <OR= CTLOW.



         -  EDTM2 = ATMR1 ECAD time delay for CTLOW < TCSTRT < CTHIGH.



         -  EDTM3 = ATMR1 ECAD time delay for TCSTRT >OR= CTHIGH.



         -  EDTM4 = ATMR2 ECAD time delay for TCSTRT <OR= CTLOW.



         -  EDTM5 = ATMR2 ECAD time delay for CTLOW < TCSTRT < CTHIGH.



         -  EDVSHYS = ECAD VS hysteresis term = ECADVS - bandwidth.







   OUTPUTS



   Bit Flags:



         -  ECADOT = Output from EEC to ECAD stand alone unit:   0  ->  half  speed

            mode; 1 -> full speed mode.





























































                                         17-3


                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE - GXY0

                              Copyright 1989 FoMoCo





   PROCESS



   ECADHP = 0 --------------------------| NO CHANGE

    (no ECAD hardware)                  | EXIT LOGIC

                                        |

   AFMFLG = 0 ---|                      | --- ELSE ---

                 |                      |

   CFMFLG = 0 ---|                      |

                 |AND ------------|     |

   TFMFLG = 0 ---|                |     |

                 |                |     |

   MFMFLG = 0 ---|                |     |

    (not in failure mode)         |     |

                                  |     |

   THRMHP = 1 ------|             |     |

    (thermactor air |AND -|       |     |

     system)        |     |       |     |

                    |     |OR ----|     |

   USAFLG = 0 ------|     |       |     |

                          |       |     |

   "A" --------|          |       |     |

               |AND ------|       |     |

   THRMHP = 0 -|                  |     |

                                  |     |

   ECADI = 1 ---------------------|AND -| HALF SPEED MODE

                                  |     | Clear ECADOT

   ECT < ECADECT ----------|S  Q -|     |

    (over temp protection) |      |     | --- ELSE ---

                           |      |     |

   ECT > EDETHYS ----------|C     |     | FULL SPEED MODE

                                  |     | Set ECADOT

   N_BYTE > ECADN --|S  Q --------|

    (RPM > min RPM) |             |

                    |             |

   N_BYTE < EDNHYS -|C            |

                                  |

   VSBAR > ECADVS ----|S  Q ------|

    (VS > minimum VS) |

                      |

   VSBAR < EDVSHYS ---|C









































                                         17-4


                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE - GXY0

                              Copyright 1989 FoMoCo





                                 ECAD TIME/TEMP DELAY



   When there is no Thermactor air system, the ECAD operates at full speed before a

   minimum temperature and time start-up is reached.



   TCSTRT >OR= CTHIGH -|

                       |AND ------|

   ATMR1 < EDTM3 ------|          |

                                  |

   CTLOW < TCSTRT < CTHIGH -|     |

                            |AND -|OR -----| "A"

   ATMR1 < EDTM2 -|         |     |

                  |OR ------|     |

   ATMR2 < EDTM5 -|               |

                                  |

   TCSTRT <OR= CTLOW --|          |

                       |AND ------|

   ATMR1 < EDTM1 -|    |

                  |OR -|

   ATMR2 < EDTM4 -|

















































































                                         17-5


                   ELECTRONICALLY CONTROLLED ACCESSORY DRIVE - GXY0

                              Copyright 1989 FoMoCo





























































































































                                         17-6

























                                      CHAPTER 18



                                SHIFT INDICATOR LIGHT



































































































                                         18-1


                             SHIFT INDICATOR LIGHT - GUA0

                              Copyright 1989 FoMoCo





      DEFINITIONS





      INPUTS



      Registers:



       -  N = Engine RPM.



       -  SLTMR = Shift Light Timer.



      Bit Flags:



       -  CRKFLG = Flag indicating state of engine mode.



      Calibration Constants:



       -  FN651 = Incremental Indicated RPM shift point as a function 

                  of ECT.



       -  FN652A = Indicated RPM shift point as a function of LOAD.



       -  SHIRPM = Overspeed RPM.



       -  SLTIM1 = Time delay to validate the Shift Indicator Light,

                   sec.



       -  SLTIM2 = Maximum time that SIL (shift indicator light) 

                   is on, sec.



       -  SPTRPM = Minimum RPM at which SIL timer enables.



       -  TSTRAT = Transmission Strategy Switch,

                   The TSTRAT software switch selects which transmission control

                   strategy is to be executed.

                   TSTRAT = 0 -> No transmission control;

                                 (Manual trans., AOD, ATX, C6, C3, etc.),

                          = 1 -> SIL (Shift Indicator Light),

                          = 2 -> A4LD with 3-4 shift control and convertor

                                 clutch control,

                          = 3 -> AXOD,

                          = 4 -> C6E4 (E4OD),

                          = 5 -> A4LD-E

                          = 6 -> FAX-4,

                          = 7 -> AOD-E (AOD-I),

                          = 8 -> 4EAT,

                          = 9 -> CD4E.







      OUTPUTS



      Registers:



       -  SLTMR = See Inputs above.











                                         18-2


                             SHIFT INDICATOR LIGHT - GUA0

                              Copyright 1989 FoMoCo





                        SHIFT INDICATOR LIGHT LOGIC  (TSTRAT = 1)







      Shift Indicator Light refers to the light located in the instrument  cluster.

      The  light  is  used  to  signal  the  driver  when  to  up-shift on a manual

      transmission for best fuel economy.



      The strategy turns the shift light on when either of the following conditions

      are met:



          1) Engine RPM is greater than an "over speed" calibration value; or



          2) The shift light timer SLTMR is between a lower calibration  value  and

          an upper calibration value.



      Control of SLTMR (and the shift light) is based on engine RPM and load.   The

      SLTMR  counts  up  when  engine  RPM goes above a trigger value.  The trigger

      value varies as a function of LOAD and ECT (engine coolant temperature).  The

      time  delay  before  the shift light turns on eliminates light flicker due to

      RPM jitter about the trigger value.  The upper  time  limit  prevents  driver

      annoyance.







                                   LIGHT ON/OFF LOGIC





      N > SHIRPM --------------------|          

                                     |OR -|

      SLTIM1 < SLTMR <OR= SLTIM2 ----|    |

                                          |AND -| TURN ON SHIFT LIGHT

      TSTRAT = 1 -------------------------|     | 

                                          |     | --- ELSE ---

      CRKFLG = 0 -------------------------|     |

                                                | TURN OFF SHIFT LIGHT









      NOTE:   The  calibration   parameter,   TSTRAT,   selects   the   appropriate

      transmission  strategy.  The Shift Indicator Light strategy will execute only

      if TSTRAT = 1.



































                                         18-3


                             SHIFT INDICATOR LIGHT - GUA0

                              Copyright 1989 FoMoCo





                                       SLTMR LOGIC







      N > SPTRPM -------------|

                              |OR ----|

      N > FN651 + FN652A -----|       |AND ---| COUNT UP SLTMR

                                      |       |

      PART THROTTLE Mode -------------|       | --- ELSE ---

                                              |

                                              | Set SLTMR = 0



































































































                                         18-4

























                                      CHAPTER 19



                            INPUT CONVERSIONS AND FILTERS



































































































                                         19-1


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





                              INPUT CONVERSIONS AND FILTERS



      DEFINITIONS



      INPUTS



      Registers:



       -  ACT = Air charge temperature.



       -  AELOAD = Filtered LOAD for manifold filling effect.



       -  AIR37 = The maximum air charge for a particular engine speed(N) as

                  described by FN037.



       -  AM = Air Mass Flow, lbm/min.



       -  AMINT = Integrated Air Mass flow (lbm).



       -  APT = Throttle Mode Flag.



       -  ARCHCOR = Backflow correction for Mass Air Meter.



       -  ARCHG = Air Charge Mass inducted per Intake Stroke,

                   lbm/Intake.



       -  ARCHLI = Air charge leakage (lbm/intake).



       -  BAPBAR = Rolling average of barometric pressure sensor

                   values.



       -  BAPCNT = BAP transition counter.



       -  BAPTMR = Barometric pressure update, msecs.



       -  BPKFLG = Update enable flag for key on updates, unitless.



       -  DEBTMR = VSCCS Debounce timer, sec.



       -  DATA_TIME = 3 byte time of transition.



       -  DSDRPM = Desired RPM (from ISC logic).



       -  ECT = Coolant temperature, deg F.



       -  EGO = Exhaust Gas Oxygen Sensor.



       -  EM = EGR mass flow, lbm/min.



       -  EPTBAR = Rolling average EPT Transducer.



       -  EPTZER = EPT sensor value at idle.



       -  EVP = EGR valve position, counts.



       -  FAM = Filtered air mass.









                                         19-2


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  HEGO = Heated Exhaust Gas Oxygen Sensor. (EGO and HEGO

                 provide the same function, See HEGO Section in

                 this Chapter)



       -  IACC_NDS = AC Clutch/Neutral-Drive input.



       -  IACT = Voltage output by the ACT sensor converted

                 to counts, A/D.



       -  IBAP = Instantaneous BP sensor reading (FN000)



       -  IECT = Voltage output by the ECT sensor converted

                 to counts, A/D.



       -  IEGO = Voltage output by the EGO (or HEGO Sensor)

                 converted to counts, A/D.



       -  IEPT = EPT sensor data for PFE EGR.



       -  IIVPWR = Ignition key-on power (A/D counts).



       -  IMAF = Input Air Meter Reading, A/D counts.



       -  INTM = Delta time between Air Meter Samples, sec.

                = current Sample time - Last Sample time.



       -  ITAR = Voltage output by TAR converted to A/D counts.



       -  IVCAL = Calibration input voltage used to correct

                  MAF and VBAT (A/D counts).



       -  IVSCCS = Input VSC command switch.



       -  KNK_HIGH = Knock level input flag.



       -  LOAD = Normalized ARCHG/SARCHG.



       -  MAF = Instantaneous Mass Air flow (lbm/min).

                (MAF = FN036 (VMAF))



       -  MAFCON = MAF voltage correction gain calibrated for

                   the particular EEC processor in use.

                   (MAFCON = VCAL / MAFK1 )



       -  MAF_TIME = OUTINT  1 time for MAF fuel.



       -  MPH = Rolling average Vehicle Speed.



       -  MINTIM1 = Last SCAP edge prior to the background

                  calculation of BAP.



       -  MINTIM2 = Last SCAP edge prior to the previous SCAP

                    edge prior to the background loop calculation

                    of BAP.



       -  MPHCNT = MPH sensor transition count.









                                         19-3


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  MPHTIM1 = Last MPH transition time.



       -  MPHTIM2 = First MPH transition time.



       -  N = RPM - engine speed in revolutions per minute.



       -  NBAR = Rolling average RPM.



       -  NDBAR = Filtered Engine Speed.



       -  NDDTIM = Timer which tracks time since Neutral/Drive

                   (Drive/Neutral) Switch State change, sec.



       -  N_BYTE = Single precision (BYTE) engine speed, Rev/Min.

                   It is used whenever possible to save memory.



       -  OLDTP = The last value of TP.



       -  PINPT = Pressure input switch, 0 = 1st, 2nd, 3rd gear; 1 = 4th gear.



       -  PINPT2 = Pressure input switch, 0 = 1st, 2nd gear; 1 = 3rd, 4th gear.



       -  PIPCNT = Number of PIPs which have occurred.



       -  PIP Period = Amount of time between consecutive PIP

                       signals.



       -  PSPS = Power Steering Pressure Switch.



       -  PUTMR = Counts up after hardware reset.



       -  RATCH = Kicker off lowest filtered TP.



       -  RAWAIRCHG = Raw Air charge from the air mass

                      integration.



       -  TP = Throttle position.



       -  TBART = Rolling average of TP for Knock Strategy.



       -  TPBAR = Rolling average Throttle Angl.



       -  VBAT = Battery Voltage.



       -  VMAF = Corrected Air Meter Voltage (volts).

                 VMAF = (IMAF/IVCAL + MAFK2) * MAFCON



       -  VSBAR = Filtered Vehicle Speed.

























                                         19-4


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





      Bit Flags:



       -  BPUFLG = Keyon update flag in RAM, unitless.



       -  CRKFLG = Crank Flag.



       -  DNDSUP = Drive/Neutral Select.



       -  FAM_FLG = Flag indicating in FAM region and AM = FAM.



       -  INDFLG = AXOD Instantaneous N/D Flag.



       -  KAM_ERROR = Indicates Keep Alive RAM invalid.



       -  KNOCK_DETECTED = Flag set to 1, if knock occurred in

                            current PIP half-period.



       -  KNOCK_OCCURRED = Flag set to 1 (in the Knock Interrupt

                            routine), if knock occurred in current or last PIP

                            period.



       -  NDSFLG = Neutral/Drive Flag 1 = Drive.



       -  PTPFLG = PIP occurred after 50 msec.



       -  REFFLG = 1 when in idle air flow region.



       -  UNDSP = Underspeed Flag.



      Calibration Constants:



       -  AMDESN = Desired RPM threshold to enter Idle AM logic, RPM.



       -  AMRPM = Actual RPM (byte) threshold to enter Idle AM logic.



       -  AMRPMH = RPM (byte) threshold hysteresis.



       -  ARCHLK = Air flow leakage (lbm/min).



       -  BIHP = Brake Input Hardware Switch.



       -  BPSSW = Calibration switch:

                   1 = Barometric pressure sensor

                   0 = No sensor (use constant BP value)



       -  CTEHI = Calibration constant for minimum ECT (engine coolant

                  temperature) to enable EPTZER at idle, degrees F.



       -  DEBTIM = Debounce time delay, secs.



       -  DELRAT = Change in RATCH.



       -  DELTAM = Air Mass Delta to enter/exit filtered AM

                   at Idle.



       -  ENGCYL = Number of PIPs per Engine Revolution; or

                   Number of Intake Strokes Per Engine

                   Revolution. (Number of cylinders/2)





                                         19-5


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  EPTSW = Calibration switch to enable or disable

                  rolling average EPTZER at idle.



       -  FAMLIM = Multiplier for FAM deadband.



       -  FN000 = Frequency versus pressure data; used in

                  conversion of frequency to pressure.

                  X-input = frequency

                  Y-output = Pressure, "Hg.



       -  FN036 = Mass Air Transfer function as a function of

                  corrected Air Mass Sampling voltage (VMAF).

                  Input = Calculated MAF sensor voltage;

                  Output = Mass Air Flow (Lb/min).



       -  FN037 = A function that relates engine speed to maximum

                  air charge.



       -  FN394F = Time delay before recognition of N/D Transition

                   - forward gear  Input = ECT; OUTPUT = Seconds.



       -  FN394R = Time delay before recognition of N/D Transition

                   - reverse gear  Input = ECT; OUTPUT = Seconds.



       -  FN703A = ECT/ACT Transfer function. Input = A/D converter

                   counts and Output = temperature, deg F.



       -  FN1035(N,LOAD) = Air Meter Backflow Correction Table.

                           X-input = FN070 - Normalized engine speed, RPM

                           Y-input = FN021 - Normalized LOAD

                           Output = LOAD.



       -  IDLDEL = A/D count equivalent to Idle back pressure,

                   "H2O * IXFRPR, counts.



       -  IERPMH = Idle RPM hysteresis term for EPTZER update.



       -  KONBP = BP constant used in absence of sensor. Range of

                  0 to 31.875.



       -  KSF = Keypower Scaling Factor; a calibration constant 

                which has historically been 3.731; this value can

                be changed on VECTOR to satisfy the requirements

                of different processors; a newer value for KSF

                is 5.5991; the user should check with the EEC Design

                Group to determine which value for KSF is applicable

                to a specific processor level.



       -  MAFK1 = Universal Mass Air Flow Voltage Correction Gain,

                  unitless. (0 <OR= MAFK1 <OR= 1.99)



       -  MAFK2 = Universal Mass Air Flow Voltage Correction Offset,

                  unitless. (1.0 <OR= MAFK2 <OR = 1.99) 



       -  MAXFAM = Difference between FAM & AMPEM at idle.



       -  MINAM = Minimum Air Mass Clip, lb air/min.







                                         19-6


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  MNPIP4 = Minimum PIP period for 4-cylinder engine, clock ticks.



       -  MNPIP6 = Minimum PIP period for 6-cylinder engine, clock ticks.



       -  MNPIP8 = Minimum PIP period for 8-cylinder engine, clock ticks.



       -  NDDELT = Time before N/D, D/N switch registers, Range of

                   0 to 31.875.



       -  NRUN = Minimum engine speed to exit Crank mode.



       -  PFEHP = Switch to select EGR strategy: 1 = PFE; 0 = Sonic.



       -  SAMRAT = Sample rate for AM filter.



       -  SARCHG = Standard Air Charge, lb.

                 = 4.4256 * 10E-5 * (Engine Size in Cubic

                   Inches/number of cylinders).



       -  TCAELD = Time constant for AELOAD, sec.



       -  TCBBAR = Time constant for BAPBAR, sec.



       -  TCDASD = Time constant for DSTPBR, sec.



       -  TCDASU = Time constant for DSTPBR, sec.



       -  TCDESN = Time constant for DESNLO, sec.



       -  TCDLOP = Time constant for DELOPT, sec.



       -  TCDP = Time constant for DESDP, sec.



       -  TCEACT = Time constant for EGR ACT, sec.



       -  TCECT = Time constant for ECT, sec.



       -  TCEGR = Time constant for EGRBAR, sec.



       -  TCEPT = Time constant for EPT, sec.



       -  TCFAM = Time constant for FAM, sec.



       -  TCINJD = Time constant for INJDLY, sec.



       -  TCMPH = Time constant for MPH, sec.



       -  TCN = Time constant for N, sec.



       -  TCNDBR = Time constant for NDBAR, sec.



       -  TCTP = Time constant for TPBAR, sec.



       -  TCTPT = Time constant for TBART, sec.



       -  TCVBAT = Time constant for VBAT, sec.









                                         19-7


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  TCVS = Time constant for VSBAR, sec.



       -  TKYON1 = Minimum time delay before PIPs are recognized, sec.



       -  TKYON2 = Time delay before Keyon Updates are permitted, sec.



       -  TKYON3 = Maximum time keyon updates are allowed, sec.



       -  TKYON4 = Time delay before resetting BPKFLG, sec.



       -  TPDLTA = Minimum TP change for Tip-Out. Range 0 to 1023.



       -  TSTALL = Elapsed time necessary to indicate a stall,

                   msec. 



       -  VBPMAX = Maximum time since last BP update, secs.



       -  VCAL = Calibration constant; the value is normally

                 2.5 volts; this value can be changed on VECTOR

                 to satisfy the requirements of certain processors.







      OUTPUTS



      Registers:



       -  ACT = Air charge temperature.



       -  AELOAD = Filtered LOAD for manifold filling effect.



       -  AM = Air Mass Flow, lbm/min.



       -  AMINT = Integrated Air Mass flow (lbm).



       -  ARCHG = Air Charge Mass inducted per Intake Stroke,

                   lbm/Intake.



       -  ARCHCOR = Backflow correction for Mass Air Meter.



       -  ARCHI = Air Charge (lbm/intake), foreground corrected integrated value.



       -  BAPBAR = Rolling average of barometric pressure sensor

                   values.



       -  BAPCNT = BAP transition counter.



       -  BP = Barometric pressure value stored in volatile RAM.



       -  BPKFLG = Update enable flag for key on updates, unitless.



       -  ECT = Coolant temperature, deg F.



       -  EPTBAR = Rolling average EPT Transducer.



       -  EPTZER = EPT sensor value at idle.









                                         19-8


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  EVP = EGR valve position, counts.



       -  FAM = Filtered air mass.



       -  FAMREG = 0; not in FAM region.

                  128; in FAM region, AM = N * ENGCYL * ARCHG

                  255; in FAM region, AM = FAM



       -  IBAP = Instantaneous BP sensor reading (FN000)



       -  IEPT = EPT sensor data for PFE EGR.



       -  INTM = Delta time between Air Meter Samples, sec.

                = current Sample time - Last Sample time.



       -  LST_IACC = Last ACC/NDS input.



       -  MAF_TIME = OUTINT  1 time for MAF fuel.



       -  MINTIM1 = Last SCAP edge prior to the background

                  calculation of BAP.



       -  MINTIM2 = Last SCAP edge prior to the previous SCAP

                    edge prior to the background loop calculation

                    of BAP.



       -  MPH = Rolling average Vehicle Speed.



       -  MPHCNT = MPH sensor transition count.



       -  MPHTIM1 = Last MPH transition time.



       -  MPHTIM2 = First MPH transition time.



       -  NBAR = Rolling average RPM.



       -  NDBAR = Filtered Engine Speed.



       -  RATCH = Kicker off lowest filtered TP.



       -  RAWAIRCHG = Raw Air charge from the air mass

                      integration.



       -  TAR = Throttle Angle Rate of change.



       -  TPBAR = Rolling average Throttle Angl.



       -  VBAT = Battery Voltage.



       -  VMAF = Corrected Air Meter Voltage (volts).

                 VMAF = (IMAF/IVCAL + MAFK2) * MAFCON



       -  VSBAR = Filtered Vehicle Speed.



       -  VSCCS = Debounced IVSCCS.



      Bit Flags:







                                         19-9


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





       -  A3C = A/C Flag, 1 = ACC on.



       -  BIFLG = Brake on.



       -  BPUFLG = Keyon update flag in RAM, unitless.



       -  DNDSUP = Drive/Neutral Select.



       -  EGOFL1 = Rich EGO-1 Flag.



       -  EGOFL2 = Rich EGO-2 Flag.



       -  INDFLG = AXOD Instantaneous N/D Flag.



       -  KNOCK_OCCURRED = Flag set to 1 (in the Knock Interrupt

               routine), if knock occurred in current or last PIP

               period.



       -  NDSFLG = Neutral/Drive Flag 1 = Drive.



       -  POWSFG = Power Steering Flag.



       -  PTPFLG = PIP occurred after 50 msec.



       -  REFFLG = 1 when in idle air flow region.







































































                                        19-10


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   MULTIPLEXED ACC_NDS INPUT - (Analog Input)



      The ACC input reflects the state of the A/C Cycling Switch.  As a multiplexed

      input,  however, the logic also includes setting of the Neutral Drive Switch.

      This switch reflects the change in transmission states  (i.e.,  neutral/park,

      drive/in  gear).  Automatic transmissions use a Neutral/Drive switch from the

      transmission; Manuals use a clutch switch,  gear  switch  or  no  switch.   A

      clutch  or  gear  switch  is  recommended  for  manuals.  Among its many uses

      (primarily fuel control), it is most heavily used in controlling Idle  Speed.

      The  output  sets a flag (NDSFLG) equal to one if the transmission is in gear

      (or drive) and equal to zero if the transmission is in neutral.



      A diagram follows the logic set forth below which  explains  the  "steps"  or

      settings.



      |IACC_NDS - LST_IACC| > 10 ----------| Could be NOISE

                                           | DO NOT UPDATE A3C

                                           |  or NDS

                                           | LST_IACC = IACC_NDS

                                           |

                                           | --- ELSE ---

                                           |

      IACC_NDS >OR= 952 -------------------| Neutral/Drive input is high 

                                           |  A/C OFF

                                           | INDFLG = 1

                                           | A3C = 0

                                           | LST_IACC = IACC_NDS

                                           |

                                           | --- ELSE ---

                                           |

      IACC_NDS >OR= 556 -------------------| Neutral/Drive input is low

                                           |  A/C OFF

                                           | INDFLG = 0

                                           | A3C = 0

                                           | LAST_IACC = IACC_NDS

                                           |

                                           | --- ELSE ---

                                           |

      IACC_NDS >OR= 412 -------------------| Neutral/Drive input is high 

                                           |  A/C ON

                                           | INDFLG = 1

                                           | A3C = 1

                                           | LST_IACC = IACC_NDS

                                           |

                                           | --- ELSE ---

                                           |

                                           | Neutral/Drive input is low

                                           | A/C ON 

                                           | INDFLG = 0

                                           | A3C = 1

                                           | LST_IACC = IACC_NDS



















                                        19-11


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





      IACC_NDS                FLAG STATE

      (counts)

                            -----------------

        1023                |               |

                            |   INDFLG = 1  |

                            |   A3C = 0     |

                            |               |

         952                -----------------

                            |               |

                            |   INDFLG = 0  |

                            |   A3C = 0     |

                            |               |

         556                -----------------

                            |               |

                            |   INDFLG = 1  |

                            |   A3C = 1     |

                            |               |

         412                -----------------

                            |               |

                            |   INDFLG = 0  |

                            |   A3C = 1     |

                            |               |

           0                -----------------











































































                                        19-12


               INPUT CONVERSIONS AND FILTERS - LOAD CALCULATIONS - GUAB

                              Copyright 1989 FoMoCo





                                 LOAD CALCULATION (LOAD)





      OVERVIEW



      Air charge is normalized by dividing by Standard Air  Charge.   Standard  Air

      Charge  is  a  constant  equal  to  4.4256  *  10E-5  * (Engine Size in Cubic

      Inches/number of cylinders).





      DEFINITIONS



      INPUTS



      Registers:



       -  ARCHG = Air Charge Mass inducted per Intake Stroke, lbm/Intake.



       -  SARCHG = Standard Air Charge, lbm/Intake.







      OUTPUTS



      Registers:



       -  LOAD = Normalized load parameter, unitless.







      PROCESS





      LOAD = ARCHG/SARCHG





















































                                        19-13


               INPUT CONVERSIONS AND FILTERS - LOAD CALCULATIONS - GUAB

                              Copyright 1989 FoMoCo





                           PERCENT LOAD CALCULATION (PERLOAD)





      OVERVIEW



      PERLOAD is percent of peak load at any altitude.





      DEFINITIONS



      INPUTS



      Registers:



       -  LOAD = Normalized load parameter, unitless.



       -  N = Revolutions per minute.



       -  BP = Barometric Pressure, in Hg.



      Calibration Constants:



       -  FN035(N) = Peak load at sea level as a function of RPM.







      OUTPUTS



      Registers:



       -  peak_load_sl = Output of FN035(N), temporary register.



       -  PERLOAD = Percent of peak load at any altitude.



       -  PEAK_LOAD =Peak load at any altitude and RPM.







      PROCESS





      always:  PEAK_LOAD = BP/29.9 * peak_load_sl





      PRLDSW = 0 --------| PERLOAD = LOAD/PEAK_LOAD

                         |

                         | --- ELSE ---

                         |

                         | PERLOAD = LOAD























                                        19-14


                         INPUT CONVERSIONS AND FILTERS - GUAB

                              Copyright 1989 FoMoCo





   ACCEL ENRICHMENT LOAD FILTER (AELOAD)





      The AELOAD calculation is a time-dependent rolling average  filter  of  LOAD.

      It  is  used  to  sense  the  manifold filling effect during an acceleration,

      especially from Idle.  The AELOAD  time  constant  TCAELD  is  a  calibration

      constant  which  should  be  small  enough  to  prevent  a false inference of

      manifold filling after the LOAD has reached a stable value and AE fuel is  no

      longer required.





                              AELOAD = UROLAV (LOAD,TCAELD)

































































































                                        19-15


            INPUT CONVERSIONS AND FILTERS, AIR CHARGE CALCULATIONS - GUF1

                              Copyright 1989 FoMoCo





                                 AIR CHARGE CALCULATIONS





      DEFINITIONS



      INPUTS



      Registers:



       -  RAWAIRCHG = Integrated MAFS output over a PIP period.



       -  N = RPM.



      Bit Flags:



       -  IMFMFLG = Instantaneous mass air flow sensor FMEM flag.



      Calibration Constants:



       -  ARCHSW = Air charge select switch, 0 = no  filtering,  1  =  use  filling

          model.



       -  FN037 = Backflow clip.



       -  FKARCH = Manifold filling model slow filter constant.



       -  FILFRC = Fraction to select slow transient vs fast.  transient filter.



       -  FKARC1 = Fast filter constant for manifold filling.



      OUTPUTS



      Registers:



       -  ARCHG = Actual air charge.



       -  ARCHFG = Filtered air charge according to filling model.



       -  ARCHI = Instantaneous air charge.



       -  FILRC1 =  Ratio  ARCHI/ARCHFG,  background  calculation  for  calibration

          purposes.





































                                        19-16


            INPUT CONVERSIONS AND FILTERS, AIR CHARGE CALCULATIONS - GUF1

                              Copyright 1989 FoMoCo





   AIR CHARGE CALCULATION (ARCHG)





      The strategy integrates the instantaneous airflow, MAF, over each PIP period.

      To  calculate the average air charge, ARCHG, this integration is accomplished

      by summing the average MAF over a finite period of time.



      The air meter sample period starts  at  each  rising  PIP  edge.   Successive

      samples are then obtained at fixed intervals of approximately one msec.  This

      sampling continues until the next rising PIP edge occurs (at which  time  the

      final  sample  is  taken).   The  MAF sensor is described in the EEC Overview

      Chapter.



                   n = n

                   -----

                   \

      AMINT =      /     1/2*[MAF(n) + MAF(n-1) ] (Tn - T(n-1))

                   -----

                   n=1



      ARCHG = Final AMINT when integration is complete.



                                  AIRFLOW INTEGRATION SCHEME





            |<------------------ PIP PERIOD --------------------->|



            |------------------------                             |---

            PIP UP                  |                        PIP UP

            EDGE                    |                          EDGE

            |                       |                             |

        ----                        ------------------------------



                                 CORRECTED AIR METER SAMPLES

                                        MAF;(LBM/MIN)





            |       |        * * * *     |              |         |   *  |

            |   * * |* * * *   |     * * |              ************ *   |

            ** *   1|         2|        3* * * * * * * 4|/////////|      |

            |       |          |         |              |/////////|      |

            |       |          |         |              |//AREA*//|      |

            |       |          |         |              |/////////|      |

            |       |          |         |              |/////////|      |

      -------------------------------------------------------------------------

           T0      T1         T2        T3 .....      T(n-1)      Tn   T(n+1)



      MAF(n) = Instantaneous MAF at time, Tn.



      AREA* = Instantaneous integrated Air Charge.

              (AREA = 1/2[MAF(n) + MAF(n-1)]*(Tn - T(n-1) )



      At time T(n+1), the sum of the AREA*s, AMINT, is stored as RAWAIRCHG and then

      set  to  0.   Approximately  every  millisecond,  the software will do an A/D

      conversion of the MAF sensor input, calculate the instantaneous  airlow,  MAF

      and update AMINT (the instantaneous integrated aircharge).









                                        19-17


            INPUT CONVERSIONS AND FILTERS, AIR CHARGE CALCULATIONS - GUF1

                              Copyright 1989 FoMoCo





      Once every millisecond:



          VMAF = IMAF * 2.5/IVCAL                            __ volts

          INTM = DATA_TIME - MAF_TIME                        __ clock ticks

          AMINT = prev. AMINT + 1/2 * [MAF + FN036] * INTM   __ lbm

          MAF = FN036(VMAF)                                  __ lbm/clock ticks

          MAF_TIME = DATA_TIME                               __  clock ticks



      At each rising-edge of PIP, the software will do an A/D conversion of the MAF

      sensor,  calculate  the  instantaneous  airflow,  MAF,  and  store  the final

      integrated AMINT as RAWAIRCHG.



      At each rising edge of PIP, 1) Complete the integration, 2)  Start  the  next

      integration,  3)  Correct airflow for pulsations, 4) Filter the aircharge for

      manifold filling effects.



          1) VMAF = IMAF * 2.5/IVCAL                            __ volts

             INTM = DATA_TIME - MAF_TIME                        __ clock ticks

             AMINT = prev. AMINT + 1/2 * [MAF + FN036] * INTM   __ lbm

             MAF = FN036(VMAF)                                  __ lbm/clock ticks

             MAF_TIME = DATA_TIME                               __ clock ticks

             RAWAIRCHG = AMINT                                  __ lbm/intake

          2) AMINT = 0                                          __ lbm





      3) During low engine speed operation, intake  pressure  pulsing  may  produce

      backflow  through  the air meter.  Backflow is misinterpreted as positive air

      flow by the MAF sensor, which inflates  the  air  mass  values.   To  prevent

      erroneous  ARCHI  calculations  due  to backflow, the strategy clips ARCHI to

      AIR37 as a maximum value.



      In the foreground at the PIP interrupt at  the  completion  of  the  airmeter

      integration, and perform the following:



      RAWAIRCHG * ARCHCOR 

      + ARCHLI <OR=  AIR37  -----------------------| ARCHI = RAWAIRCHG * ARCHCOR

                                                   |          + ARCHLI

                                                   |

                                                   | ---- ELSE ----

                                                   |

                                                   | ARCHI = AIR37







































                                        19-18


            INPUT CONVERSIONS AND FILTERS, AIR CHARGE CALCULATIONS - GUF1

                              Copyright 1989 FoMoCo





      In background, evaluate FN037, where the input is N (engine speed) and

      the output is AIR37.



      AIR37 = FN037(N)



      In background, look up the airflow correction for pulsation:



      ARCHCOR = FN1035(N,LOAD)



      In  background,  calculate  the  aircharge   offset   for   leakage,   ARCHLI

      (lbm/intake).   The  calibration  constant,  ARCHLK  (lbm/min),  includes all

      leakage terms not measured by the air flow meter  (such  as  PCV,  CANP,  EVR

      solenoid, etc.) Typical calibration value is 0.15 lbm/min for 5.0L.



      ARCHLI (lbm/intake) = ARCHLK (lbm/min) / N * ENGCYL



























































































                                        19-19


             INPUT CONVERSIONS AND FILTERS, MANIFOLD FILLING MODEL - GUF1

                              Copyright 1989 FoMoCo





                                 MANIFOLD FILLING MODEL





      OVERVIEW





           Because of the delays associated  with  manifold  filling,  the  airflow

      through  a  meter mounted up- stream of the throttle body is not equal to the

      port airflow on an instantaneous basis.  This leads to fueling errors  during

      transients.   To  compensate  for  these  errors,  a  filtering algorithm was

      developed.



      When the throttle body airflow changes slowly, the filling filter constant is

      proportional   to   engine   displacement/manifold   volume   and  volumetric

      efficiency.  A close approximation is an air charge filter constant,  FKARCH,

      that  is proportional to (VEFF) * (engine displacement/manifold volume)/ (2 *

      ENGCYL).



      During a fast tip-in the air charge can be approximated by a different filter

      constant.   The  constant,  FKARC1  is proportional to 1/2 * (VEFF) * (engine

      displacement/manifold volume)/ENGCYL, however the  volumetric  efficiency  at

      wide open throttle is used.













































































                                        19-20


             INPUT CONVERSIONS AND FILTERS, MANIFOLD FILLING MODEL - GUF1

                              Copyright 1989 FoMoCo





      4) In the foreground at the PIP interrupt at the completion of the ARCHI clip

      (item 3 above), filter the instantaneous aircharge using the Manifold Filling

      Model:





                             FOREGROUND FILTERED AIR CHARGE

                             -------------------------------





      ARCHSW = 0  ------------------------| ARCHFG = ARCHI

       (no filter on archg)               |

                                          | ---- ELSE ----

                                          |

      ARCHI/ARCHFG <OR= FILFRC -----------| ARCHFG = (1-FKARCH) * ARCHFG + 

       (fast vs. slow transient)          |          FKARCH * ARCHI

                                          | (slow transient archg filter) 

                                          |

                                          |

                                          | --- ELSE ---

                                          |

                                          | ARCHFG = (1-FKARC1) * ARCHFG +

                                          |          FKARC1 * ARCHI





      Air charge is the air mass inducted per intake stroke.  Once  per  background

      loop, the strategy updates ARCHG to the most recent integration, ARCHFG.





          In the background calculations:



          IMFMFLG = 0 -----------| ARCHG = ARCHFG

                                 | FILRC1 = ARCHI/ARCHFG

                                 |

                                 | --- ELSE ---

                                 |

                                 | ARCHG update is calculated during

                                 | MAF sensor FMEM. See FMEM logic.

                                 | ARCHFG = ARCHG



      Note: ARCHG update can be inhibited during MAF sensor FMEM. See FMEM logic.









































                                        19-21


             INPUT CONVERSIONS AND FILTERS, MANIFOLD FILLING MODEL - GUF1

                              Copyright 1989 FoMoCo





                                  CALIBRATION EXAMPLES:

                                ------------------------





      Slow filter:



      FKARCH ~ (VEFF) * (engine displacement/manifold volume)/(2 * ENGCYL)

                                                    

               



              Assume:

                      ENGCYL    = 3

                      VEFF      ~ 0.60

                      eng.disp. = 231 in.3 (3.8L super charge)

                      man.vol.  = 1200 in.3 (    "    )

                      FKARCH    = (0.6)*(231/1200) / 2*3

                                = 0.019

              Note:

                      As the manifold volume gets smaller the ratio, 

                      engine displacement/manifold volume gets larger 

                      and the 'slow' filter becomes very fast.





      Fast filter:



      FKARC1 ~ (VEFF) * (engine displacement/manifold volume)/(2 * ENGCYL)

              



              Assume:

                      VEFF      = 0.80   (wide open throttle)

                      FKARC1    = (0.80)*(231/1200)/2*3

                      FKARC1    = 0.026

























































                                        19-22


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   AIR CHARGE TEMPERATURE SENSOR (ACT)





      FN703A (IACT) is the transfer function for the air charge temperature sensor.

      It converts from raw A/D counts to degrees F. IACT is the raw A/D counts

      from the ACT sensor.







   Air Mass (AM)

      Determine Air Mass (AM) value:





      REFFLG = 0 ---------------| AM = (N * ENGCYL * ARCHG)

                                |

                                | --- ELSE ---

                                |

      FAM_FLG = 1 --------------| AM = FAM

                                | where:

                                |    MINAM <OR= AM <OR=

                                |        (N * ENGCYL * ARCHG * MAXFAM)

                                |

                                | --- ELSE ---

                                |

                                | AM = (N * ENGCYL * ARCHG)

                                | where:

                                |    MINAM <OR= AM



































































                                        19-23


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   BAROMETRIC PRESSURE





      The barometric pressure will be read  with  a  sensor,  or  alternatively,  a

      constant  value  will  be  used  (KONBP).   A  calibration  switch is used to

      indicate that a sensor is to be read.





      BPSSW = 1 ---------------------------| BP = BAPBAR

                                           |

                                           | --- ELSE ---

                                           |

                                           | BP = KONBP







   BAROMETRIC PRESSURE FILTER (BAPBAR)





      The  BAPBAR  calculation  is  a  time-dependent  rolling  average  filter  of

      Barometric  pressure  BAP.   The BAPBAR time constant TCBBAR is a calibration

      constant.





                              BAPBAR = UROLAV (IBAP,TCBBAR)





      See BP FMEM logic in the FMEM chapter.

































































                                        19-24


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   INSTANTANEOUS BAROMETRIC PRESSURE (IBAP) (BPSSW = 1)





      The BAP calculation is a conversion of the SCAP (Digital BAP)  sensor  period

      into  the  corresponding barometric pressure.  BAP is updated each background

      loop, using the largest even number of SCAP transitions which  have  occurred

      since the last update.  The following parameters have been redefined but have

      an equivalent in MX strategy.





          GX                         MX

          --------------------------------------------------

          IBAP                      MAP

          BAPCNT                    MAPCNT

          BAPCNTFLG                 MAPCNTFLG

          BAPTMR                    MAPTMR

          VBPMAX                    VMPMAX

          BAPBAR                    MAPBAR





      Upon each SCAP transition:



      SCAP TRANSITION -----------------| Set BAPCNT = BAPCNT + 1

                                       | Set MINTIM1 = Time of Scap 

                                       |  Transition

                                       | Set MDELTA = Time since last

                                       |  transition





      If the BP sensor was detected faulty, reset the counters:



      BAPTMR > VBPMAX -----|           | Set BAPCNT = 0

                           |OR --------| Set MINTIM2 = Clock

      MDELTA < VBPDL1 -----|





      When BAP update is required:



      BAPCNT is odd ------------------| Set BAPCNT = BAPCNT - 1

                                      | Set MINTIM1 = MINTIM1 - MDELTA

                                      | Set BAPCNTFLG = 1





      BAPCNT NOT= 0 -------------------| Set IBAP = FN000 (BAPCNT/2*

                                       |    (MINTIM1 - MINTIM2))

                                       | Set MINTIM2 = MINTIM1

                                       | Set BAPCNT = 0





      BAPCNTFLG = 1 -------------------| Set BAPCNT = 1

                                       | Set BAPCNTFLG = 0







      BAPTMR is a free-running timer which is set to zero after a SCAP

      transition, during the background routines. See timer chapter.









                                        19-25


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   BATTERY VOLTAGE FILTER (VBAT)





      The  VBAT  calculation  is  a  time-dependent  rolling  average   filter   of

      instantaneous  battery  voltage.   The  VBAT  time  constant  TCVBAT is not a

      calibration constant and is set to produce a 0.1  second  VBAT  average  time

      constant.





                              VBAT = UROLAV (VBAT',TCVBAT)



      Instantaneous Battery Voltage is calculated from:



                            VBAT' = IIVPWR * VCAL * KSF/IVCAL







   BOO - BRAKE ON/OFF (Digital input)





      This input is the voltage of the vehicle brake and stop lamp  circuitry.   If

      the  Brake  input hardware is present, a flag named BIHP is set to 1.  If the

      switch is not present in the system, then BIHP ijs set to 0.





      BIHP = 1 ---------------------|

                                    |AND -----| Brake Applied

      BOO HIGH ---------------------|         | BIFLG = 1

                                              |

                                              | --- ELSE ---

                                              |

                                              | Brake Not Applied

                                              | BIFLG = 0























































                                        19-26


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   ENGINE COOLANT TEMPERATURE SENSOR (ECT)





      FN703A (IECT) is the transfer function for the ECT sensor. It converts from

      raw A/D counts to degrees F. IECT is the raw A/D counts from the ECT sensor.





   ENGINE COOLANT TEMPERATURE FILTER (ECT)





      The ECT calculation is a  time-dependent  rolling  average  of  instantaneous

      engine coolant temperature.  The ECT time constant TCECT is calibratable.





                            ECT = ROLAV (FN703A(IECT),TCECT)



























































































                                        19-27


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





      EGR POSITION FILTER (EGRBAR) (PFEHP = 0)



      The EGRBAR  calculation  is  a  time  dependent  rolling  average  filter  of

      instantaneous  EGR  valve  position  EVP.  It is updated each background pass

      while in RUN or UNDERSPEED  mode.   The  EGRBAR  time  constant  TCEGR  is  a

      calibration parameter.



                             EGRBAR = UROLAV (EVP,TCEGR)







   EGR POSITION RATCHET (E0FF)  (PFEHP = 0)



      The lowest filtered EGR position EOFF is controlled by the following logic:



      EGRBAR < EOFF -------------|

                                 |

      CRKFLG = 0 ----------------|AND ---| SET EOFF = EGRBAR

       (RUN or UNDERSPEED mode)  |

                                 |

      APT = -1 ------------------|

       (closed throttle mode)













































































                                        19-28


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   IDLE DOWNSTREAM PRESSURE (EPTZER) LOGIC





      CRKFLG = 1 --------------------| EPTBAR = EPTZER

                                     |

                                     | --- ELSE ---

                                     |

      APT = -1 ---------------|      | Idle EPTZER Update

                              |      | 

      N <OR= DSDRPM + IERPMH -|      | EPTZER = 

                              |AND --|        ROLAV (IEPT,TCEPT)

      EPTSW = 1 --------------|      | 

                              |      | 

      ECT >OR= CTEHI ---------|      | --- ELSE ---

                                     | 

                                     | EPTBAR = 

                                     |        ROLAV (IEPT,TCEPT)

                                     |

                                     | No Update to EPTZER





                            KEY ON EPTZER UPDATE (PFEHP = 1)





      EPTZER is a KAM register.  Conditions for EPTZER update are similar to  those

      for  Inferred  BP.   The  same  enabling logic may be used.  BPUFLG is the BP

      update enable flag.





      BPUFLG = 0 -------------|

        (Power reset may      |

         have occurred)       |

                              |

      PTPFLG = 1 -------------|OR ------| Do NOT Update

        (PIP Occurred)        |         |  EPTZER

                              |         |

      PUTMR < TKYON2 ---------|         |

        (Too soon to update)  |         | --- ELSE ---

                              |         |

      PUTMR > TKYON3 ---------|         |

        (Too late to update)            | Conditions are

                                        |  appropriate for update

                                        |  

      IEPT > VEPTLL -----------|        | EPTZER = 

                               |AND ----|        ROLAV (IEPT+IDLDEL,TCEPT)

      IEPT < VEPTHL -----------|        | 

                                        | --- ELSE ---

                                        |

                                        | Sensor out of range

                                        | Initialize EPTZER

                                        | EPTZER = 650



















                                        19-29


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





      GX does not have Inferred BP, therefore, the  following  logic  needs  to  be

      defined for GX.







      PUTMR < TKYON1 --------------| Ignore any PIPs; probably

                                   |   due to noise transients

                                   | PTPFLG = 0





      PUTMR < TKYON1 --------------|

                                   |AND ---| Allow Key On updates

      KAM_ERROR = 1 ----|          |       | BPUFLG = 1

                        |OR -------|

      BPKFLG = 0 -------|

       (Not a reset)





      PUTMR > TKYON2 --------------|

                                   |AND ---| Begin ECTCNT for TCSTRT

      ECTCNT = 0 ------------------|       | Calculation

                                           | TCSTRT = Arithmetic average

                                           | of the first 8 consecutive

                                           | ECT readings (ECTCNT is the counter)





      UNDSP = 0 -------------------|

        (RUN Mode)                 |AND ---| Enable Key On updates

                                   |       | for next startup

      ATMR1 > TKYON4 --------------|       |  

                                           | BPKFLG = 0







   EVP - EGR VALVE POSITION SENSOR (PFEHP = 1)

            (Analog Sensor)





      The EVP sensor provides a signal proportional to the valve  position.   As  a

      rule  of  thumb, pintle position (percent of Full Travel) is equal to (IEVP -

      EOFF)*0.14.



      The strategy converts pintle position (counts) into EGR mass  flow  (EM),  in

      the EGR strategy.

































                                        19-30


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   HEGO - HEATED EXHAUST GAS OXYGEN SENSOR (Analog Input)





      The HEGO sensor is a modified (it is connected to a power and a ground  wire)

      EGO  sensor  and  provides  the  same functions as the EGO.  The modification

      allows  it  to  heat  up  more  quickly  than  the  unmodified   EGO   sensor

      (approximately  18  seconds  versus  80  seconds),  thus providing an earlier

      Closed Loop operation on a cold start.  This modification also allows  it  to

      operate   at  cooler  locations  in  the  exhaust  system  providing  greater

      flexibility in sensor packaging.   Associated  with  this  property  is  more

      accurate  sampling  of  the exhaust when the HEGO may be placed closer to the

      catalytic converter.



      There is a slightly longer  transport  delay  between  EGO  switch  and  fuel

      injection  changes which may cause a longer "tracking" effect, but the bottom

      line is the ability to elicit a more even and accurate sampling.



      Additionally, the more stable sensor temperature of the HEGO is known to keep

      contaminants  away  from  the sensor, reducing degradation of the sensor over

      50K miles.  It also avoids the EGO cool-down during Idle  which  occurs  with

      the normal EGO.





      IEGOn > 855 ------------------| HEGO is Lean

                                    | EGOFLn = 0

                                    |

                                    | --- ELSE ---

                                    |

                                    | HEGO is Rich

                                    | EGOFLn = 1





      NOTE:  The A/D conversion of the "HEGO" is inverse to the analog signal  (low

      signal  translates  to  high  counts).   Low  Oxygen  level = Rich gas = High

      voltage (approximately 1.0 volt); High Oxygen level = Lean gas = Low  voltage

      (approximately 0.0 volt).

















































                                        19-31


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   KS - KNOCK SENSOR

           (Digital Input)





      KS is an accelerometer tuned to measure engine vibration over a range within

      which knock typically occurs.  KS is mounted on a strategic location of the

      engine structure. The following logic is checked every PIP up-edge BEFORE

      calculating the SPOUT.







                                  KNOCK DETECTION LOGIC





      KNOCK_DETECTED = 1 ---------|

                                  |AND ---| Set KNOCK_OCCURRED = 1

      KNK_HIGH = 1 ---------------|       |

        (KI currently indicating          | --- ELSE ---

         knock)                           |

                                          |

      KNOCK_DETECTED = 1 ---------|       | KNOCK_OCCURRED = 1

                                  |AND ---| KNOCK_DETECTED = 0

      KNK_HIGH = 0 ---------------|       |

        (KI currently indicating          | --- ELSE ---

         NO knock)                        |

                                          | KNOCK_OCCURRED = 0







   MNPIPn - PIP FILTER





      The PIP filter ignores PIP transitions which occur at a higher rate than the

      maximum possible engine RPM. (The maximum possible engine RPM is generally

      assumed to be the RPM at which the valves begin to "float".)





      MNPIPn = 60/(ENGCYL*"MAXRPM") * "Clock Freq"/36





          n = 4 for a 4-cylinder engine  MNPIP4 = 1923 at 15 MHz

          n = 6 for a 6-cylinder engine  MNPIP6 = 1282 at 15 MHz

          n = 8 for a 8-cylinder engine  MNPIP8 =  961 at 15 MHz





      NOTE:  MNPIP should correspond to an RPM which is greater than the  speed  at

      which  the  strategy turns off the Fuel (Speed Limiter).  The base values are

      equivalent to 6500 RPM.

























                                        19-32


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   ENGINE SPEED CALCULATION (N and N_BYTE)





      The  engine  speed  calculation  converts  the  PIP  period   (time   between

      consecutive  PIP signals) into the equivalent engine speed (N) in revolutions

      per minute (RPM).  The calculation is done each background loop.





      N_BYTE = N = 30/PIP PERIOD      (4-cylinder, ENGCYL = 2)



      N_BYTE = N = 20/PIP PERIOD      (6-cylinder, ENGCYL = 3)



      N_BYTE = N = 15/PIP PERIOD      (8-cylinder, ENGCYL = 4)





      NOTE:





      1) If the PIP period becomes >OR= TSTALL, N and N_BYTE are set to zero.  This

      insures  that  if  the  PIP signal goes away because of a stall, N and N_BYTE

      will become zero to trigger CRANK mode.



      2) A comparison of N and N_BYTE is shown below:





                                    N              N_BYTE

      ---------------------------------------------------------------

      Precision:             double (word)        single (byte)

      Range:                 0 to 7000+           0 to 4080

      Resolution:            .25                  16

      Units:                 RPM                  RPM

      Initial Value:         0                    0

























































                                        19-33


                         INPUT CONVERSIONS AND FILTERS - GUF1

                              Copyright 1989 FoMoCo





   ENGINE SPEED FILTER (NBAR)





      The  NBAR  calculation  is  a  time-dependent  rolling  average   filter   of

      instantaneous  engine  speed  N.  It is updated each background pass while in

      RUN or UNDERSPEED mode.  The NBAR time constant TCN is calibratable.





                                  NBAR = UROLAV (N,TCN)







   ENGINE SPEED FILTER (NDBAR)



      The  NDBAR  calculation  is  a  time  dependent  rolling  average  filter  of

      instantaneous  engine  speed  N.  It is updated each background pass while in

      RUN or UNDERSPEED mode.  The NDBAR time  constant  TCNDBR  is  a  calibration

      parameter.





                                NDBAR = UROLAV (N,TCNDBR)















































































                                        19-34


        INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC - GUA0

                              Copyright 1989 FoMoCo





                         INDS INPUT - NEUTRAL/DRIVE SWITCH INPUT





      OVERVIEW





      This input  reflects  the  applied  transmission  load  to  the  engine,  ie.

      neutral/park, drive/in gear.



           -  Manual transmissons can  be  configurated  with  a  clutch  and  gear

              switch,  a clutch switch only, a gear switch only, or neither switch.

              The input therefore can be used to determine a neutral  state  (trans

              in  neutral  or  clutch  depressed) versus in gear state.  If neither

              clutch or gear switch is used, the 5 volt module pull up provides  an

              "in  gear"  indication which can be overridden by proper selection of

              the TRLOAD software switch.  (Set TRLOAD = 0).



           -  Non-electronic automatic transmissions typically  have  a  two  state

              switch  which  indicates  neutral or drive.  All transmissions except

              the AXOD use a mechanical switch connected to  the  gearshift  lever.

              Drive  is  indicated  by a 5 volt signal, neutral is indicated by a 0

              volt  signal.   AXOD  are  unique  in  that  instead   of   using   a

              Neutral/Drive  switch, the AXOD uses a Neutral Pressure switch.  This

              is a hydraulic switch which senses hydraulic pressure in the  forward

              clutch.   The  voltage  indicated  by  the  NPS  is  opposite to that

              indicated by the NDS.  Drive is indicated by 0 volts and  neutral  is

              indicated  by 5 volts (except in overdrive).  The NPS must be used in

              conjunction with the two other transmission hydraulic  switches  (THS

              2/3  and  THS  3/4)  to properly decode neutral, forward, and reverse

              states.



           -  Electronic automatic transmissions typically use a 6  position  PRNDL

              sensor  to determine the operator selected gear.  The PRNDL sensor is

              a ratiometric sensor with six  discrete  resistors  in  series.   The

              sensor  is  decoded  by looking at the differing voltages produced by

              each of the PRNDL positions.







          The engine control strategy typically requires information on the current

          state  of  engine  loading.  This is priovided by NDSFLG.  If NDSFLG = 1,

          the engine is loaded (trans.  in gear or in drive).  If NDSFLG =  0,  the

          engine is unloaded (trans.  in neutral or clutch depressed).  DNDSUP, the

          delayed neutral/drive flag  contains  exactly  the  same  information  as

          NDSFLG  except  that  it  is  delayed (see FN394 F/R, NDDTIM, etc.) in an

          attempt to match PRNDL movement with actual application  of  transmission

          load.  (Manual transmission automatically get a 0 delay time).



          NDSFLG or DNDSUP are typically used in idle speed control mode select and

          air flow computations, fuel enrichment on auto transmission neutral/drive

          transitions, adaptive fuel, decel fuel shutoff and vehicle speed  control

          (as well as VIP).

















                                        19-35


        INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC - GUA0

                              Copyright 1989 FoMoCo





          DEFINITIONS



          INPUTS



          Registers:



           -  INDS  =  IACC_NDS  =  Raw  input  from  A/D  in  counts.    Indicated

              transmission state.



           -  NDDTIM = Timer which tracks time  since  Neutral/Drive  switch  state

              change, sec.



          Bit Flags:



           -  INDFLG = Instantaneous Neutral/Drive flag.



           -  NDSFLG = For automatic transmissions:  1 = PRNDL indicates in gear, 0

              = PRNDL indicates neutral.  For manual transmissions:  1 = clutch out

              and/or transmission in gear, 0 = clutch  in  and/or  transmission  in

              neutral.



          Calibration Constants:



           -  FN394F(ECT) = Time delay before transmission engages - forward gear.



           -  NDDELT = Time delay before N/D to D/N switch registers in DNDSUP.



           -  

              TRLOAD = Transmission Load switch.

                       0 = Manual Transmission, no clutch or gear switches,

                           forced neutral state (NDSFLG = 0).

                       1 = Manual Transmission, no clutch or gear switch.

                       2 = Manual Transmission, one clutch or gear switch.

                       3 = Manual Transmission, both clutch and gear switches.

                       4 = Auto Transmission, non-electronic, neutral drive switch.

                       5 = Auto Transmission, non-electronic, neutral pressure

                           switch, (AXOD).

                       6 = Auto Transmission, electronic, PRNDL sensor - park,

                           reverse, neutral, overdrive, manual 1, manual 2.







          OUTPUTS



          Bit Flags:



           -  

              DNDSUP  =  Delayed   neutral   drive   indication.    For   automatic

              transmissions:   1  = transmission is in gear, 0 = transmission is in

              neutral.  For manual transmissions:  DNDSUP = 0.



           -  NDSFLG = For automatic transmissions:  1 = PRNDL indicates in gear, 0

              = PRNDL indicates neutral.  For manual transmissions:  1 = clutch out

              and/or transmission in gear, 0 = clutch  in  and/or  transmission  in

              neutral.











                                        19-36


        INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC - GUA0

                              Copyright 1989 FoMoCo





          PROCESS



          NDSFLG - INSTANTANEOUS (NON-DELAYED) TRANSMISSION STATE





          INDFLG = 0 ------------|

                                 |OR ---| Set NDSFLG = 0

          TRLOAD = 0 ------------|      |  (neutral state)

           (forced neutral)             |

                                        | (Zero NDDTIM timer on

                                        |  the transition)

                                        |

                                        | --- ELSE ---

                                        |

                                        | Set NDSFLG = 1

                                        |  (drive/loaded state)

                                        |

                                        | (Zero NDDTIM timer on

                                        |  the transition)



















































































                                        19-37


        INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC - GUA0

                              Copyright 1989 FoMoCo





       DNDSUP FLAG LOGIC





          The DNDSUP flag is used to delay  the  strategy  response  to  a  "PRNDL"

          change  until  the  transmission actually shifts.  The transmission shift

          response is inferred using a time delay since the PRNDL change.





          NDDTIM >OR= NDDELT ----------| DNDSUP = NDSFLG

                                       |

                                       | --- ELSE ---

                                       |

                                       | No Change to

                                       | DNDSUP





       DNDSUP - DELAYED TRANSMISSION STATE





          Neutral Indication --------------|

           (NDSFLG = 0)                    |AND ---|

                                           |       |

          Transmission Disengaged --|      |       |

           (NDDTIM >OR= NDDELT)     |OR ---|       |

                                    |              |OR --| Set DNDSUP = NDSFLG

          TRLOAD <OR= 3 ------------|              |     |  (Update delayed

           (Manual Transmission)                   |     |   Neutral/Drive flag)

                                                   |

          Drive Indication ----------------|       |

           (NDSFLG = 1)                    |AND ---|

                                           |       

          Transmission Engaged -----|      |       

           (NDDTIM >OR= FN394F)     |      |

                                    |OR ---|

          TRLOAD <OR= 3 ------------|

           (Manual Transmission)





          Automatic Transmission:



          DNDSUP delays strategy recognition of  a  transmission  shift  until  the

          transmission  actually  engages or disengages (regardless of the state of

          the gear switch (or pressure switch) inputs).  The time delay, FN394F  is

          dependant  upon the type of transmission used.  Therefore, calibration of

          these functions should be coordinated with the  appropriate  transmission

          development activity.



          Manual Transmission





               If TRLOAD = 0, NDSFLG is forced to 0, therefore DNDSUP is always  0.

          If  TRLOAD  is  1,2  or 3, DNDSUP will follow the state of NDSFLG with no

          time delay.















                                        19-38


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   PIP - PROFILE IGNITION PICKUP (Digital Input)





      The PIP Sensor is the Hall Effect Sensor.  The Hall Effect Sensor  outputs  a

      square wave pulse producing one profile pulse of the narrow band of the cycle

      being sampled.  A discrepancy exists between the Hall Effect Sensor  and  PIP

      since  PIP  is  not precisely a 50 percent duty cycle.  The software has been

      designed to accomodate this difference providing greater accuracy by  use  of

      the  KAY  factor.   The  timer  which  keeps track of the time since last PIP

      (TSLPIP) functions with 0.001 second resolution.  An example of PIP's use  in

      Knock control is shown below.



                           N(RPM) = 60/(ENGCYL * "PIP PERIOD")



      "PIP PERIOD" has units of secs.

      If the PIP period (time elapsed since the last PIP signal) becomes greater 

      than or equal to TSTALL (800 msec), the engine speed RPM is set to zero. 

      This insures that if the PIP signal  goes away because of a stall, RPM

      will become zero to trigger CRANK mode.





                                PIP COUNTER CONTROL LOGIC





      CRKFLG = 1-----|

       (CRANK mode)  |AND ----| Count PIP signals as they occur.

                     |        |  (PIPCNT is the counter)

      N > NRUN ------|        | 

                              | 

                              | --- ELSE ---

                              |

                              | Stop counting PIP signals

                              | PIPCNT = 0























































                                        19-39


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





                                    PIP NOISE FILTER





               ************            *************

               *          *            *           *

               *          *            *           *

               *          *            *           *

               *          *            *           *

               *          **************           ************



               | <-------------------> |



               PIP up edge to PIP up edge

                       filter



               | <-----> |



               PIP up edge to PIP down edge

                       filter







           In the EEC-IV system, there is a method of noise blanking  to  eliminate

      some  of  the  noise that occurs on the PIP input.  There is a PIP up edge to

      PIP up edge filter.  An interval value is usually picked out of a  table  and

      is  in  the  units  of clock ticks.  The equivalent millisecond value of this

      time corresponds to some high value of engine rpm.  If a PIP up edge  follows

      a  previous  PIP up edge at an interval less than this time, then that PIP up

      edge is ignored, and treated as noise.



           The table value (TABVAL) is divided by four and is used  to  filter  the

      PIP  up  edge  to  PIP down edge interval.  If the computed time from the PIP

      down edge to the previous PIP up edge is less than (TABVAL/4), then that  PIP

      down edge is ignored.



           A typical value for  the  table  value  would  be  the  equivalent  time

      interval  for the PIP input at maximum engine rpm.  For an 8 cylinder engine,

      the value would be:  2.5 milliseconds (833 clock ticks for 12 mhz).   In  GU,

      the  calibration  values  are MNPIPn.  They are defined in this chapter where

      MNPIPn is described.









































                                        19-40


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   PSPS - POWER STEERING SWITCH (Available but NOT currently used) (Digital Input)





      PSPS is a switch which opens/closes based on the level of the power  steering

      pressure.   If  the pressure is greater than, or equal to that exerted by the

      switch the circuit is opened; if the switch is closed (PSPS is  greater  than

      pressure) then a signal is output of 0.4 Volts direct current or less.





      PSPS LOW ------------------------| No Power Steering Load

                                       | POWSFG = 1

                                       |

                                       | --- ELSE ---

                                       |

                                       | Power Steering Load

                                       | POWSFG = 0

























































































                                        19-41


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   TAR - THROTTLE ANGLE RATE

            (Analog Input)





      TAR input comes from an analog differentiator circuit which is fed by the  TP

      Sensor  (Described  below).   Units of TAR are degrees per second.  TAR is an

      important factor in controlling the amount of fuel injection  as  well  as  a

      vital  part  of  Idle  Speed  control.   Both NQ and MX provide this function

      through a hardware/software combination, while 9X uses a software TAR.





      OLDTP - TP > TPDLTA ----------| TAR = 0

                                    |

                                    | --- ELSE ---

                                    |

                                    | TAR = (655 - ITAR)/5.42







   TP - THROTTLE POSITION SENSOR

           (Analog Input)





      TP sensor is a rotary ratiometric device responding  to  the  throttle  shaft

      position  outputting  a  voltage  which  is high if the TP angle is great and

      small when the TP angle is small.  TP sensor measures a range of 0-50 degrees

      of   throttle   movement.    One  degree  of  throttle  travel  is  equal  to

      approximately 9.6 counts.







   THROTTLE POSITION FILTER (TPBAR)





      The  TPBAR  calculation  is  a  time-dependent  rolling  average  filter   of

      instantaneous  throttle  position  (TP).   It is updated each background pass

      while in  RUN  or  UNDERSPEED  mode.   The  TPBAR  time  constant,  TCTP,  is

      calibratable parameter.





                                TPBAR = UROLAV (TP,TCTP)







   THROTTLE POSITION FILTER (TBART)





      The TBART calculation, used  in  the  Knock  Strategy,  is  a  time-dependent

      rolling  average  filter  of  instantaneous  throttle  position  (TP).  It is

      updated each background pass while in RUN or UNDERSPEED mode.  The TBART time

      constant, TCTPT, is calibratable parameter.





                                TBART = UROLAV (TP,TCTPT)













                                        19-42


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   THROTTLE POSITION RATCHET (RATCH)





      The throttle position ratchet (RATCH) continuously seeks a  lower  value  for

      both  throttle  angle  breakpoints,  CLOSED  THROTTLE/PART  THROTTLE and PART

      THROTTLE/WOT, by seeking the lowest filtered  throttle  angle  (TPBAR).   The

      algorithm is not used during CRANK mode.





      CRKFLG = 0 -----------------|

                                  |         | RATCH = TPBAR

      TPBAR <OR= RATCH -----------|AND -----| 

                                  |         | --- ELSE ---

      N > 450 RPM ----------------|         |

                                            | NO CHANGE TO RATCH



























































































                                        19-43


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   VSS - VEHICLE SPEED SENSOR

            (Digital Input)





      VSS is part of the EEC system and is used also  by  the  dashboard  computer.

      VSS  is  a  digital  input  whose  frequency is proportional to vehicle speed

      (similar to relationship of PIP signal to RPM).





   VS CALCULATION



      The vehicle speed sensor signal frequency  is  proportional  to  the  vehicle

      speed.  The sensor frequency varies from 0 to 280 Hz.



                           VEHICLE SPEED = 0.45 / (VSS Period)



      The strategy updates VS once  per  background  loop  if  the  sensor  voltage

      crossed zero volts (MPHCNT > 0) during the previous background loop.



                        DURING VEHICLE SPEED SENSOR INTERRUPT:

                                  (Rising Edge Only)



                                 MPHCNT = MPHCNT + 1

                                 MPHTIM1 = Clock Time





      IF FIRST_MPH = 0 ---| MPHTIM1 = Clock Time, FIRST_MPH = 1

                          |

                          | --- ELSE ---

                          |

                          | MPHCNT = MPHCNT + 1

                          | MPHTIM1 = Clock Time





      Once per background, the following logic is executed.



      TSLMPH >OR= 255 msec -------| Set FIRST_MPH = 0

                                  | VS = 0

                                  | MPHTIM2 = MPHTIM1

                                  |

                                  | --- ELSE ---

                                  |

      MPHCNT > 0 -----------------| VS = 0.45 * MPHCNT/

                                  |  (MPHTIM1 - MPHTIM2)

                                  | MPHCNT = 0

                                  | MPHTIM2 = MPHTIM1

                                  |

                                  | --- ELSE ---

                                  |

                                  | Do NOT Update VS

                                  | MPHTIM2 = MPHTIM1



      NOTE:  The software will handle the  unit  conversion  from  clock  ticks  to

      seconds  (1  tick = 3.0*10E-6 sec, 12 MHz EEC; 1 tick = 2.4*10E-6 sec, 15 MHz

      EEC)











                                        19-44


                        INPUTS CONVERSIONS AND FILTERS - GUA0

                              Copyright 1989 FoMoCo





   VSCCS - VEHICLE SPEED CONTROL COMMAND SWITCH

              (Analog Input)



      The VSCCS is the output of a voltage divider network. The range of the VSCCS

      output is selected by the vehicle's driver by means of steering wheel-mounted

      switches. The software uses a timer to debounce the switch input. If the

      instantaneous input IVSCCS is stable, the VSCCS register is updated.





      DEBTMR >OR= DEBTIM ------|       

                               |AND ---| VSCCS = IVSCCS

      VSCHP = 1 ---------------|







   VEHICLE SPEED (MPH)





      The  MPH  calculation  is  a  time-dependent  rolling   average   filter   of

      instantaneous  vehicle  speed,  VS.   The  MPH  time  constant,  TCMPH,  is a

      calibratible parameter.



                                 MPH = UROLAV (VS,TCMPH)







   VEHICLE SPEED (VSBAR)





      VSBAR calculation is a time-dependent rolling average filter of instantaneous

      vehicle speed, VS.  The time constant, TCVS, is a calibratible parameter.



                                VSBAR = UROLAV (VS,TCVS)























































                                        19-45


            INPUTS CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - GUF0

                              Copyright 1989 FoMoCo





                         ROLLING AVERAGE ROUTINE (ROLAV/UROLAV)





      OVERVIEW



           The EEC-IV filters inputs using a rolling average routine.  This routine

      requires a time constant, a sampling rate, an old average, and a new value to

      compute the new average.  The equation is:



      NEW AVERAGE = FILTER CONSTANT * NEW VALUE + (1 - FILTER CONSTANT) *

                    OLD AVERAGE



      where FILTER CONSTANT = 1/(1 + TIME CONSTANT / SAMPLE PERIOD);  the  sampling

      period  is  the time elapsed between new calculations.  For most filters, the

      sampling period will equal the background loop time.  The time constant is  a

      function  of  the input being filtered.  When the (NEW VALUE - OLD AVERAGE) *

      FILTER CONSTANT is less than the bit  resolution  of  new  average,  the  old

      average  is incremented or decremented by 1 bit per calculation until the new

      average equals the old average.  The strategy will  specify  rolling  average

      filters using the following structure:



      Set new_avg      = (U)ROLAV(new_value,time_const)

      where new_avg    = output of rolling average filter

            ROLAV      = signed rolling average routine

            UROLAV     = unsigned rolling average routine

            new_value  = input value to filter

            time_const = time constant





      DEFINITIONS



      INPUTS



      Registers:



       -  TCxxxx = Time constant (seconds).



       -  FK_TMR = sampling period (seconds).



       -  old average = Last output from filter routine.



       -  new value = Most recent value of input to be filtered.







      OUTPUTS



      Registers:



       -  new average = Latest filtered value.





















                                        19-46


            INPUTS CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - GUF0

                              Copyright 1989 FoMoCo





      PROCESS



      FKxxxx = 1/[1 + (TCxxx/FK_TMR)]





       -1 Bit < FKxxxx * (new value - old average) < 0 -| new average = 

                                                        |  old average - 1 bit

                                                        |

                                                        | --- ELSE ---

                                                        |

      0 < FKxxxx * (new value - old average) < 1 Bit ---| new average = 

                                                        | old average  + 1 bit

                                                        |

                                                        | --- ELSE ---

                                                        |

                                                        | new average = 

                                                        |  old average +

                                                        | FKxxxx * (new value - 

                                                        |           old average)





      Note:  If (new value - old average) equals zero, 

             then new average = old average.











































































                                        19-47


            INPUTS CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - GUF0

                              Copyright 1989 FoMoCo





                      INPUT LIST FOR ROLLING AVERAGE FILTER ROUTINE



      new value          old average        FK_TMR           TCxxxx

      ---------          -----------        ------           ------



      LOAD                AELOAD            BG_TIMER         TCAELD

      BAP                 BAPBAR            BG_TIMER         TCBBAR

      FN703A(IECT)        ECT               BG_TIMER         TCECT

      IEPT+IDLDEL         EPTZER            BG_TIMER         TCEPT

      IEPT                EPTZER            BG_TIMER         TCEPT

      IEPT                EPTBAR            BG_TIMER         TCEPT

      N                   NDBAR             BG_TIMER         TCNDBR

      N                   NBAR              BG_TIMER         TCN

      TP                  TPBAR             BG_TIMER         TCTP

      VS                  VSBAR             BG_TIMER         TCVS

      FN1341              INJDLY            BG_TIMER         TCINJD

      CINTV               INJDLY            BG_TIMER         TCINJD

      INJDLY'             INJDLY            BG_TIMER         TCINJD

      FN221+EOFF          DELOPT            BG_TIMER         TCDLOP

      DP'                 DESDP             BG_TIMER         TCDP

      DSDRPM              DESNLO            BG_TIMER         TCDESN

      AM                  FAM               FFMTMR           TCFAM

      ACT                 ECT               BG_TIMER         TCECT

      IEGO                EGOBAR            BG_TIMER         TCVEGO (VIP)

      IEPT                CFIEPT            BG_TIMER         VTCEPT (VIP)

      EVP                 EGRBAR            BG_TIMER         TCEGR

      TP                  TBART             BG_TIMER         TCTPT

      VBAT'               VBAT              BG_TIMER         TCVBAT

      VS                  MPH               BG_TIMER         TCMPH

      EGRACT'             EGRACT            BG_TIMER         TCEACT

      TP                  DSTPBR            BG_TIMER         TCDASD

      TP                  DSTPBR            BG_TIMER         TCDASU

























































                                        19-48


            INPUTS CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - GUF0

                              Copyright 1989 FoMoCo





      CALIBRATION PHILOSOPHY



      1)  The values for the time constants in the base calibration were calculated

          using  the filter constants in the base calibration an assumed background

          loop time of 25 msec, and the following equation:



                time constant = [(1/filter constant) - 1] * sampling period.



          (Sample  period  approximately  equals  background  loop  time  for  most

          filters.  FAM is the exception.)



      2)  Several filter constants are currently non-calibratable.  With  this  EMR

          (8-092), the time constants for these become calibratable.  The effective

          time constants for these have been increasing  as  the  background  loops

          have increased.  This could develop into some problems in the calibration

          if the time constants were to suddenly change, so the values in the  base

          calibration  are  equal to the current effective time constant (assume 25

          msec loop time).



      3)  In previous releases the filter constant was the  calibration  parameter.

          This  gave an increasing time constant as rpm (loop time) increased.  Now

          the time constant is fixed.  All filters will act  differently  with  the

          implementation of EMR 8-092.











































































                                        19-49


            INPUTS CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - GUF0

                              Copyright 1989 FoMoCo





























































































































                                        19-50

























                                      CHAPTER 20



                                        TIMERS



































































































                                         20-1


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





                                    TIMER SUMMARY





   TIMER             DESCRIPTION

   -----             -----------



   ACBTMR            A/C Clutch Brake Timer (sec)



   ACCTMR            Time since A/C Clutch Cycled (sec)



   ACITMR            A/C Clutch Idle Turn-on 

                     Delay Msec Timer (msec)



   ACWTMR            Time since A/C WOT Mode (sec)



   ADPTMR            Adaptive fuel timer (sec)



   ATMR1             Time since start (time since exiting crank

                     mode) (sec)



   ATMR2             Time since engine coolant temperature became

                     greater than TEMPFB (sec)



   ATMR3             Time since Entering RUN Mode (sec)



   A3CTMR            Time between A3C state changes.



   BAPTMR            Time since last BP sensor interrupt (msec)



   CRKTMR            Time in CRANK Mode (sec)



   CTATMR            Closed Throttle Upstream Air Timer (sec)



   CTNTMR            Closed Throttle mode neutral timer (sec)



   CTTMR             Time at closed throttle timer (sec)



   DEBTMR            Vehicle Speed Command Switch Debounce Timer (sec)



   DLTMR             Decel fuel low load timer, sec.



   EDFTMR            Electro-Drive Fan Timer (sec)



   FFMTMR            FAM filter timer (sec)



   HLTMR             High LOAD timer (sec)



   HMTMR             Timer limiting Upstream Air (sec)



   HWTMR             Time at which A3CTMR remains below threshold.



   LESTMR1           EGO-1 lack of switching timer (sec)



   LESTMR2           EGO-2 lack of switching timer (sec)



   LUGTMR            LOM load transition timer (sec)



   MFATMR            Managed Fuel/Air timer (sec)





                                         20-2


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   MULTMR            Time since incrementing LAMMUL (msec)



   NACTMR            Time not at closed throttle (sec)



   NDDTIM            Time since neutral/drive switch state change

                     (sec)



   NWOTMR            Not at Wide Open Throttle Timer. (sec)



   PRGTMR            Canister purge accumulation timer (sec)



   PUTMR             Time since CPU power-up (msec)



   TSEGRE            Accumulated time EGR is enabled (sec)



   TSLPIP            Time since last PIP (msec)



   WCOTMR            A/C Clutch WOT Cutout Timer (sec)





















































































                                         20-3


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





                                     DEFINITIONS





      INPUTS



      Registers:



       -  APT = Throttle mode flag (-1 = closed throttle; 0 = part throttle;

                                      1 = wide open throttle)



       -  BP = Barometric absolute pressure.



       -  ECT = Engine coolant temperature, deg. F.



       -  EDF = Electro drive fan flag, if set to 0, energized.



       -  IVSCCS = A/D Conversion of the speed control command switch,

                   counts.



       -  IVSCCS_LST = Previous valid SCCS input.



       -  LOAD = Universal normalized load parameter.



       -  N = Engine speed, RPM.



       -  NDBAR = Filtered engine speed.



       -  RATCH = Lowest filtered throttle position, counts.



       -  TCSTRT = Temperature of ECT at cold start-up, deg.F.



       -  TP = Instantaneous throttle position, counts.



       -  VSCCS = Previous valid SCCS input.





















































                                         20-4


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





      Bit Flags:



       -  ACCFLG = A/C status flag (0 = A/C disabled; 1 = A/C

                   enabled).



       -  ACIFLG = Flag to indicate that idle speed control

                   system should prepare for load increase.



       -  AFMFLG = Flag indicating that ACT sensor has failed.



       -  BIFLG = Brake is on.



       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.



       -  CRKFLG = Crank flag (1 = engine in Crank mode).



       -  CTNFLG = 1 = closed throttle neutral idle.



       -  DNDSUP = Drive/Neutral select.



       -  IDLFLG = Flag indicating transmission in drive and at idle.



       -  MFAFLG = Managed Fuel Air State flag, set to 1 if MFA

                   is being used.



       -  MFMFLG = Flag indicating that MAF sensor has failed.



       -  NDSFLG = Neutral/Drive flag, 1 = Drive.



       -  SWTFLG = Managed Fuel Air State Flag.



       -  UNDSP = Underspeed flag, if set to 1 indicates Underspeed

                  mode or Crank.



       -  WMEGOL = Flag indicating Wrmego was 1 at least once.



















































                                         20-5


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





      Calibration Constants:



       -  AFECT1 = Minimum ECT for starting the Adaptive Fuel timer,

                   deg F. 



       -  AFECT2 = Overtemp ECT to zero the adaptive fuel timer.



       -  BYHTMR = Bankline timer time delay for Thermactor bypass.



       -  BYPLES = Time delay before bypass after last Ego switch.



       -  CTHIGH = Hot start minimum engine coolant temperature,

                   Deg F.



       -  CTLOW = Cold start maximum ECT, deg F.



       -  DEBAMP = Minimum change in IVSCCS to reset the debounce

                   timer.



       -  DEBTIM = Debounce time delay.



       -  DFLDH = Decel Fuel low load hysteresis.



       -  DFLDL = Decel Fuel low load shut off.



       -  FN087 = Time delay to enable A/C Clutch; maximum allowable

                  time A/C disabled at WOT. Input = TP-RATCH (A/D

                  Counts)



       -  FN125 = LOM Load function to activate LOM spark strategy.

                  Input: RPM and Output: load.



       -  FN306 = Cranking fuel pulsewidth multiplier versus

                  time in crank, sec. X-input = CRKTMR.



       -  FN880(CTNTMR) = DSDRPM adder vs. time at Idle, sec.



       -  EGRMPT = Egrate ramp time for TCSTRT <or= CTLOW, sec.



       -  HLODH = Upper LOAD Limit for Closed Loop Fuel Control,

                  unitless.



       -  IDLRPM = Maximum RPM for Closed Throttle Mode Idle, rpm.

                   Range of 0 to 7000, accuracy of 25 RPM.



       -  IDRPMH = Hysteresis for IDLRPM.

                   Range of 0 to 1000, accuracy of 25 RPM.



       -  INLRPM = Maximum RPM to increment CTHTMR.



       -  INLRPH = Hysteresis for INLRPM.



       -  LOESSW = Logic switch to reenter closed loop due to lack of

                   Ego switching open loop.



       -  LUGSW = LUGTMR logic switch.









                                         20-6


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





       -  LUGTIM = Engine load transition time, sec.



       -  MFALH = Managed fuel air state maximum Load condition.



       -  MFALHH = Hysteresis for MFALH.



       -  MFALL = Managed Fuel Air State Minimum load value.



       -  MFANLO = Managed Fuel Air State minimum RPM.



       -  MFANHH = Hysteresis for MFANHI.



       -  MFANHI = Managed Fuel Air State Maximum RPM.



       -  MFANLH = Hysteresis for MFANLO.



       -  MFASN = Managed fuel air state constant RPM entry

                  condition.



       -  MFATM1 = ATMR1 MFA enable time delay for TCSTRT <or=

                   CTLOW.



       -  MFATM2 = ATMR1 MFA enable time delay for CTLOW <

                   TCSTRT < CTHIGH.



       -  MFATM3 = ATMR1 MFA enable time delay for TCSTRT

                   >or= CTHIGH.



       -  MFATM4 = ATMR2 MFA enable time delay for TCSTRT

                   <or= CTLOW.



       -  MFATM5 = ATMR2 MFA enable time delay for CTLOW <

                   TCSTRT < CTHIGH.



       -  MPMNBP = Minimum BP for fuel economy mode; used in

                   MFATMR logic.



       -  MPNBPH = BP Hysteresis for MPMNBP in SWTFLG logic.



       -  NIHYS = Neutral Idle Hysteresis, sec. Base value is 2, range

                  is 0 to 100.



       -  NIOLD = Neutral Idle Open Loop Delay, sec. Base value is 255,

                  range is 0 to 255.



       -  SWTCNT = Managed fuel air state EGO switch requirement.



       -  TEMPFB = Minimum ECT required to start ATMR2 timer,

                   deg F.



       -  THBP4 = Minimum throttle position above RATCH for WOT 

                  A/C cut-out, counts.



       -  THBP4H = Hysteresis term for throttle position, counts.



       -  UPLOD = Minimum PERLOAD to disable Upstream Air.









                                         20-7


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





       -  UPLODH = Hysteresis term added to UPLOD to define Minimum

                   LOAD to enable Upstream Air.



       -  UPRPM2 = Maximum RPM for decel upstream air.



       -  UPRPMH = Hysteresis for INLRPM.



       -  VSMPG = Minimum Vehicle Speed to remain in MFA Mode

                 (if speed sensor is present), mph.



       -  VSMPGH = Hysteresis term for entering MFA mode.



       -  VSTYPE = Vehicle speed sensor cruise control H/W present switch;

                   0 = No vehicle speed and no cruise control,

                   1 = Vehicle speed sensor, no cruise control (VSS),

                   2 = Both vehicle speed sensor and cruise control (VSS+VSC).







      OUTPUTS



      Bit Flags:



       -  ADPTMR_FLG = Adaptive Fuel Time Flag.



       -  CTAFLG = Closed throttle decel upstream air flag.



       -  CTNFLG = 1 = closed throttle neutral idle.



       -  DMFLG = Decel fuel low load timer enabled flag, 1 = Count up timer.



       -  IDLFLG = Flag indicating transmission in drive and at idle.



       -  LEGOFG1 = Lack of EGO-1 switching.



       -  LEGOFG2 = Lack of EGO-2 switching.



       -  MFAFLG = Managed Fuel Air State flag, set to 1 if MFA

                   is being used.



       -  SWTFLG = Managed Fuel Air State Flag.







































                                         20-8


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





                                 TIMER CONTROL LOGIC







   ACBTMR - A/C CLUTCH BRAKE TIMER 

            (0.125 SEC RESOLUTION)





      BRIEF DESCRIPTION:



      The purpose of this timer is to provide a means of  controlling  the  maximum

      amount  of  time  that the A/C clutch is disabled after the brake is applied.

      NOTE:  If BRKCOT is calibrated to zero, (See  A/C  clutch  control  routine),

      this time routine has no control of the A/C clutch.





      BIFLG = 1 -----------------------| COUNT UP ACBTMR

                                       |

                                       | --- ELSE ---

                                       |

                                       | SET ACBTMR = 0















































































                                         20-9


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   ACCTMR - A/C CLUTCH TRANSITION TIMER 

            (0.125 SEC RESOLUTION)





      BRIEF DESCRIPTION:



      The purpose of this timer is to prevent rapid  cycling  of  the  A/C  output.

      ACCTMR forces the A/C state to remain static (ON or OFF) for a minimum amount

      of time, ACMNET.





      PRESENT ACCFLG = 1 -----|

      (clutch engaged)        |AND ---|

                              |       |

      PREVIOUS ACCFLG = 0 ----|       |

                                      |OR ----| SET ACCTMR = 0

      PRESENT ACCFLG = 0 -----|       |       | (any transition)

                              |AND ---|       |

      PREVIOUS ACCFLG = 1 ----|               | --- ELSE ---

                                              |

                                              | COUNT UP ACCTMR



      NOTE:  ACCTMR is initialized to maximum value.







   ACITMR - A/C CLUTCH TURN-ON DELAY TIMER 

            (MSEC RESOLUTION)





      BRIEF DESCRIPTION:



      The purpose of this timer is to provide a means of delaying  the  turn-on  of

      the  A/C  clutch while at idle in order to give the idle speed control system

      time to prepare for the impending increase in load.





      ACIFLG = 1 ---------------------| COUNT UP ACITMR

                                      |

                                      | --- ELSE ---

                                      |

                                      | SET ACITMR = 0





































                                        20-10


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   ACWTMR - A/C CLUTCH WIDE OPEN THROTTLE TIMER (SECONDS)

            (SEC RESOLUTION)





      BRIEF DESCRIPTION:



      The purpose of this timer is to provide a means of  controlling  the  maximum

      amount  of  time that the A/C clutch is disabled while at WOT.  This timer is

      used as an input to the WCOTMR logic.  NOTE:  If FN087 is calibrated to  zero

      (See  WCOTMR  routine  below),  this  timer routine has no control of the A/C

      clutch.





      TP > RATCH + THBP4 --------------|S Q-----| COUNT UP ACWTMR

                                       |        | (Clip at 254 sec max)

      TP < RATCH + THBP4 - THBP4H -----|C       |

                                                | --- ELSE ---

                                                |

                                                | SET ACWTMR = 0







   ADPTMR - ADAPTIVE FUEL ENABLE TIMER





      BRIEF DESCRIPTION:



      This timer allows Adaptive Fuel to be enabled if the Engine is  in  Run  Mode

      and  the  Engine Coolant Temperature is within a certain band.  Adaptive Fuel

      is disabled if either of these conditions is not met.



      RUN mode ------------------------|

                                       |AND-----| COUNT UP ADPTMR

      AFECT1 <OR= ECT <OR= AFECT2 -----|        | Set ADPTMR_FLG

                                                |

                                                | --- ELSE ---

                                                |

                                                | SET ADPTMR = 0

                                                | Clear ADPTMR_FLG











































                                        20-11


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   ATMR1 - TIME SINCE ENGINE START-UP





      CRKFLG = 0 ---------------------------| COUNT UP ATMR1

      (RUN or UNDERSPEED mode)              | 

                                            | --- ELSE ---

                                            |

                                            | SET ATMR1 = 0







   ATMR2 - TIME SINCE ENGINE COOLANT TEMPERATURE BECAME GREATER THAN TEMPFB





      ECT > TEMPFB --------|S  Q------------| COUNT UP ATMR2

                           |                | 

      NEVER----------------|C               | --- ELSE ---

                                            |

                                            | SET ATMR2 = 0

      (EXCEPT AT POWER-UP

       INITIALIZATION)







   ATMR3 - TIME SINCE ENTERING RUN MODE





      UNDSP = 0 -------------------------| Increment ATMR3

        (Run Mode)































































                                        20-12


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   A3CTMR - A3C TRANSITION TIMER (.001 sec)





      The A3CTMR measures the time between A3C state changes.  If the time is small

      (<250 msec), then the Heated Windshield is probably on.





      ALWAYS ----------| Increment A3CTMR





      A3CTMR is reset to 0 on any  A3C  transition  -  (LSTA3C  -  A3C  NOT=  0  in

      successive background passes).  See A/C Clutch Section.







   BAPTMR - TIME SINCE LAST BP SENSOR INTERRUPT (msec)





      BP sensor transition -----------------| Reset BAPTMR = 0

       (reset occurs in background          |

        routine. Flag is NEW_BAP)           | --- ELSE ---

                                            |

                                            | Count up







   CRKTMR - TIME IN CRANK MODE





      This timer indicates time since RPM not equal to zero, and provides  a  means

      for decreasing cranking fuel pulsewidth as a function of time (using FN306).





      N = 0 ---------------------------------| Set CRKTMR = 0

       (Engine not running                   |

        or stalled)                          | --- ELSE ---

                                             |

                                             | Increment CRKTMR













































                                        20-13


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   CTATMR - CLOSED THROTTLE UPSTREAM AIR TIMER

             (0.125 sec Resolution)





      BRIEF DESCRIPTION:



      This Timer is used to delay  Upstream  Air  after  Closed  Throttle  Mode  is

      entered during a Decel.





      APT = -1 -----------------------|          | Count Up CTATMR

                                      |AND ------| CTAFLG = 1

      N > UPRPM2 + UPRPMH ------|S Q--|          |

                                |                | --- ELSE ---

      N < UPRPM2 ---------------|C               |

                                                 | CTATMR = 0

                                                 | CTAFLG = 0







   CTNTMR - CLOSED THROTTLE NEUTRAL TIMER





      ECT > CTHIGH --------------------|

                                       |

      APT = -1 (CLOSED THROTTLE) ------|       | Count up CTNTMR

                                       |       | Clip to NIOLD + NIHYS

      NDSFLG = 0 (NEUTRAL) ------------|AND ---| Set CTNFLG = 1

                                       |       |

      N < INLRPM + FN880 --------|S Q--|       | --- ELSE ---

                                 |             |

      N > INLRPM+FN880+INLRPH ---|C            | Count down CTNTMR

                                               | Set CTNFLG = 0

                                               | Clip CTNTMR to 0







   CTTMR - TIME AT CLOSED THROTTLE





      APT = -1 (CLOSED THROTTLE mode) --------| COUNT UP CTTMR

                                              |

                                              | --- ELSE ---

                                              |

                                              | SET CTTMR = 0































                                        20-14


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   DEBTMR - VEHICLE SPEED COMMAND SWITCH DEBOUNCE TIMER

             (msec resolution)





      BRIEF DESCRIPTION:



      The debounce timer, DEBTMR, prevents the  strategy  from  treating  noise  or

      intermittents as valid switch command inputs.





      Registers:



      IVSCCS = A/D conversion of the Speed Control Command switch, counts.



      IVSCCS_LST = Previous valid SCCS input.



      DEBTMR = SCCS debounce timer, secs.





      Calibration Constant:



      DEBAMP = Minimum change in IVSCCS to reset the debounce timer.



      DEBTIM = Debounce time delay.







      |IVSCCS_LST - IVSCCS| > DEBAMP ------| SET DEBTMR = DEBTIM





      ALWAYS ------------------------------| Count down DEBTMR to zero



























































                                        20-15


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





                                       DLTMR LOGIC





      APT = -1 ---------------------|

       (Closed Throttle)            |AND ----| DMFLG = 1

                                    |        | COUNT UP DLTMR

      PERLOAD < FN320A -|S  Q ------|        |

       (Decel)          |                    | --- ELSE ---

                        |                    |

      PERLOAD > FN320A  |                    | DLTMR = 0

               + HLODH -|                    | DMFLG = 0



































































































                                        20-16


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   EDFTMR - ELECTRO-DRIVE FAN TIMER (SEC)

            (One Sec Resolution)





      This timer routine provides a means of delaying the turn-on of the high speed

      fan until after the low speed fan has been on for a minimum amount of time.





      EDF DE-ENERGIZED ------------|

        (EDF = 1)                  |OR ---| EDFTMR = 0

                                   |      |

      CRKFLG = 1 ------------------|      | --- ELSE ---

                                          |

                                          | Count Up EDFTMR







   FFMTMR - FAM FILTER TIMER (SEC)





      The FAM filter timer is a free running timer used as the  sample  period  for

      the FAM filter.  FFMTMR is reset when entering FAM region, and after each FAM

      filter update, as shown in the FAM logic at the end of the Idle Speed Control

      chapter.









































































                                        20-17


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   HLTMR - HIGH LOAD TIMER

   (0.125 sec Resolution)





      The HLTMR delays Open Loop fuel control during crowds.  Running  Closed  Loop

      fuel  during  crowds  elimiates  the  need  for  Upstream  Air  during  those

      conditions.





      PERLOAD < FN320A -------------|S Q---| HLTMR = 0

                                    |      |

      PERLOAD > FN320A + HLODH -----|C     | --- ELSE ---

                                           |

                                           | Count Up

                                           | HLTMR





   HMTMR - TIMER LIMITING UPSTREAM AIR

                  (1 sec Resolution)





      BRIEF DESCRIPTION:



      The HMTMR limits the length of time that the air is directed Upstream  during

      heavy crowds.  See Thermactor Chapter.





      PERLOAD > UPLOD + UPLODH -|S Q----| Count Up HMTMR

                                |       | Clip to 255

      PERLOAD < UPLOD ----------|       | 

                                        | --- ELSE ---

                                        | 

                                        | HMTMR = 0







   HWTMR - HEATED WINDSHIELD TIMER (.001 sec)



      The HWTMR measures the time at which A3CTMR remains below a  threshold  value

      (<OR= 300 msec).  It is used to set the heated windshield flag HWFLG.





      ALWAYS ----------| Increment HWTMR 





      HWTMR is reset to 0 if A3CTMR > 250 msec.  See A/C Clutch Section.





























                                        20-18


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   IDLFLG - IDLE WITH TRANSMISSION IN DRIVE





      DNDSUP = 1 (DRIVE) ---------------|

                                        |

      APT = -1 (CLOSED THROTTLE mode) --|

                                        |AND ---| SET IDLFLG = 1

      N < IDLRPM ---------------|S Q----|       |

                                |               | --- ELSE ---

      N > IDLRPM + IDRPMH ------|C              |

                                                | SET IDLFLG = 0







   LESTMR1 - LACK OF EGO SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)



      EGO-1 SWITCH ----------------|      | SET LESTMR1 = 0

                                   |OR ---|

      OPEN LOOP FUEL CONTROL-------|      | --- ELSE ---

                                          |

                                          | COUNT UP LESTMR1





   Additional logic associated with LESTMR1;



      LESTMR1 >OR= BYPLES ----------------| SET LEGOFG1 = 1





      LOESSW > 0 ---------------|

                                |AND ----| SET LEGOFG1 = 0

      EGO-1 SWITCH -------------|







   LESTMR2 - LACK OF EGO SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)



      EGO-2 SWITCH ----------------|     | SET LESTMR2 = 0

                                   |OR --|

      OPEN LOOP FUEL CONTROL-------|     | --- ELSE ---

                                         |

                                         | COUNT UP LESTMR2





   Additional logic associated with LESTMR2.



      LESTMR2 >OR= BYPLES -----------------| SET LEGOFG2 = 1



      LOESSW > 0 ----------------|

                                 |AND -----| SET LEGOFG2 = 0

      EGO-2 SWITCH --------------|





















                                        20-19


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   LUGTMR - LOM LOAD TRANSITION TIMER





      LOAD > FN125 -------------------|

                                      |OR ---| COUNT UP LUGTMR

      APT = 1 (WIDE OPEN THROTTLE) ---|      |  (CLIP AT LUGTIM)

                                             |

                                             | --- ELSE ---

                                             |

      LOAD <OR= FN125 ----------------|      |

                                      |AND --| SET LUGTMR = 0

      LUGSW = 1 ----------------------|      |

                                             |

                                             | --- ELSE ---

                                             |

                                             | COUNT DOWN LUGTMR

                                             | (CLIP AT 0)







   MFATMR - MANAGED FUEL AIR TIMER





      MFACTR >OR= SWTCNT -------------| SET MFAFLG = 1

                                      | COUNT UP MFATMR



      APT = 1 (WIDE OPEN THROTTLE) ---|

                                      |

      N > MFANHI + MFANHH ------------|

                                      |

      N < MFANLO - MFANLH ------------|

                                      |OR --| SET MFAFLG = 0

      PERLOAD < MFALL ----------------|     | SET MFATMR = 0

                                      |

      PERLOAD > MFALH + MFALHH -------|

                                      |

      NDSFLG = 0 (NEUTRAL) -----------|

                                      |

      MFMFLG = 1 ---------------------|

                                      |

      AFMFLG = 1 ---------------------|

                                      |

      CFMFLG = 1 ---------------------|

                                      |

      BP < MPMNBP --------------------|

                                      |

      VSBAR < VSMPG -------|          |

                           |AND ------|

      VSTYPE NOT = 0 ------|























                                        20-20


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   SWTFLG LOGIC FOR MANAGED FUEL AIR TIMER MFATMR





      "A" ------------------------------|

                                        |

      APT = 0 (PART THROTTLE) ----------|

                                        |

      CLOSED LOOP FUEL CONTROL ---------|

                                        |

      N > MFANLO -----------------------|

                                        |

      N < MFANHI -----------------------|AND ---|

                                        |       |OR --| SET SWTFLG = 1

      |N - NDBAR| < MFASN --------------|       |     | 

                                        |       |     | --- ELSE ---

      PERLOAD < MFALH ------------------|       |     |

                                        |       |     | SET SWTFLG = 0

      NDSFLG = 1 (DRIVE) ---------------|       |

                                        |       |

      BP >OR= MPMNBP + MPNBPH ----------|       |

                                        |       |

      VSBAR >OR= VSMPG + VSMPGH --|     |       |

                                  |OR --|       |

      VSTYPE = 0 -----------------|             |

                                                |

      MFAFLG = 1 -------------------------------|





   MFACTR LOGIC FOR MANAGED FUEL AIR TIMER MFATMR



      SWTFLG = 1 ------------------------| Increment MFACTR

                                         |  every EGO switch

                                         |

                                         | --- ELSE ---

                                         |

                                         | Set MFACTR = 0





   STARTUP DELAY LOGIC FOR MANAGED FUEL AIR TIMER MFATMR





      TCSTRT >OR= CTHIGH ---------|

                                  |AND ---|

      ATMR1 >OR= MFATM3 ----------|       |

                                          |

      CTLOW <TCSTRT < CTHIGH -----|       |OR --- "A"

                                  |AND ---|

      ATMR1 >OR= MFATM2 ---|      |       |

                           |AND --|       |

      ATMR2 >OR= MFATM5 ---|              |

                                          |

      TCSTRT <OR= CTLOW ----------|       |

                                  |AND ---|

      ATMR1 >OR= MFATM1 ---|      |

                           |AND --|

      ATMR2 >OR= MFATM4 ---|









                                        20-21


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   MULTMR - TIME SINCE INCREMENTING LAMMUL





      Always -------------------------------------| COUNT UP MULTMR



          (Note: MULTMR is periodically set to 0 within

           the Open Loop Fuel Logic)







   NACTMR - NOT AT CLOSED THROTTLE TIME





      APT = 0 (PART THROTTLE mode)-----|

                                       |OR ----| COUNT UP NACTMR

      APT = 1 (WIDE OPEN THROTTLE mode)|       | 

                                               | --- ELSE ---

                                               | 

                                               | SET NACTMR = 0







   NDDTIM - TIME SINCE NEUTRAL/DRIVE SWITCH STATE CHANGE





      NEUTRAL/DRIVE SWITCH STATE CHANGE ------| SET NDDTIM = 0

                                              |

                                              | --- ELSE ---

                                              |

                                              | COUNT UP NDDTIM







   NWOTMR LOGIC (NOT AT WIDE OPEN THROTTLE TIMER)





      APT = 1 ------------------------| SET NWOTMR = 0

        (Wide Open Throttle)          |

                                      | --- ELSE ---

                                      |

                                      | COUNT UP NWOTMR







   PRGTMR - CANISTER PURGE TIMER





      CANISTER PURGE OUTPUT ON --------------| COUNT UP PRGTMR

                                             |

                                             | --- ELSE ---

                                             |

                                             | FREEZE PRGTMR

















                                        20-22


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





   PUTMR - TIME SINCE CPU POWER-UP





      CPU POWER ON --------------------------------| COUNT UP PUTMR





   TSEGRE - ACCUMULATED TIME EGR IS ENABLED





      TCSTRT > CTLOW ------------| SET TSEGRE = EGRMPT ('R' = 1)

                                 |

                                 | --- ELSE ---

                                 |

      EGR ENABLED ---------------| COUNT UP TSEGRE

       (EGREN = 1)               |  (CLIP AT EGRMPT)

                                 |

                                 | --- ELSE ---

                                 |

                                 | FREEZE TSEGRE







   TSLPIP - TIME SINCE LAST PIP





      PIP INTERRUPT ---------------------------------| SET TSLPIP = 0

                                                     |

                                                     | --- ELSE ---

                                                     |

                                                     | COUNT UP TSLPIP











   WCOTMR - A/C CLUTCH WOT CUTOUT TIMER 

            (0.125 SEC RESOLUTION)





      In the calculation below, if TP - RATCH gives a  negative  value,  then  that

      result should be clipped to zero before calculating FN087.





      ACWTMR < FN087 (TP - RATCH) ---------------| SET WCOTMR = 0

                                                 |

                                                 | --- ELSE ---

                                                 |

                                                 | COUNT UP WCOTMR

























                                        20-23


                                    TIMERS - GUF1

                              Copyright 1989 FoMoCo





























































































































                                        20-24

























                                      CHAPTER 21



                               FAILURE MODE MANAGEMENT



































































































                                         21-1


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                  FAILURE MODE STRATEGY





      The Failure Mode (FMEM)  strategy  protects  vehicle  function  from  adverse

      effects  of  an EEC component failure.  The strategy recognizes open or short

      circuit failure for six sensors:  MAF, TP, ECT,  ACT  EVP/EPT,  and  BP.   In

      general,  if  the continuous Self-Test strategy recognizes a failure the FMEM

      strategy will execute  an  alternative  vehicle  strategy.   The  alternative

      strategy disables logic which relies on realistic sensor values.  Some sensor

      FMEM strategies also substitute a "safe" value for the bad sensor.  A summary

      of the alternate strategies is tabulated below.





      ------------------------------------------------------------------

                                     |           Sensors               |

      Alternate Strategy             | MAF | TP | ECT | ACT | EGR | BP |

      _______________________________|_____|____|_____|_____|_____|____|

      -------------------------------|-----|----|-----|-----|-----|----|

      SUPERCHARGE - Not Bypassed     |     | X  |     |     |     |    |

      -----------------------------------------------------------------|

      Adaptive Fuel - No Learning    |  X  | X  |  X  |  X  |     |    |

      -----------------------------------------------------------------|

      Idle Speed - Fixed Duty Cycle  |  X  | X  |     |     |     |    |

      -----------------------------------------------------------------|

      EGR - Disabled                 |  X  | X  |  X  |  X  |  X  |  X |

      -----------------------------------------------------------------|

      Thermactor Air - Bypass        |  X  | X  |  X  |  X  |     |    |

      -----------------------------------------------------------------|

      Decel Fuel Shutoff - Disable   |  X  | X  |  X  |  X  |  X  |    |

      -----------------------------------------------------------------|

      Foreground Fuel - Disable      |  X  |    |     |     |     |    |

      -----------------------------------------------------------------|

      Managed Fuel Air - Disable     |  X  |    |  X  |  X  |     |    |

      -----------------------------------------------------------------|

      ECAD - Full Speed mode         |  X  | X  |  X  |  X  |     |    |

      -----------------------------------------------------------------|

      EDF - Turn on low speed        |     |    |  X  |     |     |    |

      ------------------------------------------------------------------













































                                         21-2


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                       DEFINITIONS





      INPUTS



      Registers:



       -  ACT = Air Charge Temperature, deg F.



       -  AM = Air Mass Flow, lbm/min.



       -  APT = Part Throttle flag.



       -  ATMR1 = Time since Engine Startup, sec.



       -  BAPTMR =  Timer  indicating  time  since  last  BP  sensor  low  to  high

          transition, seconds.



       -  C22FIL =  Self-Test  Register  which  counts  the  number  of  BP  sensor

          failures, counts.



       -  C31FIL = Self-Test Register which counts the number of EVP low failures.



       -  C35FIL = Self-Test Register which counts the number of EVP high failures.



       -  C51FIL = Self-Test Register which counts the number of ECT low failures.



       -  C53FIL = Self-Test Register which counts the number of TP-High  failures.

          It  increments  by C53UP each time a failure occurs and decrements by one

          count each time the sensor data is valid.



       -  C54FIL = Self-Test Register which counts the number of ACT low failures.



       -  C61FIL = Self-Test Register which counts the number of ECT high failures.



       -  C63FIL = Self-Test Register which counts the number of  TP-Low  failures.

          It  increments  by C63UP each time a failure occurs and decrements by one

          each time the sensor data is valid.



       -  C64FIL = Self-Test Register which counts the number of ACT high failures.



       -  DEBYMA_FM = ISC airflow adder for ARCHI when Mass Air Flow  sensor  fails

          (units  are  lbma/min.   same  as  DEBYMA,  but  without  BP correction).

          DEBYMA_FM is readable in a register for use when calibrating.



       -  ECT = Engine Coolant Temperature, deg F.



       -  EOFF = The EGR valve reading when  the  valve  is  fully  closed  in  A/D

          counts.



       -  IBAP = Output of BP sensor transfer function FN000, in.  mercury.



       -  IACT = A/D conversion of ACT sensor input, counts.



       -  IECT = A/D conversion of ECT sensor, counts.



       -  IEVP = A/D conversion of EVP sensor, counts.







                                         21-3


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





       -  IMAF = Input Air Meter Reading.  A/D counts.



       -  ITP = Throttle position value from A/D conversion, counts.



       -  MDELTA = Time between BP SCAP pulses, clock ticks.  (1 clock tick  =  2.4

          usec for 15.0 MHz EEC; 1 clock tick = 3.0 usec fpr 12 MHz EEC)



       -  N = Engine RPM.



       -  RATCH = Closed throttle position, counts.



       -  TCSTRT = Temperature of ECT at cold start-up, deg F.



      Bit Flags:



       -  AFMFLG = Flag indicating that ACT sensor has failed.



       -  BFMFLG = Flag indicating that the BP sensor has failed.  1 -> failure.



       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.



       -  EFMFLG = Flag indicating that EVP EGR  sensor  has  failed.   (This  flag

          performs for both Sonic and PFE EGR.)



       -  IMFMFLG = Instantaneous mass air flow sensor FMEM flag.



       -  TFMFLG = Flag indicating that TP sensor has failed.



       -  UNDSP = Run/Underspeed Flag.  (1 = Underspeed (or Crank), 0 = Run).



       -  WMEGOL = Indicates WRMEGO was 1 at least once.



      Calibration Constants:



       -  ACTFMM = FMEM default value for ACT.



       -  ACTMAX = Maximum ACT (ACT Open), Counts.



       -  ACTMIN = Minimum ACT (ACT Shorted), Counts.



       -  BAPFMM = Default value for BP failure.



       -  C22LVL = Threshold for BP sensor failure, unitless.



       -  C31LVL = Threshold for EVP fault, unitless.



       -  C35LVL = Threshold for (PFE) EVP fault, unitless.



       -  C51LVL = Threshold for ECT Open fault, unitless.



       -  C53LVL = Threshold level for recognition of TP-High Failure.  When C53FIL

          equals (or exceeds) C53LVL, the Self-Test strategy will set an error code

          53.  NOTE:  The value of C53LVL must be equal to 254.



       -  C54LVL = Threshold for ACT Open fault, unitless.



       -  C56LVL = Threshold level for fault 56.







                                         21-4


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





       -  C61LVL = Threshold for ECT Short Fault, unitless.



       -  C63LVL = Threshold level for recognize of TP-Low  failure.   When  C63FIL

          equals  (or  exceeds)  the  Self-Test strategy will set an error code 63.

          NOTE:  The value of C63LVL must be equal to 254.



       -  C64LVL = Threshold for ACT short fault, unitless.



       -  C66LVL = Threshold level for fault 66.



       -  CTHIGH = Hot start minimum ECT, deg F.  Range of 100 to 200.



       -  ECTFMM = FMEM default value for ECT, deg F.



       -  ECTMAX = Maximum engine ECT, Counts.



       -  ECTMIN = Minimum engine ECT, Counts.



       -  EVPMAX = Maximum EGR Valve position, counts.



       -  EVPMIN = Minimum EGR Valve position, counts.



       -  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode

          strategy.



       -  FMCTTP = Change in TP  if  not  at  idle  (as  indicated  by  AM).   This

          parameter is designed to permit Part Throttle operation.



       -  FN040(N) = Default ARCHI for failed Mass Air Flow sensor AND TP sensor.



       -  FN098(ITP-RATCH) = Normalized delta TP, used for MAF sensor failure table

          lookup.



       -  

          FN1358 (FN070,FN098) = Table lookup for failed Mass Air Flow Sensor,

                                 replaces ARCHI, units lbma/PIP.

                         FN070 (N) = Normalized RPM

                         FN098 (ITP-RATCH) = Normalized delta TP.



       -  FN703 = ECT/ACT transfer function.



       -  IDLMAF = Maximum AM at Idle, lb/min.



       -  MFMHYS = Calibration for IMFMFLG background loop hysteresis, counts.



       -  OPCLT1 = ATMR1 timed delay to enter closed loop fuel  after  Cold  Start,

          sec.



       -  OPCLT2 = ATMR1 timed delay to enter closed loop fuel after medium  start,

          sec.



       -  OPCLT3 = ATMR1 timed delay to enter closed loop  fuel  after  HOT  start,

          sec.



       -  OPCLT4 = ATMR2 timed delay to enter closed loop fuel  after  Cold  Start,

          sec.









                                         21-5


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





       -  OPCLT5 = ATMR2 timed delay to enger closed loop fuel after Medium  start,

          sec.



       -  PFEHP = Switch to select EGR strategy; 0 = PFE and 1 = Sonic.



       -  RATIV = Inititializing value for RATCH, typically 250 counts.



       -  TAPMAX = Maximum valid TP value, counts.  (Calibrated by Self-Test Design

          Section)



       -  TAPMIN = Minimum valid TP value, counts.  (Calibrated by Self-Test Design

          Section)



       -  TCECT = Time constant for ECT, sec.



       -  VBPDL1 = Minimum BP sensor frequency, ticks.



       -  VBPDL2 = Maximum BP sensor frequency, ticks.



       -  VBPMAX = Maximum BP sensor period measured by BAPTMR, seconds.



       -  VMAMAX = Maximum MAF sensor reading, counts.



       -  VMAMIN = Minimum MAF sensor reading, counts.



       -  VMARPM = Maximum RPM for checking MAF sensor high limit.





































































                                         21-6


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





      OUTPUTS



      Registers:



       -  ACT = Air Charge Temperature, deg F.



       -  ARCHI = Foreground corrected air charge value.



       -  ECT = Engine Coolant Temperature, deg F.



       -  EPTZER = Rolling average of the EPT sensor at Idle, counts.



       -  EVP = EGR valve position reading in A/D counts.



       -  IMFMCTR = Provides  hysteresis  for  IMFMFLG,  background  loop  counter,

          counts.



       -  TP = Throttle position, counts.



      Bit Flags:



       -  AFMFLG = Flag indicating that ACT sensor has failed.



       -  BFMFLG = Flag indicating that the BP sensor has failed.  1 -> failure.



       -  IMFMFLG = Instantaneous mass air flow sensor FMEM flag.



       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.



       -  EFMFLG = Flag indicating that EVP EGR  sensor  has  failed.   (This  flag

          performs for both Sonic and PFE EGR.)



       -  MFMFLG = Flag indicating that MAF sensor has failed.



       -  TFMFLG = Flag indicating that TP sensor has failed.



















































                                         21-7


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                   FAILURE RECOGNITION





      The FMEM strategy checks the "Continuous Self-Test Code" Filters to ascertain

      whether  a  sensor  has  failed.   If the sensor failure lasts long enough to

      trigger a Self-Test Code, the FMEM  strategy  will  substitute  an  alternate

      value   and  strategy.   Until  the  Self-Test  filters  exceed  their  fault

      thresholds, the strategy continues to use the last known  valid  value.   The

      logic  diagram  below  describes  the  entire  Fault  recognition  and  value

      substitution strategy, in general.  However,  to  more  effectively  use  the

      Self-Test  Fault  filters, the actual logic is divided into two sections; the

      Fault Flag logic and the Sensor input process logic.   (See  Specific  Sensor

      FMEMs.)





      SENSOR >OR= SENSOR MIN ---|          | SENSOR WITHIN

                                |          |  ACCEPTABLE RANGE

      C**FIL < C**LVL - FILHYS -|          |  UPDATE SENSOR INPUT

       (sensor high fault       |          |

        filter OK)              |AND ------|  Failure Flags = 0

                                |          |

      SENSOR <OR= SENSOR MAX ---|          |

                                |          |

      C**FIL < C**LVL - FILHYS -|          | --- ELSE ---

       (sensor low fault                   |

        filter OK)                         |

                                           | SENSOR OUTSIDE

      CRANK MODE (CRKFLG = 1) -------------|  RANGE

       (Optional)                          |  SENSOR = INITIAL VALUE

                                           |

                                           | --- ELSE ---

       (Fault present for a long time)     |

                                           |

      C**FIL > C**LVL -----------|         | SENSOR OUTSIDE

       (sensor high fault)       |         |  RANGE - NOT DUE TO

                                 |OR ------|  LOW BATTERY VOLTAGE

      C**FIL > C**LVL -----------|         |  Failure Flags = 1

       (sensor low fault)                  |

                                           |  ALTERNATE STRATEGY

                                           |  SENSOR = SUBSTITUTED

                                           |    VALUE

                                           |

                                           | --- ELSE ---

                                           |

                                           | SENSOR DATA IS NOT

                                           |  RELIABLE - DO NOT

                                           |  UPDATE UNTIL CHECK

                                           |  PROVES VALUE VALID.

























                                         21-8


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                MASS AIR FLOW SENSOR FMEM

               (Performed during MAF sensor engineering units conversion)





   Check for sensor within limits:



      MFMFLG = 0 -----------------------|      

                                        |

      N >OR= VMARPM ---------|          |

                             |OR -------|

      IMAF <OR= VMAMAX ------|          |AND -----| MAF Sensor output

                                        |         | within limits

      IMAF >OR= VMAMIN -----------------|         |

                                                  | --- ELSE ---

                                                  |

                                                  | Set IMFMFLG = 1

                                                  | Set IMFMCTR = MFMHYS





   IMFMFLG and IMFMCTR logic:



      CRKFLG = 1 ---------------------------------| Set IMFMFLG = 0

       (sensor test disabled in crank mode)       | Set IMFMCTR = 0

                                                  |

                                                  | --- ELSE ---

                                                  |

      IMFMCTR = 0 --------------------------------| Set IMFMFLG = 0

                                                  |

                                                  | --- ELSE ---

                                                  |

                                                  | Decrement IMFMCTR

                                                  |  (clip to zero)



      NOTE: This logic provides a calibratible delay after the sensor

            returns in range, equal to MFMHYS - 1 background loops,

            before exiting FMEM.





   ARCHG Calculations:



      IMFMFLG = 0 --------------------------------| MAF sensor output

                                                  | within limits, use

                                                  | normal strategy.

                                                  | ARCHG = ARCHFG

                                                  |

                                                  | --- ELSE ---

   MAF Sensor out of limits, but TP sensor OK:    |

                                                  | FMEM: substitute

                                                  |       immediately

                                                  |

      TFMFLG = 0 ---------------------------------| ARCHG = [FN1358(N,TP) +

       (TP sensor OK)                             | (DEBYMA_FM / (N*ENGCYL))]

                                                  |             * BP/29.9

                                                  |

                                                  | --- ELSE ---

                                                  |

      TP sensor failed also: ---------------------| Both TP and MAF failed

                                                  | ARCHG = FN040(N)





                                         21-9


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                       FAILURE FLAG LOGIC FOR MASS AIR FLOW SENSOR



                     Performed during continuous self test routines





      C66FIL >OR= C66LVL -------------|

                                      |OR ---| MFMFLG = 1

      C56FIL >OR= C56LVL -------------|      |  (failed)

                                             |

                                             | --- ELSE ---

                                             |

      C66FIL < C66LVL - FILHYS -------|      |

                                      |OR ---| MFMFLG = 0

      C56FIL < C56LVL - FILHYS -------|      |  (sensor OK)





      NOTE: Failure Mode recognition using the continuous self test filters

            controls MFMFLG. The IMFMFLG controls foreground/background fuel

            and ARCHG calculations



















































































                                        21-10


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                     BP SENSOR FMEM

                     (Performed during engineering units conversion)





      BPSSW = 0 -------------------| No BP sensor

                                   | Do not do BP FMEM logic or

                                   | IBAP calculations

                                   | BP = KONBP

                                   |

      BFMFLG = 0 -----------|      | --- ELSE ---

                            |      | 

      BAPTMR <OR= VBPMAX ---|      |

                            |AND --| IBAP = FN000

      VBPDL1 <OR= MDELTA ---|      | BP = BAPBAR

                                   |

                                   | --- ELSE ---

                                   |

      BFMFLG = 1 ------------------| IBAP = BAPFMM

                                   | BP = BAPBAR

                                   | BAPCNT = 0

                                   | MINTIM2 = CLOCK

                                   |

                                   | --- ELSE ---

                                   |

                                   | Do not update IBAP,BP,or BAPBAR





                           FAILURE FLAG LOGIC (FOR BP SENSOR)

                                  Continuous self-test





      C22FIL < C22LVL - FILHYS ----------| BFMFLG = 0

                                         | (BP Sensor OK)

                                         |

                                         | --- ELSE ---

                                         |

      C22FIL >OR= C22LVL ----------------| BFMFLG = 1

                                         | (BP Sensor failed)













































                                        21-11


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                    TP SENSOR UPDATE





      This logic is performed  after  A/D  conversions  during  all  engine  modes,

      including  SELF-TEST.  The FMEM strategy checks the continuous Self-Test Code

      Filters to ascertain whether the TP sensor failed.   If  the  sensor  failure

      lasts  long  enough  to  trigger  a  SELF-TEST code, FMEM strategy will infer

      throttle position based upon airflow.  AM has protective logic in  the  event

      of  a load sensor failure.  (See the AM calculation contained in this section

      and Systems Equation)



      The TP sensor Update logic substitutes a function of  MAF  for  a  failed  TP

      sensor.   This  action  permits  recognition  of  the  various throttle modes

      (Closed, Part or WOT).  However, AE fuel will be disabled due to lack of  TAR

      signal.



      The load parameters have protective logic in event of  load  sensor  failure.

      (See the BP calculation in the EEC OVERVIEW Chapter.)



                       PERFORM DURING ENGINEERING UNITS CONVERSION





      TFMFLG = 0 ------------|

                             |AND -------| TP = ITP

      ITP >OR= TAPMIN -------|           | (TP sensor within

                             |           |  acceptable range)

      ITP <OR= TAPMAX -------|           |

                                         | --- ELSE ---

                                         |

                                         | (TP sensor out of limits)

      CRANK MODE (CRKFLG = 1) ---|       | TP = RATCH

                                 |OR ----|

      AM < IDLMAF ---------------|       | --- ELSE ---

                                         |

                                         | (TP sensor out of limits

                                         |  but NOT due to Low

                                         |  battery voltage)

                                         | RATCH = RATIV

                                         |

      TFMFLG = 1 ------------------------| TP = RATCH + FMCTTP

                                         |

                                         | --- ELSE ---

                                         |

                                         | (TP sensor data unreliable

                                         |  DO NOT update until

                                         |  confident data valid)

                                         | NO CHANGE TO TP



























                                        21-12


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                           FAILURE FLAG LOGIC (FOR TP SENSOR)





                               CONTINUOUS SELF-TEST CHECK





      C63FIL > C63LVL ---------------|

                                     |OR -----| TFMFLG = 1

      C53FIL > C53LVL ---------------|        |

                                              | --- ELSE ---

                                              |

      C63FIL < C63LVL - FILHYS ------|        | TFMFLG = 0

                                     |AND ----|

      C53FIL < C53LVL - FILHYS ------|





























































































                                        21-13


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                    ECT SENSOR UPDATE





      If the ECT Sensor fails, the FMEM strategy will substitute ACT (during CRANK)

      or  a default value (during ENGINE RUNNING Mode).  The Normal engine strategy

      will not recognize a need for Cold Weather Fuel compensation.



                       PERFORM DURING ENGINEERING UNITS CONVERSION





      CFMFLG = 0 ----------|

                           |

      IECT <OR= ECTMAX ----|AND ---| ECT = ROLAV

                           |       |  (FN703,TCECT)

                           |       |

      IECT >OR= ECTMIN ----|       | --- ELSE ---

                                   |

      CRANK MODE  -------------|   |

       (CRKFLG = 1)            |   |

                               |   | ECT = ROLAV

      TCSTRT >OR= CTHIGH -|    |   |  (ACT,TCECT)

                          |AND-|   |

      ATMR1 < OPCLT3 -----|    |   |

                               |OR-|

      TCSTRT < CTHIGH ----|    |   |

                          |AND-|   |

      ATMR1 < OPCLT2 -----|        |

                                   | --- ELSE ---

                                   |

      CFMFLG = 1 ------------------| ECT = ROLAV(ECTFMM,TCECT)

                                   |

                                   | --- ELSE ---

                                   |

                                   | DO NOT UPDATE ECT





                           FAILURE FLAG LOGIC (FOR ECT SENSOR)





                                  CONTINUOUS SELF-TEST



      C61FIL > C61LVL ---------------|

                                     |OR ----| CFMFLG = 1

      C51FIL > C51LVL ---------------|       |

                                             | --- ELSE ---

      C61FIL < C61LVL - FILHYS ------|       |

                                     |AND ---| CFMFLG = 0

      C51FIL < C51LVL - FILHYS ------|

























                                        21-14


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                                    ACT SENSOR UPDATE





      If the ACT Sensor fails, the FMEM Strategy will use the initial value for ACT

      (by  preventing  an Update) until the failure is recognized as bona fide.  An

      ACT failure will cause incorrect airflow calculation (with  some  degradation

      in fuel control).



                       PERFORM DURING ENGINEERING UNITS CONVERSION





      AFMFLG = 0  -----------|

                             |

      IACT <OR= ACTMAX ------|AND -------| ACT = FN703 (IACT)

                             |           |

      IACT >OR= ACTMIN ------|           | --- ELSE ---

                                         |

      WMEGOL = 0 ------------------------| ACT = ECT

       (Start up Open Loop)              |

                                         | --- ELSE ---

                                         |

      AFMFLG = 1 ------------------------| ACT = ACTFMM

                                         |

                                         | --- ELSE ---

                                         |

                                         | DO NOT UPDATE ACT





                           FAILURE FLAG LOGIC (FOR ACT SENSOR)





                                  CONTINUOUS SELF-TEST



      C64FIL < C64LVL - FILHYS ------|

                                     |AND --| AFMFLG = 0

      C54FIL < C54LVL - FILHYS ------|      |

                                            | --- ELSE ---

      C64FIL > C64LVL ---------------|      |

                                     |OR ---| AFMFLG = 1

      C54FIL > C54LVL ---------------|









































                                        21-15


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                              PFE SENSOR UPDATE (PFEHP = 1)





      The EPT FMEM Logic checks the A/D value of the EPT sensor and compares it  to

      the permissible range of values (as defined by the Self-Test Strategy).



          1.  If the value is within the allowed range, the strategy clears a  flag

          (which permits normal EGR strategy execution).



          2.  If the sensor value is outside the  allowed  range  long  enough  for

          Self-Test  to  recognize  and flag an error code, the strategy will force

          the valve to close.



                       PERFORM DURING ENGINEERING UNITS CONVERSION



      EFMFLG = 0 ----------|

                           |AND ----| Reinitial EPTZER

      Previous EFMFLG = 1 -|        | EPTZER = 650





                         FAILURE FLAG LOGIC (for PFE EGR Sensor)





                                  CONTINUOUS SELF-TEST



      APT NOT= -1 -------------------| Do NOT Do Failure

       (Not Closed Throttle)         | Mode Check

                                     |  --- ELSE ---

      C31FIL > C31LVL -----|         |

                           |OR ------| EFMFLG = 1

      C35FIL > C35LVL -----|         |

                                     | --- ELSE ---

      C31FIL < C31LVL - FILHYS -|    |

                                |AND-| EFMFLG = 0

      C35FIL < C35LVL - FILHYS -|



















































                                        21-16


                            FAILURE MODE MANAGEMENT - GUF1

                              Copyright 1989 FoMoCo





                              EVP SENSOR UPDATE (PFEHP = 0)





      The EVP sensor failure Mode strategy will force the EGR valve  to  close  and

      will have no adverse impact on Spark or Fuel.



                       PERFORM DURING ENGINEERING UNITS CONVERSION



      EFMFLG = 0 -------|

                        |AND ----| EVP = IEVP

      IEVP <OR= EVPMAX -|        |

                        |        | --- ELSE ---

      IEVP >OR= EVPMIN -|        |

                                 |

      EFMFLG = 1 ----------------| EVP = EOFF

                                 |

                                 | --- ELSE ---

                                 |

                                 | Do NOT update

                                 | EVP





                           FAILURE FLAG LOGIC (for EVP Sensor)





                                  CONTINUOUS SELF-TEST



      C31FIL > C31LVL -----|

                           |OR ------| EFMFLG = 1

      C35FIL > C35LVL -----|         |

                                     | --- ELSE ---

      C31FIL < C31LVL - FILHYS -|    |

                                |AND-| EFMFLG = 0

      C35FIL < C35LVL - FILHYS -|





















































                                        21-17


                          MALFUNCTION INDICATOR LIGHT - GUF0

                              Copyright 1989 FoMoCo





                               MALFUNCTION INDICATOR LIGHT





      OVERVIEW



           The MIL  warning  system  was  implemented  to  comply  with  California

      regulations  for the 1988 model year.  To gain early field experience a pilot

      MIL exposure is planned for selected car lines in 1987.



           The warning system will be activated whenever the EEC module is using an

      alternate  strategy  due to the failure of any of the monitored sensors.  The

      malfunction light, located  in  the  instrument  cluster,  will  flash  at  a

      calibratable  frequency  (1/[2  * MILTM1]) as long as the fault is present or

      will be on full time if the EEC system is operating in hardware LOS.



           MILTMR, a .125 second timer, is used to control the MIL  logic.   MILTMR

      is  allowed  to  count up only when self-test is not in progress, when not in

      CRANK mode, and when  an  FMEM  fault  is  present.   It  is  reset  to  zero

      otherwise.   When MILTMR excedes a calibratable delay time (FMDTM), the light

      will flash.



           Additional features of the MIL are:



      1.  It is disabled during VIP tests.



      2.  It is turned on continuously in CRANK mode until a PIP is detected  as  a

          bulb  check.   The  bulb check can be disabled by setting MILLIM equal to

          zero.





      DEFINITIONS



      INPUTS



      Registers:



       -  C41FIL = Continuous Self-Test fault counter which counts  the  number  of

          EGO1 sensor failures.



       -  C91FIL = Continuous Self-Test fault counter which counts  the  number  of

          EGO2 sensor failures (Stereo EGO systems only).



       -  MILTMR = Timer used to record the  time  that  an  FMEM  fault  has  been

          present, sec.



      Bit Flags:



       -  AFMFLG = Flag indicating the ACT sensor has failed.



       -  BFMFLG = Flag indicating that the BP sensor has failed:  1 -> failure.



       -  CFMFLG = Flag indicating the ECT sensor has failed.



       -  CRKFLG = Flag indicating status of CRANK MODE (1 -> in CRANK MODE,  0  ->

          not in CRANK MODE).



       -  DISABLE_NO_START = Flag set to 1 when KOEO VIP test is entered.  Disables

          bulb check when KOEO test is exited.





                                        21-18


                          MALFUNCTION INDICATOR LIGHT - GUF0

                              Copyright 1989 FoMoCo





       -  EFMFLG = Flag indicating the EVP/EPT sensor has failed.



       -  FIRST_PIP = Flag set to 1 when the first PIP is detected.  Reset to  zero

          on power-up or stall.



       -  IGNFL = Flag indicating the state of the Ignition Switch (1 -> switch on;

          0 -> switch off).



       -  MFMFLG = Flag indicating the MAP sensor has failed.



       -  STIFLG = Flag indicating the state of STI (1 -> low, Self-Test requested;

          0 -> high, Self-Test not requested).



       -  TFMFLG = Flag indicating the TP sensor has failed.



      Calibration Constants:



       -  C41LVL = Threshold for EGO1 fault, unitless.



       -  C91LVL = Threshold for EGO2 fault, unitless (Stereo EGO only).



       -  FMDTM = Time delay after fault is detected to start  flashing  MIL,  sec.

          To disable MIL, set equal to 255.



       -  MILLIM = Software switch to enable/disable bulb  check,  unitless  (1  ->

          enable; 0 -> disable).



       -  MILTM1 = MIL flashing on/off period, sec.  Flashing frequency  =  1/[2  *

          MILTM1].







      OUTPUTS



      Registers:



       -  MILTMR = See above.















































                                        21-19


                          MALFUNCTION INDICATOR LIGHT - GUF0

                              Copyright 1989 FoMoCo





      PROCESS



                                        MIL LOGIC



      STIFLG = 1 ------------------| DO NOT DO MIL LOGIC

       (Self-Test requested)       |

                                   |--- ELSE ---

      CRKFLG = 1 ------------|     |

                             |     |

      IGNFL = 1 -------------|     |

                             |AND -| DO BULB CHECK

      DISABLE_NO_START = 0 --|     | TURN MIL ON

                             |     |

      FIRST_PIP = 0 ---------|     |

                             |     |

      MILLIM = 1 ------------|     |--- ELSE ---

                                   |

      MILTMR <OR= FMDTM -----------| TURN MIL OFF

                                   |

                                   |--- ELSE ---

                                   |

                                   | FLASH MIL

                                   | TOGGLE EVERY MILTM1 SEC.





                                      MILTMR LOGIC



      STIFLG = 0 -------------|

                              |

      CRKFLG = 0 -------------|

                              |

      EGO FAILURE -------|    |AND -| COUNT UP MILTMR 

                         |    |     |

      AFMFLG = 1 --------|    |     |--- ELSE ---

                         |    |     |

      BFMFLG = 1 --------|    |     | MILTMR = 0

                         |    |     |

      CFMFLG = 1 --------|    |      

                         |OR -|

      EFMFLG = 1 --------|

                         |

      MFMFLG = 1 --------|

                         |

      TFMFLG = 1 --------|

































                                        21-20

























                                      CHAPTER 22



                                  KEEP ALIVE MEMORY



































































































                                         22-1


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





                       KEEP ALIVE MEMORY (KAM) QUALIFICATION TEST







      Each time the vehicle is started, the data stored in KAM may  not  be  valid.

      Power  interruptions,  noise,  etc.,  may have altered KAM contents.  Or, the

      computer may not be reading KAM registers correctly  because  of  a  hardware

      fault.   When  the  KAM registers are intialized, a special binary pattern is

      written into three bytes of KAM.  The KAM register names  are  KAMQA,  KAMQB,

      and  KAMQC.   During each background loop, the KAM registers are tested.  The

      KAM qualification test judges the validity of the KAM data by looking for the

      proper binary pattern.  The alternate courses of action are either:



          1) If the proper pattern is present, the KAM data is  considered  OK  for

          use by the strategy.



          2) If not present, the KAM data is suspect.  The KAM is over-written to a

          set  of  initial values.  The inital values are also used in place of the

          KAM data when the strategy references KAM.





      The KAM registers KAMQA, KAMQB, and KAMQC are assigned to different areas  of

      the  KAM.   This will help protect for partial KAM failures.  The assignments

      are:





      KAM                         KAM

      Register                    Address

      ---------                   -------

      KAMQA                       B80 HEX

      KAMQB                       BC9 HEX

      KAMQC                       BF6 HEX





      The KAM qualification test is normally performed each  background  loop  when

      the computer is running.

















































                                         22-2


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





                                       DEFINITIONS





      INPUTS



      Registers:



       -  EPTZER = Rolling average of the EPT sensor at Idle, counts.



       -  ISCKAM1 = Idle Speed KAM IPSIBR cell 1.



       -  ISCKAM2 = Idle Speed KAM IPSIBR cell 2.



       -  ISCKAM3 = Idle Speed KAM IPSIBR cell 3.



       -  ISKSUM = Idle Adaptive airflow check sum.



       -  KAMQA = KAM Qualification test register 1.



       -  KAMQB = KAM Qualification test register 2.



       -  KAMQC = KAM Qualification test register 3.



      Calibration Constants:



       -  VEPTHL = Self-Test lower Idle limit  (defined  in  Self  Test  Strategy).

          (Upper limit for KEYON EPTZER)



       -  VEPTLL = Self-Test upper Idle limit  (defined  in  Self  Test  Strategy).

          (Lower limit for KEYON EPTZER.)







      OUTPUTS



      Registers:



       -  EPTZER = See Inputs above.



       -  ISCKAM1 (2,3) = See Inputs above.



       -  ISKSUM = See Inputs above.



       -  KAMQA (B,C) = See Inputs above.



       -  KWUCTR = KAM warm_up counter.  Stores number of warm_ups in  KAM.   Reset

          to zero if KAM is corrupted.  (battery disconnect, etc.)



      Bit Flag:



       -  VIP_KAM = Indicates KAM invalid for VIP.



















                                         22-3


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





                              KAM QUALIFICATION TEST LOGIC









      Performed each background loop.









      KAMQA = 10101010 BINARY---|

                                |

      KAMQB = 11000110 BINARY---|AND ------| SET KAMOK = 1

                                |          | ASSUME KAM DATA IS VALID

      KAMQC = 01110101 BINARY---|          | ALL STRATEGY REFERENCES TO

                                           | KAM WILL USE KAM DATA.

                                           |

                                           | --- ELSE ---

                                           |

                                           | CLEAR KAMOK = 0

                                           | SET VIPKAM = 1

                                           | ASSUME KAM DATA IS BAD.

                                           | INITIALIZE ALL KAM

                                           | LOCATIONS USED IN THE

                                           | STRATEGY.

                                           | WRITE THE SPECIAL

                                           | BINARY PATTERNS TO KAM:

                                           |  KAMQA = 10101010 BINARY

                                           |  KAMQB = 11000110 BINARY

                                           |  KAMQC = 01110101 BINARY

                                           |

                                           | SET LTMTB1rc = 0.5

                                           | SET LTMTB2rc = 0.5

                                           | SET CHKSUM = 22016

                                           | SET ISCKAMn = 0.0

                                           | SET ISKSUM = 0.0

                                           | SET EPTZER = 650

                                           | KWUCTR = 0













































                                         22-4


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





              ADAPTIVE FUEL TABLE VALIDATION PROCEDURE (POWER UP SEQUENCE)





      Each time the vehicle is started, the data stored in KAM may or may not be

      valid. Power interruptions, noise, etc., may have altered the KAM contents.

      Alternatively, the computer may not be reading KAM registers correctly

      because of a hardware fault. The KAM qualification test judges the validity

      of the KAM data, and KAM can be initialized as required. Based on the results

      of the KAM qualification test, validate the adaptive fuel table as follows; 







      |(SUM OF ALL ADAPTIVE             | ASSUME THE ADAPTIVE FUEL

        FUEL KAM CELLS)                 | DATA IN KAM IS VALID.

       - CHKSUM| <OR= 1 ----------------| CHKSUM = SUM OF ADAPTIVE FUEL

                                        | CELLS

                                        |

                                        | --- ELSE ---

                                        |

                                        | ASSUME THE ADAPTIVE FUEL 

                                        | DATA IN KAM IS WRONG.

                                        | DO A TOTAL INITIALIZATION

                                        | OF THE ADAPTIVE FUEL

                                        | DATA IN KAM.

                                        | FOR EACH CELL:

                                        | 1) SET LTMTB1rc = 0.5

                                        |    SET LTMTB2rc = 0.5

                                        | 2) SET CHKSUM = 22016

                                        | SET KWUCTR = 0







      CHKSUM is a KAM memory word containing  the  sum  of  the  LTMTB1  or  LTMTB2

      contents.   CHKSUM  is  incremented  or  decremented  each time any LTMTB1 or

      LTMTB2 cell is updated.  A one count difference between the present  sum  and

      the  stored  sum is allowed to account for the case of power down after a KAM

      update but prior to CHKSUM update.















































                                         22-5


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





                                  ISCKAM QUALIFICATION



                             (Done during Power-up sequence)





      |ISCKAM0 + ISCKAM1        |       | Assume the ISCKAMs are valid

        + ISCKAM2 + ISCKAM3     |-------| NO ACTION TAKEN

        - ISKSUM| <OR= 1 Bit ---|       | ISKSUM = ISCKAM0 + ISCKAM1

                                        |  + ISCKAM2 + ISCKAM3

                                        |

                                        | --- ELSE ---

                                        |

                                        | Assume ISCKAMs Data are

                                        |  invalid.

                                        | Re-Initialize the ISCKAM

                                        |  ISCKAM0 = 0

                                        |  ISCKAM1 = 0

                                        |  ISCKAM2 = 0

                                        |  ISCKAM3 = 0

                                        |  ISKSUM = 0

















































































                                         22-6


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





                               KAM QUALIFICATION (EPTZER)





      During Power-up sequence, check the range of EPTZER.





      EPTZER > VEPTLL --------|      | EPTZER is OK

                              |AND --|

      EPTZER < VEPTHL --------|      | --- ELSE ---

                                     |

                                     | EPTZER is NOT OK

                                     | Set EPTZER = 650

































































































                                         22-7


                               KEEP ALIVE MEMORY - GUE0

                              Copyright 1989 FoMoCo





























































































































                                         22-8

























                                      CHAPTER 23



                               ROM IDENTIFICATION CODE



































































































                                         23-1


                            ROM IDENTIFICATION CODE - GUB0

                              Copyright 1989 FoMoCo





                               ROM IDENTIFICATION CODE



      ROM identification codes are used by both IC and module  suppliers.   The  IC

      suppliers require a means of identifying ROM chip contents quickly since they

      produce different calibration bit patterns on the  same  wafer.   The  module

      suppliers  utilize  these  codes to insure that the ROM/module combination is

      correct.



      In the past, the ROM identification codes (CALID and VERID) were generated by

      hand.   They  were  then  distributed  to  Engine  Systems  to  put  in their

      calibrations for Cert.  If any change to the Cert calibration was made  or  a

      different strategy used, new values had to be generated and calibrated in.



      For 1988 and beyond, the procedure has been  changed  to  make  this  process

      easier.   The  new  process  removes  CALID  and replaces it with ROM_TO.  In

      addition, VERID has been deleted and a new parameter "FIXSUM" has been added.

      FIXSUM should always be set to 0.  Specifically:





      1.  The non-modifiable Vector  parameter  "ROM_TO"  replaces  the  old  CALID

          parameter  as  the ROM chip identifier.  The ROM_TO value is generated by

          Vector during a calibration release and is located  at  200A  HEX.   This

          value  is  the complement of the ROM pattern CHECKSUM and is also used to

          perform the EEC-IV diagnostic "CHECKSUM Memory Test".



      2.  The new parameter "FIXSUM" is a Vector calibration parameter  located  at

          2004  HEX  and should always be set to 0.  This parameter will be used to

          assure the ROM_TO values are unique and will only be changed by the  SWDV

          engineer if a duplicate ROM_TO value is found.







                          ROM IDENTIFICATION CODE PROCEDURES







      1.  PEDD SW will set the value of the calibration parameter FIXSUM  to  0  in

          the base release.



      2.  When Engine Systems releases a CERT calibration, the ROM  chip  ID  code,

          ROM_TO, will be automatically generated by VECTOR, and the value is to be

          recorded on the calibration release sheet submitted to SWDV.



      3.  PEDD SWDV will verify that the ROM_TO value is not the same as any  other

          previous  ROM_TO  prior to sending the binary file to EED.  If the ROM_TO

          value matches another, PEDD SWDV will change  the  value  of  FIXSUM  and

          generate  a  new  ROM_TO  value, which will be checked again for a match.

          This process is repeated until a unique ROM_TO value is generated.



      4.  For production calibrations only, EED systems will receive and record the

          value of ROM_TO for final ROM verification.



      5.  EED will then transmit the binary file to the  vendors,  verify  the  ROM

          chip  against  the  binary  file,  verify  the  checksum,  verify the RAM

          read/write test, and verify the ROM_TO value and location.




                           SPECIAL VIP SECTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                    1988

                     ELECTRONIC FUEL INJECTION (SFI-MA2)

                           SELF-TEST STRATEGY BOOK











                           STRATEGY LEVELS "GUF1"



                                  (VIP-60C)











                         FOR USE WITH EEC-IV MODULE











      COMMENTS OR QUESTIONS SHOULD  BE  DIRECTED  TO  TOM  MELVILLE  ON

      EXTENSION 76851











                                                T. R. MELVILLE

                                                SELF TEST DESIGN

                                                POWERTRAIN ELEC-

                                                TRONIC DEVELOPMENT

                                                DEPARTMENT 

                                                FEBRUARY 12, 1987

                                                REVISED 2/19/87


                           SPECIAL VIP SECTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL








                           SPECIAL VIP SECTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              TABLE OF CONTENTS





         PAGES                        SUBJECT



      24-2 TO 24-3    EEC-IV SELF TEST OVERVIEW



      25-1            SELF-TEST ENTRY/EXIT LOGIC



      26-1 TO 26-3    ENGINE OFF SEQUENCE



      26-4            KAM/RAM TEST



      26-6            READ ONLY MEMORY TEST

      26-7            A/D TEST STRUCTURE

      26-9                    ECT SENSOR TEST

      26-10                   BP SENSOR TEST

      26-11                   TP SENSOR TEST

      26-12                   ACT SENSOR TEST

      26-13                   MAF SENSOR TEST

      26-14                   EGR SENSOR TEST

      26-15                   ACC/NDS INPUT TEST

      26-16                   IVPWR TEST

      26-17                   PSPS TEST

      26-18 TO 26-19          OUTPUT CIRCUIT CHECK

      26-20 TO 26-22          OCC TEST STRUCTURE

      26-23                   FUEL PUMP CIRCUIT TEST

      26-24                   KAM QUALIFICATION TEST

      26-25 TO 26-27          OUTPUT TEST MODE

      27-1 TO 27-2    ENGINE RUNNING SEQUENCE

      27-3                    EGOBAR FILTER AND STATE FLAGS

      27-4                    DELAY LOGIC CLARIFICATION

      27-5 TO 27-6            ENGINE RUNNING INITIALIZATION

      27-7                    HIGH RPM ISC TEST

      27-8                    A/D TEST STRUCTURE

      27-9                        ECT SENSOR TEST

      27-10                       TP SENSOR TEST

      27-11                       ACT SENSOR TEST

      27-12                       BRAKE ON/OFF TEST

      27-13                       PSPS TEST 

      27-14                       MAF SENSOR TEST 

      27-15 TO 27-16          EGO SWITCHING TEST

      27-17 TO 27-18          AIR TEST

      27-19 TO 27-21          EGR TEST

      27-22                   SPOUT TEST

      27-23                   LOW RPM ISC TEST

      27-24 TO 27-28          CYLINDER BALANCE TEST

      27-29                   VCBHN CALCULATION

      27-30                   VCBLN CALCULATION


                           SPECIAL VIP SECTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              TABLE OF CONTENTS





         PAGES                    SUBJECT



      28-1 TO 28-3    CONTINUOUS TEST STRUCTURE

      28-4 TO 28-7            FILTERING LOGIC

      28-8                    KAM CODE ERASE LOGIC

      28-9                    ECT OPEN/SHORT TEST

      28-10                   ACT SENSOR TESTS

      28-11                   BP SENSOR TESTS

      28-12                   MAF SENSOR TEST

      28-13 TO 28-16          EGR SENSOR TEST

      28-17 TO 28-19          PIP/IDM TEST

      28-20                   TP SENSOR TEST

      28-21 TO 28-22          VSS TEST

      28-23 TO 28-25          EGO SWITCHING TEST

      28-26 TO 28-27          FUEL PUMP CIRCUIT TEST6



      29-1            VEHICLE SPEED CONTROL SELF TEST

      29-2                    VSC ENGINE-OFF TEST INITIALIZATION

                                & TEST STRUCTURE

      29-3 TO 29-6            STATIC INPUT TEST

      29-7 TO 29-8            VSC OUTPUT CIRCUIT CHECK

      29-9                    OCC PARAMETER DEFINITIONS

      29-10 TO 29-13          DYNAMIC VSC TEST





      30-1 TO 30-3    ERROR CODE DESCRIPTION      



      31-1 TO 31-6    VIP PARAMETER DICTIONARY        

























                                CHAPTER 24



                        EEC-IV SELF-TEST OVERVIEW































































































                                   24-1


                        EEC-IV SELF-TEST OVERVIEW

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





      EEC-IV Self-Test Overview



      Self-Test is divided into two types of testing, one which  occurs

      only  at the "request" of the service technician (the "on-demand"

      tests), and one which  continuously  surveys  the  system  during

      normal  operating  modes (the "continuous" tests).  The on-demand

      portion is further divided into "engine-running" and "engine-off"

      tests.



      The engine-off portion of the test "looks" for normal  engine-off

      sensor  readings.   Any  out-of-limits,  open,  or shorted sensor

      input is signalled by sending a service code.  If all sensors are

      within  expected  ranges,  a  "11"  code  is  issued.   Codes are

      repeated to make it easier for the technician to verify the  code

      sequence.   After  the  service  codes,  a single pulse occurs to

      signal the technician that the next set of codes will be from the

      continuous test.  Continuous test codes are issued using the same

      format as the service codes, and are also repeated.  Finally, the

      test  enters the "output state test", which simply turns actuator

      outputs "on" and "off" based on "requests"  from  the  technician

      (these  consist  of depressing the throttle and letting it return

      to closed position).  STO is also turned "on" and "off"  in  this

      mode,  so  that the technician knows the state in which the other

      outputs should be.



      The engine-running portion signals that it has begun  by  sending

      an  "identification"  code (=no.  of cylinders/2).  It then tests

      inputs  and  EEC-IV-controlled  functions  by   forcing   various

      conditions and "looking" for expected engine response to them.  A

      single output pulse is  sent  to  signal  the  test  operator  to

      "goose"  the throttle, during which inputs are tested for dynamic

      response.  If no RPM change is detected, a special code (code 77)

      will be sent to indicate that the test was incorrectly performed.

      (No other 70-series codes will be sent except codes 74  and  75.)

      When the "goose" test has completed, service codes are sent.



      The  "continuous"  self-test  monitors   inputs   during   normal

      operation, and stores information in keep-alive memory (KAM) when

      errors are detected.   In  general,  checks  are  made  only  for

      open-or  short-circuits.   In  a  few  cases, "irrational" sensor

      readings are noted (eg:  if engine  coolant  temperature  changes

      from  cold  to  warm  to cold again, an error is noted.) When the

      number of errors in a given time period  exceeds  a  calibratable

      threshold,  that  code is stored in KAM.  As a special diagnostic

      aid, in engine-off conditions and when STI=GND and the  on-demand

      (running)  test has completed, codes will be stored every time an

      error is detected, and STO will be turned on as long as the fault

      is present.  This is designed to help isolate intermittent faults

      (eg.:  the test operator can "wiggle" the harness and connectors,

      and STO will indicate when the intermittent fault recurs).  Codes

      which indicate faults that have not recurred in 20 engine warm-up

      cycles  are  "erased".   Codes  can  also be manually "erased" by

      opening up STI while codes are being  output  in  the  engine-off

      mode.









                                   24-2


                        EEC-IV SELF-TEST OVERVIEW

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                         

                       EEC-IV SELF-TEST BLOCK DIAGRAMS

                         "ON-DEMAND" TESTS (STI=GND)





               ENGINE-OFF:                      ENGINE-RUNNING:



             !-------------!                   !--------------!

             ! ENGINE-OFF  !                   !  I.D. CODE   !

             !    TEST     !                   !              !

             !-------------!                   !--------------!

                    |                                  |

                    v                                  v

             !-------------!                   !--------------!

             !   SERVICE   !                   !    ENGINE    !

             !    CODE     !                   !   RUNNING    !

             !-------------!                   !     TEST     !

                    |                          !--------------!

                    v                                  v

             !-------------!                   !--------------!

             !   SINGLE    !                   !    SINGLE    !

             !   PULSE     !                   !    PULSE     !

             !-------------!                   !--------------!

                    |                                  |

                    v                                  v 

             !-------------!                   !--------------!

             ! CONTINUOUS  !     REQUIRES      !   DYNAMIC    !

             !    TEST     !     MECHANIC----->!   RESPONSE   !

             !   CODES     !   INTERVENTION    !     TEST     !   

             !-------------!         |         !--------------! 

                    |                |                 |

                    v                |                 v

             !-------------!         |         !--------------!

             !   OUTPUT    !<--------|         !    SERVICE   !

             !   PULSING   !                   !     CODES    !

             !-------------!                   !--------------!

                                                       |

                                                       v

      NOTE:  TEST CODES CAN BE                 !--------------!

             MANUALLY ERASED BY                ! 2 MIN. DELAY !

             UN-GROUNDING STI DURING           !(TIMING CHECK)!

             CODE OUTPUT (ENGINE-OFF).         !--------------!

                                                       |

                                                       v

                                               !--------------!

                                 REQUIRES----->!   "WIGGLE"   !

                                 MECHANIC      !     TEST     !   

                               INTERVENTION    !--------------! 



                        "CONTINUOUS" TESTS (STI=OPEN)



               ENGINE-OFF:                      ENGINE-RUNNING:



             !-------------!                   !---------------!

             !   "WIGGLE"  !                   !  CONTINUOUS   !

             !     TEST    !                   !  TEST MODE    !

             !-------------!                   !---------------!



                                   24-3


                        EEC-IV SELF-TEST OVERVIEW

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL

























































































































                                   24-4

























                                CHAPTER 25



                        SELF-TEST ENTRY/EXIT LOGIC































































































                                   25-1


                        SELF-TEST ENTRY/EXIT LOGIC

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            EFI SELF-TEST ENTRY LOGIC

                          ENGINE OFF AND VSC STATIC TEST





      TIME SINCE POWER-UP > 4 SEC---------|            !------------!

                                          |            !  ENTER     !

      SELF-TEST REQUESTED-----------------| AND--------! ENGINE OFF !

       (STI INPUT=LOW)                    |            !    TEST    !

                                          |            !------------!

      ENGINE-OFF TEST ENABLED-------------|

                                          |

      IN CRANK MODE-----------------------|





      IN CRANK MODE-----------------------|

                                          |            !------------!

      STI INPUT = HIGH--------------------|            !   ENTER    !

                                          | AND--------! ENGINE-OFF !

      VSTYPE = 2--------------------------|            !  VSC TEST  !

                                          |            !------------!

      TS_PIP > 1 SECOND-------------------|            

                                          |            

      PUTMR < 10 SECONDS------------------|

                                          |

      ON_STATE = 1------------------------|



                       ENGINE RUNNING AND VSC DYNAMIC TEST





      TIME SINCE POWER-UP > 6 SEC---------|            !----------------!

                                          |            !. ENTER VSC     !

      SELF-TEST REQUESTED-----------------|            ! DYNAMIC TEST   !

       (STI INPUT=LOW > 1 SEC )           | AND--------!.DISABLE ENGINE !

                                          |            ! RUNNING TEST   !

      VSTYPE = 2--------------------------|            !----------------! 

                                          |

      RUN MODE----------------------------|            

                                          |

      VSC DYNAMIC TEST ENABLED------------|

                                          |

      ON_STATE = 1------------------------|

                                          |

      PUTMR < VVSCET----------------------|

                                             --------------ELSE-----------





                                                       !-------------!

      TIME SINCE POWER-UP > 6 SEC---------|            !.ENTER ENGINE!

                                          | AND--------! RUNNING TEST!

      SELF-TEST REQUESTED-----------------|            !.DISABLE VSC !

       (STI INPUT =LOW > 1 SEC )          |            ! DYNAMIC TEST!

                                          |            !-------------!

      RUN MODE----------------------------|

                                          |

      ENGINE-RUNNING TEST ENABLED---------|  







                                   25-2


                        SELF-TEST ENTRY/EXIT LOGIC

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                        EFI SELF-TEST ENTRY LOGIC (CONT'D)



                                 CONTINUOUS TEST





                                                       !-------------!

      TIME SINCE POWER-UP > 4 SEC---------|            !    RUN      !

                                          | AND--------! CONTINUOUS  !

      NOT IN ENGINE-OFF OR----------------|            !    TEST     !

       ENGINE-RUNNING TEST OR             |            !-------------!

       VEHICLE SPEED CONTROL TEST         |

                                          |

       IN UNDERSPEED OR RUN MODE----------|           



























































































                                   25-3


                        SELF-TEST ENTRY/EXIT LOGIC

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             EFI SELF-TEST EXIT LOGIC







                                              

      IN ENGINE-OFF TEST----------------------|        !---------------!

                                              |        !EXIT & DISABLE ! 

      IN UNDERSPEED/RUN MODE------|           | AND----!  ENGINE-OFF   !

                                  |OR---------|        !    TEST       !    

      SELF TEST NOT REQUESTED-----|                    !---------------!







                                              |

      IN ENGINE RUNNING TEST------------------|        !---------------!

                                              |        ! EXIT & DISABLE!

      SELF-TEST NOT REQUESTED--------|OR------| AND----!ENGINE-RUNNING !

                                     |                 !    TEST       !

      TRLOAD = 3 OR 4--------|       |                 !---------------!

                             |AND----|

      NDSFLG = 1 (DRIVE)-----|                          







                                  VSC EXIT LOGIC







      IN ENGINE-OFF VSC TEST------------------|        !---------------!

                                              |        !  EXIT AND     !

      STI INPUT = LOW--------|                |AND-----!DISABLE ENGINE !

                             |OR--------------|        !OFF VSC TEST   !

      IN UNDERSPEED/RUN MODE-|                         !---------------!







      IN ENGINE RUNNING VSC TEST--------------|        !---------------!

                                              |        !  EXIT AND     !

      VSBAR > 2 MPH--------|                  |AND-----!DISABLE ENGINE !

                           |                  |        !RUNNING VSC    !

      OFF_BUT = 1----------|                  |        !      TEST     !

                           |OR----------------|        !---------------!

      STI=HIGH (UNGRDED)---|

                           |

      BRAKE APPLIED--------|



























                                   25-4

























                                  CHAPTER 26



                              ENGINE-OFF SEQUENCE































































































                                   26-1


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             ENGINE OFF SEQUENCE



                         -----------

                       (    ENTER    )

                         -----------                 

                              |

                              v

                        !-----------!

                        !   TURN    !

                        !  STO OFF  ! 

                        !-----------!

                              |   

                        /-----------\

                       / DO MODULE   \  FAIL

                      / INSTRUCTION   \--------------------|

                      \     TEST      /                    |

                       \             /                     |

                        \-----------/                      |

                              |PASS                        v

                         /--------\     FAIL        !--------------!

                        /   TEST   \--------------->!  TURN STO ON !   

                        \ KAM/RAM  /                ! CONTINUOUSLY !

                         \--------/                 !   AND EXIT   !

                              |PASS                 !--------------!

                         /---------\    FAIL        !--------------!

                        / TEST ROM  \-------------->!     SET      !

                        \           /               ! SERVICE CODE !

                         \---------/                !--------------!

                              |PASS                        |

                              |                            |

                              v                            |

                    !--------------------------!           |

                    !SEND TWO 2MS PULSES ON STO!           | 

                    !2MS BETWEEN PULSES        !           |

                    !--------------------------!           |

                              |                            |

                 |----------->|<---------------------------|

                 |            v

                 |       /---------\

                 |  NO  /  PUTMR >  \

                 |------\   4 SEC   /

                         \---------/

                              |

                 |----------->|YES

                 |            v

                 |       /---------\

                 |      /FUEL PUMP  \

                 |  NO / TURNED OFF  \

                 |-----\ (TIMED OUT) / 

                        \           /

                         \---------/

                              |YES

                              v

                             (B)









                                   26-2


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                         ENGINE OFF SEQUENCE CONT'D



                                 (B)

                                  |

                                  v

                            /-----------\               !-----------------!

                           /    TEST     \      FAIL    !       SET       !

                          /   A/D'S AND   \------------>! SERVICE CODE(S) !

                          \   SWITCHES    /             !-----------------!

                           \             /                        |

                            \-----------/PASS                     |

                                  |<------------------------------|

                                  v 

                             /---------\    FAIL        !-----------------!

        FAIL /---------\    / TEST OCC  \-------------->!       SET       !

         |<-/FUEL PUMP  \<-|\           /               ! SERVICE CODE(S) !

         |  \CKT TEST** /  | \---------/                !-----------------!

         |   \---------/   |      |     PASS                      |

         |       |         |------|<------------------------------|

         |       |                 

         |       |PASS!------------------------!

         |       |--->!   . SEND SERVICE CODES !

         v         ^  !------------------------! 

      !--------!   |              |

      !  SET   !   |              v                

      !SERVICE !---|  !--------------------------!

      !CODE(S) !      !   . SEND SEPARATOR PULSE !

      !--------!      !--------------------------! 

                                  |

                                  v

                             /---------\    YES        !--------------!

                            / VIPKAM =1 \------------->! SEND CODE 15*!

                            \     ?     /              !--------------!

                             \---------/                        |

                                  | NO                          |

                                  v                             |

                          !-------------------!                 |

                          ! . SEND CODES FROM !                 |

                          !   CONTINUOUS TEST !                 |

                          !-------------------!                 |

                                  |<----------------------------|

                                  v

                      !----------------------------!

                      !   . ENTER OUTPUT TEST MODE !

                      !----------------------------!



         *See Normal Strategy KAM qualification test logic for setting

          of VIPKAM=1.  Code 15 is output during continuous code

          output.



       ** NOTE:  FUEL PUMP CKT TEST MUST BE PERFORMED AFTER OCC TEST















                                   26-3


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                   KAM/RAM TEST





                                  -----------

                                (    ENTER    )

                                  -----------

                                       |

                                       v 

                      !-----------------------------------!  

                      ! SET POINTER TO BEGINNING OF       !

                      ! EXT_RAM                           !

                      !-----------------------------------!  

                 |-------------------->|                      

                 |                     v

                 |        !-------------------------!

                 |        ! SAVE REGISTER CONTENTS  !

                 |        !-------------------------!

                 |                     |

                 |                     v

                 |        !-------------------------!

                 |        !   WRITE HEX AAAA TO     !

                 |        !   REGISTER              !

                 |        !-------------------------!

                 |                     |

                 |                     v

                 |        !-------------------------!

                 |        ! READ REGISTER CONTENTS  !

                 |        !-------------------------!

                 |                     |

                 |                     v

                 |              /-------------\

                 |             / IS CONTENTS   \  NO  

                 |             \  = AAAA       /-------------|

                 |              \-------------/              |

                 |                     | YES                 |

                 |                     v                     |

                 |        !------------------------!         |

                 |        !   WRITE HEX 5555 TO    !         |

                 |        !     REGISTER           !         |

                 |        !------------------------!         |

                 |                     |                     |

                 |                     v                     |

                 |        !------------------------!         |

                 |        ! READ REGISTER CONTENTS !         |

                 |        !------------------------!         |

                 |                     |                     |

                 |                     v                     |

                 |                /---------\                |

                 |               /    IS     \ NO            | 

                 |              /  CONTENTS   \------------->|  

                 |              \   = 5555    /              |

                 |               \           /               v

                 |                \---------/           !-----------!

                 |                     | YES            !TURN STO ON!

                 |                     v                !   EXIT    !

                 |                    (A)               !-----------!





                                   26-4


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              KAM/RAM TEST CONTINUED





                                      (A)

                                       |

                 |                     v                

                 |            !------------------!      

                 |            ! RESTORE REGISTER !

                 |            !     CONTENTS     !  

                 |            !------------------!

            !-----------!              | 

            !INCREMENT  !              |

            ! POINTER   !              |

            !-----------!              |

                 ^                     |             

                 |       NO    /-------------\      

                 |<-----------/  END OF 2K    \

                              \  EXT-RAM ?    /

                               \-------------/

                                       | YES      

                                       |

                                       v

                               --------------

                            (  GO TO ROM_TEST  )

                               --------------

        

































































                                   26-5


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           READ-ONLY MEMORY TEST (ROM)





                                  -----------

                                (    ENTER    )

                                  -----------

                                       |

                                       v

                      !----------------------------------!

                      ! DO A 16-BIT ADDITION OF CONTENTS !

                      ! OF ALL ROM LOCATIONS RETAINING   !

                      ! THE 16 LEAST SIGNIFICANT BITS    !

                      ! OF THE RESULT.                   !

                      !----------------------------------!

                                       |

                                       v

                                  /---------\    NO    !---------!

                                 /  SUM=0 ?  \-------->!   SET   !

                                 \           /         ! CODE 15 !

                                  \---------/          !---------!

                                       |   YES             |

                                       |<------------------|

                                       v

                                  -----------

                                (     EXIT    )

                                  -----------







              NOTE:  A specific location will contain checksum

                     such that sum of correct ROM contents

                     (including checksum)=0.  

                     Location is labeled "Rom To" or "Rom Total".



















































                                   26-6


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               ENGINE-OFF A/D TESTS





                               -----------

                             (    ENTER    )

                               -----------

                                    |

                                    v

                               /---------\

                              / TEST ECT  \    

                              \           /

                               \---------/

                                    |

                                    v

                               /---------\    

                              / TEST BP  \

                              \           /

                               \---------/

                                    |

                                    v

                               /---------\ 

                              /  TEST TP  \

                              \           /

                               \---------/

                                    |

                                    v

                               /---------\    

                              / TEST ACT  \

                              \           /    

                               \---------/

                                    |

                                    v

                               /---------\

                              / TEST MAF  \

                              \           /

                               \---------/

                                    |

                                    v                       

                                  ( A )







































                                   26-7


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          ENGINE-OFF A/D TESTS (CONT'D)





                                  ( A )

                                    |

                               /---------\   

                              / TEST EGR  \

                              \           /

                               \---------/

                                    |

                                    v

                               /---------\    

                              /   TEST    \

                              \  ACC/NDS  /

                               \---------/

                                    |

                                    v

                               /--------\

                              /   TEST   \

                              \ IVPOWER  /

                               \--------/

                                    |

                                    v

                               /---------\

                              / TEST PSPS \

                              \           /

                               \---------/

                                    |

                                    v

                               -----------

                             (     EXIT    )

                               -----------





















































                                   26-8


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 ECT SENSOR TEST



                        -----------

                      (    ENTER    )

                        -----------

                             |                           

                             v

                        /---------\    NO      !---------!

                       /  IECT >=  \---------->! CODE 61 !---|

                       \  ECTMIN ? /           !---------!   |

                        \---------/                          |

                             |   YES                         |

                             |<------------------------------|

                             v

                        /---------\    NO      !---------! 

                       /  IECT <=  \---------->! CODE 51 !---|   

                       \ ECTMAX ?  /           !---------!   |

                        \---------/                          |

                             |   YES                         |

                             v                               |

                        /---------\                          |

                       /   VIECT1  \   NO      !---------!   |

                      /  <= IECT <= \--------->! CODE 21 !-->|

                      \    VIECT2 ? /          !---------!   |

                       \           /                         |

                        \---------/                          |

                             |   YES                         |

                             |<------------------------------| 

                             v

                        -----------

                      (     EXIT    )

                        -----------



      PARAMETER                             TYPICAL CALIB-

         NAME        DESCRIPTION            RATION VALUE

      -----------    ---------------------  ----------------

       ECTMIN         MIN. ENGINE OFF ECT      40 COUNTS

       ECTMAX         MAX. ENGINE OFF ECT     935 COUNTS

       VIECT1         MIN. COOLANT TEMP       717 COUNTS

       VIECT2         MAX. COOLANT TEMP        63 COUNTS 





































                                   26-9


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  BP SENSOR TEST



                        -----------                

                      (    ENTER    )              

                        -----------

                             |

                             v    

                         /---------\NO

                        /BPSSW = 1  \---------------------->|

                        \           /                       |

                         \---------/                        |

                             |YES                           |

                             v                              |

                        /---------\    NO                   |

                       /  BPTMR<=  \----------------|       |

                       \  VBPMAX ? /                |       |

                        \---------/                 |       |

                             |  YES                 |       |

                             v                      |       |

                        /---------\                 v       |

                       /  VPBDL1   \   NO      !---------!  |

                      / <= MDELTA<= \--------->! CODE 22 !  |

                      \   VBPDL2    /          !---------!  |

                       \           /                |       |

                        \---------/                 |       |    

                             |   YES                |       |

                             |<---------------------|<------|

                             v

                        -----------

                      (     EXIT    )

                        -----------





      PARAMETER                                      TYPICAL CALIB-

        NAME               DESCRIPTION               RATION  VALUE

      ---------------  ---------------------------   --------------   

       VBPMAX          MAX. TIME SINCE LAST BP UPDATE  15 MS    

       VBPDL1          MIN BP DURING ENGINE OFF VIP  1200 TICKS

       VMDEL2          MAX BP DURING ENGINE OFF VIP  1563 TICKS

                                                     (FOR 15 MHZ)





         RELATED INITIALIZATION PARAMETERS

         ---------------------------------

       



























                                  26-10


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  TP SENSOR TEST





                        -----------

                      (    ENTER    )

                        -----------

                             |

                             v

                        /---------\   NO       !---------!

                       /  ITP >=   \---------->! CODE 63 !-->|

                       \ TAPMIN ?  /           !---------!   |

                        \---------/                          |

                             |   YES                         |

                             |                               |

                             v                               |

                        /---------\     NO     !---------!   |

                       /   ITP <=  \---------->! CODE 53 !-->|

                       \ TAPMAX ?  /           !---------!   |  

                        \---------/                          |

                             |   YES                         |

                             v                               |

                        /---------\                          |

                       /   VTAP1   \   NO      !---------!   |

                      /  <=ITP <=   \--------->! CODE 23 !-->|

                      \    VTAP2 ?  /          !---------!   |

                       \           /                         |

                        \---------/                          |

                             |  YES                          |

                             |<------------------------------|

                             v

                        -----------

                      (     EXIT    )

                        -----------



      PARAMETER                                     TYPICAL CALIB-

         NAME         DESCRIPTION                   RATION VALUE

      ------------  ----------------------------    --------------

        TAPMIN      MIN. TP SENSOR READING             40 COUNTS

        TAPMAX      MAX. TP SENSOR READING             990 COUNTS

        VTAP1       MIN. ENGINE-OFF THROTTLE POS       150 COUNTS

        VTAP2       MAX. ENGINE-OFF THROTTLE POS       250 COUNTS



      RELATED INITIALIZATION PARAMETERS 

      ---------------------------------





























                                  26-11


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 ACT SENSOR TEST



                        -----------

                      (    ENTER    )

                        -----------

                             |                           

                             v

                        /---------\    NO      !---------!

                       /  IACT >=  \---------->! CODE 64 !---|

                       \  ACTMIN ? /           !---------!   |

                        \---------/                          |

                             |   YES                         |

                             |                               |

                             v                               |

                        /---------\    NO      !---------!   |

                       /  IACT <=  \---------->! CODE 54 !---|   

                       \ ACTMAX ?  /           !---------!   |

                        \---------/                          |

                             |   YES                         |

                             v                               |

                        /---------\                          |

                       /   VIACT1  \   NO      !---------!   |

                      /  =>IACT =>  \--------->! CODE 24 !-->|

                      \    VIACT2 ? /          !---------!   |

                       \           /                         |

                        \---------/                          |

                             |   YES                         |

                             |<------------------------------| 

                             v

                        -----------

                      (     EXIT    )

                        -----------



      PARAMETER                                    TYPICAL CALIB-

        NAME                    DESCRIPTION        RATION VALUE

      -------------  ---------------------------   --------------

       ACTMIN        MIN ACT (ACT SHORTED)           40 COUNTS

       ACTMAX        MAX ACT (ACT OPEN)              935 COUNTS

       VIACT1        MIN. CHARGE TEMP (ENGINE-OFF)   717 COUNTS

       VIACT2        MAX. CHARGE TEMP (ENGINE-OFF)   63 COUNTS



      RELATED INITIALIZATION PARAMETERS

      ---------------------------------































                                  26-12


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 MAF SENSOR TEST





                               --------

                             (  ENTER   )

                               --------

                                  |

                                  v

                              /--------\ NO

                             / IMAF =>  \----------------->|

                             \ VMAFO1   /                  |

                              \--------/                   |

                                  | YES                    |

                                  v                        |

                              /--------\ YES   !-------!   |

                             / IMAF =>  \----->!CODE 56!-->|

                             \ VMAMAX   /      !-------!   |

                              \--------/                   |

                                  | NO                     |

                                  v                        |

                              !--------!                   |

                              ! CODE 26!                   |

                              !--------!                   |

                                  |                        |

                                  |<-----------------------|

                                  v

                               --------

                             (   EXIT   )

                               --------



























































                                  26-13


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 EGR SENSOR TEST





           (PFE)                          

        -----------                       

      (    ENTER    )

        -----------

             |                                    

             v                                                    

        /---------\  YES       -----------             

       / PFEHP =2  \-------->(    EXIT      )

       \           /           -----------

        \---------/                              

             | NO                               

             v                                (SONIC)            

        /---------\                        

       /  PFEHP=1  \  NO                    /---------\  NO

       \     ?     /---------------------->/  PFEHP=0  \-------------------| 

        \---------/                        \     ?     /                   | 

             |  YES                         \---------/                    |

             |                                   |  YES                    |

             |                                   v                         |

             v                              /---------\ YES !---------!    |

        /---------\                        /  IEVP <=  \--->! CODE 31 !--->|

       /   IEPT<=  \ YES !---------!       \  EVPMIN   /    !---------!    |

       \   EPTMIN  /---->! CODE 31 !----|   \---------/                    |

        \---------/      !---------!    |        | NO                      |

             |  NO                      |        v                         |

             v                          |   /---------\ YES !---------!    |

        /---------\                     |  /  IEVP >=  \--->! CODE 35 !--->|

       /   IEPT >= \ YES !---------!    |  \  EVPMAX   /    !---------!    |

       \   EPTMAX  /---->! CODE 35 !--->|   \---------/                    |

        \---------/      !---------!    |        | NO                      |

             |  NO                      |        v                         |

             v                          |   /---------\ YES !---------!    |

        /---------\                     |  /  IEVP <   \--->! CODE 32 !--->|

       /   VEPTLL  \ NO  !---------!    |  \  VEVPLL ? /    !---------!    |

      / <= IEPT <=  \--->! CODE 34 !--->|   \---------/                    |

      \    VEPTHL   /    !---------!    |        | NO                      |

       \           /                    |        v                         |

        \---------/                     |   /---------\ YES !---------!    |

             |  YES                     |  /  IEVP >   \--->! CODE 34 !--->|

             |<-------------------------|  \  VEVPHL ? /    !---------!    |

             v                              \---------/                    |

        -----------                              | NO                      |

      (     EXIT    )                            |<------------------------|

        -----------                              v

                                            -----------

                                          (     EXIT    )

                                            -----------

















                                  26-14


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  ACC/NDS INPUT TEST





                                       

                                 ------

                              (  ENTER  )  

                                 ------

                                   |

                                   v

                            NO /--------\

                     |<------ /TRLOAD =  \ 

                     |        \ 3 OR 4   /

                     |         \--------/

                     |             | YES

                     |             v

                     |         /--------\ NO      !-------!

                     |        /IS NDSFLG \------->!CODE 67!

                     |        \  = 0     /        !-------!

                     |         \--------/             |

                     |             | YES              |

                     |------------>|<-----------------|

                                   |

                                   v

                               /--------\ NO      !-------!

                              /IS A3C=0? \------->!CODE 79!

                              \          /        !-------!

                               \--------/             |

                                   | YES              |

                                   |<-----------------|

                                   |

                                   v

                                 ------

                               (  EXIT  )  

                                 ------

















































                                  26-15


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





               

                                   IVPWR INPUT TEST





                      ----------

                    (   ENTER    )

                      ----------

                          |

                          v

                     /---------\

                    / IIVPWR    \  YES     !---------!

                    \ < VKYPWR  /--------->! CODE 19 !

                     \---------/           !---------!

                          |  NO                 |

                          |<--------------------|

                          v

                      ---------

                    (  EXIT     )

                      ---------





              NOTE: This test is designed to check continuity of

                    the IVPWR circuit internal to the EEC module.

                    It is not to be used as a battery voltage

                    check.  If the IVPWR circuit opens up, an

                    incorrect fuel pulse width will result.





                    COUNTS = IIVPWR *.1786 * 1023

                             --------------------

                                   VREF







                    IIVPWR = VREF * COUNTS

                               -------------

                                .1786 * 1023







                    RECOMMENDED VKYPWR VALUE: 200 COUNTS (5.47 VOLTS)



































                                  26-16


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          POWER STEERING PRESSURE SWITCH TEST





                        ----------              

                      (   ENTER    )            

                        ----------              

                            |

                            |

                            v

                       /---------\  NO

                      / PSPSHP=1 ?\----->( GO TO NEXT TEST )

                      \           /

                       \---------/

                            | YES

                            v

                      /-----------\

                     /  POWSFG = 1 \ YES      !---------!

                    /      ?        \-------->! CODE 52 !----|

                    \ (SWITCH OPEN) /         !---------!    |

                     \             /                         |

                      \-----------/                          |

                            | NO                             |

                            |<-------------------------------|

                            v

                      -----------

                    (   EXIT      )

                      -----------































































                                  26-17


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              OUTPUT CIRCUIT CHECK (OCC)





      The OCC uses special module hardware to test certain output  channels  for  open

      circuits/shorted  drivers.  The hardware consists of a resistor- divider network

      which is fed back into an A/D channel.  The  test  begins  by  turning  off  all

      outputs  in the network.  Outputs are then turned on and off, one at a time, and

      the A/D channel is used to determine the change in voltage associated with each.

      A  voltage  change  smaller  than expected causes a fault code to be registered.

      The output channels, their associated fault codes, and expected  voltage  change

      calibration parameters for each appear below.





               OC# | CIRCUIT FUNCT. | CAL. PARAMETER | ERROR CODE

               ____|________________|________________|____________ 

                4  |    EVR         |    OCCDT4      |    84 

      9X,NU     7  |    FP          |    OCCDT7      |    87

              ----------------------------------------------------

                1  |    AM2  1)     |    OCCDT1      |    81

                2  |    AM1  1)     |    OCCDT2      |    82

      LU        4  |    EVR  2)     |    OCCDT4      |    84

                5  |    CANP 3)     |    OCCDT5      |    85

                7  |    FP          |    OCCDT7      |    87

                9  |    CCO  4)     |    OCCDT9      |    89  

              ---------------------------------------------------

                1  |    AM2  1)     |    OCCDT1      |    81

                2  |    AM1  1)     |    OCCDT2      |    82

                3  |    HEDF 5)     |    OCCDT3      |    83

      MU,GU     4  |    EVR  2)     |    OCCDT4      |    84

                5  |    CANP        |    OCCDT5      |    85

                7  |    FP          |    OCCDT7      |    87

                8  |    EDF  6)     |    OCCDT8      |    88

      MU ONLY   9  |    LUS  10)    |    OCCDT9      |    89

                   |    SCVNT 11)   |    OCCDTA      |    81

                   |    SCVAC 11)   |    OCCDTB      |    82  

              --------------------------------------------------

                1  |    BOOST       |    OCCDT1      |    81

                2  |    HEDF        |    OCCDT2      |    82

                4  |    EGR-S/O     |    OCCDT4      |    84

      1U        6  |    FP          |    OCCDT6      |    86

                7  |    EDF         |    OCCDT7      |    87

                8  |    CCO         |    OCCDT8      |    88

































                                  26-18


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





              OC#  |CIRCUIT FUNCT.  | CAL. PARAMETER | ERROR CODE

             ----------------------------------------------------

                1  |    SCVNT       |    OCCDT1      |    81 *

                2  |    SCVAC       |    OCCDT2      |    82 *

                3  |    HEDF   8)   |    OCCDT3      |    83

      NQ        4  |    EVR         |    OCCDT4      |    84

                5  |    CANP        |    OCCDT5      |    85

                7  |    FP          |    OCCDT7      |    87

                8  |    EDF         |    OCCDT8      |    88

                9  |    LUS    4)   |    OCCDT9      |    89           

             ----------------------------------------------------

                1  |    SCVNT       |    OCCDT1      |    81 *

                2  |    SCVAC       |    OCCDT2      |    82 *

                3  |    HEDF        |    OCCDT3      |    83

      CJ        4  |    EVR    2)   |    OCCDT4      |    84

                5  |    CANP        |    OCCDT5      |    85

                6  |    AM-1   1)   |    OCCDT6      |    86

                7  |    FP          |    OCCDT7      |    87

                8  |    EDF         |    OCCDT8      |    88

                9  |    LUS/CCO  9) |    OCCDT9      |    89               





               NOTES:



                       FP    - FUEL PUMP 

                       EVR   - ELECTRONIC VACUUM REG.   



               1) ONLY IF THRMHP=1

               2) ONLY IF PFEHP=0 OR 1

               3) ONLY IF CANPHP-1 OR 2

               4) ONLY IF TRANSW=0 OR 2

               5) ONLY IF HEDFHP=1

               6) ONLY IF EDFHP=1

               7) ONLY IF TRANSW=0 (AXOD) 

               8) ONLY IF MTXSW=0 (ATX)

               9) ONLY IF TRANSW=0(AXOD) OR =2 (A4LD)

              10) ONLY IF TRTYPE=0 (AXOD) MU ONLY

              11) ONLY IF VSTYPE=2 (Veh. Spd. Cont.)



               * Functioned during VSC Self Test Only





































                                  26-19


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                     OCC TEST STRUCTURE



                              -----------             

                            (    ENTER    )

                              -----------

                                   |

                    !-------------------------!

                    !DE-ENERGIZE ALL OUTPUTS  !

                    !(EXCEPT EDF)**

                    ! . OC=1                  !

                    !-------------------------!

                                   |              NOTE: HEDF TEST MUST

                           !----------------!        IMMEDIATELY FOLLOW

                           ! DELAY 50 MSEC. !        EDF TEST

                           !----------------!

                                   |          **ONLY WHEN EDF IS PRESENT

           |---------------------->|

           |            !---------------------!

           |            ! SAVE IOCC IN OCCSAV !

           |            !---------------------!

           |                       |

           |           !-----------------------!

           |           !ENERGIZE* OUTPUT #(OC) ! 

           |           !-----------------------!  

           |                       |         *EXCEPT OC #8(EDF)**WHICH     

           |               !----------------! SHOULD BE DE-ENERGIZED    

           |               ! DELAY 50 MSEC. ! DURING THIS STEP

           |               !----------------!

           |                       |

           |                /-------------\           !-------------!

           |               /  ABS[OCCSAV-  \     NO   !     SET     !

           |              /   IOCC]    >=   \-------->! APPROPRIATE !

           |              \ OCCDT(OC) COUNTS/         !  FAIL CODE  !

           |               \       ?       /          ! (SEE TABLE) !

           |                \-------------/           !-------------!

           |                       |  YES                    |

           |                       |<------------------------|

           |                       v

          (A)                 /--------\ YES     !-----------!

                             /IS THIS   \------->!  DELAY    !

                             \  EDF ?   /        !VDLEDF-SEC !

                              \--------/         !-----------!

                                   |<------------------|

                                NO |

                                   v

                              /--------\ YES     !-----------!

                             / IS THIS  \------->!  DELAY    !

                             \   HEDF ? /        !VDLHED-SEC !

                              \--------/         !-----------!

                                   |<------------------|

                                N0 |

                                   v

                                  (B)











                                  26-20


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                     OCC TEST STRUCTURE





                                  (B)

          (A)                      |

           ^                       v

           |         !--------------------------!

           |         !DE-ENERGIZE  OUTPUT #(OC) ! 

           |         !--------------------------!   

           |                       |                

           |               !----------------!       

           |               ! DELAY 50 MSEC. !

      !----------!         !----------------!

      ! OC= OC+1 !                 |          

      !----------!            /---------\           

           |           NO    /    IS     \          

           |<---------------/ OC= LASTOC ?\         

                            \             /         

                             \           /          

                              \---------/           

                                   |  YES

                                   v

                              -----------

                            (    EXIT     )

                              -----------



































































                                  26-21


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 OCC PARAMETER DEFINITIONS





                                                    RANGE

           NAME    |    DESCRIPTION    | UNITS |  MIN    MAX  | BASE

       ------------|-------------------|-------|--------------|------

           OC      | OUTPUT CIRCUIT #  |   -   |   0      9   |   -

         OCCSAV    | SAVED OCC A/D     |COUNTS |   0    1023  |   -

          IOCC     | OCC A/D           |COUNTS |   0    1023  |   -

       OCCDTx(1-9) | MIN A/D CHANGE    |COUNTS | -1023  1023  |  36

































































































                                  26-22


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                   FUEL PUMP CIRCUIT TEST





                            --------

                          (  ENTER   )

                            --------

                               |

                               v

                       NO  /--------\

            |<------------/ IS V_    \

            |             \FPMFLG=1? /

            |              \--------/

            |                  |YES

            |                  v

            |          YES /--------\

            |<------------/IS CODE   \     

            |             \  87 SET? /

            |              \--------/

            |                  |NO

            |                  v

            |          !------------------!

            |          !1)TURN FP "ON"    !

            |          !2)DELAY V_FPMDLY  !

            |          !------------------!

            |                  |

            |                  v

            |             /--------\ NO       !---------!

            |            / IS FPM   \-------->! CODE 96 !

            |            \ HIGH ?   /         !---------!

            |             \--------/               |

            |                  |YES                |

            |                  |<------------------|

            |                  v

            |          !------------------!

            |          !1)TURN FP "OFF"   !

            |          !2)DELAY V_FPMDLY  !

            |          !------------------!

            |                  |

            |                  v

            |             /--------\ NO       !----------!

            |            / IS FPM   \-------->! CODE 95  !

            |            \ LOW ?    /         !----------!

            |             \--------/               |

            |                  | YES               |

            |----------------->|<------------------|          

                               v

                            --------

                          (  EXIT    )

                            --------



















                                  26-23


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





       

                                   KAM QUALIFICATION TEST





      PERFORMED EACH BACKGROUND LOOP





      KAMQA= 10101010 BINARY----|         | .SET KAMOK =1

                                |         | .ASSUME KAM DATA IS VALID

      KAMQB= 11000110 BINARY----| AND-----| .ALL STRATEGY REFERENCES

                                |         |  TO KAM WILL USE RAM DATA.

      KAMQC= 01110101 BINARY----|         |

                                          |      ---ELSE---

                                          |

                                          | .CLEAR KAMOK =0 & SET 

                                          |  VIPKAM =1

                                          | .ASSUME KAM DATA IS BAD.

                                          | .INITIALIZE ALL KAM 

                                          | LOCATIONS USED IN THE 

                                          | STRATEGY.

                                          | .WRITE THE SPECIAL BINARY

                                          |  PATTERNS TO KAM:

                                          |    KAMQA= 10101010 BINARY

                                          |    KAMQB= 11000110 BINARY

                                          |    KAMQC= 01110101 BINARY

                                          | .SUBSTITUTE THE KAM INITIAL

                                          |  VALUES FOR ALL STRATEGY

                                          |  REFERENCES TO KAM.

                                          |

                                          | NOTE:

                                          |   VIPKAM INITIALIZED TO 0

                                          |   ON POWER-UP.





















































                                  26-24


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                      OUTPUT TEST MODE





      In this mode, normal outputs, EDF or HEDF can be turned on/off based on operator

      requests.



      NORMAL OUTPUTS  ON/OFF  LOGIC  ---------------------------  Move  throttle  part

      mid-range, then release to turn on/off normal outputs.



      EDF ON/OFF LOGIC ---------------- With STO high, move  throttle  past  mid-range

      and  hold  until  Code  10  is displayed on Star Tester (approx.  10 sec.), then

      release throttle to turn "on" EDF and normal outputs.   To  turn  "off"  outputs

      move throttle past mid-range and then release.



      HEDF ON/OFF LOGIC ----------------- With STO high, move throttle past  mid-range

      and hold until Code 10 and then Code 20 is displayed on Star Tester (approx.  15

      sec.), then release throttle to run "on" HEDF and normal outputs.  To turn "off"

      outputs move throttle past mid-range and then release.





                                       NORMAL OUTPUTS



           1)  AM1   2) EDF  3) HEDF  

           1)  AM2      EVR     ISC       

              CANP



           5) SCVAC     STO

              SCVNT     WAC



      1)  FUNCTION ONLY WHEN THRMHP=1

      2)  FUNCTION ONLY WHEN EDFHP=1

      3)  FUNCTION ONLY WHEN HEDFHP=1

      4)  FUNCTION ONLY WHEN TRTYPE=0 - MU ONLY

      5)  FUNCTION ONLY WHEN VSTYPE=2

















































                                  26-25


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 OUTPUT TEST MODE (CONT'D)

                              For Application with EDF or HEDF



      1. RESET OUTTMR & VIP TIMER  2. CLEAR VLFNON & VHFN ON

         PRIOR TO ENTRY



        -----           /--------\ YES      -----

      ( ENTER )------->/ARE CODES \------>( EXIT  )

        -----         /  BEING     \        -----

                      \  OUTPUTTED?/

                       \          /

                        \--------/

                            | NO

           |<---------------|

           v

       /--------\ NO        /--------\ NO        /--------\ NO    

      / ITP >    \-------->/IS REQFLG \-------->/IS OUTTMR \----->|

      \ VTAP5    /  ^  ^   \  SET ?   /   ^     \=> 10 MIN /      |

       \--------/   |  |    \--------/    |      \--------/       |

           |YES     | (B)       | YES     |          | YES        |

           v        |           v         |          |            |

       !-------!    |       /--------\NO  |          |            |

       !. SET  !    |      / ITP <=   \---|          |            |

       !REQFLG !    |      \  VTAP6   /              |            |

       !-------!    |       \--------/               |            |

           |        |           |YES                 v            |

           v        |           |               !----------!      |

       /-------\YES |           v               !TURN ALL  !      |

      /ARE OUT- \---|       /--------\YES       !ACTUATORS !      |

      \PUTS ON? /          /ARE OUT-  \-------->!"OFF" IN- !      |

       \-------/           \PUTS ON?  /         !CLUDING   !      |

           | NO             \--------/          !EDF & HEDF!      |

           v                    |NO             !----------!      |

          (A)                   |                    |            |

                                v                    |            |

           !---------!   YES/--------\               |            |

           !TURN "ON"!<----/IS "VLFN  \              |            | 

           !  EDF    !     \ON"FLG SET/              |            |

           !---------!      \--------/               |            |

               |                |NO                  |            |

               |--------------->|                    |            |

           !---------!   YES/--------\               |            |

           !TURN "ON"!<----/IS "VHFN  \              |            |

           ! HEDF    !     \ON"FLG SET/              |            |

           !---------!      \--------/               |            |

               |                |NO                  |            |

               |--------------->|                    |            |

                        !---------------!     !-------------!     |

                        !TURN "ON"      !---->!.CLEAR VLFNON!     |    

                        !REGULAR OUTPUTS!     !VHFNON&REQFLG!     |

                        !---------------!     !.SET OUTTMR=0!     |

                                              !-------------!     |

              -----        !---------!               |            |           

            ( EXIT  )<-----!SET VIP  !<---------------------------|

              -----        !TMR =0   !

                           !---------!





                                  26-26


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                    OUTPUT TEST MODE (CONT'D)

                                For Application with EDF or HEDF





                    (A)

                     |

                     v

             !---------------!

             !ALLOW VIP-TMR  !

             !   TO RUN      !

             !---------------!

                     |

                /--------\ NO

               /IS HEDFHP \-----------|

               \    =1 ?  /           |

                \--------/            |      /--------\ N0

                     | YES            |---->/IS EDFHP  \----->(B)

                     v                |     \   =1?    /

                /---------\NO         |      \--------/

               /IS VIPTMR >\----------|          | YES

               \  VHFNTM   /                     v

                \---------/                  /--------\NO

                     |YES                   /IS VIPTMR \-----------|

                     v                      \> VLFNTM  /           |

                /---------\NO                \--------/            |

               /IS "VHFNON"\---------|           |YES              |

               \   =0?     /         |           v                 |

                \---------/          |       /--------\NO          |

                     |YES            |      /IS VLFNON \---------->|

                     v               |      \   =0 ?   /           |

            !-----------------!      |       \--------/            |

            !.SET "VHFNON"=1  !      |           |YES              |

            !.SET "VLFNON"=0  !----->|           v                 |

            !OUTPUT CODE 20   !      |    !--------------!         |

            !-----------------!      |    !.SET VLFNON=1 !-------->|

                                     |    !OUTPUT CODE 10!         |

                                     |    !--------------!         |

                                     v                             v   

                                   ------                       ------

                                 (  EXIT  )                   (  EXIT  )

                                   ------                       ------



































                                  26-27


                           ENGINE-OFF SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL

























































































































                                  26-28

























                                          CHAPTER 27



                                   ENGINE-RUNNING SEQUENCE































































































                                   27-1


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                         

                               ENGINE-RUNNING

                               TEST STRUCTURE



                      -----------

                     (    ENTER    )

                       -----------

                           |

                 !---------------------!

                 !   ENGINE-RUNNING    !

                 ! TEST INITIALIZATION !

                 !---------------------!

                           |

                    /--------------\

                   /HIGH RPM ISC    \

                   \     TEST       /

                    \--------------/

                           |

                    /---------------\     

                   /    A/D  AND     \

                   \  SWITCH TESTS   / 

                    \---------------/

                           |

                   /-----------------\     

                  /      FUEL AND     \

                  \ THERMACTOR TESTS  /  

                   \-----------------/     

                           |

                      /---------\     

                     /   EGR     \

                     \   TEST    /

                      \---------/

                           |

                     /----------\

                    / LOW RPM    \             |---------->|<---------|

                    \ ISC TEST   /             |           v          |

                     \----------/              |  NO  /-----------\   |

                           |                   |  |<-/IS CYLINDER  \  |

                           |                   |  | /BALANCE TEST   \ |

                           |                   |  | \   REQUESTED ? / |

                           |                   |  |  \             /  |

                           |                   |  |   \-----------/   |

                  !--------------------!       |  |        | YES      |

                  ! SEND SERVICE CODES !------>|  |        v          |

                  !--------------------!          |   /-----------\   |

                                                  |  / DO CYLINDER \  |

                   !-------------------!          |  \ BALANCE TEST/  |

                   !   2 MINUTE DELAY  !<---------|   \-----------/   |

                   ! FOR TIMING CHECK  !                   |          |

                   !-------------------!                   v          |

                           |                         !----------!     |

                      /---------\      ----          ! CYLINDER !     |

                     /  WIGGLE   \--->(EXIT)         ! BALANCE  !---->|

                     \   TEST    /     ----          ! SERVICE  !

                      \---------/                    !----------!







                                   27-2


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                        EGOBAR FILTER AND STATE FLAGS









      IEGO is filtered in EGOBAR (side) -where side =left or  right  on

      stereo  systems,  left  only  on mono systems.  Time constant for

      EGOBAR is VTCEGO (a calibratible parameter).   EGOSTE  (side)  is

      the resultant ego state flag, determined as follows:





      Non-shared ego{EGOBAR (side) > 855 counts-->EGOSTE (side)=lean(1)

                    {EGOBAR (side) <=855 counts-->EGOSTE (side)=rich(0)





      Shared ego/STI{EGOBAR (side) > 425 counts-->EGOSTE (side)=lean(1)

                    {EGOBAR (side) <=425 counts-->EGOSTE (side)=rich(0)



















































































                                   27-3


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                         DELAY LOGIC CLARIFICATION:





                            DELAY VDLY(x) MEANS:





                               !----------!

                               !   SET    !

                               ! VIPTMR=0 !

                               !----------!

                                     |

                                     |<-------------|

                                     v              |

                                /---------\    YES  | 

                               / VIPTMR <  \--------|

                               \ VDLY(x) ? /

                                \---------/       

                                     |  NO

                                     |

                                     v

                                  CONTINUE





                         TIMER LOGIC CLARIFICATION:



                           "RESTART VIPTMR" MEANS:

                                SET VIPTMR=0































































                                   27-4


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                        ENGINE-RUNNING INITIALIZATION





             N0  /-------\        -----------

          |-----/VDISFM = \<----(    ENTER    )

          |     \   0?    /       -----------

          |      \-------/                             

          |          |YES   /--------------------\        !-----------!

          |          |     /IS ANY OF THE FOLLOW- \YES    !OUTPUT CODE!

          |          |--->/ING FMEMFLG SET =1?     \----->!98 AND THE !

          |              *\MFMFLG,TFMFLG,AFMFLG,OR /      !CORRESPOND-!

          |                \      CFMFLG          /       !ING FMEM   !

          |                 \--------------------/        !FAULT CODE !

          |                            | NO               !-----------!

          |--------------------------->|                        |

           *MAF FMEM FLAG IN GX        |                     ------

                                       |                   (  EXIT  )

                                       v                     ------

                     !----------------------------------!

                     ! .LAMBSE1=LAMBSE2=VRLAM(OPEN LOOP)!

                     ! .SPARK ADVANCE =VIPSPK           !

                     ! .KNOCKEABLE = 0 (DISABLE KTS     !

                     !    PULSES                        !

                     ! .EVRDC = 0                       !

                     ! .AM1, AM2 AND CANP "OFF"         !

                     ! .DE-ACTIVATE DECELL FUEL SHUTOFF !

                     ! .TURN WAC "OFF"  (A/C OFF)       !       

                     ! .KAMRF1=KAMRF2=KAMREF=1.0        !

                     ! .ENABLE AE THROUGHOUT TEST       !

                     ! .DSDRPM = VISCN                  !

                     ! .DISABLE TRANSIENT FUEL          !

                     ! .SET TCDESN=VTCDSN WHEN VTCDSN   !

                     !    NOT = 0                       !

                     ! .SET CODES 74,75 & 52            !

                     ! .ENABLE SELF-TEST IEPT FILTER:   !

                     !   FIEPT=(1=VFIEPT)=FIEPT+VFIEPT= !

                     !   IEPT                           !

                     ! .DISABLE ADAPTIVE FUEL           !

                     ! .SET KPSIND = VPSIND             !

                     ! .SET KPSINU = VPSINU             !

                     ! .SET PSIBRM = VSIBRM             !

                     ! .SET PSIBRN = VSIBRN             !

                     ! .SET FN860 = V860                !

                     ! .SET FN820B = V820A              !

                     ! .SET FN824 = 1.0                 !

                     !----------------------------------!

                                       |

                                       v

                                      (A)



















                                   27-5


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                      ENGINE-RUNNING INITIALIZATION (CONT'D)





                                      (A)

                                       |

                                       v

      NOTE: USE "ENGCYL" TO   !------------------! 

        SELECT PROPER ENGINE  ! SEND ENGINE I.D. ! 

        ID CODE.              !      CODE        !   

        ID CODE= # OF CYL/2   !------------------! 

                                       |  --WAIT HERE UNTIL PULSING

                                       v    IS COMPLETE

                                   --------

                                 (   EXIT   )

                                   --------























































































                                   27-6


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                HIGH RPM ISC TEST





                                    --------

                                  (   ENTER  )

                                    --------

                                       |

                                       v

                        !-----------------------------!   

                        !     DO VIP DESIRED RPM      !

                        !        CALCULATION          !

                        !-----------------------------!

                                       |  

                                       v

                                !------------!

                                !DELAY VISDL1!

                                !------------!

                                       |

                 NO  /---------------------------------\                  

           |--------/ (VISCN+ISUBND)>RPM>(VISCN-ISUBND) \

           |        \                ?                  /

           |         \---------------------------------/

           |                           | YES

           v                           v

      !-----------!           !--------------------!

      !SET CODE 12!---------->!.FIX DC (OPEN LOOP) !     

      !-----------!           !.IGNORE DSDRPM CALC.!

                              !--------------------!

                                       |

                                       v

                                   ---------

                                 (   EXIT    )         

                                   ---------



















































                                   27-7


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  ENGINE-RUNNING

                                A/D TEST STRUCTURE





                                 -----------

                               (    ENTER    )

                                 ----------- 

                                      |   

                                      v

                                 /---------\

                                / TEST ECT  \

                                \           /

                                 \---------/

                                      |

                                 /---------\

                                /  TEST TP  \

                                \           /

                                 \---------/

                                      |

                                 /---------\

                                / TEST ACT  \

                                \           /

                                 \---------/

                                      |

                                 /---------\

                                /   BRAKE   \

                                \   ON/OFF  /

                                 \---------/

                                      |

                                 /---------\

                                /   PSPS    \

                                \           /

                                 \---------/

                                      |

                                 /---------\

                                / TEST MAF  \

                                \           /

                                 \---------/

                                      |

                                 -----------

                               (     EXIT    )

                                 -----------

































                                   27-8


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 ECT SENSOR TEST





                           -----------

                         (    ENTER    )

                           -----------

                                |

                                v

                           /---------\

                          /   VIECT3  \   NO       !---------!

                         /  <=IECT <=  \---------->! CODE 21 !

                         \    VIECT4 ? /           !---------!

                          \           /                 |

                           \---------/                  |

                                |  YES                  |

                                |<----------------------|

                                v

                           ----------

                         (     EXIT   )

                           ----------





      PARAMETER                                          TYPICAL CALIBRATION

        NAME                  DESCRIPTION                       VALUE

      -----------     --------------------------------   -------------------

      VIECT3          MIN. COOLANT TEMP (ENGINE-ON)          235 COUNTS

      VIECT4          MAX. COOLANT TEMP (ENGINE-ON)           63 COUNTS

      RELATED INITIALIZATION PARAMETERS

      ---------------------------------



























































                                   27-9


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  TP SENSOR TEST





                        -----------

                      (    ENTER    )

                        -----------

                             |

                             v

                        /---------\                          

                       /   VTAP3   \   NO      !---------!   

                      /  <=ITP <=   \--------->! CODE 23 !

                      \    VTAP4 ?  /          !---------!

                       \           /                |

                        \---------/                 |

                             |  YES                 |

                             |<---------------------|

                             v

                        -----------

                      (     EXIT    )

                        -----------





      PARAMETER                                   TYPICAL CALIB-

         NAME              DESCRIPTION            RATION  VALUE

      ------------    --------------------------  --------------

        VTAP3         MIN. THROTTLE POSITION        150 COUNTS

        VTAP4         MAX. THROTTLE POSITION        250 COUNTS

                                                    (CALIB. DEP)

      RELATED INITIALIZATION PARAMETERS 

      ---------------------------------

























































                                  27-10


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 ACT SENSOR TEST





                           -----------

                         (    ENTER    )

                           -----------

                                |

                                v

                           /---------\

                          /   VIACT3  \    NO      !---------!

                         /  <=IACT <=  \---------->! CODE 24 !

                         \    VIACT4 ? /           !---------!

                          \           /                 |

                           \---------/                  |

                                |  YES                  |

                                |<----------------------|

                                v

                           -----------

                         (     EXIT    )

                           -----------





      PARAMETER                                      TYPICAL CALI-

        NAME              DESCRIPTION                BRATION VALUE

      -------------  ------------------------------  -------------

      VIACT3         MIN. CHARGE TEMP. (ENGINE-ON)     670 COUNTS

      VIACT4         MAX. CHARGE TEMP. (ENGINE-ON)      63 COUNTS

                     IF IN AIR CLEANER                 760 COUNTS

      RELATED INITIALIZATION PARAMETERS

      ---------------------------------

























































                                  27-11


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                BRAKE ON/OFF TEST





                                                    

                              NO /--------\       --------

                   |<-----------/ VB1SW    \<---(  ENTER   ) 

                   |            \  = 1     /      --------

                   |             \--------/                

                   |                  | YES            

                   v                  v

               !-------!        /---------\        

               ! CLEAR !    NO /  BIHP=1   \         

               ! CODES !<------\     ?     /           

               !74 & 75!        \---------/

               !-------!             |

                   |                 | YES

                   |                 v

                   |            /---------\        !--------!

                   |           / BIFLG=1   \ YES   ! CLEAR  !

                   |          /(BRAKE ON    \----->! CODE 74!

                   |          \ BOO HIGH) ? /      !--------!

                   |           \           /           | 

                   |            \---------/            |

                   |                 |                 |

                   |                 | NO              |

                   |                 v                 |

                   |           !----------!            |

                   |           !CLEAR CODE!            |

                   |           !    75    !            |

                   |           !----------!            |

                   |                 |                 |

                   |---------------->|<----------------|

                                     v

                                 ---------

                              (   EXIT     )

                                 ---------





                   NOTE:  This test is run continuously from

                          I.D. code output to service code 

                          output (including "Goose" test).



































                                  27-12


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                    PSPS TEST





                          --------

                        (  ENTER   )

                          --------

                             |

                             v

                        /---------\NO

                       / VPSSW = 1 \------------->|

                       \           /              |

                        \---------/               |  

                             |                    |

                        /---------\ NO            |

                       / PSPSHP=1? \------------->|

                       \     ?     /              |

                        \---------/               |

                             | YES                |

                             |                    |

                      /-------------\YES    !----------!

                     /PSPS CHANGED   \----->!  CLEAR   !

                     \     STATE ?   /      ! CODE 52  !

                      \-------------/       !----------!

                             | NO                 |

                             |<-------------------|

                             v

                         --------

                       (  EXIT    )

                         --------



          NOTE:  TEST TO BE PERFORMED JUST AFTER THE "ENGINE I.D.

                 PULSE BY TURNING STEERING WHEEL 1/4 TO 1/2 TURN 

                 THEN RELEASING.



















































                                  27-13


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 MAF SENSOR TEST





                         --------

                       (  ENTER   )

                         --------

                            |

                            |

                            v

                    /----------------\  YES     !--------!

                   /IMAF => VMAFR2 OR \-------->!CODE 26 !

                   \   IMAF <= VMAFR1 /         !--------!

                    \----------------/              | 

                            | NO                    |

                            |                       |

                            |<----------------------|

                            |

                            v

                         --------

                       (  EXIT    )

                         --------











































































                                  27-14


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





       

                                EGO SWITCHING TEST

                                     (STEREO)





        ---------

      (   ENTER   )

        ---------

            |            !-------------!

            v            !IF NUMEGO=1  !      !----------------!

        /---------\ YES  !SET CODE 42 &!      !.RAMP FUEL LEAN !

       / NBAR >=   \---->!IF NUMEGO=2  !----->!   VIPLR1       !

       \  VNMIN    /     !.SET CODES 42!  ^   !.CLIP AT LEAN   !

        \---------/      !& 92         !  |   !  LIMIT LEQV    !

            | NO         !.START VIPTMR!  |   !----------------!

            |            !-------------!  |           |

            |                             |           v

            |                             |     /----------\ YES

            |                             |    / EGOSTE1=1  \------|

            |                             |    \  LEAN ?    /      |

            |                             |     \----------/       |

            v                             |           | NO         v

        --------------    !----------!    |           |       !---------! 

      (  EXIT ENGINE   )  ! CONTINUE !--->|           |<------!  CLEAR  !

         RUNNING TEST     ! RAMPING  !                |       ! CODE 42 !

        -------------     !----------!                v       !---------!

                               ^                /----------\YES

                               |               / EGOSTE2=1  \------|

                               |               \  LEAN ?    /      |

                               |                \----------/       |

                               |                      | NO         v

                               |                      |       !---------!

                               | NO                   |<------!  CLEAR  !

                               |                      |       ! CODE 92 !

                               |                      v       !---------!

                         /----------\       YES /----------\

                        / VIPTMR >=  \<--------/IS 42 OR 92 \

                        \ VIPTM3     /         \  PRESENT   / 

                         \----------/           \----------/

                               |                      | NO

                               v                      v

                        !--------------!            ( A ) 

                        !STORE CODE(s) !

                        !WHICH DID NOT !

                        !    CLEAR     !

                        !--------------!

                               |

                               v

                             (AA)



















                                  27-15


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              EGO SWITCHING TEST (CONT'D)





                !-----------------!

                !IF NUMEGO=1 SET  ! 

                !CODE 41 & IF     !       !------------------!

      (A)------>!NUMEGO=2 THEN    !       !.RAMP FUEL RICH AT!

                !SET CODES 41 & 91!------>!    VIPRR1        !

                !START VIPTMR     !   ^   !.CLIP AT RICH     !

                !-----------------!   |   !    LIMIT REQV    !

                                      |   !------------------!

                                      |            |

                      |--------------------------->|

                      |               ^            v

                      |               |      /---------\ YES

                      |               |     / EGOSTE1=0 \-------|

                      |               |     \   RICH ?  /       |

                      |               |      \---------/        |

                      |               |            | NO         |

                      |        !-----------!       |            v

                      |        !CONTINUE   !       |      !----------!

                      |        !RAMPING    !       |<-----!CLEAR CODE!

                      |        !ZERO VIPTMR!       |      !    41    !

                      |        !-----------!       |      !----------!

                      |               ^            v

                      |               |      /---------\ YES

                      |               |     / EGOSTE2=0 \-------|

                      |               |     \   RICH ?  /       |

                      |               |      \---------/        |

                      |               |            | NO         |

                      |               |            |            v

                      |               |            |      !----------!

                      |               |            |<-----!CLEAR CODE!

                      |               |N0          |      !    91    !

                      |               |            |      !----------!

                      |               |            |

                /---------\ YES /---------\ YES/---------\       

               / VIPTM >=  \<--/IS LAMBSE  \<-/IS 41 OR 91\

               \ VIPTM4    /   \ =< REQV ? /  \ PRESENT ? /

                \---------/     \---------/    \---------/

                      |NO                          | NO

                      v                            v

              !-------------!                -----------------

      (AA)<---!STORE CODE(s)!              ( EXIT TO NEXT TEST )

              !WHICH DO NOT !                -----------------

              !    CLEAR    !

              !-------------!



              !--------------!     !----------!      ----------------

      (AA)--->!SET LAMBSE1 & !---->!  DELAY   !--->( EXIT TO EGR TEST )        

              !LAMBSE2=VRLAM !     !  VDLY8   !      ----------------

              !--------------!     !----------! 













                                  27-16


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                       AIR TEST





            (C)                 (C)

             ^                   ^

             |NO                 |NO

         /--------\      YES /--------\             -----

        /VAIRFL=1  \<-------/THRMHP=1? \<--------(  ENTER  )

        \          /        \          /            -----

         \--------/          \--------/

             | YES

             v

        !------------!

        !IF NUMEGO=1 !

        !SET CODE 44 !

        !& IF NUMEGO=!

        !2 THEN      !     !----------!      !-------------!

        !SET CODES 44!---->!RAMP FUEL !----->!AIR UPSTREAM,!

        !& 94 START  !     !RICH AT   !      !AM1 & AM2    !

        ! VIPTMR     !     !VIPRR1    !      !    BOTH ON  !

        !------------!     !FOR VDLY1 !      !-------------!

                           !----------!             |

                            |---------------------->|

                            |                       v

                            |                  /---------\ YES

                            |                 /EGOSTE1=1  \------|

                            |                 \ (LEAN) ?  /      |

                            |                  \---------/       |

                            |                       | NO         |

                            |                       |       !---------!

                            |                       |<------!  CLEAR  !

                            |                       |       ! CODE 44 !

                            |                       |       !---------!

                            |                       v

                            |                  /---------\ YES

                            |                 /EGOSTE2=1  \----->| 

                            |                 \  (LEAN) ? /      |

                            |                  \---------/       |

                            | NO                    | NO         |

                            |                       |       !---------!

                            |                       |<------!  CLEAR  !

                            |                       |       ! CODE 94 !

                            |                       |       !---------!

                            |                       |

                       /---------\    YES     /----------\

                      /VIPTMR >   \<---------/IS 44 OR 94 \

                      \ VIPTM2    /          \  PRESENT   /

                       \---------/            \----------/

                            | YES                   | NO

                            v                       v

                    !-----------------!           ( B )

                    !STORE CODES WHICH! 

                    ! DID NOT CLEAR   !

                    !-----------------!

                            |

                            v

                          ( C )



                                  27-17


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                   AIR TEST (CONT'D)





                        ( B )

                          |

                          v

              !-----------------------!

              !.AIR DOWN STREAM,AM1   !

              !   ON, AM2 OFF         !            /--------\NO

              !. START VIPTMR         !           / VTABFL=1 \--->(C)

              !-----------------------! |-------->\          /          

                          |             |          \--------/

         |--------------->|             |               |

         |                v             |               v

         |           /---------\        |       !---------------!

         |          /EGOSTE1 OR \ YES   |       !AIR UPSTREAM & !     

         |         /EGOSTE2 = 0  \-------       !BYPASSED,AM1   !

         |         \  (RICH) ?   /      ^       !   OFF, AM2 ON !

         |          \           /       |       !DELAY VDLY2    !

         |           \---------/        |       !    SEC        !

         |                | NO          |       !---------------!

         |                |        !--------!           |

         |                |        !SET CODE!           |

         |                |        !  45    !           |

         |                |        !--------!           |

         |                |             |               v

         |     NO   /----------\ YES    |         /-----------\ YES

         |<--------/ VIPTMR >=  \------>|        / EGOSTE1 OR  \----|

                   \ VATMR2     /                \ EGOSTE2 =0 ?/    |

                    \----------/                  \-----------/     |

                                                        |           |

                                                        v           |

                                                   !----------!     |

                                                   !SET CODE  !---->|

                                                   !   46     !     v

                                                   !----------!   ( C)



                ( C )

                  |

           !--------------!         !-----------!         --------

           !SET LAMBSE1 & !-------->!DELAY VDLY8!------>(  EXIT    )

           !LAMBSE2=VRLAM !         !-----------!         --------

           !BOTH AM1 & AM2!

           !    OFF       !

           !--------------!



























                                  27-18


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                    EGR SYSTEM TEST



                                      (PFE/SONIC)



          (PFE)                          

        ---------

      (  ENTER    )

        ---------

            |

            v

        /---------\  YES       -----------             

       / PFEHP =2  \-------->(    EXIT     )

       \           /           -----------

        \---------/                              

             | NO                               

             v                               (SONIC)

        /---------\                        

       /  PFEHP=1  \  NO                   /---------\  NO

       \     ?     /--------------------->/  PFEHP=0  \--------------------| 

        \---------/                       \     ?     /                    |

             |  YES                        \---------/                     |     

             |                                  |  YES                     |

             |                                  v                          |

             v                             /---------\ YES  !---------!    |

       /---------\                        /  IEVP <=  \---->! CODE 31 !--->|

      / FIEPT <=  \YES  !--------!        \  EVPMIN ? /     !---------!    |

      \ EPTMIN    /---->!CODE 31 !----|    \---------/                     |

       \---------/      !--------!    |         | NO                       |

            |                         |         v                          |

            | NO                      |    /---------\ YES  !---------!    |

            v                         |   /  IEVP >=  \---->! CODE 35 !--->|

       /---------\                    |   \  EVPMAX ? /     !---------!    |

      / FIEPT >=  \ YES !--------!    |    \---------/                     |

      \ EPTMAX    /---->!CODE 35 !--->|         | NO                       |

       \---------/      !--------!    |         v                          |

            |                         |    /---------\ YES  !---------!    |

            | NO                      |   /  IEVP <   \---->! CODE 32 !--->|

            v                         |   \  VEVPLL ? /     !---------!    |

       /---------\                    |    \---------/                     |

      / FIEPT <   \ YES !--------!    |         | NO                       |

      \ VEPTRL    /---->!CODE 32 !--->|         v                          |

       \---------/      !--------!    |    /---------\ YES  !---------!    |

            |                         |   /  IEVP >   \---->! CODE 34 !--->|

            | NO                      |   \  VEVPHL ? /     !---------!    |

            v                         |    \---------/                     |

       /---------\                    |         | NO                       |

      / FIEPT >   \ YES !--------!    |         v                          |

      \ VEPTRH    /---->!CODE 34 !--->|       ( B )          ( EXIT )<-----|

       \---------/      !--------!    |                       

            |                         |

            | NO                      |

            v                         v

           (A)                    ---------

                                (   EXIT    )

                                  ---------







                                  27-19


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               EGR SYSTEM TEST (CONT'D)





                   (A)                               

                    |                                  

                    v                                  

        !----------------------!            

        !.SET VIPTMR=0         !            

        !.SAVE FIEPT -> FEPTSV !            

        !----------------------!            

                    |                                  

      |------------>|                    

      |             v                    

      |   !----------------------!       

      |   !.RAMP EGRDC AT VEGRAT !       

      |   ! START FROM VDCMIN TO !       

      |   ! VDCMAX.              !       

      |   !.EGRDC=VDCMIN +       !       

      |   ! VEGRAT*VIPTMR        !       

      |   !----------------------!       

      |             |                    

      |             |                    

      |             v                    

      |        /---------\               

      |       / FEPTSV-   \  YES 

      |      /  FIEPT >    \----|

      |      \  VEPTDL ?   /    |

      |       \           /     |

      |        \---------/      |       

      |             | NO        |

      |             v           |

      |    NO  /---------\      |

      |-------/ EGRDC >=  \     |

              \ VDCMAX ?  /     |

               \---------/      |

                    | YES       |

                    |           |

                    |           |

                    v           |

               !----------!     |

               ! CODE 33  !     |

               !----------!     |

                    |           |

                    |           |

                    |<----------|

                    v                         

            !---------------!                 

            !.SET EGRDC=0   !                 

            !.SET VIPTMR=0  !                 

            !---------------!                 

                    |                         

                    |

                    v

                ---------

              (   EXIT    )

                ---------





                                  27-20


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                  ( B )

                    |

                    v

         !---------------------!

         !.SET VIPTMR =0       !

         !.SAVE IEVP -> IEVPSV !

         !---------------------!

                    |                                  

      |------------>|

      |             v

      |   !----------------------!

      |   !.RAMP EGRDC AT VEGRAT !

      |   ! START FROM VDCMIN TO !       

      |   ! VDCMAX.              !       

      |   !.EGRDC=VDCMIN +       !       

      |   ! VEGRAT*VIPTMR        !       

      |   !----------------------!       

      |             |                    

      |             |                    

      |             |                    

      |             v         

      |       /-----------\   YES     

      |      / IEVP-IEVPSV \----|

      |      \ > VEVPDL ?  /    |

      |       \-----------/     |

      |             | NO        |

      |             |           |

      |             v           |

      |    NO  /---------\      |

      |-------/ EGRDC >=  \     |

              \  VDCMAX   /     |

               \---------/      |

                    |           |

                    |           |

                    | YES       |

                    v           |

               !----------!     |

               ! CODE 33  !     |

               !----------!     |

                    |           |

                    |           |

                    |<----------|

                    v                         

            !---------------!                 

            !.SET EGRDC=0   !                 

            !.SET VIPTMR=0  !                 

            !---------------!                 

                    |                         

                    |

                    v

                ---------

              (   EXIT    )

                --------- 

       









                                  27-21


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                   SPOUT CHECK TEST





             --------          /--------\ NO        ----

           (  ENTER   )------>/IS VSPTEN \------>(  EXIT  )

             --------         \  = 1?    /          ----

                               \--------/

                                   | YES

                                   v

                        !--------------------------!   

                        ! 1)SET SPK ADV TO "VSPRET"! 

                        ! 2)DELAY FOR "VSPTDL" SEC !

                        ! 3)SAVE NBAR -> "VSPTN"   !

                        !--------------------------!

                                   |

                                   v

                        !--------------------------!

                        ! 1)SET SPK ADV TO "VSPADV"!

                        ! 2)DELAY FOR "VSPTDL" SEC !

                        !--------------------------!

                                   |

                                   v

                          /------------------\ NO    !--------!

                         / NBAR - VSPTN =>    \----->!CODE 18 !

                         \        VSPRPM      /      !--------!

                          \------------------/           |

                                   | YES                 |

                                   |<--------------------|

                                   v

                        !--------------------------!

                        !RESET SPK ADV TO "VIPSPK" !

                        !--------------------------!

                                   |

                                   v

                                ------- 

                              (  EXIT   )

                                -------











































                                  27-22


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              LOW RPM ISC TEST

                                                  





                                   -----------

                                 (    ENTER    )

                                   -----------

                                        |

                                        v

                         !---------------------------!

                         !  .LOAD NGOOSE -> VIPRPM   !

                         !  .DO ISC DESIRED RPM      !

                         !    CALCULATION (EACH BG   !

                         !          LOOP             !

                         !---------------------------!            

                                        |

                                        v

                                 !------------!

                                 !DELAY VISDL3!

                                 !------------!

                                        |

                                        v 

           !--------! NO  /----------------------------------\

           !SET CODE!<---/(NGOOSE+ISLBND)>RPM>(NGOOSE-ISLBND) \

           !   13   !    \                                    /

           !--------!     \----------------------------------/

               |                        | YES

               |----------------------->|

                                        v

                                     -------

                                   (  EXIT   ) 

                                     ------- 

                                     





             VTCDSN - Self test idle speed ramp down time

                      constant.  This parameter takes the

                      place of the normal strategy filter

                      constant "TCDESN" when in self test.

                      Calibrating "VTCDSN" to zero will

                      result in defaulting to the "TCDESN"

                      value.

































                                  27-23


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            CYLINDER BALANCE TEST





                         -------

                       (  ENTER  )

                         -------

                            |

                            v

                    !----------------!

                    !SET ABORT FLG =0!

                    !CYL BAL FLG =0  !

                    !----------------!

                            |

                           (A)

                            |

                            v

                   1=  /---------\

                 |<---/ ABORT FLG \

                 |    \   STATE   /

                 |     \---------/

                 |          | =0

                 |          v

        -----    | 0=  /--------\ > 0 

      ( EXIT  )<------/ VCBFLG   \--------->|

        -----    |    \  STATE   /          |

                 |     \--------/           |

                 |          | < 0           |

                 |          v               |------>(B)

                 | 1=  /-------\ = 0        |

                 |<---/CYL BAL  \---------->|

                      \FLG STATE/

                       \-------/





















































                                  27-24


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                       CYLINDER BALANCE TEST (CONT'D)





                          (B)

                           |

                           v

                    !-------------!

                    !.SET TPOFLG=0!

                    !.RESET VIPTMR!

                    !-------------!

                           |

                           |<------------------------|

             (APT NOT= -1) v                         |

      !------!  OPEN   /--------\                    |

      ! SET  !<-------/   TP     \                   |

      !TPOFLG!        \  STATE   /                   |

      ! = 1  !         \--------/                    |

      !------!             | CLOSE (APT = -1)        |

         |                 |                         |

         |---------------->|                         |

                           v                         |

                        /-------\ = 0                | < 2 MIN 

                       / TPOFLG  \------|            |

                       \  STATE  /      |       /--------\ 

                        \-------/       |----->/   TMR    \

                           | = 1        |      \  STATE   /

                           |            |       \--------/

                           v            |            | > 2 MIN

                 CLOSE /-------\ OPEN   |            |

             |<-------/   TP    \-------|            |

             |        \  STATE  /                    v

             |         \-------/                 ----------

             |                                (   EXIT TO   )

             v                                  WIGGLE TEST

            (C)                                  ----------















































                                  27-25


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                       CYLINDER BALANCE TEST (CONT'D)





        

            (C)

             |

             v                            

      !------------------!                       

      !SET: SPARK ADVANCE!

      !        =VIPSPK   !

      !CYLNUM=ENG CYL NO.!           !---------!

      !LAMBSE1=LAMBSE2=  !---------->!  DELAY  !

      !         VLAMCB   !           !  VCBDLY !

      !DSDRPM(RVIPRPM)=  !           !---------!

      !         VISCN1   !                |

      !CLEAR ALL FAULT   !         /-------------\YES

      !         CODES    !        /IS RVIP-CYL.BAL\-------|

      !OPEN LOOP FUEL    !        \     =0  ?     /       |

      !------------------!         \-------------/        |

                                          |NO             v

                                          |        !--------------!  

                                          |        !SET VCBPCT-   ! 

                                          |        !THIS- TIME =  !

                                          |        !  VCBPCT      !

                                          |        !--------------!

                                          v               |

                                 !----------------!       |

                                 !SET VCBPCT-THIS-!       |

                                 !TIME=(VCBPCT-   !       |

                                 !THIS-TIME)+     !------>|

                                 !VCBPAD  CLIP    !       |

                                 !TO VCBCLP       !       |

                                 !----------------!       |

                                                          v

                                                         (D)















































                                  27-26


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          CYLINDER BALANCE TEST (CONT'D)





                                  (D)

                                   |

                                   v

                             !-------------!

                             !RESET VIPTMR !

                             !-------------!

                                   |

                                   |<----------------|

      !---------------!            v                 | NO

      !.CLEAR FAULTs) !  OPEN  /-------\ CLOSE   /-------\ 

      ! CODE(s)       !<------/   TP    \------>/IS VIPTMR\

      !.SET ABORT FIG=!(ABORT \  STATE  /       \ VISDL4  /

      ! 1             !        \-------/         \-------/

      !.TURN "ON" IN- !<------|          |<--------- |YES

      ! INJECTOR I    !       |     !----------!            

      !.SET FAULT CODE!       |     !OPEN LOOP !   !-----------!

      !  77           !       |     !ISC-CONS- !   !DO "VCBHN" !

      !               !       |     !TANT PULSE!-->!CALCULATION!

      !---------------!       |     !WIDTH     !   !-----------!             

              |               |     !----------!         |

              v               |                          |-----|

             (E)              |----------|                     |

                                         |OPEN                 v

      !----------!                   /-------\        !------------------!

      !DO "VCBLN"!  NO/--------\    /  TP     \       !.SET VNPASSCB = & !

      !CALCULA-  !<--/IS VIPTMR \<- \  STATE  /<------!  (VCBHN)*[1-     !

      !TION      !   \< VISDL5  /    \-------/    ^   ! (VCBPCT-THIS-    !

      !----------!    \--------/ CLOSED           |   ! TIME)]           !

            |        YES  |---------------------- |   !.RESET VIPTMR=0   !

            v                                         !.TURN "OFF"       !

        /-------\YES                                  ! INJECTOR I = CYL-!

       /IS VCBLN \                                    ! NUM (VCUTCOUT)   !

      /=> VNPASSCB\                                   !------------------!

      \(VIPNORM 2)/---------------->|

       \         /                  |

        \-------/                   |

            |                       |

            v                       |

       !-------------!              |

       !.TURN "ON"   !              |        

       ! INJECTOR I  !              |

       !.SET CYL-NUM !<---|         |

       ! =(CYL-NUM)-1!    |         |

       !-------------!    |         |   

              |           |         v

              v           |    !----------!

        /---------\ YES   |<---!SET FAULT !

       /IS CYL-NUM \---|       !CODE I0   !   

       \    > 0    /   |       !----------!

        \---------/    |

              |NO      |-------------------------->(D)

              |-------------->(E)







                                  27-27


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            CYLINDER BALANCE TEST (CONT'D)





                                 (E)

                                  |

                                  v

                      !----------------------------!

                      !SET: DSDRPM=NGOOSE          !

                      !     CLOSED IDLE SPD CONTROL!

                      !     LAMBSE1=LAMBSE2=VRLAM  !

                      !----------------------------!

                                  |

                                  v

             !-------!    YES /--------\ 

             !OUTPUT !<------/ IS ANY   \

             ! CODES !   ^  /   CODE     \

             !-------!   |  \  PRESENT   /

                 |       |   \----------/

                 |       |        | NO

                 |       |        v 

                 |       |    !--------!

                 |       |<---!  SET   !

                 |            !CODE 90 !

                 |            !--------!

                 |

                 |

                 |

                 |

                 v

            !----------!

            !SET CYL-  !

            !BAL-FLG = !--------->( A )

            !    1     !

            !----------! 

















































                                  27-28


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             "VCBHN" CALCULATION





                   ------

                 ( ENTER  )

                   ------

                     |

                     v

             !------------------! 

             !.RESET VIPTMR     !

             !.CLEAR VCB-PIP-CNT!

             !.SAVE LAST PIPTIME!

             ! IN "VLPTM"       !

             !------------------!

                     |

                     |<-------------------------|

                     v                          |

             !------------------!               |

             !.WHEN PIPHIGH IN- !               |

             ! CREMENT          !               |

             !   VCB-PIP-CNT    !               |

             !------------------!               |

                     |                          |

                     |                          |

                     v                          |

               /-----------\ N0                 |

              /IS VIPTMR => \-------------------|

              \   VCBTM2    /

               \-----------/

                     | YES

                     v

          !----------------------------!

          !.CALCULATE CYL. BAL HIGH RPM!

          !                            !

          ! VCBHN = VCB-PIP-CNT   120  !

          !         ----------- * ---  !

          !(VCBN) (LAST PIPTIME-  NO.  !

          !        TIME - VLPTM   OF   !

          !                       CLY  !

          !----------------------------!

                     |

                     |

                     v

                   ------

                 ( EXIT   )

                   ------

























                                  27-29


                         ENGINE-RUNNING SEQUENCE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             "VCBLN" CALCULATION





                   ------

                 ( ENTER  )

                   ------

                     |

                     v

             !------------------! 

             !.RESET VIPTMR     !

             !.CLEAR VCB-PIP-CNT!

             !.SAVE LAST PIPTIME!

             ! IN "VLPTM"       !

             !------------------!

                     |

                     |<-------------------------|

                     v                          |

             !------------------!               |

             !.WHEN PIPHIGH IN- !               |

             ! CREMENT          !               |

             !   VCB-PIP-CNT    !               |

             !------------------!               |

                     |                          |

                     |                          |

                     v                          |

               /-----------\ N0                 |

              /IS VIPTMR => \-------------------|

              \   VCBTM1    /

               \-----------/

                     | YES

                     v

          !----------------------------!

          !.CALCULATE CYL. BAL LOW RPM !

          !                            !

          ! VCBLN = VCB-PIP-CNT   120  !

          !         ----------- * ---  !

          !(VCBN) (LAST PIPTIME-  NO.  !

          !        TIME - VLPTM   OF   !

          !                       CLY  !

          !----------------------------!

                     |

                     |

                     v

                   ------

                 ( EXIT   )

                   ------

























                                  27-30

























                                CHAPTER 28



                        CONTINUOUS TEST STRUCTURE































































































                                   28-1


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  

                          CONTINUOUS TEST STRUCTURE



                                ----------

                              (    ENTER    )

                                -----------

                                     |

                            /-----------------\

                           /     ECT TEST      \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /     ACT TEST      \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /     BP TEST       \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /     MAF TEST      \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /     EGR TEST      \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           / PIP AND IDM TEST  \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /      TP TEST      \

                           \  AND FILTERING    /

                            \-----------------/

                                     |

                            /-----------------\

                           /    EGO TEST       \

                           \ AND FILTERING     /

                            \-----------------/

                                     |

                            /-----------------\

                           /    VSS TEST       \

                           \  AND FILTERING    /

                            \-----------------/               

                                     |

                                    (A)











                                   28-2


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                     CONTINUOUS TEST STRUCTURE (CONT'D)





                                    (A)

                                     |      NOTE:  "WIGGLE TEST IS 

                          NO    /---------\         DEFINED AS:

      |------------------------/ IN WIGGLE \   1) NOT IN SELF-TEST AND

      |                        \   TEST ?  /   2) STI=GND OR TIME SINCE

      |                         \---------/       LAST PIP >1 SEC

      |                              |

      |                         /---------\

      |   !---------!    NO    /    ANY    \  YES  !-------------!

      |   ! STO OFF !<--------/ FAULT FILTER\----->!.STO ON      !

      |   !---------!         \ > THRESHOLD?/      !.SET ADVLIM=0!

      |        |               \           /       !-------------!

      |        |                \---------/               |       

      |        |                                          |   

      |        v                -----------               |

      |---------------------->(     EXIT    )<------------|

                                -----------













































































                                   28-3


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               FILTERING LOGIC





      Each  fault  to  be  detected  and  stored  requires   an   event

      counter-timer  which  will  be incremented by an "Up-count" value

      (calibratable) each time a fault is detected, and decremented  by

      1  each  time  the  fault  is  not detected.  Fault detection and

      up/down counting are done once per  background  loop.   When  the

      counter-timer  for a particular fault exceeds a "threshold" value

      (calibratable) for that fault, the corresponding KAM  fault  code

      will be stored.



      The "Wiggle Test" is  a  special  case.   When  STI  is  low  and

      Self-Test  is  not  in progress, or in Engine-Off conditions when

      Self-Test is not in progress, any time  any  event  counter-timer

      (filter)   has   exceeded  its  threshold,  STO  is  turned  "on"

      (otherwise it will be "off").





                                 -----------

                               (    ENTER    )

                                 -----------

                                      |

                                      v

                           NO    /---------\    YES

                  |-------------/ FAULT (N) \-------------|

                  |             \ DETECTED ?/             |

                  v              \---------/              v

          !--------------!                         !--------------!

          ! CXXFIL  =    !                         ! CXXFIL =     !

          ! CXXFIL -1    !                         ! CXXFIL  +    !

          !--------------!                         ! CXXUP        !

                  |                                !--------------!

                  |                                       |

                  |------------->|<-----------------------|

                                 v

                                (I1)











































                                   28-4


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          FILTERING LOGIC CONTINUED





                                (I1)

                                 |

                                 v

                            /---------\

                           /IS FAULT   \ NO

                          /(N) 31,32,33,\-----------|

                          \  34 OR 35   /           |

                           \PRESENT ?  /            |

                            \---------/             |

                                 | YES              |

                                 v                  |

                            /---------\             |

                           /ARE ANY    \ N0         |

                          /CODES 31,32, \---------->|

                          \33,34,35     /           |

                           \STORED IN  /            |

                            \  KAM  ? /             |

                             ---------              |

                                 | YES              |

                                 v                  |

                            /-----------\           |

                        N0 /IS FAULT (N) \          |

                    |<----/ SAME AS CODE  \         |

                    |     \ STORED IN KAM /         |

                    |      \     ?       /          |

                    |       \-----------/           |

                    |            | YES              |

                    |            |<-----------------|

                    |            v                  

                    |       /---------\             

                    |      /  CXXFIL   \    YES     

                    |     /     >       \----------------|

                    |     \   CXXLVL    /                |

                    |      \     ?     /                 |

                    |       \---------/                  |

                    |----------->|  NO                   v

                                 v             !---------------------!

                            -----------        ! STORE KAM CODE (N)  !

                          (     EXIT    )<-----! ZERO WARM-UP CYCLE  !

                            -----------        ! COUNTER (N)         !

                                               !---------------------!





























                                   28-5


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                   FAULT THRESHOLD/UPCOUNT VALUE SELECTION

                   "WIGGLE" VERSUS NORMAL CONTINUOUS TEST





      CRANK OR UNDERSPEED------|     |

                               |AND--|

      DISABLE NO START---------|     |   |

                                     | OR|       !------------------------!

      NOT CRANK OR UNDERSPEED--|     |   |       !"WIGGLE TEST:SET C32UP &! 

                               |AND--|   | AND---!C33UP,C34UP=0 & ALL     ! 

      DISABLE RUNNING----------|     |   |       !THRESHOLDS=WIGLVL* ALL  !

                                         |       !NON-ZERO UPCOUNTS =255  !

      STI=GND----------------------------|       !------------------------!

                                                     -----ELSE-----

      IN UNDERSPEED OR RUNNING------------------>  (NORMAL CONTINUOUS TEST)



                                                !--------------------------!

                                                ! USE CALIBRATED           !

                                                ! THRESHOLD/UPCOUNT VALUES !

                                                !--------------------------!





                                 PARAMETER NAMES:



            FAULT      |    FILTER     |UPCOUNT|THRESHOLD|WARM-UP COUNTER

      -----------------|---------------|-------|---------|---------------

      ERRATIC PIP      | C14FIL        | C14UP | C14LVL  | C14CNT

      IDM              | IDM FAULT CNT | IDMUP | IDMLVL  | IDM WARMUP CNT

      ECT LOW          | C61FIL        | C61UP | C61LVL  | C61CNT

      ECT HIGH         | C51FIL        | C51UP | C51LVL  | C51CNT

      BP OUT OF RANGE  | C22FIL        | C22UP | C22LVL  | C22CNT

      ACT LOW          | C64FIL        | C64UP | C64LVL  | C64CNT

      ACT HIGH         | C54FIL        | C54UP | C54LVL  | C54CNT

      TP LOW           | C63FIL        | C63UP | C63LVL  | C63CNT

      TP HIGH          | C53FIL        | C53UP | C53LVL  | C53CNT

      1)EPT BELOW MIN  | C31FIL        | C31UP | C31LVL  | C31CNT 

      2)EVP INPUT LOW  | C31FIL        | C31UP | C31LVL  | C31CNT

      1)EPT LOW        | C32FIL        | C32UP | C32LVL  | C32CNT

      2)EVP OUT OF LIM | C32FIL        | C32UP | C32LVL  | C32CNT

      1)EPT ABOVE MAX  | C35FIL        | C35UP | C35LVL  | C35CNT 

      2)EVP INPUT HIGH | C35FIL        | C35UP | C35LVL  | C35CNT

      1)NO EGR FLOW    | C33FIL        | C33UP | C33LVL  | C33CNT

      2)NO EGR FLOW    | C33FIL        | C33UP | C33LVL  | C33CNT

      1)EPT HIGH       | C34FIL        | C34UP | C34LVL  | C34CNT

      2)EGR VALVE OUT  | C34FIL        | C34UP | C34LVL  | C34CNT

         OF LIMITS     |               |       |         |

      LACK OF EGO SW   | C41FIL        | C41UP | C41LVL  | C41CNT

      LACK OF EGO SW   | C91FIL        | C91UP | C91LVL  | C91CNT

      VSS FAILURE      | C29FIL        | C29UP | C69LVL  | C69CNT

      FP RELAY         | C87FIL        | C87UP | C87LVL  | C87CNT

      MAF SHORT TO PWR | C56FIL        | C56UP | C56LVL  | C56CNT

      MAF CKT OPEN     | C66FIL        | C66UP | C66LVL  | C66CNT  













                                   28-6


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                   FAULT THRESHOLD/UPCOUNT VALUE SELECTION (CONT'D)





                                PARAMETER NAMES



         FAULT         |   FILTER      |UPCOUNT|THRESHOLD|WARM-UP COUNTER

      -----------------|---------------|-------|---------|---------------

      FP CKT OPEN ECA  |  C95FIL       |C95UP  | C95LVL  |C95 CNT

         TO MTR GND    |               |       |         |

      FP CKT OPEN      |  C96FIL       |C96UP  | C96LVL  |C96CNT

       

       WIGLVL - Threshold for wiggle test- no units -range 0 to 255

                resolution=1  Base value = 200 Cal level = CCV





      1)PARAMETERS APPLY WHEN USING PFE EGR SYSTEMS (PFEHP SWITCH =1)

      2)PARAMETERS APPLY WHEN USING SONIC EGR SYSTEMS (PFEHP SWITCH =0)



      NOTE: SET C32UP, C33UP, C34UP AND C41AND C91UP TO ZERO WHEN IN

            WIGGLE TEST MODE TO EXCLUDE CODE FROM WIGGLE TEST













































































                                   28-7


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            KAM CODE ERASE LOGIC





      Each KAM code has a counter for "Number of Engine warm-ups" since

      fault was last detected.  Each code is erased when its counter is

      >= 40.  Codes can also be manually cleared during Engine-Off code

      output mode.





      "WARM-UP" FLAG CLEAR--|

                            |

      TCSTRT < VECT5--------|

                            | AND---|------SET "WARM-UP FLAG

      ECT > VECT3-----------|       |

                            |       |           

      RUN MODE--------------|       |

                                    |           !--------------------!

                                    |---|       ! INCREMENT ALL CODE !

                                        | AND---! WARM-UP COUNTERS   !

                      STI=OPEN----------|       ! DISABLE FURTHER    !

                                                ! INCREMENTS (UNTIL  !

                                                ! NEXT POWER-UP)     !

                                                !--------------------!





      IN ENGINE-OFF CODE OUTPUT MODE*----|

                                         | AND----ERASE ALL KAM CODE 

      SELF-TEST NOT REQUESTED------------|





      WARM-UP COUNTER(N) >= 40--------------ERASE KAM CODE(N)







      * Note:  This means during the output of any codes in  Engine-Off

      Self-Test; service codes, separator pulse, and continuous codes.













































                                   28-8


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             ECT OPEN/SHORT TEST





                               -----------

                             (    ENTER    )

                               -----------

                                    |

                                    v

                               /---------\   NO      !----------!

                              /  IECT >=  \--------->! FAULT 61 !

                              \  ECTMIN ? /          !----------!

                               \---------/                 |

                                    |  YES                 |

                                    v<---------------------|

                            !--------------!

                            !  DO FAULT    !

                            ! FILTERING 61 !

                            !--------------!

                                    |

                                    v

                               /---------\   NO      !----------!

                              /  IECT <=  \--------->! FAULT 51 !

                              \  ECTMAX ? /          !----------!

                               \---------/                 |

                                    |  YES                 |

                                    v<---------------------|

                            !--------------!

                            !  DO FAULT    !

                            ! FILTERING 51 !

                            !--------------!

                                    |

                                    v

                               -----------

                             (     EXIT    )

                               -----------















































                                   28-9


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              ACT SENSOR TESTS





                               -----------

                             (    ENTER    )

                               -----------

                                    |

                                    v

                               /---------\   NO      !----------!

                              /  IACT >=  \--------->! FAULT 64 !

                              \  ACTMIN ? /          !----------!

                               \---------/                 |

                                    |  YES                 |

                                    |<---------------------|

                                    v

                            !--------------!

                            !   DO FAULT   !

                            ! FILTERING 64 !

                            !--------------!

                                    |

                                    v

                               /---------\   NO      !----------!

                              /  IACT <=  \--------->! FAULT 54 !

                              \  ACTMAX ? /          !----------!

                               \---------/                 |

                                    |  YES                 |

                                    |<---------------------|

                                    v

                            !--------------!

                            !   DO FAULT   !

                            ! FILTERING 54 !

                            !--------------!

                                    |

                                    v

                               -----------

                             (     EXIT    )

                               -----------











































                                  28-10


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               BP SENSOR TEST





                      ------

                    (  ENTER  )

                      ------

                         |

                         v

                     /--------\ NO         ------

                    / BPSSW=1  \-------> (  EXIT  )

                    \          /           ------

                     \--------/

                         | YES

                     /---------\NO

                    / BPTMR <=  \-----------|

                    \ VBPMAX ?  /           |

                     \---------/            |

                         | YES              v

                     /---------\        !----------!

                    /  VBPDL1   \------>! FAULT 22 !

                   / <=MDELTA <= \      !----------!

                   \   VBPDL2    /          |

                    \           /           |

                     \---------/            |

                         | YES              |

                         |<-----------------|

                   !------------!

                   !  DO FAULT  !

                   !FILTERING 22!

                   !------------!

                         |

                         v

                      -------

                    (  EXIT   )

                      -------















































                                  28-11


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               MAF SENSOR TEST





               --------

             (  ENTER   )

               --------

                  |

                  v

             /---------\ NO      /---------\ YES    !---------!

            / NBAR =>   \------>/  IMAF =>  \------>!FAULT 56 !

            \ VMARPM    /       \  VMAMAX   /       !---------!

             \---------/         \---------/             |

                  |YES                | NO               |

                  |<-------------------------------------|

                  |

                  v

             !----------!

             !DO FAULT  !

             !FILTERING !

             !    56    !

             !----------!

                  |

            NO/--------\

       |<----/ RUN MODE \

       |     \          /

       |      \--------/

       |          | YES

       |          v

       |     /---------\ NO     /---------\ YES     !--------!

       |    /IS TSLPIP  \----->/ IMAF <=   \------->!FAULT 66!

       |   /      >      \     \ VMAMIN    /        !--------!

       |   \ VMAFPIPLMT  /      \---------/             |

       |    \           /           | NO                |

       |     \---------/            |                   |

       |          |YES              |                   |

       |          v                 |                   |

       |--------------------------->|<------------------|        

                                    |  

                                    v

                              !-------------!

                              !DO FAULT     !

                              !FILTERING 66 !

                              !-------------!

                                    |

                                    v

                                 ------

                               (  EXIT  )

                                 ------



         NOTE: DO NOT CHECK FOR FAULT 66 DURING KOEO WIGGLE TEST.

               AIR FLOW AND IMAF WILL BE AT OR NEAR ZERO.















                                  28-12


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           EGR SYSTEM TEST (PFE/SONIC)

             ---------

           (  ENTER    ) (PFE)

             ---------

                 |

             /--------\  NO       --------

            / PFEHP=>2 \------->(  EXIT    )

            \    ?     /          --------

             \--------/                           (SONIC)  

                 | NO                              

             /--------\ NO                      

            / PFEHP=1  \----------------------------|

            \          /                            |

             \--------/                             |

                 | YES                              | YES

            /---------\ NO                          v

           / APT= -1   \-----------|            /--------\  YES !----------!

           \           /           |           / IEVP <=  \---->! FAULT 31 !

            \---------/            |           \ EVPMIN ? /     !----------!

                 | YES             |            \--------/           |

            /---------\ NO         |                | NO             |

           / NBAR < VN \---------->|                |<---------------|

           \           /           v                v

            \---------/           (A)   !-----------------------!

                 | YES                  ! DO FAULT FILTERING 31 !

      !----------------------!          !-----------------------!      

      !FIEPT=VROLAV(IEPT,    !                      |

      !      VTCEPT)         !                      |

      !----------------------!                      v

                 |                              /--------\ YES  !----------!

            /---------\ YES  !-------!         / IEVP >=  \---->! FAULT 35 !

           / FIEPT <=  \---->! FAULT !-----|   \ EVPMAX ? /     !----------!

           \ EPTMIN    /     !  31   !     |    \--------/           |

            \---------/      !-------!     |        | NO             |  

                 | NO                      |        |<---------------|

            /---------\ YES  !-------!     |        v

           / FIEPT >=  \---->! FAULT !---->|  !--------------! NOTE: For 

           \ EPTMAX    /     !  35   !     |  ! DO FAULT     ! wiggle test

            \---------/      !-------!     |  ! FILTERING 35 ! set C32UP,

                 | NO                      |  !--------------! C33UP & C34UP

            /---------\ YES  !-------!     |        |          = 0.

           / FIEPT <   \---->! FAULT !---->|        v

           \ VEPTIL    /     !  32   !     |    /--------\ YES  !----------!

            \---------/      !-------!     |   / IEVP <   \---->! FAULT 32 !

                 | NO                      |   \ VEVPLL   /     !----------!

            /---------\ YES  !-------!     |    \--------/           |

           / FIEPT >   \---->! FAULT !---->|        | NO             |

           \ VEPTIH    /     !  34   !     |        |<---------------|

            \---------/      !-------!     |        v

                 | NO                      |  !--------------!

                 |<------------------------|  ! DO FAULT     !--->(B)

                 v                            ! FILTERING 32 !

               ( AA )                         !--------------!











                                  28-13


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             EGR SYSTEM TEST (CONT'D)



                                   (PFE/SONIC)











               ( AA )

                 |

                 v

      !---------------------!

      !DO FAULT FILTERING 1)!  1) For Wiggle Test

      !31, 35, 32 and 34    !     set C32UP and

      !---------------------!     C34UP = 0

                 |

                 v

             ---------

          (   EXIT     )

             ---------













































































                                  28-14


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 EGR SYSTEM TEST



                                   (PFE/SONIC)



            (A)                                                 (B)

             |                                                   |

             v                                                   v

        /---------\ NO                    !-----------!  NO /---------\ 

       /  LOAD <=  \-----------|          !.SET EGRFG2!<---/ EGRDC =0  \

       \ VEGRLOAD? /           |          !.VIPTMR=0  !    \     ?     /

        \---------/            |          !-----------!     \---------/

             | YES             |                |                | YES

             v                 |                v                v

        /---------\ NO         v              ( C )         /---------\ YES

       /  EGRDC >  \     !---------!                       / EGRFG2=1  \---|

       \  VCRTDC ? /---->!   SET   !--|                    \     ?     /   |

        \---------/      !EGRFG1=0 !  |                     \---------/    |

            | YES        !---------!  |                          | NO      |

            |                         |                          v         |

            |                         |                  !--------------!  |

            |                         |                  !.SET EGRFG2   !  |

            v                         |                  ! = 1          !  |

       /--------\ N0                  |                  !.START VIPTMR !  |

      / EGRFG1=1 \    !-------------! |                  !--------------!  |

      \          /--->!.SET EGRFG1=1! |                          |         |

       \--------/     !.SET VIPTMR=0! |                          |--->|<---|

            | YES     !-------------! |                               |

            |                |        |                               v

            |<---------------|        |   YES /---------\   YES /---------\

            v                         | |----/ VIPTMR <  \<----/  IEVP >   \

      !------------------!            | |    \ VEITMR ?  /     \  VEVPHL ? /

      !CFIEPT=VROLAV     !            | |     \---------/       \---------/

      !(IEPT,VTCEPT)     !            | |          | NO              | NO

      !                  !            | |          v                 v

      !------------------!            | |    !----------!    !-------------!

            |                         | |    ! FAULT 34 !--->! DO FAULT    !

            v                         | |    !----------!    ! FILTERING 34!

       /---------\ YES                | |                    !-------------!

      / CFIEPT <  \------------------>| |                            |

      \ VEPTCL    /                   | |--------------------------->|

       \---------/                    |                              v

            | NO                      |                         ----------

            v                         |                       (    EXIT    )

       /---------\ NO  !----------!   |                         ----------

      / VIPTMR <  \--->! FAULT 33 !-->|

      \ VECTMR    /    !----------!   |

       \---------/                    v

            | YES        !--------------------------!

            v<-----------! DO FAULT FILTERING 33 (2 !

        ---------        !--------------------------!

      (   EXIT    )        

        ---------          (2  For wiggle test     

                               set C33UP=0











                                  28-15


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          EGR SYSTEM TEST (CONT'D)



                                 (PFE/SONIC)





                                    ( C )

                                      |

                                      v

                             NO  /---------\

                      |---------/  LOAD <=  \

                      |         \ VEGRLOAD ?/

                      |          \---------/

                      |               | YES

                      |               v

                      |      NO  /---------\

                      |---------/  EGRDC >  \

                      |         \  VCRTDC ? /

                      |          \---------/

                      |               |  YES

                      |               v

                      v          /---------\  YES

                !-----------!   /  EGRFG1   \---------|

                !.SET EGRFG1!   \   =1 ?    /         |

         (C)<---!   = 0     !    \---------/          |

                !.SET VIPTMR!         |  NO           |

                !   = 0     !         |               |

                !-----------!         v               |

                                !-------------!       |

                                !.SET EGRFG1  !       |

                  ---------     !   =1 ?      !       |

         |----->(   EXIT    )   !.START VIPTMR!       |

         |        ---------     !-------------!       |

         |            ^               |               |

         |            |               |<--------------|

         |            | YES           v

         |       /---------\  NO /---------\

         |      / VIPTMR <  \<--/  IEVP >   \

         |      \ VECTMR ?  /   \  VEVPCL ? /

         |       \---------/     \---------/

         |            | NO            |  YES

         |            v               |

         |      !----------!          |

         |      ! FAULT 33 !--------->|

         |      !----------!          |<-----------(C)

         |                            v

         |                     !-------------!

         |                     ! DO FAULT    !

         |---------------------! FILTERING 33!

                               !-------------!



















                                  28-16


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              PIP AND IDM TEST





      A new continuous PIP/IDM routine has been implemented  for  1986.

      Instead  of  the  rather  complex  hand shaking method as used in

      previous IDM versions, the new routine basically checks  if  time

      since  last  pip  (TSLPIP)  and time since last idm (TSLIDM) have

      exceeded a calibrated timeout period.





      Additional decisions are made in softwre to assure the engine  is

      running and stabilized before the test is executed.





      Both the PIP and IDM  timers  are  free-running  and  high  speed

      digital inputs are used to re-start the timers.





      Each transition of pip starts a new time-out function.  When  the

      time since last pip > VPIPTM, a pip fault is present.





      If a pip fault has been detected, software bypasses the IDM test.

      This  feature  has  been added to discriminate between a true pip

      failure or idm (tach) failure once pips have been restored.



































































                                  28-17


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





      Time since last IDM is determined by a buffered tach signal  used

      as  input,  and  the  timer  resets  on  the  rising edge of this

      buffered signal.







                          |\^----

                          |      |     VBATT

                          |       ^^^^------|

             TACH --------|                 |       |---------

                                            |       |

                                            |       |

                                            |       |

                                     GND     -------





                                             -------

                                            |       |

                                            |       |

                                            |       |

         TACH BUFFER                        |       |

           OUTPUT --------------------------|       |---------



                                            ^

        NOTE:  RISING EDGE OF BUFFER OUTPUT

               IS BASED ON VBATT-->GND TRANSITION.







      Each VBATT--->GND  transition  of  tach  starts  a  new  time-out

      function  When the time since the last transition is > VIDMTM, an

      idm failure is present.



      Faults are filtered by an event-counter method, as done  for  all

      continuous test faults, and the first "upcount" will occur on the

      first time the  PIP/IDM  routine  determined  that  a  fault  has

      occured.







      NOTE:  DEPENDING ON THE STATE OF THE IDM BYPASS FLAG,  TSLIDM  IS

      ACTUALLY  ONE  OF  TWO  FUNCTIONALLY  DIFFERENT TIMERS.  (1) WHEN

      IDM_BYPASS FLAG IS CLEAR ( =0 ), THEN TSLIDM IS  THE  TIME  SINCE

      THE  LAST  IDM.   (2)  WHEN  IDM_BYPASS  FLAG IS SET ( =1 ), THEN

      TSLIDM IS THE TIME SINCE THE IDM_BYPASS FLAG WAS SET.



























                                  28-18


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                  PIP/IDM LOGIC

                                (FOR TACH BUFFER)



                      YES/------------\          -----------

                     |--/IS IGNFG = 1  \<------(    ENTER    )

                     |  \   *  ?       /         -----------

                     |   \------------/

                     v         |NO                                 

                /---------\YES v    !-----------!           -------

               /  IS N <   \------->!   SET     !------->(   EXIT    )

               \  VLORPM ? /   ^    ! TSLIDM =0 !           -------

                \---------/    |    !-----------!  *APPLIES TO NU, NX,

                     | NO      |                    & 9X STRATEGIES 

                     v         |------------------  ONLY

             !---------------!                   ^

             ! CLEAR ERROR   !                   | NO

             !DETECTED FLAGS !              /----------\      

             !---------------!             / KPRTMR > * \       

                     |-------------------->\  VKPRTM    /

                                            \----------/     

       !---------------------------!             | YES             

       !.SET ERROR DETECTED FLAG=1 !             v             

       !.SET IDM_BYPASS FLAG=1     !   YES  /---------\        

       !.RESET IDM_FAULT CNT=0     !<------/  TSLPIP   \       

       !.RESET TSLIDM =0           !       \ > VPIPTM ?/       

       !---------------------------!        \---------/        

                     |                           | NO          

                     |-------------------------->|             

                                                 v             

                                           !------------!      

                                           ! CALL FAULT !      

                                           ! FILTER C14 !      

                                           !------------!      

                                                  |            

      !-----------!  YES /---------\    NO /-------------\ YES 

      !.SET ERROR !<----/  TSLIDM   \<----/ IS IDM_BYPASS \----|

      ! DETECTED  !     \ > VIDMTM ?/     \   FLAG =1?    /    |

      ! FLAG =1   !      \---------/       \-------------/     |

      !-----------!           | NO                             |     

            |                 |                     YES /------------\

            |---------------->|                    |---/ IS TSLIDM >  \

                              |                    |   \   VIDMST ?   /

                              |                    |    \------------/

                              v          !------------------!  |NO

                    !------------------! !.CLEAR IDM_BYPASS !  |

                    !.CALL FAULT FILTER! !   FLAG           !  |

                    ! IDM_FAULT_CNT C18! !.SET TSLIDM=0     !  |

                    !------------------! !------------------!  |

                              |                    |           |

                         -----------               v           |

                       (     EXIT    )<------------------------|

                         -----------



                  NOTE:  Pip fault filtering uses C14LVL.

                         IDM fault filtering uses IDMLVL.

                                         





                                  28-19


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





       

                                 TP SENSOR TESTS





                          -----------

                        (    ENTER    )

                          -----------

                               |

                               v

                          /---------\   NO      !----------!

                         / ITP >=    \--------->! FAULT 63 !

                         \ TAPMIN ?  /          !----------!

                          \---------/                 |

                               |  YES                 |

                               |<---------------------|

                               v

                       !--------------!

                       !   DO FAULT   !

                       ! FILTERING 63 !

                       !--------------!

                               |

                               v

                     YES  /---------\

           |-------------/  CTFFLG   \

           |             \   SET ?   /

           |              \---------/

           |                   | NO

           |                   v

           |              /---------\   NO      !----------!

           |             / ITP <=    \--------->! FAULT 53 !

           |             \ TAPMAX ?  /          !----------!

           |              \---------/                 |

           |                   |  YES                 |

           |                   |<---------------------|

           v                   v

      !----------!     !--------------!

      ! FAULT 53 !     !   DO FAULT   !

      !----------!     ! FILTERING 53 !

           |           !--------------!

           |                   |

           |------------------>|

                               v

                          -----------

                        (     EXIT    )

                          -----------



























                                  28-20


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                      CONTINUOUS VEHICLE SPEED SENSOR TEST





      The vehicle speed sensor is tested under conditions  that  cannot  be

      acheived unless the vehicle is moving.





           Manual Transmission  - Engine is being motored as indicated

           _____  ____________ 

           by a low map value, closed throttle and high engine speed.





           Automatic Transmission - Transmission is in drive and engine

           _________ ____________

           speed is above the torque convertor stall speed.





      If the above conditions are true for a prolonged period of time,

      (VSSTMR >= VVSTIM) then the vehicle speed sensor is checked 

      against a minimum value.  The continuous VSS test may be calibrated

      out by setting VIP calibration parameter VSSSW to 0





      The VSS test will use traditional fault filtering if a VSS fault

      is detected.



































































                                  28-21


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           CONTINUOUS VSS TEST CONT'D





      VSSSW=1 ----------------|

                              |

      VSTYPE > 0--------------|        |

                              |        | VSS FAILURE

      N >=VSMMIN -------------|        | SET CONTINUOUS CODE 29 

      (ENGINE SPEED HIGH)     | AND----|

        Manual & Auto         |        |

                              |        |

      VSSTMR >=VSSTIM --------|        | 

      (STABLE TEST CONDITIONS)|        |

                              |        |

      VSBAR < VSSMN1 ---------|        |

      (NO VSS READING)                 |---------ELSE------------

                                       |

                                       | VSS IS OK

                                       | USE FAULT FILTERING 29

                                       |





      VSSTMR - VEHICLE SPEED SENSOR TIMER (.125 SEC)

               VSSTMR INCREMENTS WHEN THE PROPER CONDITIONS

               EXIST TO PERFORM A VSS TEST.





      TFMFLG=0---------|

      (TP Sensor OK)   |

                       |

      TRLOAD < 4-------|

      (MANUAL TRANS)   |

                       |       

      APT= -1 ---------| AND---|

      (CLOSED THROTTLE)|       | OR----|

                       |       |       | INCREMENT VSSTMR

      LOAD<= VSLOAD ---|       |       |

      (DECEL MODE)     |       |       |

                       |       |       |

                               |       |

                               |       |-------ELSE--------- 

      TRLOAD = 4-------|       |       |

                       |       |       |

      NDSFLG=1 --------| AND---|       | SET VSSTMR=0 

      (AUTO IN DRIVE)  |               |

                       |

      N >= VSAMIN -----|

      (ENGINE SPEED HIGH)

        For Auto Trans.



















                                  28-22


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               EGO SWITCHING TEST

                          PART THROTTLE COUNTER (PTCNT)





         -----------                     

       (    ENTER    )

         -----------

              |

              v             !-------------------!

          /-------\  YES    ! SET PART THROTTLE !

         / IS APT  \------->! FLAG (VPTFLG)=1   !

         \  = 0 ?  /        !-------------------!

          \-------/                   | 

              | NO                    |

              |<----------------------|

              v                                 !-----------------!

          /-------\  YES     /--------\  YES    ! .PTCNT=PTCNT+1  !

         / IS APT  \------->/    IS    \------->! .CLEAR VPTFLG=0 ! 

         \ = -1 ?  /        \ VPTFLG=1?/        !-----------------!

          \-------/          \--------/                   |

              | NO                | NO                    |

              |<------------------|                       |

              |                                           |

              |                                           |

              |<------------------------------------------|

              |

              v

         -----------

       (    EXIT     )

         -----------







               * INITIALIZE VPTFLG TO ZERO ON POWER-UP

















































                                  28-23


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             EGO SWITCHING TEST CONT'D





                     -----------

                   (    ENTER    )

                     -----------

                          |

                          v

                  NO  /-------\

              |------/ VEGOBP  \

              |      \  =1 ?   /

              |       \-------/

              |           | YES

              |           v

              |   NO  /-------\

              |<-----/ ATMR2 > \

              |      \ VEGOTM ?/

              |       \-------/   

              |           | YES

              |           v

              |      /---------\

              | YES /   IS ECT  \NO     /---------\ NO

              |<---/ ACT, TP OR  \---->/ THRMHP=1  \---|

              |    \  MAP FMEM   /     \           /   |

              |     \   SET ?   /       \---------/    |

              |      \---------/             |YES      |

              |           | NO               |         |

              |           v                  |         |

              |  YES /---------\             |         |

              |<----/ IS AIR    \<---------- |    NOTE:| FOR APPLICATIONS 

              |     \ UPSTREAM? /                      | WITH SECONDARY 

              |      \---------/                       | AIR ONLY

              v           | NO                         |

      !----------------!  |                            |

      ! CLEAR PART     !  |<---------------------------|

      !THROTTLE COUNTER!  |         

      !   (PTCNT)      !  |------------------|

      !----------------!                     |

              |                              |

              |------|                       v

                     v                /-----------\     

               NO/--------\          /PART THROTTLE\ YES   

       (C)<-----/ VEGOBP   \        /COUNTER (PTCNT)\---->(B)

                \ = 1      /        \  > VPTCNT ?   /     

                 \--------/          \             /       

                     | YES            \-----------/             

                     v                       |NO                            

                   ------                    |         

                 (  EXIT  )<-----------------|

                   ------                              

















                                  28-24


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             EGO SWITCHING TEST CONT'D





                           (B)

                            |

                       /----------\ NO      !---------!

                      / EGOSS1 >   \------->!FAULT 41 !

                      \ VEGOSW     /        !---------!

                       \----------/              |

                            |YES                 |

              (C)---------->|                    |

                       !------------!            | 

                       ! DO FAULT   !<-----------|

                       !FILTERING 41!

                       !------------!

                            |

                       /-----------\ YES       ----

                      / NUMEGO =1?  \------->( EXIT ) 

                      \             /          ----

                       \-----------/

                            |NO

                       /-----------\NO      !---------!

                      /EGOSS2>VEGOSW\------>!FAULT 91 !

                      \             /       !---------!

                       \-----------/             |

              (C)---------->| YES                |

                       !------------!            |

                       ! DO FAULT   !<-----------|

                       !FILTERING 91!

                       !------------!

                            |

                            |

                            v

                         -------

                       (  EXIT   )

                         -------













































                                  28-25


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               FUEL PUMP CIRCUIT TEST



                         --------         /--------\ NO      ------

                       (  ENTER   )----->/ IS V_    \----->(  EXIT  )  

                         --------        \FPMFLG SET/        ------

                                          \--------/

                                               | YES

                                               v

                                           /--------\NO   

                        |-----------|     /  IS FP   \--->(A)

                        v           |     \  "OFF"   /    

                    /--------\      |      \--------/     

                   /IS VIP_FP \NO   |          |YES            

                  /MTMR=>V_    \--| |          v               

                  \  FPMTM     /  | |   NO /--------\      

                   \          /   v |<----/IS RMSPRU \    

                    \--------/    |       \   = 1    /    

                        |YES      |        \--------/      

                        v         |            |YES

                NO  /--------\    |            |

           |<------/  IS FPM  \   |            v

           |       \  LOW ?   /   |    !------------------------!

           |        \--------/YES |    !.DE-ENERGIZE ALL OUTPUTS!

           v            |<--------|    !.DELAY 50 MSEC.         !

      !--------!        |              !.SAVE IOCC IN OCCSAV    !

      ! FAULT  !        |              !.ENERGIZE FUEL PUMP     !

      !  95    !------->|              !.DELAY 50 MSEC          !

      !--------!        |              !------------------------!

                        v                       |

                  !------------!                v

                  ! DO FAULT   !           /----------\

                  !FILTERING 95!          /ABS [OCCSAV \NO  !----------!

                  !------------!         / -IOCC] >=    \-->! FAULT 87 !

                        |                \  OCCDT7 ?    /   !----------!

                        |                 \            /         |

                        |                  \----------/          |

                        |                       |YES             |

                        |                       |<---------------|

                        |                       v

                        |                !------------------!       

                        |                !TURN OFF FUEL PUMP!

                        |                !CLEAR "RMSPRU"=0  !

                        |                !------------------!

                        |                       |

                        |                 !------------! 

                        |                 !  DO FAULT  !

                        |                 !FILTERING 87!

                        |                 !------------!

                        |---------------------->|

                                                v                        

                                             -------

                                          (   EXIT    )

                                             -------



      NOTE: TEST MUST BE PERFORMED AS LONG AS POWER IS "ON" AND NOT

            JUST IN RUN MODE.





                                  28-26


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              FUEL PUMP CIRCUIT TEST CONT'D





                                     (A)

                                      |

                                      v

                            !--------------------!

                            !  RESET VIP-FPMTMR  !

                            !--------------------!

                                      |

                                      |

                                      v

                                 /---------\NO

                                / IS FPM    \---------->|

                                \   HIGH    /           |

                                 \---------/            |

                                      | YES             |

                                      |                 v

                                      |            !-------!

                                      |            ! FAULT !

                                      |<-----------!   96  !         

                                      |            !-------!

                                      v

                                !-------------!

                                !  DO FAULT   !

                                !FILTERING 96 !

                                !-------------!

                                      |

                                      v

                                   -------

                                (   EXIT   )

                                   -------





















































                                  28-27


                        CONTINUOUS TEST STRUCTURE

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                   



















































































































                                  28-28

























                                      CHAPTER 29



                           VEHICLE SPEED CONTROL SELF TEST































































































                                   29-1


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                    

                     VSC ENGINE-OFF TEST INITIALIZATION

                             AND TEST STRUCTURE





                               ---------

                             (  ENTER    )

                               ---------

                                  |

                                  |

                                  v

                         !------------------!

                         !.EXIT WIGGLE TEST !

                         !.STO OFF          !

                         !.EDF ON           !

                         !.HEDF OFF         !

                         !------------------! 

                                  |

                                  v

                             ------------

                          (SEND 1/2 SECOND )

                                PULSE

                             ------------

                                  |

                                  v

                          !-----------------!

                          !DO STATIC INPUT  !

                          !     TEST        !

                          !-----------------!

                                  |

                                  v

                          !-----------------!

                          !DO VSC OUTPUT    !

                          ! CIRCUIT CHECK   !

                          !-----------------!

                                  |

                                  v

                          !-----------------!

                          !SEND FAST & SLOW !

                          !SERVICE CODES    ! Use same format

                          !-----------------! as Engine Self

                                  |           Test

                                  v

                              ---------

                            (  EXIT     )

                              ---------

























                                   29-2


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 ENGINE OFF

                              STATIC INPUT TEST





                          ---------

                        (  ENTER    )

                          ---------

                             |

                             v

                        !-----------!

                        !SET CODES  !

                        !67,74,75   !

                        !SET FLAGS  !

                        !VSB1,VSB2, !

                        !VSB3,VSB4  !

                        !-----------!

                             |

                             v

                      !----------------!

                      !ZERO AND START  !

                      !   VIPTMR       !

                      !----------------!

                             |

              (B)----------->|

                             v

                        /---------\ YES      !---------!

                       /IS OFF_BUT \-------->! CLEAR   !

                       \ = 1  ?    /         !FLAG VSB1!

                        \---------/          !---------!

                             |  NO                |

                             |<-------------------|

                             v

                        /---------\ YES      !---------!

                       /IS COAST_  \-------->! CLEAR   !

                       \BUT = 1 ?  /         !FLAG VSB2!

                        \---------/          !---------!

                             |  N0                |

                             |<-------------------|

                             v

                        /---------\ YES      !---------!

                       /IS ACCEL_  \-------->! CLEAR   !

                       \BUT = 1  ? /         !FLAG VSB3!

                        \---------/          !---------!

                             |  NO                |

                             |<-------------------|

                             v

                        /---------\ YES      !---------!

                       /IS RESUM_  \-------->! CLEAR   !

                       \BUT = 1  ? /         !FLAG VSB4!

                        \---------/          !---------!

                             | NO                 |

                             |<-------------------|

                             v

                            (A)









                                   29-3


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           STATIC INPUT TEST CONTINUED





                            (A)

                             |

                             v

                        !-----------!

                        !SET CODE 48!

                        !-----------!

                             |

                             v

                        /---------\

      NOTE:LoHold & Hi-/  LOHOLD   \ YES     !---------!

        Hold are      / < VSCCS <   \------->! CLEAR   !

        normal strat- \   HIHOLD    /        ! CODE 48 !

        egy parameters \           /         !---------!

        NOT self test   \---------/               |

        calibratible.        | NO                 |

                             |<-------------------|

                             v

                        /---------\ YES      !---------!

                       /    IS     \Brake On ! CLEAR   !

                      /  BIFLG = 1  \------->! CODE 74 !

                      \     ?       /        !---------!

                       \           /              |

                        \---------/               |

                             | NO                 |

                             |                    |

                             v                    |

                        !---------!               |

                        ! CLEAR   !               |

                        ! CODE 75 !               |

                        !---------!               |

                             |                    |

                             |<-------------------|

                             v

                            (A1)











































                                   29-4


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           STATIC INPUT TEST CONTINUED





                            (A1)

                             |

                             v

      NOTE: Clutch     /-----------\

        pedal must be / IS NDSFLG=  \ YES (Drive)

        depressed    /      1  ?     \-----------------|

        once during  \               /                 |

        the test      \             /                  |

                       \-----------/                   |

                             | NO                      |

                             |                         |

                             v                         |

                        !---------!                    |

                        ! CLEAR   !                    |

                        ! CODE 67 !                    |

                        !---------!                    |

                             |                         |

                             |<------------------------|

                             v

                       /-----------\

                      /ARE ALL OF   \ YES

                     /CODES 48,67,74,\------------> (D)

                     \75 & FLAGS VSB1/

                      \VSB2,VSB3,VS-/

                       \B4 CLEARED /

                        \---------/

                             | NO

                             v

                       /-----------\ N0

                      /IS VIPTMR >  \------------>  (B)

                      \ VIPT1  ?    /

                       \-----------/

                             | YES

                             v

                            (C)









































                                   29-5


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                   

                          STATIC INPUT TEST (CONTINUED)





                            (C)

                             |

                             v

                       /---------\ NO

                      / IS CODE   \--------------------------------|

                      \48 CLEARED?/                                |

                       \---------/                                 |

                             | YES                                 |

                             v                                     |

                       /---------\        /---------\              |  

                      / ARE ALL   \ NO   / ARE ANY OF\NO  !-----!  |

                     /FLAGS VSB1,  \--->/ THE FLAGS   \-->! SET !->|  

                    /VSB2,VSB3,VSB4 \  /VSB1,VSB2,VSB3 \  !CODE !  |

                    \    CLEARED ?  /  \ VSB4 CLEARED ?/  !  49 !  |

                     \             /    \             /   !-----!  |

                      \           /      \           /             |

                       \---------/        \---------/              |

                             | YES             | YES               |

                             |                 v                   |

                             |            !------------!           |

                             |            !SET CODE 47 !           |

                             |            !------------!           |

                             |                 |                   |

                             v                 v                   |

                            (D)<-----------------------------------| 

                             |

                             v

      NOTE: TP Test    /---------\ NO     !------------!

       same as engine /  ITP =>   \------>!SET CODE 63 !--------|

       self test key  \  TAPMIN   /       !------------!        |

       on engine off   \---------/                              |

                             | YES                              |

                             v                                  |

                       /---------\ NO     !------------!        |

                      /  ITP <=   \------>!SET CODE 53 !------->|

                      \  TAPMAX   /       !------------!        |

                       \---------/                              |

                             | YES                              |

                             v                                  |

                       /---------\                              |

                      /  VTAP1    \ NO    !------------!        |

                     / <=ITP <=    \----->!SET CODE 23 !------->|

                     \   VTAP2     /      !------------!        |

                      \           /                             |

                       \---------/                              |

                             | YES                              |

                             |<---------------------------------|

                             v

                        ----------

                      (   EXIT     )

                        ----------







                                   29-6


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                          VSC OUTPUT CIRCUIT CHECK





                            ---------

                          (  ENTER    )

                            ---------

                               |

                               v

                         !------------!

                         !.DE-ENERGIZE!

                         ! ALL OUTPUTS!

                         ! EXCEPT EDF !

                         !  ON        !

                         !.SET OC=1   !

                         !------------!

                               |

                               v

                         --------------

                       ( DELAY 50 MSEC. )

                         --------------

                               |

             |---------------->|

             |                 v

             |           !------------!

             |           ! SAVE IOCC  !

             |           ! IN OCCSAV  !

             |           !------------!

             |                 |

             |                 v

             |            /---------\ NO     !---------!

             |           / IS OC =1  \------>!ENERGIZE !

             |           \           /       ! SCVAC   !

             |            \---------/        !---------!

             |                 | YES              |

             |                 v                  |

             |            !---------!             |

             |            !ENERGIZE !             |

             |            ! SCVNT   !             |

             |            !---------!             |

             |                 |                  |

             |                 |<-----------------|

             |                 v

             |          --------------

             |        ( DELAY 50 MSEC.  )    

             |          --------------

         ---------             |

       (OC = OC + 1)           v

         ---------       /----------\

             ^          /ABS[OCCSAV- \ NO      !-------------!

             |         / IOCC] =>     \------->!SET APPROPRI-!

             |         \OCCDT (OC)    /        !ATE FAIL CODE!

             |          \  COUNTS    /         !(SEE TABLE)  !

             |           \----------/          !-------------!

             |                 | YES                  |

             |                 |<---------------------|

             |                 v

                              (A)



                                   29-7


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                    VSC OUTPUT CIRCUIT CHECK (CONTINUED)





                              (A)

                               |

                               v

             |           /---------\

             |       NO /IS OC = 2  \

             |----------\           /

                         \---------/

                               | YES

                               v

                         !-------------!

                         !DE-ENERGIZE  !

                         !SCVNT & SCVAC!

                         !-------------!

                               |

                               v

                           ---------

                         (  EXIT     )

                           ---------











































































                                   29-8


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            OCC PARAMETER DEFINITIONS





                                                    

                                                    RANGE

          NAME    |    DESCRIPTION    | UNITS |  MIN     MAX  | BASE     

      ------------|-------------------|-------|---------------|--------

          OC      | OUTPUT CIRCUIT #  |  --   |   0       9   |   --

        OCCSAV    | SAVED OCC A/D     |COUNTS |   0     1023  |   --

         IOCC     | OCC A/D           |COUNTS |   0     1023  |   --

      OCCDIX(1-9) | MIN A/D CHANGE    |COUNTS |-1023    1023  |   36











                                                |OUTPUT TO BE     |

                                                |FUNCTIONED DURING|

                                                |-----------------|

             OC #| CODE |  FUNCTION | CAL. PAR. | VSC OCC |  OCC  |

          ---------------------------------------------------------    

             1   |  81  |   SCVNT   |  OCCDTA   |    X    |   -   |

             2   |  82  |   SCVAC   |  OCCDTB   |    X    |   -   |

             3   |  83  |   HEDF    |  OCCDT3   |    -    |   X   |

             4   |  84  |   EVR     |  OCCDT4   |    -    |   X   |

             5   |  85  |   CANP    |  OCCDT5   |    -    |   X   |

             7   |  87  |   FP      |  OCCDT7   |    -    |   X   |

             8   |  88  |   EDF     |  OCCDT8   |    -    |   X   |

             9   |  89  |   LUS     |  OCCDT9   |    -    |   X   |



























































                                   29-9


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                                 DYNAMIC VSC TEST

                                 (ENGINE RUNNING)





                              ---------

                            (  ENTER    )

                              ---------

                                 |

                                 v

                   !-----------------------------!

                   !  SEND 1/2 SECOND PULSE      !

                   !-----------------------------!

                                 |

                       !---------------------!

                       !.ON-STATE =1         !

                       !.VSCDT =1            !

                       !.ALLOW NORMAL CONTROL!

                       ! OF EDF AND HEDF     !

                       !---------------------!

                                 | 

                                 v

                           --------------

                        (  DELAY VDLY10   )

                               SECS.

                           --------------

                                 |

                       !--------------------!

                       !SUBSTITUTE RPM FOR  !

                       !MPH  MPH = N/32     !

                       !--------------------!

                                 |

                                 v

                           -----------

                        (  ZERO AND    )

                          START VIPTMR

                           -----------

                                 |<----------------|

                                 v                 |           

                       !-------------------!       |         

                       !INCREASE VEHICLE   !       |         

                       !SPEED (N/32)       !       |         

                       !.SET VVSFL1=1      !       |         

                       !.RESUM_SPEED=VRSS  !       |         

                       !-------------------!       |         

                                 |                 |         

                                 v                 v         

                            /---------\       /---------\

                           / IS MPH >  \ NO  /IS VIPTMR  \ YES !------!

                          /VRSS - VRSH  \-->/ => VIPT2 ?  \--->!  SET !

                          \     ?       /   \             /    ! CODE !

                           \           /     \           /     !  36  !

                            \---------/       \---------/      !------!

                                 | YES                             |

                                 v                                 v

                                (1)                               (C)







                                  29-10


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           DYNAMIC VSC TEST (CONTINUED)





                                (1)

                                 |

                                 v

                       !------------------!                       

                       !.CLEAR ALL STATES !

                       ! EXCEPT ON-STATE  !

                       !.CLEAR VVSFL1     !

                       !.TURN SCVNT ON AND!

                       !  SCVAC OFF       !

                       !------------------!

                                 |

                                 v

                           -------------

                         ( DELAY VDLY11  )

                                SEC.

                           -------------

                                 |

                                 v

                       !------------------!

                       !SAVE CURRENT TP   !

                       ! IN TPSAV         !

                       !------------------!

                                 |

                                 v

                            ----------

                         (  ZERO AND   )

                           START VIPTMR

                            ----------

                                 |

                 (B)------------>|

                                 |

                                 v

                                (A)













































                                  29-11


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           DYNAMIC VSC TEST (CONTINUED)



                                (A)

                                 |

                            /---------\ YES !--------!

                           /IS TPSAV-  \--->!SET CODE!----------|

                           \TP > VTPLD /    !   27   !          |

                            \---------/     !--------!          |

                                 | NO                           |

                            /---------\ YES !--------!          |

                           /  IS TP-   \--->!SET CODE!--------->|

                          /  TPSAV >    \   !   28   !          |

                          \   VTPLU     /   !--------!          |

                           \           /                        |

                            \---------/                         |

                                 | NO                           v

                            /---------\ NO                     (C)

                           /IS VIPTMR  \------->(B)

                           \=> VIPT3 ? /

                            \---------/

                                 |

                          !---------------!

                          !DECREASE SPEED !  NOTE: Rate will be depen-

                          !TURN SCVNT AND !    dent upon engine inertia

                          !  SCVAC OFF    !    and/or ISC dashpot.

                          !---------------!

                                 |

                             ----------

                          ( ZERO & START )

                                VIPTMR

                             ----------

                                 |<-----------------|NO

                            /---------\        /---------\      !------!

                           /IS MPH <   \ NO   /IS VIPTMR  \ YES !  SET ! 

                           \ VMLO  ?   /----->\=> VIPT4 ? /---->! CODE !

                            \---------/        \---------/      !  37  !

                                 | YES                          !------!

                                (C)<--------------------------------|

                                 |

                                 v

                         !-----------------!

                         !VSCDT =0         !

                         !RESUM_SPEED =0   !

                         !SCVNT & SCVAC OFF!

                         !RETURN MPH REGIS-!

                         !TER TO NORMAL    !

                         !-----------------!

                                 |

                         !-----------------!

                         !SEND FAST AND    ! use same code format 

                         !SLOW CODES       ! as engine self test

                         !-----------------!

                                 |

                             --------

                           (  EXIT    )

                             --------





                                  29-12


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                  DYNAMIC VSC TEST VEHICLE SPEED RAMP EQUATIONS





                           SELF TEST SET_SPEED RAMP FOR

                           RESUME STATE AND ACCEL STATE





      This logic ramps the SET_SPEED up to RES_SPEED  at  a  rate  of  VACRR

      MPH/sec,  to provide smooth acceleration.  The rate of acceleration is

      clipped to MPH + NSTRAT1 to prevent the  SET_SPEED  from  accelerating

      too fast.



      ACCEL = REQUIRED ----------|

                                 |AND---| SET_SPEED = SET_SPEED

      SET_SPEED < MPH + NSTRAT1--|      |  +VACRR * (Time since

                                        |  last update)

                                        |

                                        | ---ELSE---

                                        |

                                        | SET_SPEED = MPH + NSTRAT1





                         SELF TEST VSC_DC OUTPUT ROUTINE



      For purposes of Strategy Description, the  VSC_DC  OUTPUT  Routine  is

      divided  into  two  subroutines:   VSC_DC  Calculation  and DUTY CYCLE

      OUTPUT.



                                VSC_DC CALCULATION





      The VSC_DC is based on the difference between the set  speed  and  the

      actual  vehicle  speed  with  some  adjustments  for relative throttle

      position.  The calculation is done in two steps to more closely  model

      the analog system.



                  VSC_ERROR = VDCBIA+[VSTGN*SET_SPEED]

                     -[VVHGN*MPH] - VTPGN*(TP-RATCH)

                     

                  VSC_DC = VSC_ERROR - NSTRAT2





                         SELF TEST CALIBRATION PARAMETERS



                  VDCBIA = Self Test DC correction factor

                  VSTGN  = Self Test SET_SPEED proportional gain

                  VVHGN  = Self Test Vehicle Speed proportional gain

                  VTPGN  = Self Test throttle position proportional

                             gain

                  VACRR  = Self Test acceleration ramp rate, MPH/sec

                  NSTRAT1= Normal strategy term - Max. increment

                           above MPH to which set speed can increase

                           MPH.

                  NSTRAT2= Normal strategy term - Duty cycle offset









                                  29-13


                     VEHICLE SPEED CONTROL SELF TEST

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL







                                         

















































































































                                  29-14

























                                  CHAPTER 30



                            ERROR CODE DESCRIPTION































































































                                   30-1


                          ERROR CODE DESCRIPTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                              ERROR CODE DESCRIPTION



                                               SELF TEST SECTION

      ERROR|                                |-----------------------|

      CODE |        DESCRIPTION             | K.O.E.O| E.R. |  CONT |

      -----|--------------------------------|--------|------|-------|

       10  |CYL #1 LOW -CYL BALANCE TEST    |        |  X   |       | 

       11  |PASS                            |   X    |  X   |  X    |

       12  |RPM NOT WITHIN SELF-TEST UPPER  |        |  X   |       |

           |  RPM LIMIT BAND                |        |      |       |

       13  |RPM NOT WITHIN SELF-TEST LOWER  |        |  X   |       |

           |  RPM LIMIT BAND                |        |      |       |

       14  |PIP CKT FAULT                   |        |      |  X    |

       15  |ROM TEST FAILED/KAM IN CONTIN-  |   X    |      |  X    | 

           |  UOUS                          |        |      |       |

       16  |RPM TOO LOW TO PERFORM FUEL TEST|        |  X   |       |

       18  |LOSS OF TACH INPUT TO PROCESSOR-|        |      |  X    |

           |  SPOUT CKT. GROUNDED           |        |      |       |

       18  |SPOUT CKT. OPEN                 |        |  X   |       |

       19  |FAILURE IN EEC REFERENCE VOLTAGE|   X    |      |       |

       20  |CYL. #2 LOW -CYL BALANCE TEST   |        |  X   |       |

       21  |INDICATES ECT OUT OF SELF-TEST  |   X    |  X   |       |

           |  RANGE                         |        |      |       |

       22  |INDICATES MAP/BP OUT OF SELF-   |   X    |  X   |  X    |

           |  TEST RANGE                    |        |      |       |

       23  |INDICATES TP OUT OF SELF-TEST   |   X    |  X   |       |

           |  RANGE                         |        |      |       |

       24  |INDICATES ACT OUT OF SELF-TEST  |   X    |  X   |       |

           |  RANGE                         |        |      |       |

       26  |MAF SENSOR OUT OF RANGE         |   X    |  X   |       |

       27  |SERVO LEAKS DOWN DURING IVSC    |VEHICLE SPEED CONTROL  |

           |  TEST                          |     TEST              |

       28  |SERVO LEAKS UP DURING IVSC TEST |VEHICLE SPD CNTRL TEST |

       29  |INSUFFICIENT INPUT FROM V.S.S.  |        |      |  X    |

       30  |CYL #3 LOW -CYL BALANCE TEST    |        |  X   |       |

       31  |EPT/EVP BELOW MINIMUM VOLTAGE   |   X    |  X   |  X    | 

       32  |EVP VOLTAGE BELOW CLOSED LIMIT  |   X    |  X   |  X    |

           |   (SONIC)                      |        |      |       |

       33  |EGR VALVE NOT OPENING(PFE,SONIC)|        |  X   |  X    |

       34  |EVP VOLTAGE ABOVE CLOSED LIMIT  |   X    |  X   |  X    | 

           |   (SONIC)                      |        |      |       |

       35  |EPT/EVP CKT. ABOVE MAX. VOLTAGE |   X    |  X   |  X    |

       36  |INSUFFICIENT RPM INCREASE DURING|VEHICLE SPD CNTRL TEST |

           |   IVSC TEST                    |        |      |       |

       37  |INSUFFICIENT RPM DECREASE DURING|   X    |  X   |  X    |

           |   IVSC TEST                    |        |      |       |

       40  |CYL #4 LOW -CYL BALANCE TEST    |        |  X   |       |

       41  |EGO SENSOR CKT INDICATES SYSTEM |        |  X   |       |

           |   LEAN                         |        |      |       |

       41  |NO EGO SWITCH DETECTED          |        |      |  X    |

       42  |EGO SENSOR CKT INDICATES SYSTEM |        |  X   |       |

           |   RICH                         |        |      |       |

       44  |THERMACTOR AIR SYSTEM INOPER-   |        |  X   |       |

           |   ATIVE(CYL. 1-4, DUAL EGO)    |        |      |       |









                                   30-2


                          ERROR CODE DESCRIPTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                         ERROR CODE DESCRIPTION (CONT'D)



                                                SELF TEST SECTION

      ERROR|                                |-----------------------|

       CODE|       DESCRIPTION              |K.O.E.R.| E.R. |  CONT.|     

      -----|--------------------------------|--------|------|-------|

       45  |THERMACTOR AIR UPSTREAM DURING  |        |  X   |       |

           |   SELF-TEST                    |        |      |       |

       46  |THERMACTOR AIR NOT BYPASSED     |        |  X   |       |

           |   DURING SELF-TEST             |        |      |       |

       47  |SPEED CONTROL COMMAND SWITCH(S) |VEHICLE SPD CNTRL TEST |

           |   -CKT NOT FUNCTIONING         |        |      |       |

       48  |SPEED CONTROL COMMAND SWITCH(S) |VEHICLE SPD CNTRL TEST |

           |   STUCK -CKT. GROUNDED         |        |      |       |

       49  |SPEED CONTROL GROUND CKT. OPEN  |VEHICLE SPD CNTRL TEST |

       50  |CYL. #5 LOW -CYL. BALANCE TEST  |        |  X   |       |

       51  |-40 DEGREES F INDICATED ECT -   |   X    |      |   X   |

           |   SENSOR CKT. OPEN             |        |      |       |

       52  |PSPS CKT. OPEN                  |   X    |      |       |

       53  |TPS CKT ABOVE MAX VOLTAGE       |   X    |      |   X   |

       54  |-40 DEGREES F INDICATED ACT -   |   X    |      |   X   |

           |   SENSOR CKT. OPEN             |        |      |       |

       56  |MAF SENSOR CKT SHORT TO PWR     |   X    |      |   X   |

       60  |CYL #6 LOW -CYL BALANCE TEST    |        |  X   |       |

       61  |254 DEGREES F INDICATED ECT -   |   X    |      |   X   |

           |   CKT. GROUNDED                |        |      |       |

       63  |TPS CKT. BELOW MIN. VOLTAGE     |   X    |      |   X   |

       64  |254 DEGREES F INDICATED ACT -   |   X    |      |   X   |

           |   CKT. GROUNDED                |        |      |       |

       66  |MAF SENSOR CKT OPEN             |        |      |   X   |  

       67  |NDS CKT. OPEN - A/C ON DURING   |    X   |      |       |

           |   SELF-TEST                    |        |      |       |

       70  |CYL #7 LOW -CYL BALANCE TEST    |        |  X   |       |

       74  |BOO SWITCH CKT. OPEN            |        |  X   |       |

       75  |BOO SWITCH CKT. CLOSED - ECA    |        |  X   |       |

           |    INPUT OPEN                  |        |      |       |

       77  |OPERATOR ERROR -(DYNAMIC        |        |      |       |

           |    RESPONSE/CYL BALANCE TEST)  |        |      |       |

       79  |A/C ON DURING SELF-TEST         |    X   |      |       |

       80  |CYL. #8 LOW -CYL BALANCE TEST   |        |  X   |       |

       81  |AIR MANAGEMENT 1(AM1)CKT FAILURE|    X   |      |       |

       81  |SPEED CONTROL VENT (SCVNT) CKT  |VEHICLE SPD CNTRL TEST |

           |    FAILURE                     |        |      |       |

       82  |SPEED CONTROL VACUUM(SCVAC) CKT |VEHICLE SPD CNTRL TEST |

           |    FAILURE                     |        |      |       |

       82  |AIR MANAGEMENT 2(AM2)CKT FAILURE|    X   |      |       |

       83  |ELECTRO DRIVE FAN (EDF) CKT     |    X   |      |       |

           |    FAILURE                     |        |      |       |

       84  |ELECTRONIC VAC REGULATOR (EVR)  |    X   |      |       |

           |   CKT FAILURE                  |        |      |       |

       85  |CANNISTER PURGE(CANP)CKT FAILURE|    X   |      |       |

       87  |FUEL PUMP CKT FAILURE           |    X   |      |   X   |

       88  |ELECTRO DRIVE FAN (EDF) CKT     |    X   |      |       |

           |   FAILURE                      |        |      |       |









                                   30-3


                          ERROR CODE DESCRIPTION

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                         ERROR CODE DESCRIPTION (CONT'D)

                                               SELF TEST SECTION

      ERROR|                                |------------------------|

       CODE|        DESCRIPTION             |K.O.E.O  | E.R. |  CONT | 

      --------------------------------------|---------|------|-------|

       90  |PASS (CYL BALANCE TEST)         |         |  X   |       |

       91  |EGO SENSOR INPUT INDICATES SYS. |         |  X   |       |

           |   LEAN - NO EGO SWITCH         |         |      |       |

       92  |EGO SENSOR INPUT INDICATES SYS. |         |  X   |       |

           |   RICH                         |         |      |       |

       94  |THERMACTOR AIR SYS. INOPERATIVE |         |  X   |       |

       95  |FP CKT OPEN -ECA TO MTR GND     |    X    |      |   X   |

       96  |FP CKT OPEN - BAT TO ECA        |    X    |      |   X   |

       98  |HARD FAULT PRESENT              |         |  X   |       |

          























































































                                   30-4

























                                  CHAPTER 31



                           VIP PARAMETER DICTIONARY































































































                                   31-1


                         VIP PARAMETER DICTIONARY

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                             VIP PARAMETER DICTIONARY





       PARAMETER  CALIB.                     DESCRIPTION

      ----------- ------   --------- ------------------------------ 

        ACTMAX     935     MAX ACT (ACT OPEN) UNITS ARE COUNTS

        ACTMIN      40     MIN ACT (ACT SHORTED) UNITS ARE COUNTS



        BIHP         1     BRAKE INPUT HDWR PRESENT 0=NOT PRESENT

        BPSSW              1=DO TEST; 0=DO NOT DO TEST



        C14LVL     200     THRESHOLD FOR PIP FAULT -UNITLESS

        C14UP      202     UPCOUNT VALUE FOR PIP FAULT FIL. -UNITLESS

        C22LVL     200     THRESHOLD FOR BP FAULT -UNITLESS

        C22UP      210     UPCOUNT FOR BP FAULT FILTER -UNITLESS

        C29LVL     254     THRESHOLD FOR VSS FAULT -COUNTS

        C29UP       10     UPCOUNT FOR VSS FILTER -COUNTS

        C31LVL     200     THRESHOLD FOR EVP FAULT -UNITLESS

        C31UP      100     UPCOUNT FOR EVP FAULT FILTER -UNITLESS

        C32LVL     254     THRESHOLD FOR EVP OUT-OF-LIMIT

        C32UP       20     UPCOUNT VALUE FOR EVP OUT-OF-LIMIT

        C33LVL     200     THRESHOLD FOR NO EGR FLOW

        C33UP       10     UPCOUNT VALUE FOR NO EGR FLOW

        C34LVL     254     THRESHOLD FOR EGR VALUE OUT-OF-LIMIT

        C34UP       20     UPCOUNT VALUE FOR EGR VALUE OUT-OF-LIMIT

        C35LVL     200     THRESHOLD FOR EVP INPUT HIGH

        C35UP      100     UPCOUNT VALUE FOR EVP INPUT HIGH

        C41LVL     200     THRESHOLD FOR EGO FAULT -COUNTS

        C41UP      100     UPCOUNT FOR EGO FAULT -COUNTS  

        C51LVL     200     THRESHOLD FOR ECT OPEN FAULT -UNITLESS

        C51UP      100     UPCOUNT FOR ECT OPEN FAULT -UNITLESS

        C53LVL     200     THRESHOLD FOR TP OPEN FAULT FIL. -UNITLESS

        C53UP      100     UPCOUNT FOR TP OPEN FAULT FILTER -UNITLESS

        C54LVL     200     THRESHOLD FOR ACT OPEN FAULT -UNITLESS

        C54UP      100     UPCOUNT FOR ACT OPEN FAULT FIL. -UNITLESS

        C56LVL     200     THRESHOLD LEVEL FOR FAULT 56

        C56UP       20     UPCOUNT FOR FAULT 56

        C61LVL     200     THRESHOLD FOR ECT SHORT FAULT -UNITLESS

        C61UP      100     UPCOUNT FOR ECT SHORT FAULT FIL. -UNITLESS

        C63LVL     200     THRESHOLD FOR TP SHORT FAULT -UNITLESS

        C63UP      100     UPCOUNT FOR TP SHORT FAULT -UNITLESS

        C64LVL     200     THRESHOLD FOR ACT SHORT FAULT -UNITLESS

        C64UP      100     UPCOUNT FOR ACT SHORT FAULT -UNITLESS

        C66LVL     200     THRESHOLD LEVEL FOR FAULT 66

        C66UP      100     UPCOUNT FOR FAULT 66 

        C87LVL     200     THRESHOLD FOR FP RELAY FAULT -COUNTS

        C87UP      255     UPCOUNT FOR FP RELAY FAULT -COUNTS

        C91LVL     200     THRESHOLD FOR EGO FAULT -COUNTS

        C91UP      100     UPCOUNT FOR EGO FAULT -COUNTS

        C95LVL     200     THRESHOLD FOR CODE 95 -COUNTS

        C95UP      100     UPCOUNT FOR CODE 95 -COUNTS

        C96LVL     200     THRESHOLD FOR CODE 96 -COUNTS

        C96UP      100     UPCOUNT FOR CODE 96 -COUNTS 











                                   31-2


                         VIP PARAMETER DICTIONARY

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                           VIP PARAMETER DICTIONARY (CONT'D)



      PARAMETER  CALIB                DESCRIPTION

      ---------  ------    -------------------------------------

        ECTMAX     935     MAX. ENGINE OFF ECT -UNITS ARE COUNTS

        ECTMIN      40     MIN. ENGINE OFF ECT -UNITS ARE COUNTS

        EDFHP        0     FAN HARDWARE PRESENT SWITCH

        EPTMAX     985     MAX. EPT READING -COUNTS

        EPTMIN      40     MIN. EPT READING -COUNTS

        EVPMAX     985     MAX. EVP READING -UNITS ARE COUNTS

        EVPMIN      40     MIN. EVP READING -UNITS ARE COUNTS



        FMDTM        0     TIME DELAY BEFORE MIL IS ACTIVATED -SEC



        HEDFHP       0     TWO SPEED FAN PRESENT 



        IDMLVL     200     THRESHOLD FOR IDM -UNITLESS

        IDMUP      100     UPCOUNT VALUE FOR IDM -UNITLESS

        ISLBND     250     GOOSE IDLE TEST CONTROL BAND LIMIT

        ISUBND     250     EXTENDED IDLE TEST CONTROL BAND LIMIT



        LEQV         1.3   LEAN LIMIT FOR LAMBDA -UNITS ARE LAMBDAS

        LOWBAT      11     LOW BATTERY VOLTAGE -VOLTS



        MILLIM       1     MAX. TIME FOR MIL ROUTINE -SEC

        MILTM1       0     FLASH RATE FOR MIL -SEC.



        NGOOSE    1100     GOOSE TEST DESIRED RPM

        NUMEGO       2     NUMBER OF EGO SENSORS



       OCCDT1       25     MIN. CHANGE IN OCC AM1 -UNITS ARE COUNTS

       OCCDT2       25     MIN. CHANGE IN OCC AM2 -UNITS ARE COUNTS

       OCCDT3        0     MIN. CHANGE IN OUTPUT CKT CHECK -COUNTS

       OCCDT4       30     MIN. CHANGE IN OCC EVR -UNITS ARE COUNTS

       OCCDT5       30     MIN. CHANGE IN OCC CANP -UNITS ARE COUNTS

       OCCDT7       30     MIN. CHANGE IN OCC FP -UNITS ARE COUNTS

       OCCDT8        0     MIN. CHANGE IN OUTPUT CKT CHECK -COUNTS

       OCCDTA       25     MIN. CHANGE IN OCC SCVNT -COUNTS

       OCCDTB       25     MIN. CHANGE IN OCC SCVAC -COUNTS 



       PFEHP         0     SWTCH TO SELECT EGR STRAT, 1=PFE 0=SONIC

       PSPSHP        0     PSPS HARDWARE, NO PRESSURE SWITCH



       REQV          0.75  RICH LIMIT FOR LAMBDA -UNITS ARE LAMBDAS



       TAPMAX      990     MAX. TP SENSOR READING -UNITS ARE COUNTS

       TAPMIN       40     MIN. TP SENSOR READING -UNITS ARE COUNTS

       THRMHP        1     THERMACTOR AIR HARDWARE SWITCH



       V820A         1     ISC DUTY CYCLE MULTIPLIER

       V860          5     C/L PACING FUNCTION

       VACRR         4     VEH. SPEED RAMP RATE MPH/SEC

       VAIRFL        1     SECONDARY AIR TEST FLAG 1=DO TEST

       VATMR2       10     TIME TO WAIT BEFORE DOWN STREAM AIR TEST

                           -SEC.

       VBISW         0     BRAKE ON/OFF TEST, 1=ENABLE 0=DISABLE

       VBPDL1     1200     MIN. BP DURING VIP TEST -TICKS



                                   31-3


                         VIP PARAMETER DICTIONARY

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            VIP PARAMETER DICTIONARY CONT'D





                           VIP PARAMETER DICTIONARY

      PARAMETER            DESCRIPTION

      ---------------------------------------------------------------

       VBPDL2     1563     MAX. BP DURING VIP TEST - TICKS

       VBPMAX        0.15  MAX. TIME SINCE LAST BP UPDATE -SEC

       VCBCLP         .065 MAX. CLIP ON DROP REQD FOR CYL BAL TEST

                             RPM/100

       VCBDLY       22     DELAY BEFORE STARTING CYL BAL TEST -SEC.

       VCBFLG        1     FLAG:0=BYPASS TEST, -1=ALLOW TEST 1=ALLOW

                             MULTIPLE TEST ENTRY

       VCBPAD      0.0075  ADDED TO VCBPCT EA. REPEAT OF C.B. TEST 

       VCBPCT         .05  % RPM DROP REQ'D FOR CYLINDER BAL. TEST

       VCBTM1        3     TIME TO AVG. N, ALL INJECTORS ON -SEC

       VCBTM2        3     TIME TO AVG. N, ALL INJECTORS OFF -SEC 

       VCRTDC         .85  EVR DC FOR CRUISE TEST -DC

       VDCBIA        2.3   VEH. SPEED DC BIAS

       VDCMAX         .85  MAX. EVR DC FOR ENGINE-ON EGR TEST -DC

       VDCMIN         .25  MIN. EVR DC FOR ENGINE-ON EGR TEST -DC

       VDISFM        0     FMEM FAULT BYPASS FLAG

       VDLEDF        4     MIN. TIME TO HOLD ON LOW FAN WHILE PER-

                             FORMING OCC TEST -SEC

       VDLHED        2     MIN. TIME TO HOLD ON HI FAN WHILE PER-

                             FORMING OCC TEST -SEC

       VDLY1         1     DELAY FOR FUEL RICH TEST -UNITS ARE SEC

       VDLY10        15    DELAY BEFORE STARTING SPEED RAMP -SEC

       VDLY11         3    DELAY AFTER SPEED RAMP -SEC

       VDLY2          3    TIME TO DELAY BEFORE DUMP/UPSTREAM AIR -SEC

       VDLY8          0    DELAY BEFORE EXIT FROM FUEL TEST

       VECT3        150    MIN. COOLANT TEMP. (ENGINE-ON)-DEG. F

       VECT5        120    STARTING COOLANT TEMP. FOR WARM-UP CNT -DEG

       VECTMR         2    TIMER FOR EGR CRUISE TEST -SEC

       VEGOBP         1    EGO SWITCHING TEST 1=ENABLE

       VEGOSW         8    NO. OF EGO SWITCHES REQ'D TO PASS

       VEGOTM       240    MIN. TIME TO ENABLE EGO TEST AFTER REACHING

                             CLOSED LOOP TEMP

       VEGRAT        .07   EVR DC RATE FOR ENGINE-ON EGR TEST DC/SEC

       VEGRLOAD      .35   MAX. LOAD TO DO CONT. EGR FLOW TESTD

       VEGVAC         7    MIN. MAN. VAC. FOR EGR CRUISE TEST -IN HG

       VEPTIL       605    EPT LOW LIMIT AT IDLE

       VEPTLL       610    EPT LOW LIMIT ENG OFF -COUNTS

       VEPTRH       850    EPT HIGH LIMIT, ENG. RUN -COUNTS

       VEPTRL       615    EPT LOW LIMIT, ENG RUN -COUNTS 

       VEVPCL       160    EVP CRUISE LIMIT TEST -COUNTS

       VEVPDL        80    EVP DELTA FOR ENGINE-ON EGR TEST -COUNTS

       VEVPHL       138    EVP UPPER LIMIT -COUNTS

       VEVPLL        60    EVP LOWER LIMIT -COUNTS



















                                   31-4


                         VIP PARAMETER DICTIONARY

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                               VIP PARAMETER DICTIONARY





                             VIP PARAMETER DICTIONARY

       PARAMETER  CALIB      DESCRIPTION 

      ----------  -------   ----------------------------------------

       V_FPMDLY       2    DELAY PRIOR TO ENG OFF F.P. CKT TEST -SEC

       V_FPMFLG       1    F.P. CKT FLAG, 1=DO TEST

       V_FPMTM        1    TIME DELAY PRIOR TO CONT. F.P. TEST -SEC

       VFPREQ         1    FUEL PUMP RELAY TEST, 1=DO TEST

       VHFNTM        15    MIN. TIME TO HOLD DOWN TP TO ENABLE HI

                             FAN OUTPUT -SEC 

       VIACT1       717    MIN. CHARGE TEMP. (ENGINE-OFF)- COUNTS

       VIACT2        63    MAX. CHARGE TEMP. (ENGINE-0FF) -COUNTS

       VIACT3       761    MIN. CHARGE TEMP. (ENGINE-ON) -COUNTS 

       VIACT4        63    MAX. CHARGE TEMP. (ENGINE-ON) -COUNTS

       VIDMST         4    TIME FOR IDM BYPASS AFTER PIP RECOVERY

                             -SEC

       VIDMTM       130    TIME OUT FOR IDM FAULT -UNITS ARE MILLI-

                           SECONDS

       VIECT1      717       MIN. COOLANT TEMP. (ENGINE-OFF) -COUNTS

       VIECT2       63       MAX. COOLANT TEMP. (ENGINE-OFF) -COUNTS

       VIECT3      235       MIN. COOLANT TEMP. (ENGINE-ON) -COUNTS

       VIECT4       63       MAX. COOLANT TEMP. (ENGINE-ON) -COUNTS

       VIPLR1         .025   RATE TO RAMP LEAN -LAMBDAS/SEC

       VIPRR1         .05    RATE TO RAMP RICH -LAMBDAS/SEC

       VIPSPK       30       VIP SPARK ADVANCE -DEG.

       VIPT1        20       MAX. TIME IN STATIC VSC TEST -SEC

       VIPT2        20       MAX. RAMP TIME VSC TEST -SEC

       VIPT3        15       MAX. TIME IN HOLD TEST -SEC

       VIPT4        15       MAX. TIME FOR SPEED DECREASE -SEC

       VIPTM2       10       TIME TO WAIT FOR EGO SWITCH -SEC

       VIPTM3       20       TIME IN LOOP FOR LEAN FUEL -SEC

       VIPTM4       10       TIME TO WAIT FOR EGO RICH -SEC

       VISCN      1600       VIP DESIRED RPM

       VISCN1     1550       DESIRED RPM TO DO CYLINDER BALANCE TEST

       VISDL1       16       ISC DELAY TIME -SEC

       VISDL3       10       GOOSE IDLE DELAY TIME -SEC

       VISDL4        6       DELAY PRIOR TO CYLINDER BALANCE TEST

       VISDL5        6       TIME TO WAIT FOR RPM DROP IN CYL. BALANCE TEST

       VKYPWR      200       IV POWER LOWER LIMIT -COUNTS

       VLAMCB         .955   LAMBDA FOR CYLINDER BALANCE TEST

       VLFNTM       10       MIN. TIME TO HOLD DOWN TP TO ENABLE LOW FAN

                               -SEC

       VLORPM      500       MIN RPM FOR PIP/IDM TEST -RPM  

       VMAF01       20       MAF ENG. OFF VIP LOW LIMIT -COUNT

       VMAFPIPLMT   50       MASS AIR FLOW PIP LIMIT -MSEC

       VMAFR1      200       MAF. ENG RUNNING VIP LOWER LIMIT -COUNT

       VMAFR2      400       MAF ENG RUNNING VIP UPPER LIMIT -COUNT

       VMAMAX     1000       MAF CONT. VIP SHORT TO PWR LIMIT -COUNT

       VMAMIN      100       MAF CONT. VIP OPEN CKT LIMIT -COUNT

       VMARPM     4500       MAF THRESHOLD RPM FOR FAULT 56 -RPM

       VML0         35       LOW MPH LIMIT FOR SPD DECREASE IN VSC TEST 

       VN          900       MAX. IDLE SPEED FOR EPT TEST

       VNMIN       900       MIN. RPM FOR FUEL TEST -RPM







                                   31-5


                         VIP PARAMETER DICTIONARY

               EEC-EPCD, FoMoCo, PROPRIETARY & CONFIDENTIAL





                            VIP PARAMETER DICTIONARY CONT'D





      PARAMETER   CALIB              DESCRIPTION

      --------   -------     ----------------------------

       VPIPTM       60       TIME OUT FOR PIP FAULT -MSEC

       VPSIND    .000035     VIP GAIN FOR OVERSPEED CONDITIONS

       VPSINU    .000045     VIP GAIN FOR UNDERSPEED CONDITIONS

       VPSSW         0       POWER STEERING PRESS. SWITCH TEST, 1=ENABLE

       VPTCNT       10       NO. OF CLOSED TO PART THROT. TRANS. TO ENABLE

       VRLAM         0.9     LAMBDA FOR EGO TEST 

       VRSH          3       BAND FOR VEH. SPD TEST

       VRSS         60       SET SPEED FOR VEH. SPEED TEST

       VSAMIN     2000       MIN. RPM TO DO VSS TEST WITH A/T

       VSIBRM        0.6     MAX. ALLOWED VALUE FOR IPSIBR

       VSIBRN       -0.6     MIN. ALLOWED VALUE FOR IPSIBR

       VSLOAD      .266      MAX DECEL LOAD M/T VSS TEST 

       VSMAPL        7       MAX. DECEL MAP TO DO VSS TEST M/T, IN HG

       VSMMIN     1250       MIN. RPM TO DO VSS TEST WITH M/T

       VSPADV       30       SPARK ADVANCED FOR SPOUT TEST

       VSPRET       10       RETARDED SPARK FOR SPOUT TES

       VSPRPM      200       MIN. RPM TO PASS SPOUT TEST

       VSPTDL        5       MIN. STABILIZED TIME FOR SPOUT TEST

       VSPTEN        1       SPOUT TEST ENABLE SWITCH WHEN =1

       VSSMN1        5       MIN. VEH. SPD TO PASS VSS TEST

       VSSSW         1       VSS TEST ENABLE SWITCH WHEN =1

       VSSTIM        3       MIN. STABILIZED TIME BEFORE VSS TEST

       VSTGN          .014   SET SPD PROPORTIONAL GAIN -D.C./MPH

       VSTYPE        2       VSC SYSTEM PRESENT WHEN =1

       VTABFL        1       FLAG TO DO THERMACTOR TEST 1=DO TEST    

       VTAP1       150       MIN. ENGINE-OFF THROTTLE POSITION -COUNTS

       VTAP2       250       MAX. ENGINE-OFF THROTTLE POSITION -COUNTS

       VTAP3       150       MIN. TP -COUNTS

       VTAP4       250       MAX. TP -COUNTS

       VTAP5       400       UPPER LIMIT OF TP FOR OUTPUT TEST -COUNTS

       VTAP6       350       LOWER LIMIT OF TP FOR OUTPUT TEST -COUNTS

       VTCDSN        2.75    DSDRPM TIME CONSTANT FOR VIP -SEC

       VTCEGO        1.250   TIME CONSTANT FOR EGO -SEC

       VTCEPT        0.025   TIME CONSTANT FOR EPT -SEC 

       VTPGN          .005   THROT POS PROPORTIONAL GAIN, DC/COUNT

       VTPLD        10       MIN. TP GAIN FOR VSC TEST -COUNTS

       VTPLU        10       MAX. TP GAIN FOR VSC TEST -COUNTS

       VVHGN          .014   VEH. SPD PROPORTIONAL GAIN, DC/MPH

       VVSCET       60       MAX. TIME IN VSC TEST -SEC 



       WIGLVL      200       UPCOUNT VALUE IN WIGGLE TEST -UNITLESS

























                                   31-6

























                                      CHAPTER 32



                                     GUFB - INDEX































































































                                    32-1


                                GUFB - INDEX







                                   INDEX







   "A", 6-49, 6-71, 6-93, 12-8 to      ACTMAX, 21-4, 21-15, 26-12, 28-10

       12-9, 20-21                     ACTMIN, 21-4, 21-15, 26-12, 28-10

   A/C CLUTCH STRATEGY                 ACWDLY, 10-5, 10-7, 13-3, 13-5

     DEFINITIONS, 10-4                 ACWTMR, 20-2, 20-11, 20-23

     DESCRIPTION, 10-3                 ADAPTIVE FUEL TABLE, 6-42

     LOGIC, 10-7                       ADAPTM, 6-39, 6-46

     OVERVIEW, 10-2                    ADEFTR, 6-39

   A3C, 9-32, 10-4, 10-7 to 10-8,      ADEGCT, 6-39, 6-49

       19-10 to 19-12                  ADPTMR, 6-37, 6-46, 20-2, 20-11

   A3CTMR, 10-4, 10-6 to 10-8, 20-2,   ADPTMR_FLG, 20-8, 20-11

       20-13                           ADVLIM, 7-33, 7-43

   A3CTT, 10-5, 10-8                   AE, 6-55 to 6-56, 19-15

   ACBTMR, 10-4, 10-7, 20-2, 20-9      AEACLD, 6-55, 6-57 to 6-58

   ACC_NDS, 19-11                      AEFTRFF, 6-63, 6-76, 6-80 to 6-81

   ACC_REQ, 15-8, 15-13 to 15-15,      AEFUEL, 6-3, 6-7, 6-37, 6-47,

       15-18                               6-55 to 6-57, 6-76

   ACCEL_BUT, 15-5, 15-8, 15-10,       AEFUEL LOGIC, 6-57

       15-14, 15-16, 15-20             AELIM, 6-39, 6-47

   ACCEL_REQ, 15-20                    AELOAD, 6-55, 6-57 to 6-58, 19-2,

   ACCEL_STATE, 15-5, 15-8, 15-16          19-8, 19-15, 19-48

   ACCELERATION ENRICHMENT FUEL        AEM, 6-55, 6-57

       DESCRIPTION, 6-54               AEOFLG, 6-55 to 6-58

   ACCFLG, 9-20, 9-26 to 9-27, 9-29,   AEOFLG LOGIC, 6-58

       9-32, 10-4, 10-6 to 10-7,       AETAR, 6-55, 6-57 to 6-58

       13-3, 13-5, 20-5, 20-10         AFACT1, 6-39, 6-47

   ACCPM, 9-21                         AFACT2, 6-39, 6-47

   ACCTMR, 9-20, 9-26, 10-2, 10-4,     AFECT1, 20-6, 20-11

       10-7, 13-3, 13-5, 20-2, 20-10   AFECT2, 20-6, 20-11

   ACIFLG, 9-20, 9-26 to 9-27, 9-29,   AFMFLG, 6-38, 6-46, 6-68, 6-71,

       9-31 to 9-32, 10-6 to 10-7,         8-2, 8-7, 8-10, 12-4, 12-8,

       20-5, 20-10                         17-4, 20-5, 20-20, 21-4, 21-7,

   ACITMR, 10-4, 10-7, 20-2, 20-10         21-15, 21-18, 21-20

   ACL, 16-2 to 16-3                   AGB, 6-69, 6-71

   ACLDED, 15-6, 15-20                 AHISL, 6-77, 6-81

   ACLINC, 15-6, 15-20                 AIR37, 19-2, 19-18

   ACLOD, 9-5, 9-8                     AISF, 6-61, 6-63 to 6-66

   ACMNDT, 10-4, 10-7                  AISFM, 6-62, 6-64

   ACMNET, 10-5, 20-10                 ALOSL, 6-77, 6-81 to 6-82

   ACMNFT, 13-3, 13-5                  ALPHA, 6-62

   ACOFFH, 10-5, 10-7                  AM, 6-3, 6-6, 6-74 to 6-75, 8-2

   ACOFFN, 10-5, 10-7                      to 8-3, 8-15 to 8-16, 9-42,

   ACPPM, 9-27, 9-29, 9-31                 9-44 to 9-45, 11-3, 19-2,

   ACRT, 10-4, 10-7 to 10-8                19-8, 19-23, 19-48, 21-3,

   ACSTRD, 10-4, 10-7                      21-12

   ACT, 6-14 to 6-15, 6-37, 6-39,      AM1, 3-3

       6-47, 6-56, 6-62, 6-97, 7-3,    AM2, 3-3

       7-5 to 7-7, 7-24, 9-24, 12-4    AMDESN, 9-42, 9-45, 19-5

       to 12-5, 12-7, 19-2 to 19-3,    AMINT, 19-2, 19-8, 19-17 to 19-18

       19-8, 19-48, 21-3, 21-7,        AMPEM, 6-2, 6-6, 8-2, 8-5, 8-10

       21-14 to 21-15                      to 8-11, 8-15, 8-18

   ACTFMM, 21-4                        AMRPM, 9-42, 9-45, 19-5







                                  Index-1


                                GUFB - INDEX







   AMRPMH, 9-42, 9-45, 19-5            BASEFFn, 6-75 to 6-76

   ANPIP, 6-21, 6-23, 6-25, 6-30       BASEFFT, 6-3, 6-7

   ANPIPn, 6-31                        BFMFLG, 8-2, 8-7, 21-4, 21-7,

   APT, 5-2 to 5-4, 6-11 to 6-13,          21-11, 21-18, 21-20

       6-19 to 6-20, 6-34, 6-68,       BFULSW, 6-77, 6-82

       6-72, 6-76, 6-80, 7-3, 7-11,    BGCNT, 9-29, 9-31, 9-37, 9-44 to

       7-32, 7-42, 8-2, 8-7, 9-10,         9-46

       9-17, 10-4, 10-7, 12-4, 12-7    BGFUL1, 6-80 to 6-82, 6-85

       to 12-8, 19-2, 19-28 to 19-29,  BGFUL2, 6-80 to 6-82, 6-85

       20-4, 20-14, 20-16, 20-22,      BGFULn, 6-78, 6-83

       21-3                            BIAS, 6-23, 6-25, 6-31 to 6-32,

   ARCHCOR, 19-2, 19-8, 19-18 to           6-37, 6-48

       19-19                           BIFLG, 10-2, 10-4, 10-7, 15-5,

   ARCHFG, 6-83, 6-85, 19-16, 19-21,       15-14, 19-10, 19-26, 20-5,

       21-9                                20-9

   ARCHG, 6-55, 6-68, 6-74, 6-97,      BIHP, 19-5, 19-26, 27-12

       9-44 to 9-46, 16-2 to 16-3,     BOO, 15-2, 19-26

       19-2 to 19-3, 19-8, 19-13,      BP, 6-56, 6-76, 6-80, 7-6, 8-2,

       19-16 to 19-17, 19-21, 19-23,       8-10, 8-15 to 8-16, 8-18,

       21-9                                19-8, 19-14, 19-24, 20-4,

   ARCHG CALCULATIONS, 21-9                20-13, 20-20 to 20-21, 21-9,

   ARCHG_BG, 6-75, 6-83, 6-85              21-11

   ARCHI, 19-8, 19-16, 19-18, 19-21,   BP SENSOR FMEM, 21-11

       21-7                            BPCOR, 8-15 to 8-16

   ARCHLI, 19-2, 19-18 to 19-19        BPKFLG, 19-2, 19-8, 19-29 to

   ARCHLK, 19-5, 19-19                     19-30

   ARCHSW, 19-16, 19-21                BPSSW, 19-5, 19-24, 21-11, 26-10,

   ATBYS, 12-5, 12-7                       28-11

   ATMR1, 6-9 to 6-10, 6-12 to 6-13,   BPUFLG, 19-5, 19-10, 19-29

       6-20, 6-61, 6-64, 6-68, 6-71,   BRAKE_STATE, 15-5, 15-8, 15-13 to

       6-94, 6-97, 7-3, 7-11, 8-2,         15-14, 15-17, 15-19

       8-7, 9-20, 9-24, 10-4, 10-7,    BREAKPOINT, 6-86

       11-3, 11-5, 12-4 to 12-6,       BRKCOT, 10-5, 10-7, 20-9

       12-9, 17-5, 19-30, 20-2, 20-7,  BYHTMR, 12-5, 12-8, 20-6

       20-12, 20-21, 21-3, 21-5,       BYPLES, 20-6, 20-19

       21-14                           BYPWOT, 12-5, 12-7

   ATMR2, 6-9 to 6-10, 6-12, 6-94,     BYSTM1, 12-5, 12-9

       6-97, 8-2, 11-3 to 11-5, 12-4   BYSTM2, 12-5, 12-9

       to 12-6, 12-9, 17-5, 20-2,      BYSTM3, 12-5, 12-9

       20-7, 20-12, 20-21, 21-6        BYSTM4, 12-5, 12-9

   ATMR3, 9-20, 9-22, 9-26 to 9-27,    BYSTM5, 12-5, 12-9

       20-2, 20-12                     BZZRPM, 6-52, 9-21, 9-24

   AWOTMR, 12-4, 12-7 to 12-8          BZZTM, 9-21, 9-24

    

   "B", 6-71, 12-8 to 12-9             'C', 6-19, 7-11, 7-14

   BAP, 19-24 to 19-25, 19-48          'C' DEFINITION, 6-19

   BAPBAR, 19-2, 19-8, 19-24 to        'C' LOGIC, 7-14

       19-25, 19-48, 21-11             C**FIL, 21-8

   BAPCNT, 19-2, 19-8, 19-25           C**LVL, 21-8

   BAPCNTFLG, 19-25                    C14LVL, 28-6

   BAPFMM, 21-4, 21-11                 C14UP, 28-6

   BAPTMR, 19-2, 19-25, 20-2, 20-13,   C22FIL, 21-3, 21-11

       21-3, 21-11                     C22LVL, 21-4, 21-11, 28-6

   BASEFF1, 6-3, 6-7, 6-80             C22UP, 28-6

   BASEFF2, 6-3, 6-7, 6-80             C29LVL, 28-6, 28-22







                                  Index-2


                                GUFB - INDEX







   C29UP, 28-6, 28-22                  CFI, 6-4, 6-111

   C31FIL, 21-3, 21-16 to 21-17        CFIEPT, 19-48

   C31LVL, 21-4, 21-16 to 21-17,       CFMFLG, 6-38, 6-46, 6-68, 6-71,

       28-6                                8-2, 8-7, 8-10, 12-4, 12-8,

   C31UP, 28-6                             13-3, 13-5, 17-4, 20-5, 20-20,

   C32LVL, 28-6                            21-4, 21-7, 21-14, 21-18,

   C32UP, 28-6                             21-20

   C33LVL, 28-6                        CHANGE_FUELPW, 6-84

   C33UP, 28-6                         CHANGED PAGES, 1-2, 9-36, 9-39

   C34LVL, 28-6                        CHKAIR, 6-9, 6-11, 12-4, 12-6 to

   C34UP, 28-6                             12-8

   C35FIL, 21-3, 21-16 to 21-17        CHKSUM, 6-37, 6-40, 6-50 to 6-51,

   C35LVL, 21-4, 21-16 to 21-17,           22-4 to 22-5

       28-6                            CID, 6-97

   C35UP, 28-6                         CID EDGE PROCESSING LOGIC, 6-101

   C41FIL, 21-18                       CIDRSW, 6-93, 6-98

   C41LVL, 21-19, 28-6                 CINTSW, 6-93, 6-98

   C41UP, 28-6                         CINTV, 6-93, 6-98, 19-48

   C51FIL, 21-3, 21-14                 CLFLG, 6-2 to 6-3, 6-7, 6-10 to

   C51LVL, 21-4, 21-14, 28-6               6-11

   C51UP, 28-6                         CLOSED LOOP FUEL CONTROL, 11-5

   C53FIL, 21-3 to 21-4, 21-13         COAST_BUT, 15-5, 15-8, 15-10,

   C53LVL, 21-4, 21-13, 28-6               15-14 to 15-15

   C53UP, 21-3, 28-6                   COAST_STATE, 15-5, 15-8, 15-15

   C54FIL, 21-3, 21-15                 COLTBU, 6-37, 6-40, 6-46

   C54LVL, 21-4, 21-15, 28-6           CONPR, 8-16 to 8-19

   C54UP, 28-6                         CPRGTMR, 11-3 to 11-5

   C56FIL, 21-10                       CRANK, 4-2, 6-55, 6-61, 6-102,

   C56LVL, 21-4, 21-10, 28-6, 28-12        6-104, 13-2

   C56UP, 28-6, 28-12                  CRANK/UNDERSPEED/RUN MODE

   C61FIL, 21-3, 21-14                     SELECTION STRATEGY

   C61LVL, 21-5, 21-14, 28-6             DEFINITIONS, 4-4

   C61UP, 28-6                           ENGINE RUNNING REINIT, 4-6

   C63FIL, 21-3, 21-5, 21-13             OVERVIEW, 4-2

   C63LVL, 21-5, 21-13, 28-6             PROCESS, 4-5

   C63UP, 21-3, 28-6                   CRKFLG, 4-4, 5-3 to 5-4, 6-55,

   C64FIL, 21-3, 21-15                     6-57, 6-61, 6-64, 6-77, 6-80,

   C64LVL, 21-5, 21-15, 28-6               6-82, 6-104 to 6-105, 7-4,

   C64UP, 28-6                             7-26, 8-2, 8-7, 9-9, 12-4,

   C66FIL, 21-10                           12-11, 13-3, 13-5, 16-2 to

   C66LVL, 21-5, 21-10, 28-6, 28-12        16-3, 18-2 to 18-3, 19-5,

   C66UP, 28-6, 28-12                      19-28 to 19-29, 19-39, 19-43,

   C87LVL, 28-6                            20-5, 20-12, 20-17, 21-8 to

   C87UP, 28-6                             21-9, 21-18, 21-20

   C91FIL, 21-18                       CRKPIP, 4-2, 4-4, 6-104 to 6-105

   C91LVL, 21-19, 28-6                 CRKTIM, 9-26

   C91UP, 28-6                         CRKTMR, 6-76 to 6-77, 6-80, 20-2,

   C95LVL, 28-7                            20-6, 20-13

   C95UP, 28-7                         CTAC, 10-5, 10-7

   C96LVL, 28-7                        CTACH, 10-5, 10-7

   C96UP, 28-7                         CTAFLG, 12-4, 12-8 to 12-9, 20-8,

   CANISTER PURGE                          20-14

     CONTROL LOGIC, 11-5               CTARTM, 12-5, 12-8 to 12-9

   CANP, 3-3, 19-19                    CTATMR, 12-4, 12-8, 20-2, 20-14

   CCDSW, 7-5, 7-24                    CTBYS, 12-5, 12-7







                                  Index-3


                                GUFB - INDEX







   CTBYSH, 12-5, 12-7                  DEGPIP, 6-95 to 6-96, 6-98

   CTDFSO, 6-69, 6-72 to 6-73          DELAMB, 6-39, 6-48

   CTEDSO, 6-69, 6-72 to 6-73          DELCOL, 6-39, 6-47

   CTEHI, 19-5, 19-29                  DELHYS, 9-17

   CTFLG, 7-33 to 7-34, 7-42           DELOPT, 8-2, 8-5, 8-10 to 8-12,

   CTHIGH, 6-9, 6-12, 6-94, 6-98,          19-48

       7-5, 8-3, 8-7, 11-3, 11-5,      DELPR, 8-4, 8-15

       12-5, 12-9, 17-5, 20-6 to       DELRAT, 9-5, 9-42, 9-45, 19-5

       20-7, 20-21, 21-5, 21-14        DELROW, 6-39, 6-47

   CTHIN, 6-14, 6-19                   DELTA, 5-3 to 5-4, 7-5, 9-4 to

   CTLOW, 6-9 to 6-10, 6-12, 6-14,         9-5

       6-19, 6-98, 8-3, 8-7 to 8-8,    DELTAM, 9-44, 19-5

       11-3, 11-5, 12-5 to 12-6,       DELTIM, 6-61, 6-65

       12-9, 17-5, 20-6 to 20-7,       DESDEL, 8-18

       20-21, 20-23                    DESDP, 8-15, 8-17 to 8-18, 19-48

   CTNFLG, 20-5, 20-8, 20-14           DESEM, 8-5, 8-7, 8-15, 8-17 to

   CTNTMR, 6-9, 6-11, 20-2, 20-14          8-19

   CTPRG, 11-3, 11-5                   DESHYS, 8-18

   CTPRGH, 11-3, 11-5                  DESMAF, 9-20, 9-23, 9-27, 9-33,

   CTPTFG, 5-3 to 5-4, 9-4, 9-37           9-37, 9-39, 9-41

   CTTMR, 6-68, 6-72, 20-2, 20-14      DESNLO, 9-20, 9-23, 9-25, 19-48

                                       DFLDH, 6-69, 20-6

   D, 6-76, 6-79                       DFLDL, 6-69, 20-6

   "D", 9-39                           DFLOD, 6-69, 6-72

   'D', 6-71                           DFLODH, 6-69, 6-72

   DACPPM, 9-29, 9-31                  DFMIN0, 7-5, 7-27

   DACTM, 9-21, 9-26                   DFMIN1, 7-5, 7-27

   DASCTK, 9-4                         DFSECT, 6-69, 6-71

   DASMHYST, 9-4, 9-9                  DFSFLG, 6-61, 6-64, 6-70 to 6-71

   DASMIN, 9-4, 9-17                   DFSO, 6-73

   DASMPH, 9-4, 9-9                    DFSVS, 6-69, 6-72

   DASPOT, 9-10 to 9-13, 9-17 to       DFSVSH, 6-69, 6-72

       9-18, 9-33, 9-37                DIFCTR, 7-3, 7-9, 7-27

   DASPTK, 9-17 to 9-18                DIFF0, 7-3, 7-27

   DASPTO, 9-16 to 9-18                DIFF1, 7-3, 7-27

   DATA OUTPUT LINK STRATEGY           DISABLE_NO_START, 21-18, 21-20

     TRIPMINDER, 14-2                  DLDFSO, 6-69, 6-73

   DATA_TIME, 19-2, 19-18              DLHYST, 9-43

   DCBIAS, 15-6, 15-21                 DLTMR, 6-68, 6-70, 6-73, 20-2,

   DCOFF, 8-3, 8-5, 8-12, 8-16 to          20-16

       8-17, 8-19                      DMFLG, 6-68, 6-70, 6-73, 20-8,

   DEBAMP, 15-6, 15-9, 20-6, 20-15         20-16

   DEBTIM, 15-6, 15-9, 19-5, 19-45,    DMIN, 6-69

       20-6, 20-15                     DMPDLY, 12-5, 12-8

   DEBTMR, 15-5, 15-7, 15-9, 19-2,     DNAC, 9-21, 9-26

       19-45, 20-2, 20-15              DNDSUP, 6-13, 6-18 to 6-19, 6-93,

   DEBYCP, 9-34 to 9-35, 9-39              9-4, 9-10 to 9-13, 9-20, 9-25

   DEBYMA, 9-34, 9-38 to 9-39              to 9-27, 9-29, 9-31, 19-5,

   DEBYMA_FM, 9-36, 9-39, 21-3, 21-9       19-10, 19-36, 19-38, 20-5,

   DECEL FUEL SHUT OFF STRATEGY,           20-19

       6-67                            DNLOD, 12-5, 12-8

     LOGIC, 6-71                       DNLODH, 12-5, 12-8

   DEFINITIONS, 6-37, 6-104, 6-112,    DNPOWS, 9-21, 9-26

       7-32, 9-4, 11-3, 13-3, 15-5,    DNPPM, 9-21, 9-29, 9-31

       20-4                            DNSTMI, 12-5, 12-8







                                  Index-4


                                GUFB - INDEX







   DOL, 3-3, 14-2                      ECTFMM, 21-5, 21-14

   DOL_COUNT, 14-2                     ECTIP, 7-33, 7-42

   DOUBLE_EDGE FLAG, 7-4               ECTMAX, 21-5, 21-14, 26-9, 28-9

   DP, 8-15                            ECTMIN, 21-5, 21-14, 26-9, 28-9

   DP', 8-15, 19-48                    ECTNOK, 7-33, 7-36

   DRBASE, 9-21, 9-26                  EDETHYS, 17-3 to 17-4

   DSD_RPM, 9-9                        EDF, 3-3, 13-3 to 13-5, 20-4,

   DSDRPM, 6-66, 6-68, 6-71, 6-73,         20-17

       7-3, 7-11, 9-10 to 9-13, 9-20,  EDFHP, 13-2 to 13-3, 13-5, 26-19

       9-23 to 9-27, 9-38 to 9-39,     EDFTM, 13-3, 13-5

       9-42, 9-45, 19-2, 19-29,        EDFTMR, 13-3 to 13-5, 20-2, 20-17

       19-48                           EDNHYS, 17-3 to 17-4

   DSFRPH, 6-69, 6-71                  EDSEL, 6-104 to 6-105

   DSFRPM, 6-67, 6-69, 6-71            EDTM1, 17-3, 17-5

   DSFTM, 6-69, 6-72                   EDTM2, 17-3, 17-5

   DSLMBS1, 6-3, 6-7                   EDTM3, 17-3, 17-5

   DSLMBS2, 6-3, 6-7                   EDTM4, 17-3, 17-5

   DSTM1, 6-69, 6-72                   EDTM5, 17-3, 17-5

   DSTM2, 6-67, 6-69, 6-73             EDVSHYS, 17-3 to 17-4

   DSTPBR, 9-9, 9-16 to 9-17, 19-48    EEC SYSTEM OVERVIEW

   DT12S, 6-83, 6-85, 7-3, 7-17,         EEC-IV OUTPUTS, 3-3

       7-19, 7-21, 7-24 to 7-25,           AM1, 3-3

       7-27 to 7-28                        AM2, 3-3

   DT23S, 7-3, 7-19, 7-27                  CANP, 3-3

   DTPCYC, 7-3, 7-9, 7-19                  DOL, 3-3

   DTSIG, 7-3, 7-9, 7-19                   EDF, 3-3

   DUAL_EDGE, 7-21                         EVR, 3-3

   DWELL, 7-6                              FP, 3-4

   DWLBSE, 7-9, 7-24                       HEDF, 3-4

   DWLTBP, 7-5, 7-24                       IAC, 3-4

   DWLTOT, 7-24 to 7-26                    INJECTORS, 3-4

   DWLTSW, 7-5, 7-25                       ISC-BPA, 3-4

   DWLWF, 7-5, 7-24                        LUS, 3-4

                                           SBS, 3-5

   "E", 9-39                               SCVAC, 3-5

   'E', 8-8                                SCVNT, 3-5

   ECADECT, 17-2, 17-4                     SIL, 3-5

   ECADHP, 17-2                            SPOUT, 3-5

   ECADI, 17-2, 17-4                       WAC, 3-5

   ECADN, 17-3 to 17-4                 EFAMPH, 9-43

   ECADOT, 17-3 to 17-4                EFAMPL, 9-43

   ECADVS, 17-3 to 17-4                EFFLG1, 6-61, 6-63 to 6-64

   ECT, 4-5, 6-9, 6-13 to 6-14, 6-20,  EFI, 6-4, 6-111 to 6-112

       6-49, 6-56, 6-62, 6-68, 6-71,   EFMFLG, 6-38, 6-68, 6-71, 8-2,

       6-76, 6-97, 7-3, 7-5, 7-24,         8-7, 8-10, 21-4, 21-7, 21-16

       7-32 to 7-33, 7-36, 7-42, 8-2       to 21-17, 21-19 to 21-20

       to 8-3, 9-22, 9-24, 9-27,       EFTC, 6-62, 6-65

       10-3 to 10-5, 10-7, 11-3 to     EFTR, 6-2, 6-37, 6-47, 6-61, 6-63

       11-5, 12-4, 12-6 to 12-7,           to 6-66

       13-2 to 13-6, 17-2, 17-4,       EFTRFF, 6-3, 6-7, 6-63, 6-66,

       18-3, 19-2 to 19-3, 19-5,           6-76

       19-8, 19-27, 19-29, 19-48,      EFTRFFL, 6-63, 6-76

       20-4, 20-6 to 20-7, 20-11 to    EGO, 6-5, 6-21, 6-23, 6-30, 6-36

       20-12, 21-3, 21-7, 21-14            to 6-37, 6-39, 6-109, 12-3,

   ECTCNT, 4-4 to 4-5, 19-30               19-2, 19-31, 20-7, 20-21







                                  Index-5


                                GUFB - INDEX







   EGO SENSOR, 6-22, 6-109             EGRPER, 8-15, 8-17, 8-21 to 8-22

   EGO SWITCH DEFINITION, 6-32         EGRSEA, 8-4

   EGO-1, 6-5, 6-8, 6-16, 6-23, 6-25,  EGRTD1, 8-3, 8-7

       6-33, 6-37 to 6-38, 6-40 to     EGRTD2, 8-3, 8-7

       6-41, 6-48, 20-19               EGRTD3, 8-3, 8-7

   EGO-2, 6-8, 6-33, 6-37 to 6-38,     EGRTD4, 8-3, 8-7

       6-40 to 6-42, 6-48, 6-51,       EGRTD5, 8-3

       20-19                           EISF, 6-62, 6-65

   EGO-n, 6-31 to 6-32                 ELECTRO-DRIVE FAN STRATEGY

   EGO_SWITCH, 6-12                      DEFINITIONS, 13-3

   EGOBAR, 19-48                         LOGIC, 13-5

   EGOCL1, 6-9, 6-12                     OVERVIEW, 13-2

   EGOCT1, 6-37, 6-40, 6-46 to 6-48,   ELECTRONICALLY CONTROLLED

       6-50                                ACCESSORY DRIVE, 17-2

   EGOCT2, 6-37, 6-40, 6-46 to 6-48,     DEFINITIONS, 17-2

       6-51                              OVERVIEW, 17-2

   EGOFL1, 19-10                         PROCESS, 17-4

   EGOFL2, 19-10                           TIME/TEMP DELAY, 17-5

   EGOFLn, 19-31                       EM, 6-2, 6-6, 8-2, 8-5 to 8-6,

   EGOSSS, 6-9 to 6-10, 6-12               8-10, 8-15, 8-17 to 8-18,

   EGOSSS LOGIC, 6-12                      9-42, 19-2

   EGR, 4-2, 8-2 to 8-6, 8-8 to 8-9,   ENGCYL, 6-2, 6-4, 6-23, 6-31 to

       8-11 to 8-14, 8-16, 8-18,           6-32, 6-74, 6-77, 6-79, 6-82,

       20-23                               6-86, 6-98, 6-104, 6-106, 7-5,

   EGR MASS FLOW EQUATIONS, 8-14           7-16 to 7-19, 7-25, 7-33,

   EGR STRATEGY                            7-37, 7-44, 9-4, 9-44 to 9-46,

     ACTUAL MASS FLOW EQUATIONS,           19-5, 19-19, 19-23, 19-33,

         8-11                              21-9

     DEFINITIONS, 8-2                  ENGINE CRANK MODE, 9-6

     DESIRED VALVE POSITION, 8-11      ENPIP, 6-23, 6-25, 6-30, 6-32

     ENABLE LOGIC, 8-7                 ENPIPn, 6-31

     FLOW RATE EQUATIONS, 8-8          ENQDA, 8-22

     MASS FLOW EQUATIONS, 8-14         EOFF, 8-2, 8-7, 8-11 to 8-12,

     OUTPUT CONTROL, 8-12                  19-28, 21-3, 21-17

     OVERVIEW, 8-6                     EOS, 7-44

     SONIC EGR VALVE STRATEGY, 8-9     EPT, 8-15 to 8-16, 8-19 to 8-20,

     TSEGRE LOGIC, 8-8                     22-3

   EGRACT, 8-5 to 8-6, 8-10, 8-15,     EPTBAR, 8-15 to 8-16, 8-18, 19-2,

       8-18                                19-8, 19-29, 19-48

   EGRACT', 8-18                       EPTMAX, 26-14, 27-19, 28-14

   EGRALT, 8-4                         EPTMIN, 26-14, 27-19, 28-14

   EGRATE, 8-5 to 8-8, 8-11, 8-15,     EPTSW, 19-6, 19-29

       8-17 to 8-18                    EPTZER, 8-15, 19-2, 19-5 to 19-6,

   EGRBAR, 19-28, 19-48                    19-8, 19-29, 19-48, 21-7,

   EGRCNT, 8-15, 8-17, 8-21 to 8-22        21-16, 22-3 to 22-4, 22-7

   EGRDC, 8-5 to 8-6, 8-12, 8-15,        LOGIC, 19-29

       8-17, 8-19, 8-21                EVP, 8-2 to 8-3, 8-7, 8-9, 8-12,

   EGRDED, 8-3, 8-7, 8-12                  19-2, 19-9, 19-28, 19-30,

   EGREN, 8-3, 8-5, 8-7, 8-11, 8-16,       19-48, 21-7, 21-17

       8-18, 20-23                     EVPMAX, 21-5, 21-17, 26-14, 27-19,

   EGRERR, 8-2, 8-12, 8-15, 8-20           28-14

   EGRFLG, 8-3, 8-5, 8-12, 8-16 to     EVPMIN, 21-5, 21-17, 26-14, 27-19,

       8-17, 8-19                          28-14

   EGRMPT, 8-3, 8-8, 20-6, 20-23       EVR, 3-3, 8-4, 8-6, 8-9, 8-12,

   EGROSS, 6-12                            8-14, 8-20 to 8-22, 19-19







                                  Index-6


                                GUFB - INDEX







   EVRPM, 11-3                         FKINJD, 6-98

   EVRPMH, 11-3                        FKMKAY, 7-5, 7-19

   EVTDOT, 11-3, 11-5                  FKSKAY, 7-5, 7-19

                                       FLG_DASMNQ, 9-4, 9-9, 9-17

   FAEGCT, 6-39, 6-49                  FM, 6-2 to 6-3, 6-6

   FAILURE MODE MANAGEMENT             FMCTTP, 21-5, 21-12

     ACT SENSOR UPDATE LOGIC, 21-15    FMDTM, 21-19 to 21-20

     DEFINITIONS, 21-3 to 21-4, 21-7   FMEM, 21-8

     ECT SENSOR UPDATE LOGIC, 21-14    FMMDSD, 9-4

     EVP SENSOR UPDATE LOGIC, 21-17    FMMISC, 9-5, 9-9

     FAILURE RECOGNITION, 21-8         FN000, 19-6, 19-25, 21-11

     OVERVIEW, 21-2                    FN004, 8-16

     PFE SENSOR UPDATE LOGIC, 21-16    FN004(BP)., 8-15

     TP SENSOR UPDATE LOGIC, 21-12     FN018, 6-14

         to 21-13                      FN018B, 9-22

   FAILURE MODE STRATEGY               FN019B, 6-55 to 6-56

     MALFUNCTION INDICATOR LIGHT,      FN020B, 6-56

         21-18                         FN020C, 9-22

       DEFINITIONS, 21-18              FN021, 6-38 to 6-39, 6-41 to 6-45

       OVERVIEW, 21-18                 FN022A, 6-62

       PROCESS, 21-20                  FN022B, 6-14 to 6-15

         MIL LOGIC, 21-20              FN033, 7-5

         MILTMR LOGIC, 21-20           FN035(N), 6-14, 19-14

   FAM, 9-29 to 9-31, 9-33, 9-42,      FN036, 19-3, 19-6, 19-18

       9-44 to 9-46, 19-2, 19-9,       FN037, 19-6, 19-16

       19-23, 19-48                    FN040, 21-9

   FAM_FLG, 6-77, 6-82, 9-44, 9-46,    FN040(N), 21-5

       19-5, 19-23                     FN070, 6-15, 6-38 to 6-39, 6-41

   FAMINC, 9-4, 9-43                       to 6-45, 6-98, 7-7, 8-3 to

   FAMLIM, 9-43, 9-45 to 9-46, 19-6        8-4, 21-5

   FAMREG, 9-46, 19-9                  FN071, 6-62, 7-5, 7-7, 8-4

   FE, 7-18, 7-29                      FN072A, 6-14 to 6-15, 7-7

   FEC, 7-18                           FN074, 8-3, 8-15 to 8-16

   FFMTMR, 9-44 to 9-46, 19-48, 20-2,  FN082, 6-14, 6-98, 7-5, 7-7, 8-3

       20-17                               to 8-4

   FFULC1, 6-81, 6-85                  FN083, 6-14, 6-98, 7-5, 7-7, 8-3

   FFULC2, 6-85                            to 8-4

   FFULCn, 6-78, 6-83                  FN085, 6-98

   FFULFG, 6-82                        FN087, 20-6, 20-11, 20-23

   FFULFLG, 6-78, 6-83, 6-85           FN098, 21-5

   FFULM1, 6-81, 6-85                  FN098(ITP-RATCH), 21-5

   FFULM2, 6-85                        FN1035(N,LOAD), 19-6

   FFULMn, 6-78, 6-83                  FN111, 7-5, 7-11

   FGFFLG, 6-104, 6-108                FN1119, 7-7, 7-13 to 7-14

   FILFC, 19-21                        FN112, 7-6, 7-11

   FILFRC, 19-16                       FN1121, 7-7

   FILHYS, 21-5, 21-8, 21-10 to        FN1124, 6-20, 7-7, 7-13 to 7-14

       21-11, 21-14, 21-16 to 21-17    FN1133(ECT,LOAD), 7-7

   FILRC1, 19-16, 19-21                FN115, 7-6, 7-11

   FIRST_MPH, 19-44                    FN1223, 7-7, 8-4, 8-8

   FIRST_PIP, 4-4, 4-6, 21-19 to       FN125, 7-6, 7-12, 7-15, 20-6,

       21-20                               20-20

   FK_TMR, 19-46                       FN126, 7-6

   FKARC1, 19-16, 19-21                FN129A, 6-19 to 6-20, 7-6, 7-12,

   FKARCH, 19-16, 19-21                    7-15







                                  Index-7


                                GUFB - INDEX







   FN1303, 6-56                        FN303, 6-14, 6-19

   FN1305, 6-15, 7-7                   FN306, 6-80, 20-6, 20-13

   FN1306, 6-14 to 6-15, 6-17, 7-7     FN306(CRKTMR), 6-77

   FN1307, 6-14, 6-17                  FN308, 6-14, 6-19

   FN131, 6-98, 7-6, 7-15              FN309, 6-14, 6-19

   FN1315, 6-93, 6-98                  FN311, 6-14, 7-6, 7-14, 8-4, 8-8

   FN1321, 6-62, 6-64, 6-66            FN320A, 20-16, 20-18

   FN1322, 6-62                        FN320A(ECT), 6-9, 6-11

   FN1325, 6-42, 6-44 to 6-45          FN331B, 6-56 to 6-57

   FN1325rc, 6-39, 6-44, 6-47, 6-50    FN339, 6-23, 6-32

       to 6-51                         FN342, 6-23, 6-31

   FN1327, 6-2, 6-5, 6-104 to 6-107,   FN344, 6-24, 6-31

       6-109                           FN346, 6-24, 6-31

   FN1328, 6-15, 6-19 to 6-20, 7-7,    FN348, 6-80

       7-13                            FN348(ECT), 6-77

   FN1329, 6-104, 6-106 to 6-108,      FN367, 6-86

       6-111                           FN367(VBAT), 6-77, 6-82

   FN133, 7-6, 7-15                    FN371, 6-14, 6-18

   FN134, 7-6, 7-15                    FN374, 6-62, 6-67, 6-69, 6-71,

   FN1341, 19-48                           6-73

   FN135, 7-6, 7-15                    FN378, 6-56 to 6-57

   FN1351(N,LOAD), 6-24                FN387, 4-3 to 4-4

   FN1352(N,LOAD), 6-24                FN387(ECT), 6-77, 6-79

   FN1353(N,LOAD), 6-24                FN389, 6-86

   FN1358, 21-5, 21-9                  FN389(VBAT), 6-77, 6-79

   FN1358(N,TP), 21-9                  FN393F, 6-14, 6-17

   FN143A, 7-33, 7-40, 7-43            FN394F, 19-38

   FN144, 7-35, 7-37                   FN394F(ECT), 19-36

   FN144A, 7-33                        FN396A, 6-14, 6-17, 7-6, 7-13

   FN145A, 7-33                        FN400, 7-6, 7-11

   FN146B, 7-33, 7-43                  FN600, 11-3, 11-5

   FN160A, 7-6, 7-24                   FN602, 11-3, 11-5

   FN160B, 7-6, 7-24                   FN605A, 11-3, 11-5

   FN179A, 7-6, 7-13 to 7-15           FN651, 18-2, 18-4

   FN179A(VSBAR), 7-14 to 7-15         FN652A, 18-2, 18-4

   FN180(CTNTMR), 7-6                  FN703, 21-5, 21-14 to 21-15

   FN1861, 9-27                        FN703A, 19-6, 19-23, 19-27

   FN1861(ECT,ATMR3), 9-22, 9-27       FN703A(IECT), 19-48

   FN211, 8-3, 8-8, 8-16               FN800, 9-34, 9-36, 9-39

   FN212A, 6-19 to 6-20, 7-6, 7-12,    FN810, 9-36, 9-39

       7-15, 8-4, 8-8, 8-16            FN820A, 9-39

   FN217A, 8-4, 8-8                    FN820B, 9-34, 9-36, 9-39

   FN218, 8-10                         FN824, 9-33, 27-5

   FN219, 8-10                         FN824(N_BYTE), 9-35, 9-39

   FN219A, 8-4                         FN825A, 6-52, 9-24

   FN220, 8-4, 8-8                     FN825A(ECT), 9-21, 9-24

   FN221, 8-4, 8-11                    FN825B, 6-52, 9-24

   FN239, 8-4, 8-12, 8-16, 8-19 to     FN825B(ACT), 9-21, 9-24

       8-20                            FN826, 9-24

   FN246, 8-4, 8-16, 8-18              FN826(TCSTRT), 9-24

   FN247, 8-4, 8-18                    FN826A(TCSTRT), 9-21

   FN26, 6-52                          FN839, 7-6, 7-11, 9-12 to 9-13

   FN300, 6-14, 6-17                   FN841, 7-11

   FN301, 6-14, 6-19                   FN841D, 7-6, 9-36, 9-38

   FN301N, 6-14, 6-19                  FN841N, 7-7, 9-36, 9-38







                                  Index-8


                                GUFB - INDEX







   FN860, 9-33, 9-35, 9-38                 PROCESS, 6-17

   FN875D, 9-27, 9-34                        'C' DEFINITION, 6-19

   FN875D(DSDRPM), 9-21, 9-27                LAMMUL LOGIC, 6-17

   FN875N, 9-27, 9-34                        LAMMUL RESET LOGIC, 6-18

   FN875N(DSDRPM), 9-22, 9-27                MFAMUL LOGIC, 6-20

   FN879, 9-17 to 9-18                       RAMP BACK LOGIC, 6-17

   FN880, 9-24, 20-14                  FUEL PULSEWIDTH, 14-2

   FN880(CTNTMR), 9-24, 20-6           FUEL PUMP CONTROL LOGIC, 6-112

   FN880(IDLTMR), 9-22                 FUEL STRATEGY

   FN882, 9-18                           FUEL PULSEWIDTH

   FN884, 9-9                              BACKGROUND FUEL, 6-76

   FN884(TCSTRT), 4-2, 4-4, 9-4, 9-9         DEFINITIONS, 6-76 to 6-78

   FN901, 7-7, 7-12                          PROCESS, 6-79

   FN904A, 7-7, 7-12                       FN389 CALIBRATION, 6-86

   FN905A, 7-7, 7-12                       FOREGROUND FUEL

   FN908A, 8-4, 8-8                          DEFINITIONS, 6-83 to 6-84

   FN908B, 8-4, 8-8                          OVERVIEW, 6-83

   FOFFLG, 6-77, 6-82, 6-89, 6-92,           PROCESS, 6-85

       6-104, 6-108                      INJECTOR FIRING ORDER, 6-111

   FP, 3-4                               INJECTOR OUTPUT CONTROL

   FRCBFT, 6-14 to 6-15, 7-7               LOGIC, 6-105

   FRCSFT, 6-14 to 6-15, 7-7             INJECTOR OUTPUT LOAD, 6-109

   FRCTAE, 6-56                          RUN MODE, 6-106 to 6-107

   FUEL CONTROL STRATEGY                 UNDERSPEED MODE, 6-106 to 6-107

     CLOSED LOOP FUEL, 6-21            FUEL_IN_SYNC, 6-93, 6-97, 6-99

       DEFINITIONS, 6-23 to 6-25       FUEL_SERVICE, 6-57

       LIMIT CYCLE DESCRIPTION, 6-26   FUEL_SUM, 6-103, 14-2

       LIMIT CYCLE EXAMPLES, 6-29      FUELFLOW, 6-86

       PROCESS                         FUELFLOW1, 6-80 to 6-82

         LAMBDA RESET LOGIC, 6-34      FUELFLOW2, 6-80 to 6-82

         LAMBSE1 AND LAMBSE2 LOGIC,    FUELFLOWn, 6-78, 14-3

             6-33                      FUELPW, 6-85

     CLOSED LOOP/OPEN LOOP             FUELPW1, 6-21, 6-23, 6-85, 6-103,

       DEFINITIONS, 6-9 to 6-10            6-105 to 6-107, 6-109

       PROCESS, 6-11                   FUELPW1/FUELPW2, 6-104

         EGOSSS LOGIC, 6-12            FUELPW2, 6-23, 6-85, 6-103, 6-105

         NFLG LOGIC, 6-12                  to 6-107, 6-109

         WRMEGO LOGIC, 6-12            FUELPWn, 6-84

     EEC-IV OVERVIEW, 6-2              FUELPWs, 6-67

       DEFINITIONS, 6-2 to 6-3

       EFI BASE FUEL, 6-8              HACCEL, 15-6, 15-10

       EFI FUEL CALIBRATION UNITS,     HALL EFFECT SENSOR, 7-18

           6-6                         HCAMFG, 6-38, 6-52, 9-23, 9-25 to

       LAMBDA CLIPS, 6-6                   9-26, 9-41

       SEQUENTIAL ELECTRONIC FUEL      HCAMSW, 6-39, 6-52

           INJECTION, 6-4              HCOAST, 15-6, 15-10

       SPECIAL DAC REGISTERS, 6-7      HCSD, 7-7, 7-11

       STEREO EGO FUEL SYSTEM          HCSDH, 7-7, 7-11

           CONFIGURATION, 6-5          HEDF, 3-4, 13-4 to 13-5

     INJECTOR OUTPUT CONTROL           HEDFHP, 13-3, 13-5, 26-19

       PROCESS, 6-108                  HEGO, 19-3, 19-31

     INJECTOR TIMING, 6-93             HEGO-1, 6-5

       FOREGROUND, 6-95                HEGO-2, 6-5

     OPEN LOOP FUEL                    HFDLTA, 6-97, 6-99, 7-3, 7-9,

       DEFINITIONS, 6-13 to 6-15           7-18 to 7-19, 7-27 to 7-29







                                  Index-9


                                GUFB - INDEX







   HFPCYC, 7-3, 7-9, 7-19              IDLE SPEED CONTROL

   HI_OFF, 15-6, 15-10                   DESIRED RPM CALCULATION, 9-19

   HIDRES, 7-23                            DEFINITIONS, 9-20

   HIHOLD, 15-6, 15-10                     FAM ADJUSTMENTS, 9-29

   HLCTM, 6-10 to 6-11                       DEFINITIONS, 9-29

   HLDREF, 15-6, 15-21                       OVERVIEW, 9-29

   HLDRNG, 15-6, 15-21                       PROCESS, 9-31

   HLODH, 6-10 to 6-11, 20-6, 20-16,           A/C STATE CHANGES, 9-31

       20-18                                   NEUTRAL/DRIVE ADJUSTMENTS,

   HLTMR, 6-9, 6-11, 20-2, 20-18                   9-31

   HMCTM, 12-5, 12-8                           POWER STEERING STATE

   HMSTM, 12-5                                     CHANGES, 9-31

   HMTMR, 12-4, 12-8, 20-2, 20-18          OVERVIEW, 9-19

   HOLD_STATE, 15-6, 15-8, 15-15 to        PROCESS, 9-24

       15-16, 15-18 to 15-19                 ACCESSORY LOAD, 9-26

   HP_CID, 6-98, 6-101                       ISFLAG/ISLAST LOGIC, 9-28

   HP_CIDSEL, 6-98                           NEUTRAL/DRIVE, 9-26

   HP_HIDRES, 7-7                              GPAS CLIP, 9-26

   HPACL, 16-2 to 16-3                       PREDICTED DESMAF

   HRESUM, 15-6, 15-10                           CALCULATION, 9-27

   HSFEC1, 13-3, 13-5 to 13-6                START-UP HI-CAM, 9-24

   HSFEC2, 13-3, 13-6                          DESIRED RPM FILTER, 9-25

   HSFFLG, 13-3 to 13-6                        HEATED WINDSHIELD MINIMUM

   HSFHYS, 13-3, 13-5                              CLIP, 9-25

   HSFLOD, 13-4, 13-6                          "HICAM FLAG CHECK", 9-25

   HSFRPM, 13-4, 13-6                  IDLFLG, 6-13, 6-93, 6-97, 20-5,

   HSFVS, 13-4, 13-6                       20-8, 20-19

   HSPFLG, 6-9, 6-11, 6-13, 6-17,      IDLMAF, 21-5, 21-12

       6-77, 6-82, 6-89, 6-92, 7-4,    IDLRPM, 20-6, 20-19

       7-14 to 7-15, 12-4, 12-8        IDLTMR, 9-24

   HTPTMR, 12-8                        IDMLVL, 28-6

   HVS_CL, 6-89, 6-92                  IDMUP, 28-6

   HVS_SH, 6-89, 6-92                  IDRPMH, 20-6, 20-19

   HWFLAG, 9-20, 9-25, 9-27, 10-4,     IECT, 19-3, 19-27, 21-3, 21-14

       10-6, 10-8                      IEGO, 19-3, 19-48

   HWFLGL, 9-20, 9-25, 9-27, 10-4,     IEGOn, 19-31

       10-6, 10-8                      IEPT, 19-3, 19-9, 19-29, 19-48

   HWPPM, 9-22, 9-27, 10-5             IERPMH, 19-6, 19-29

   HWRPM, 9-22, 9-25, 10-5             IEVP, 21-3, 21-17

   HWRT, 10-5, 10-8                    IFAM, 9-43

   HWTMR, 10-4, 10-6, 10-8, 20-2       IFMFLG, 21-10

   HYST2, 5-3 to 5-4, 6-11             IGNFL, 21-19 to 21-20

                                       IGNITION TIMING STRATEGY

   IAC, 3-4, 12-10                       'A' LOGIC, 7-13

   IACC_NDS, 19-3, 19-11, 19-36          'B' LOGIC, 7-13 to 7-14

   IACFLG, 12-2, 12-6, 12-10             'C' LOGIC, 7-13 to 7-14

   IACT, 19-3, 21-3, 21-15               CLOSED THROTTLE MODE SPARK,

   IBAP, 19-3, 19-9, 19-24 to 19-25,         7-11

       21-3, 21-11                       CRANK/UNDERSPEED MODE SPARK,

   IBGPSI, 9-29, 9-31, 9-33, 9-36 to         7-11

       9-38, 9-41                        DEFINITIONS, 7-3 to 7-5, 7-7 to

   IDKADD, 6-93, 6-98                        7-9

   IDKMUL, 6-93, 6-98                    DWLTOT LOGIC, 7-25

   IDLCOT, 9-32, 10-5, 10-7              EEC DISTRIBUTOR ROTOR REGISTRY,

   IDLDEL, 19-6, 19-29                       7-30







                                  Index-10


                                GUFB - INDEX







     EEC-CONTROLLED DWELL, 7-24          HEGO, 19-31

     INDIVIDUAL CYLINDER KNOCK           INDS INPUT, 19-35

         STRATEGY                        KNOCK SENSOR, 19-32

       DEFINITIONS, 7-32                 LOAD CALCULATIONS

     MKAY/SIGKAL CALCULATIONS, 7-19        LOAD

     OVERVIEW, 7-2                           DEFINITIONS, 19-13

     PART THROTTLE MODE SPARK, 7-12          OVERVIEW, 19-13

     RISING-EDGE vs FALLING-EDGE           PERLOAD

         DECISION, 7-20 to 7-21              DEFINITIONS, 19-14

     SAF LOGIC, 7-14                         OVERVIEW, 19-14

     SIGNATURE PIP DISTRIBUTOR, 7-29         PROCESS, 19-14

     SPOUT CALCULATIONS, 7-17            MANIFOLD FILLING MODEL

       FALLING-EDGE SPARK, 7-18            CALIBRATION PHILOSOPHY, 19-22

       RISING-EDGE SPARK, 7-17             OVERVIEW, 19-20

     TRANSIENT SPARK COMPENSATION          PROCESS, 19-21

         LOGIC, 7-27                     MNPIPn, 19-32

     WIDE OPEN THROTTLE MODE SPARK,      MPH, 19-45

         7-15                            N and N_BYTE, 19-33

   IIVPWR, 19-3, 19-26                   NBAR, 19-34

   IMAF, 19-3, 19-18, 21-4, 21-9         NDBAR, 19-34

   IMFMCTR, 21-7, 21-9                   NDSFLG, 19-37

   IMFMFLG, 6-77, 6-82, 19-16, 19-21,    PIP, 19-39

       21-4, 21-7, 21-9                  PSPS, 19-41

   INDFLG, 19-5, 19-10 to 19-12,         RATCH, 19-43

       19-36 to 19-37                    TAR, 19-42

   INDS, 19-36                           TBART, 19-42

   INJ-1, 6-105 to 6-107, 6-111          TP, 19-42

   INJDLY, 6-93, 6-95, 6-97, 6-99 to     TPBAR, 19-42

       6-100, 19-48                      VBAT, 19-26

   INJDLY', 19-48                        VS CALCULATION, 19-44

   INJECTOR TIMING EXAMPLES, 6-100       VSBAR, 19-45

   INJECTORS, 3-4                        VSCCS, 19-45

   INJOUT, 6-77, 6-79, 6-86, 14-2        VSS, 19-44

   INJREF, 6-93, 6-95, 6-98            INPUTS CONVERSIONS AND FILTERS

   INLRPH, 20-6, 20-14                   NEUTRAL/DRIVE TRANSITION LOGIC,

   INLRPM, 20-6, 20-14                       19-35

   INPUT CONVERSIONS AND FILTERS           DEFINITIONS, 19-36

     ACC_NDS, 19-11 to 19-12               OVERVIEW

     AELOAD, 19-15                           NEUTRAL/DRIVE SWITCH, 19-35

     AIR CHARGE CALCULATIONS               PROCESS

       DEFINITIONS, 19-16                    DNDSUP LOGIC, 19-38

     ARCHG, 19-17                            NDSFLG LOGIC, 19-37

     BAP, 19-25                          ROLLING AVERAGE ROUTINE, 19-46

     BAPBAR, 19-24                         CALIBRATION PHILOSOPHY, 19-49

     BOO, 19-26                            DEFINITIONS, 19-46

     BP, 19-24                             OVERVIEW, 19-46

     DEFINITIONS, 19-2 to 19-3, 19-5       PROCESS, 19-47

         to 19-10                      INTM, 19-3, 19-9, 19-18

     DNDSUP, 19-38                     IPSIBR, 9-33 to 9-37, 9-39 to

     DNDSUP FLAG LOGIC, 19-38              9-41

     E0FF, 19-28                       ISC, 4-2, 9-33, 9-40

     ECT, 19-27                        ISC OVERVIEW, 9-3

     EGRBAR, 19-28                     ISC-BPA, 3-4

     EPTZER, 19-29                     ISC_KAM_UPDATE, 9-40

     EVP, 19-30                        ISCDTY, 9-9, 9-38 to 9-39







                                  Index-11


                                GUFB - INDEX







   ISCFLG, 6-37, 6-46, 6-61, 6-66,       QUALIFICATION TEST LOGIC, 22-4

       8-2, 8-10, 9-10 to 9-13, 9-15,    QUALIFICATION TEST OVERVIEW,

       9-38, 9-41                            22-2

   ISCKAM, 9-33, 9-37, 9-40, 22-4      KFT, 6-62, 6-65

   ISCKAM(N), 9-41                     KI, 7-31 to 7-32, 7-35

   ISCKAM0, 22-6                       KIHP, 7-33, 7-36, 7-38

   ISCKAM1, 22-3, 22-6                 KLLIM, 7-7, 7-19

   ISCKAM2, 22-3, 22-6                 KNK_HIGH, 7-32, 7-38, 19-3, 19-32

   ISCKAM3, 22-3, 22-6                 KNKCYL, 7-33, 7-36, 7-40, 7-42

   ISCLPD, 9-22, 9-26                  KNOCK, 7-31, 7-35, 7-38

   ISCPSI, 9-39                        KNOCK STRATEGY ENABLE LOGIC, 7-36

   ISCTM, 9-5, 9-11 to 9-13            KNOCK_DETECTED, 7-33 to 7-34,

   ISCTMR, 9-10 to 9-13, 9-38, 9-41        7-38, 19-5, 19-32

   ISFLAG, 6-34, 6-37, 6-43, 6-52,     KNOCK_ENABLE, 7-42

       9-33, 9-37                      KNOCK_ENABLED, 7-33

   ISKSUM, 9-41, 22-3 to 22-4, 22-6    KNOCK_OCCURRED, 7-38, 7-40, 7-42,

   ISLAST, 6-34, 9-29, 9-31, 9-33,         19-5, 19-10, 19-32

       9-37                            KONBP, 19-6, 19-24

   ISLBND, 27-23                       KPEI, 8-4, 8-8, 8-16

   ISUBND, 27-7                        KPS1, 7-8, 7-14

   ITAR, 19-3, 19-42                   KPSIDD, 9-35

   ITHBMA, 9-34 to 9-35, 9-39          KPSIDU, 9-34

   ITP, 21-4, 21-12                    KPSIND, 9-34 to 9-35, 9-39

   IVCAL, 19-3, 19-18, 19-26           KPSINU, 9-34 to 9-35, 9-39

   IVSCCS, 15-5, 15-9, 19-3, 19-45,    KS, 19-32

       20-4, 20-15                     KSF, 19-6, 19-26

   IVSCCS_LST, 15-5, 15-7, 15-9,       KTS, 7-31, 7-35, 7-37

       20-4, 20-15                     KULMT, 7-7, 7-19

   IXFRPR, 8-16, 8-18                  KWCTR, 7-32, 7-34, 7-38

                                       KWS1, 7-8, 7-15

   JMPFLG, 6-34                        KWUCNT, 6-39, 6-49

                                       KWUCTR, 6-37, 6-49, 22-3 to 22-5

   KACRAT, 7-33, 7-41 to 7-42

   KAM, 6-36 to 6-37, 6-42, 6-49,      LACCEL, 15-6, 15-10

       6-52, 9-40, 22-2, 22-4 to       LAMBDA, 6-3, 6-23, 6-103

       22-5                            LAMBDA EQUATION, 6-6

   KAM_ERROR, 9-37, 19-5, 19-30        LAMBSE, 6-2, 6-21, 6-34, 9-37

   KAM_UPDATE, 9-39, 9-41              LAMBSE1, 6-2 to 6-3, 6-6 to 6-8,

   KAMOK, 22-4                             6-16 to 6-17, 6-21, 6-23,

   KAMQA, 22-2 to 22-4                     6-25, 6-33 to 6-35, 6-37 to

   KAMQB, 22-2 to 22-4                     6-40, 6-42, 6-48, 6-50

   KAMQC, 22-2 to 22-4                 LAMBSE2, 6-2 to 6-3, 6-6 to 6-8,

   KAMREF, 8-16                            6-13, 6-17, 6-23, 6-25, 6-33

   KAMRF, 6-53                             to 6-35, 6-37 to 6-38, 6-40,

   KAMRF1, 6-42, 6-52 to 6-53, 8-3         6-42, 6-48

   KAMRF1/KAMRF2, 6-37, 6-40           LAMBSEn, 6-31 to 6-32, 6-74

   KAMRF2, 6-42, 6-52 to 6-53          LAMMAX, 6-2, 6-6

   KAMRFn, 6-74                        LAMMIN, 6-2, 6-6

   KAY, 19-39                          LAMMUL, 6-13 to 6-14, 6-16 to

   KAYCTR, 7-3, 7-9, 7-19                  6-18, 20-22

   KCS1, 7-7, 7-11                     LAMMUL LOGIC, 6-17

   KEEP ALIVE MEMORY                   LAMMUL RESET LOGIC, 6-18

     ISCKAM QUALIFICATION, 22-6        LAMSW, 6-24, 6-35

     KAM QUALIFICATION (EPTZER),       LBMF_INJ1, 6-82

         22-7                          LBMF_INJ2, 6-82







                                  Index-12


                                GUFB - INDEX







   LBMF_INJn, 6-78, 6-103, 14-3        LSTCOL, 6-38, 6-40

   LCOAST, 15-6, 15-10                 LSTROW, 6-38, 6-40, 6-47

   LDEH, 6-20                          LTMTB1, 6-37, 6-39 to 6-40, 6-42,

   LDEL, 6-15, 6-20                        6-44, 22-5

   LDEM, 6-15                          LTMTB1(LTMTB2), 6-39

   LDFLG, 6-11, 6-13, 6-16, 6-19 to    LTMTB100, 6-44

       6-20                            LTMTB142, 6-44

   LDLTM, 6-15, 6-20                   LTMTB1rc, 6-38, 6-41 to 6-42,

   LDMH, 6-15, 6-20                        6-50, 6-52, 22-4 to 22-5

   LDMHH, 6-15, 6-20                   LTMTB2, 6-37, 6-39 to 6-40, 6-42

   LDTM, 6-15                              to 6-44, 22-5

   LEGOFG1, 6-23, 6-33, 6-38, 6-52     LTMTB242, 6-44

       to 6-53, 12-4, 12-7, 20-8,      LTMTB2rc, 6-38, 6-41 to 6-42,

       20-19                               6-51 to 6-52, 22-4 to 22-5

   LEGOFG2, 6-23, 6-38, 6-52 to 6-53,  LUGSW, 20-6, 20-20

       12-5, 12-7, 20-8, 20-19         LUGTIM, 6-20, 7-8, 7-12, 7-15,

   LEQV, 27-15                             20-7, 20-20

   LESTMR1, 20-2, 20-19                LUGTMR, 6-20, 7-3, 7-12, 20-2,

   LESTMR2, 20-2, 20-19                    20-6, 20-20

   LGA0O, 8-3, 8-16                    LUS, 3-4

   LMBJMP, 6-24, 6-34

   LOAD, 6-9, 6-14, 6-39, 6-42, 6-44   MAF, 19-3, 19-17 to 19-18, 19-21,

       to 6-45, 6-54 to 6-58, 6-62,        21-9

       6-68, 6-72, 6-93, 6-97 to       MAF(n), 19-17

       6-98, 7-3, 7-5, 7-7, 7-12,      MAF_TIME, 19-3, 19-9, 19-18

       7-32, 7-36, 7-42, 8-3, 9-8,     MAFCON, 19-3 to 19-4, 19-9

       9-11, 12-4, 12-8, 13-6, 18-3,   MAFK1, 19-3, 19-6

       19-3, 19-13 to 19-15, 19-48,    MAFK2, 19-6

       20-4, 20-20                     MAP, 19-25

   LODNOK, 7-33, 7-36                  MAPBAR, 19-25

   LOESSW, 20-6, 20-19                 MAPCNT, 19-25

   LOHOLD, 15-6, 15-10                 MAPCNTFLG, 19-25

   LOLOD, 6-10                         MAPTMR, 19-25

   LOLODH, 6-10                        MAXADP, 6-40

   LOM, 7-7, 7-12, 7-15                MAXFAM, 9-44, 19-6, 19-23

   LOMALT, 7-6                         MAXSHP, 15-13

   LOMSEA, 7-6                         MAXVSP, 15-7

   LOW_ON, 15-7, 15-10                 MDELTA, 19-25, 21-4, 21-11

   LOWBAT, 15-6, 15-10                 MEFTRA, 6-62, 6-66

   LOWLOD, 9-5, 9-8, 9-11              MEFTRD, 6-62, 6-66

   LPCT1L, 6-38, 6-40, 6-44, 6-46 to   MFA, 6-20

       6-48, 6-50                      MFACTR, 20-20 to 20-21

   LPCT1R, 6-38, 6-40, 6-44, 6-46 to   MFAFLG, 6-9, 6-11, 6-13, 6-19 to

       6-48, 6-50                          6-20, 6-68, 6-71, 6-93, 6-97,

   LPCT2L, 6-38, 6-40, 6-44, 6-46 to       7-4, 7-14, 8-3, 8-8, 20-5,

       6-48, 6-51                          20-8, 20-20

   LPCT2R, 6-38, 6-40, 6-44, 6-46 to   MFALH, 20-7, 20-20 to 20-21

       6-48, 6-51                      MFALHH, 20-7, 20-20

   LRESUM, 15-7, 15-10                 MFALL, 20-7, 20-20

   LSFECT, 13-4 to 13-5                MFAMUL, 6-13, 6-16, 6-19 to 6-20,

   LSFHYS, 13-4                            7-3, 7-14, 8-2, 8-8

   LSFVS, 13-4 to 13-5                 MFAMUL LOGIC, 6-20

   LSFVSH, 13-4                        MFANHH, 20-7, 20-20

   LST_IACC, 19-9, 19-11               MFANHI, 20-7, 20-20 to 20-21

   LSTA3C, 10-4, 10-6, 10-8            MFANLH, 20-7, 20-20







                                  Index-13


                                GUFB - INDEX







   MFANLO, 20-7, 20-20 to 20-21        N, 4-4 to 4-6, 6-14 to 6-15, 6-32,

   MFARMP, 6-15, 6-20                      6-38 to 6-39, 6-44, 6-55,

   MFASN, 20-7, 20-21                      6-66, 6-68, 6-71, 6-73 to

   MFASW, 6-10 to 6-11, 6-15, 6-19         6-74, 6-76, 6-79, 6-82, 6-89,

   MFATM1, 12-5, 20-7, 20-21               6-92, 6-97 to 6-98, 7-3, 7-5,

   MFATM2, 12-5, 20-7, 20-21               7-7, 7-11, 7-14, 7-28, 7-32,

   MFATM3, 12-5, 20-7, 20-21               7-38, 7-42, 8-3, 8-8, 9-10 to

   MFATM4, 12-5, 20-7, 20-21               9-13, 9-38, 9-44 to 9-46,

   MFATM5, 12-6, 20-7, 20-21               10-4, 10-7, 11-3, 12-4, 12-10,

   MFATMR, 12-4, 12-8, 20-2, 20-20         15-5, 15-13, 18-2 to 18-4,

       to 20-21                            19-4, 19-14, 19-16, 19-19,

   MFMFLG, 6-38, 6-46, 6-68, 6-71,         19-23, 19-29, 19-33 to 19-34,

       6-77, 6-82, 8-3, 8-7, 8-10,         19-39, 19-43, 19-48, 20-4,

       9-9, 12-5, 12-8, 17-4, 20-5,        20-13 to 20-14, 20-19 to

       20-20, 21-7, 21-9 to 21-10,         20-21, 21-4, 21-9

       21-19 to 21-20                  N_BYTE, 7-32, 7-36, 9-39, 9-45,

   MFMHYS, 21-5, 21-9                      13-6, 17-2, 17-4, 19-4, 19-33

   MHPFD, 6-99, 6-102, 7-8, 7-29       NACTMR, 6-9, 6-68, 6-72, 11-3,

   MIDTV, 6-93, 6-99                       11-5, 12-4, 12-8, 20-3, 20-22

   MILLIM, 21-19 to 21-20              NBAR, 19-4, 19-9, 19-34, 19-48

   MILTM1, 21-19                       NCGSHP, 15-7

   MILTMR, 21-18 to 21-20              NCNT, 4-4 to 4-5

   MINADP, 6-40, 6-42, 6-50            NDBAR, 19-4, 19-9, 19-34, 19-48,

   MINAM, 9-44, 19-6, 19-23                20-4, 20-21

   MINDES, 8-18                        NDDELT, 9-5, 19-7, 19-36, 19-38

   MINDLA, 7-8, 7-25                   NDDTIM, 6-68, 6-72 to 6-73, 19-4,

   MINDLB, 7-8, 7-25                       19-36 to 19-38, 20-3, 20-22

   MINMPH, 9-4, 9-10, 9-12 to 9-13     NDIF, 9-5, 9-11, 9-13

   MINTIM1, 19-3, 19-9, 19-25          NDPPM, 9-22, 9-30 to 9-31

   MINTIM2, 19-3, 19-9, 19-25, 21-11   NDS, 15-2, 19-11

   MINTV, 6-93, 6-99                   NDSFLG, 6-9, 6-12 to 6-13, 6-68,

   MINVSP, 15-7, 15-13, 15-17              6-72 to 6-73, 6-97, 7-4, 7-11,

   MKAY, 7-3, 7-9, 7-18 to 7-19,           15-6, 15-14, 19-5, 19-10,

       7-28                                19-36 to 19-38, 20-5, 20-14,

   mkay', 7-19                             20-20 to 20-21

   MNPIP, 19-32                        NEUFLG, 6-13, 6-16, 6-18

   MNPIP4, 19-7                        new average, 19-46

   MNPIP6, 19-7                        new value, 19-46

   MNPIP8, 19-7                        NEW_AE, 6-55 to 6-57

   MNPIPn, 19-32                       NEW_IDELAY, 6-97

   MPH, 15-5, 15-13, 15-15 to 15-21,   NFLG, 6-10, 6-12 to 6-13, 6-19,

       19-3, 19-9, 19-45, 19-48            7-5, 7-11

   MPHCNT, 19-3, 19-9, 19-44           NFLG LOGIC, 6-12

   MPHDED, 15-7, 15-19                 NGCSHP, 15-14

   MPHH, 15-7, 15-13                   NGOOSE, 27-23

   MPHTIM1, 19-4, 19-9, 19-44          NIAC, 12-6, 12-10

   MPHTIM2, 19-4, 19-9, 19-44          NIACH, 12-6, 12-10

   MPMNBP, 20-7, 20-20 to 20-21        NIHYS, 20-7, 20-14

   MPNBPH, 20-7, 20-21                 NIOLD, 6-10 to 6-11, 20-7, 20-14

   MTCF, 6-77, 6-82                    NITMR1, 6-94, 6-99

   MTEFTC, 6-62                        NITMR2, 6-94, 6-99

   MTEISF, 6-62, 6-64 to 6-66          NITMR3, 6-94, 6-99

   MULTMR, 6-13, 6-16 to 6-17, 20-3,   NITMR4, 6-94, 6-99

       20-22                           NITMR5, 6-94, 6-99

                                       NLAST, 9-10 to 9-11, 9-13







                                  Index-14


                                GUFB - INDEX







   NLM_CL, 6-89, 6-92                  PACPER, 7-8, 7-25

   NLM_SH, 6-88 to 6-89, 6-92          PACSLO, 7-8, 7-25

   NLMT, 6-77, 6-79                    PCV, 19-19

   NLMT_FLG, 6-77, 6-80, 6-82, 6-92    PE, 8-13, 8-15 to 8-16, 8-18

   NLMTH, 6-77, 6-79                   PEAK_LOAD, 19-14

   NOISE, 7-31, 7-35, 7-37             peak_load_sl, 19-14

   NORM_MAPOPE21, 6-46                 PERLOAD, 6-9, 6-11, 6-13 to 6-14,

   NORM_N70, 6-46                          6-20, 19-14, 20-7, 20-16,

   NRMCES, 6-38, 6-41, 6-46                20-18, 20-20 to 20-21

   NRMRLD, 6-38, 6-41, 6-46 to 6-47    PEXH, 8-2

   NRUN, 4-4 to 4-5, 19-7, 19-39       PFE, 8-20

   NSADD, 7-8                          PFE_EGR, 8-13

   NSTALL, 4-4 to 4-5                  PFEHP, 8-4, 8-6 to 8-7, 8-9 to

   NTIP, 7-8, 7-33, 7-42                   8-13, 8-15 to 8-16, 8-18 to

   NUBASE, 9-22, 9-24 to 9-26              8-20, 19-7, 21-6, 21-16 to

   NUMCYL, 6-2, 6-4, 6-95, 6-97,           21-17, 26-19

       6-99, 7-8                       PHFDLT, 6-102, 7-3, 7-27 to 7-28

   NUMEGO, 6-2, 6-5, 6-21, 6-24,       PINPT, 19-4

       6-33, 6-40, 6-53, 6-104, 12-6   PINPT2, 19-4

       to 12-7                         PIP, 4-3, 4-5, 6-4, 6-30, 6-93,

   NUMOUT, 6-77, 6-79, 6-104 to            6-97, 6-103 to 6-104, 6-106

       6-107, 6-109, 6-111                 to 6-107, 6-112, 7-4, 7-9,

   NUMPR, 6-15                             7-19, 7-24, 7-26 to 7-27,

   NWOTMR, 20-3, 20-22                     7-35, 7-37 to 7-38, 7-40,

                                           19-4, 19-39

   OCCDT1, 26-19, 29-9                 PIP COUNTER CONTROL LOGIC, 19-39

   OCCDT2, 26-19, 29-9                 PIP INTERRUPT, 20-23

   OCCDT3, 26-19, 29-9                 PIPACL, 7-4, 7-9, 7-25

   OCCDT4, 26-19, 29-9                 PIPCNT, 4-4 to 4-5, 19-4, 19-39

   OCCDT5, 26-19, 29-9                 PIPNUM, 6-10 to 6-11, 6-69

   OCCDT6, 26-19                       PIPOUT, 6-77, 6-79, 6-83, 6-85 to

   OCCDT7, 26-19, 29-9                     6-86, 6-99, 6-104, 6-106 to

   OCCDT8, 26-19, 29-9                     6-107

   OCCDT9, 26-19, 29-9                 PIPRAT, 6-23, 6-30

   OCCDTX, 26-22                       POWSFG, 9-20, 9-26 to 9-27, 9-31,

   OFF_BUT, 15-6, 15-8, 15-10, 15-13       19-10, 19-41

   old average, 19-46                  PPCTR, 6-9, 6-11, 6-68, 6-70 to

   OLDTP, 6-55 to 6-56, 6-58, 19-4,        6-71

       19-42                           PRESER, 8-4, 8-16, 8-20

   OLFLG, 6-10 to 6-11, 6-13, 6-23,    PRGTD1, 11-3, 11-5

       6-35                            PRGTD2, 11-4 to 11-5

   OLMCL, 6-15, 6-17                   PRGTD3, 11-4 to 11-5

   OLMTD1, 6-15, 6-19                  PRGTD4, 11-4 to 11-5

   ON_STATE, 15-6, 15-8, 15-10,        PRGTD5, 11-4 to 11-5

       15-13 to 15-19                  PRGTMR, 11-3 to 11-5, 20-3, 20-22

   OPCLT1, 6-10, 6-12, 21-5            PRLDSW, 6-15, 19-14

   OPCLT2, 6-10, 6-12, 21-5, 21-14     PSFLAG, 9-29 to 9-31

   OPCLT3, 6-10, 6-12, 21-5            PSGDLT, 7-4, 7-10, 7-19

   OPCLT4, 6-10, 6-12, 21-5            PSIBRM, 9-35, 9-39, 9-41

   OPCLT5, 6-10, 6-12, 21-6            PSIBRN, 9-35, 9-39, 9-41

   OPEN LOOP FUEL CONTROL, 20-19       PSPPM, 9-22, 9-27, 9-31

   OUTINJ, 6-104, 6-106 to 6-107       PSPS, 19-4, 19-41

                                       PSPSHP, 9-20, 9-26, 26-17

   PACLIM, 7-8, 7-25                   PTDFSW, 6-69, 6-72

   PACOFF, 7-8, 7-25                   PTPAMP, 6-24, 6-31 to 6-32







                                  Index-15


                                GUFB - INDEX







   PTPFLG, 19-5, 19-10, 19-29 to       RPMCNL, 7-33, 7-38

       19-30                           RPMCTL, 9-4, 9-10 to 9-13, 9-38

   PTSCR, 5-3 to 5-4, 9-20, 9-24       RPMDED, 9-34, 9-38

   PULSCT, 6-105 to 6-107              RPMERR, 9-38 to 9-39

   PURDC, 11-5                         RPMMIN, 7-34, 7-36

   PURGDC, 11-4                        RUN, 4-2, 6-55, 6-61, 6-97, 6-104

   Purge, 4-2                          RUNNING, 9-21, 9-24

   PURGSW, 11-4 to 11-5                RVIPRPM, 9-22, 9-24

   PUTMR, 19-4, 19-29 to 19-30, 20-3,

       20-23                           SAF, 7-4, 7-10 to 7-11, 7-14 to

   PWCF, 6-78 to 6-79, 6-81                7-17, 7-32, 7-43 to 7-44

   PWOFF, 6-78, 6-82 to 6-83, 6-104    SAFTOT, 7-10

       to 6-107                        SAMRAT, 9-43, 9-45 to 9-46, 19-7

   PWOFS, 6-78, 6-82                   SAPW, 7-4, 7-23

                                       SARCHG, 19-3, 19-7, 19-13

   'R', 8-8, 20-23                     SBS, 3-5

   RANMUL, 6-40                        SCAP, 19-25

   RANNUM, 6-38, 6-41                  SCAP TRANSITION, 19-25

   RATCH, 5-2 to 5-4, 6-11, 6-56,      SCVAC, 3-5, 15-8, 15-21

       6-68, 9-9, 9-17 to 9-18, 9-44   SCVNT, 3-5, 15-8, 15-21

       to 9-45, 12-4, 12-11, 13-3,     SEFI, 6-4, 6-111

       15-5, 15-21, 16-2 to 16-3,      SENSOR, 21-8

       19-4, 19-9, 19-43, 20-4,        SEQUENTIAL ELECTRONIC FUEL

       20-11, 20-23, 21-4, 21-12           INJECTION, 6-4

   RATIV, 21-6, 21-12                  SET_SPEED, 15-5, 15-15 to 15-21

   RAWAIRCHG, 19-4, 19-9, 19-16 to     SETGN, 15-7, 15-21

       19-18                           SHFHYS, 6-69, 6-73

   RC, 7-37                            SHFRPM, 6-67, 6-69, 6-73

   RE, 7-18                            SHIFT INDICATOR LIGHT

   RE2, 7-17                             LOGIC, 18-3

   REFFLG, 6-34, 6-39, 6-46 to 6-47,     ON/OFF LOGIC, 18-3

       6-52, 6-66, 9-44 to 9-46,         SLTMR LOGIC, 18-4

       19-5, 19-10, 19-23              SHIRPM, 18-2 to 18-3

   REQV, 27-16                         SHKCHG, 16-2 to 16-3

   RES_SPEED, 15-5, 15-8, 15-13,       SHKTP, 16-2 to 16-3

       15-15 to 15-18                  SIGDC, 7-4

   RESUM_BUT, 15-6, 15-8, 15-10,       SIGDLT, 7-4, 7-10, 7-19

       15-14, 15-17                    SIGKAL, 7-4, 7-10, 7-19

   RESUM_STATE, 15-6, 15-8, 15-17 to   sigkal', 7-19

       15-18                           SIGKLL, 7-8, 7-19

   RETINC, 7-32, 7-34, 7-40            SIGKLU, 7-8, 7-19

   RETLIM, 7-33, 7-40                  SIGNATURE PIP, 6-4, 6-93

   RIDE CONTROL STRATEGY               SIGNATURE PIP DISTRIBUTOR, 7-29

     ADJUSTABLE SHOCK ABSORBER         SIGPIP, 6-97, 6-99, 7-5, 7-19

         OUTPUT                        SIL, 3-5

       OVERVIEW, 16-2                  SLTIM1, 18-2 to 18-3

       PROCESS, 16-2                   SLTIM2, 18-2 to 18-3

     DEFINITIONS, 16-3                 SLTMR, 18-2 to 18-4

   ROLAV, 19-27, 19-29                 SONIC EGR STRATEGY OVERVIEW, 8-9

   ROM IDENTIFICATION CODE, 23-2       SPARK ADVANCE LOGIC, 7-43

   ROWTBU, 6-38, 6-41, 6-46 to 6-47,   SPARK RETARD LOGIC, 7-40

       6-51                            SPKAD, 7-36, 7-40, 7-43

   RPM, 9-9 to 9-11, 9-13, 9-15,       SPKAD(n), 7-4, 7-10, 7-16

       9-45, 19-43                     SPKADn, 7-32, 7-34, 7-43

   RPM CONTROL MODE, 9-10              SPKLIM, 7-8, 7-16, 7-44







                                  Index-16


                                GUFB - INDEX







   SPKMUL, 7-4, 7-11, 9-10, 9-12 to    TCDP, 8-4, 8-16, 8-18, 19-7,

       9-13, 9-15, 9-38                    19-48

   SPKSWH, 7-8, 7-20 to 7-21           TCEACT, 8-4, 19-7

   SPKSWL, 7-8, 7-20                   TCECT, 19-7, 19-27, 19-48, 21-6,

   SPLCLP, 7-9, 7-16                       21-14

   SPOUT, 3-5, 7-17 to 7-18, 7-24 to   TCEGR, 19-7, 19-28, 19-48

       7-25, 7-27, 7-42                TCEPT, 19-7, 19-29, 19-48

   SPOUT_OUTPUT, 7-26                  TCF, 7-32, 7-42

   SPTADV, 7-9, 7-24                   TCFAM, 9-44, 9-46, 19-7, 19-48

   SPTRPM, 18-2, 18-4                  TCINJD, 19-7, 19-48

   SPUCLP, 7-9, 7-16                   TCMPH, 19-7, 19-45, 19-48

   SQRT, 8-16, 8-18                    TCN, 19-7, 19-34, 19-48

   SSFCTR, 7-9, 7-19                   TCNDBR, 19-7, 19-34, 19-48

   STALLN, 4-4                         TCSTRT, 6-9 to 6-14, 6-19, 6-38,

   STARTUP_DELAY, 6-94                     6-49, 6-94, 6-97, 7-4, 7-6,

   STCF, 6-83, 6-85                        8-2 to 8-3, 8-7 to 8-8, 9-9,

   STEREO EGO NOMENCLATURE, 6-5            9-24, 11-3, 11-5, 12-4 to

   STIFLG, 21-19 to 21-20                  12-6, 12-9, 17-5, 19-30, 20-4,

   SWTCNT, 20-7, 20-20                     20-7, 20-21, 20-23, 21-4,

   SWTFLG, 20-5, 20-8, 20-21               21-14

   SWTFLn, 6-47                        TCTP, 19-7, 19-42, 19-48

   SYMBOLOGY                           TCTPT, 7-34, 19-7, 19-48

     ELSE/ACTION BLOCK DEFINITION,     TCVBAT, 19-7, 19-26, 19-48

         2-5                           TCVEGO, 19-48

     HYSTERESIS FLIP-FLOP DEFINITION,  TCVS, 19-8, 19-45, 19-48

         2-6                           TCxxxx, 19-46

     INPUTS, 2-2                       TDSEC, 6-32

     LOGICAL OPERATIONS, 2-3           TEFTC, 6-62

       'AND' GATE, 2-3                 TEFTC(FN1322), 6-62

       'OR' GATE, 2-3                  TEISF, 6-62, 6-64

     OUTPUTS, 2-4                      TEISF(FN1321), 6-62

   SYNC_UP_FUEL, 6-99                  TEMDWL, 7-4, 7-24

   SYNCTR, 6-97, 6-99                  TEMPBF, 8-2

   SYNFLG, 6-93, 6-99, 6-102, 6-104,   TEMPFB, 11-4, 12-6, 20-7, 20-12

       6-106, 7-5, 7-19, 7-29          TFC, 6-65

                                       TFCDED, 6-62, 6-66

   TAB, 12-3                           TFCISW, 6-63 to 6-64

   TABBFT, 6-14                        TFCTM, 6-63 to 6-64

   TABSFT, 6-14                        TFMFLG, 6-39, 6-46, 6-68, 6-71,

   TAD, 12-3                               8-3, 8-7, 8-10, 9-9, 12-5,

   TAE, 6-56 to 6-57                       12-8, 12-11, 17-4, 21-4, 21-7,

   TAPGN, 15-7, 15-21                      21-9, 21-12 to 21-13, 21-19

   TAPMAX, 21-6, 21-12, 26-11, 28-20,      to 21-20

       29-6                            TFSMN, 6-63, 6-66

   TAPMIN, 21-6, 21-12, 26-11, 28-20,  THBP2, 5-3 to 5-4

       29-6                            THBP4, 20-7, 20-11

   TAR, 6-55 to 6-58, 19-9, 19-42      THBP4H, 20-7, 20-11

   TBART, 7-32, 7-41 to 7-42, 19-4,    THBP5, 6-10 to 6-11

       19-42, 19-48                    THBPSC, 12-6, 12-11

   TCAELD, 19-7, 19-15, 19-48          THBPSH, 12-6, 12-11

   TCBBAR, 19-7, 19-24, 19-48          THERMACTOR

   TCDASD, 9-16, 19-7, 19-48             CONTROL SOLENOIDS, 12-3

   TCDASU, 9-16, 19-7, 19-48             OVERVIEW, 12-3

   TCDESN, 9-23, 9-25, 19-7, 19-48     THRMHP, 12-3, 12-6 to 12-8, 12-10

   TCDLOP, 8-4, 8-11, 19-7, 19-48          to 12-11, 17-4, 26-19







                                  Index-17


                                GUFB - INDEX







   THROTTLE MODE SELECTION STRATEGY    TL0FLG, 7-3 to 7-4, 7-9 to 7-10,

     DEFINITIONS, 5-3                      7-27 to 7-28

     OVERVIEW, 5-2                     TLO, 7-27

     PROCESS, 5-4                      TMSPT, 28-24

   TICKS_DOUBLE, 7-9, 7-21             TOTAL_DELAYn, 6-95

   TIMERS                              TP, 5-3 to 5-4, 6-11, 6-55 to

     DEBTMR, 20-15                         6-56, 6-58, 6-68, 7-32, 7-42,

     DEFINITIONS, 20-4, 20-6, 20-8         9-16, 9-18, 9-45, 10-3, 12-4,

     SUMMARY, 20-2                         12-11, 13-3, 15-5, 15-21,

     TIMER CONTROL LOGIC, 20-9             16-2 to 16-3, 19-4, 19-42,

       ACBTMR, 20-9                        19-48, 20-4, 20-11, 20-23,

       ACCTMR, 20-10                       21-4 to 21-7, 21-9, 21-12

       ACITMR, 20-10                   TP-High, 21-3

       ACWTMR, 20-11                   TP-Low, 21-3

       ADPTMR, 20-11                   TPBAR, 19-4, 19-9, 19-42 to 19-43,

       ATMR1, 20-12                        19-48

       ATMR2, 20-12                    TPDLTA, 6-56, 6-58, 19-8, 19-42

       ATMR3, 20-12                    TPPLW, 7-27

       BAPTMR, 20-13                   TPS, 15-2

       CRKTMR, 20-13                   TRANSIENT FUEL

       CTATMR, 20-14                     APPROACH, 6-60

       CTNTMR, 20-14                     BACKGROUND, 6-59

       CTTMR, 20-14                      CALCULATIONS, 6-65

       EDFTMR, 20-17                     FUEL FLOW CALCULATION, 6-65

       HLTMR, 20-18                      INTENT, 6-59

       HMTMR, 20-18                      LOGIC, 6-64

       IDLFLG, 20-19                   TRLOAD, 6-15, 6-18, 6-70, 6-72 to

       LESTMR1, 20-19                      6-73, 9-5, 9-10 to 9-13, 9-23,

       LESTMR2, 20-19                      9-26 to 9-27, 15-7, 19-36 to

       LUGTMR, 20-20                       19-38

       MFATMR, 20-20                   TRSRPH, 7-9, 7-28

       MULTMR, 20-22                   TRSRPM, 7-9, 7-28

       NACTMR, 20-22                   TS0FLG, 7-5

       NDDTIM, 20-22                   TSEGRE, 8-4, 8-8, 20-3, 20-23

       NWOTMR, 20-22                   TSEGRE LOGIC, 8-8

       PRGTMR, 20-22                   TSLADV, 7-32, 7-34, 7-36, 7-43

       PUTMR, 20-23                    TSLAMU, 6-23

       SWTFLG, 20-21                   TSLAMUn, 6-32

       TSEGRE, 20-23                   TSLMPH, 19-44

       TSLPIP, 20-23                   TSLPIP, 4-4, 4-6, 6-112, 7-4,

       WCOTMR, 20-23                       7-26, 9-9, 20-3, 20-23

   TIPFLG, 7-33 to 7-34, 7-42          TSPKUP, 7-27

   TIPHYS, 7-34, 7-42                  TSTALL, 19-8, 19-33, 19-39

   TIPINC, 7-34, 7-41 to 7-42          TSTRAT, 18-2 to 18-3

   TIPLOD, 7-34, 7-42                  TTNOV, 7-9, 7-13 to 7-14

   TIPMAX, 7-34, 7-42                  TXDASD, 9-16

   TIPRET, 7-4, 7-8, 7-10, 7-16,

       7-32 to 7-34, 7-40 to 7-42,     UNDERSPEED, 4-2, 6-55, 6-61,

       7-44                                6-104

   TKDTM, 9-23 to 9-24                 UNDSP, 4-4 to 4-5, 6-61, 6-64,

   TKYON1, 19-8, 19-30                     6-77, 6-79, 6-97, 7-5, 7-26,

   TKYON2, 19-8, 19-29 to 19-30            12-5, 12-11, 19-5, 19-30,

   TKYON3, 19-8, 19-29                     20-5, 20-12, 21-4

   TKYON4, 19-8, 19-30                 UNRPM, 4-4 to 4-5

   TL0, 7-3, 7-28                      UNRPMH, 4-4 to 4-5







                                  Index-18


                                GUFB - INDEX







   UPDATM, 9-40 to 9-41                VECT3, 6-40, 6-49, 28-8

   UPDISC, 9-40 to 9-41                VECT5, 6-40, 6-49, 28-8

   UPLOD, 12-6, 12-8, 20-7, 20-18      VECTMR, 28-15

   UPLODH, 12-6, 12-8, 20-8, 20-18     VECTOR, 19-6, 19-8

   UPRPM2, 12-6, 20-8, 20-14           VEGOBP, 28-24

   UPRPMH, 12-6, 20-8, 20-14           VEGOFK, 27-3

   UPSTM1, 12-6, 12-9                  VEGOSW, 28-24

   UPSTM2, 12-6, 12-9                  VEGOTM, 28-24

   UPSTM3, 12-6, 12-9                  VEGRAT, 27-20 to 27-21

   UPSTM4, 12-6, 12-9                  VEGVAC, 28-15 to 28-16

   UPSTM5, 12-6, 12-9                  VEHGN, 15-7, 15-21

   UPSWOT, 12-6, 12-8                  VEHICLE SPEED CONTROL STRATEGY

   UROLAV, 6-93, 8-11, 9-16, 9-46,       COMMAND SWITCH LOGIC, 15-10

       19-15, 19-24, 19-26, 19-28,       DEFINITIONS, 15-5

       19-34, 19-42, 19-45               OVERVIEW, 15-2

   USAFLG, 12-6, 12-8, 17-2, 17-4        SOFTWARE MODULE OVERVIEW, 15-3

                                         SPEED CONTROL LOGIC, 15-12

   V820A, 9-39, 27-5                       VSC DUTY CYCLE, 15-21

   V860, 9-35, 9-38, 27-5                    CACULATION, 15-21

   V_FPMDLY, 26-23                         VSC DUTY CYCLE OUTPUT, 15-22

   V_FPMFLG, 26-23                           PULSEWIDTH CALCULATION,

   V_FPMTM, 28-26                                15-22

   VACRR, 29-13                            VSC STATE DETERMINATION,

   VAIRFL, 27-17                               15-13 to 15-19

   VATMR2, 27-18                       VEITMR, 28-15

   VBAT, 6-76, 6-86, 7-4, 7-6, 7-24,   VEPTCL, 28-15

       15-5, 15-10, 19-3 to 19-4,      VEPTDL, 27-20

       19-9, 19-26, 19-48              VEPTHL, 22-3, 26-14

   VBAT', 19-48                        VEPTIH, 28-14

   VBISW, 27-12                        VEPTIL, 28-14

   VBPDL1, 19-25, 21-6, 21-11, 26-10,  VEPTLL, 19-29, 22-3, 22-7, 26-14

       28-11                           VEPTRH, 27-19

   VBPDL2, 21-6, 21-11, 28-11          VEPTRL, 27-19

   VBPMAX, 19-8, 19-25, 21-6, 21-11,   VEVPCL, 28-16

       26-10, 28-11                    VEVPDL, 27-21

   VCAL, 19-3, 19-8, 19-26             VEVPHL, 26-14, 27-19, 28-15

   VCBCLP, 27-26                       VEVPLL, 26-14, 27-19, 28-14

   VCBDLY, 27-26                       VFIEPT, 28-14 to 28-15

   VCBFLG, 27-24                       VHFNTM, 26-27

   VCBPAD, 27-26                       VIACT1, 26-12

   VCBPCT, 27-27                       VIACT2, 26-12

   VCBTM1, 27-30                       VIACT3, 27-11

   VCBTM2, 27-29                       VIACT4, 27-11

   VCRTDC, 28-15                       VIDMST, 28-19

   VDCB1A, 29-13                       VIDMTM, 28-19

   VDCMAX, 27-20 to 27-21              VIECT1, 26-9

   VDCMIN, 27-20 to 27-21              VIECT2, 26-9

   VDISFM, 27-5                        VIECT3, 27-9

   VDLEDF, 26-20                       VIECT4, 27-9

   VDLHED, 26-20                       VIP_KAM, 22-3

   VDLY1, 27-17                        VIP_KNOCK, 7-38

   VDLY10, 29-10                       VIPLR1, 27-15

   VDLY11, 29-11                       VIPRR1, 27-16 to 27-17

   VDLY2, 27-18                        VIPSPK, 27-5, 27-22

   VDLY8, 27-16, 27-18                 VIPT1, 29-5







                                  Index-19


                                GUFB - INDEX







   VIPT2, 29-10                        VSCCS, 15-2, 15-5, 15-8 to 15-10,

   VIPT3, 29-12                            19-9, 19-45, 20-4

   VIPT4, 29-12                        VSCCS DEBOUNCE LOGIC, 15-9

   VIPTM2, 27-17                       VSCCS_ERROR, 15-6, 15-8, 15-10,

   VIPTM3, 27-15                           15-13 to 15-14

   VIPTM4, 27-16                       VSCFRQ, 15-7, 15-22

   VISCN, 27-7                         VSCHP, 19-45

   VISCN1, 27-26                       VSIBRM, 9-35, 9-39, 27-5

   VISDL3, 27-23                       VSIBRN, 9-35, 9-39, 27-5

   VISDL4, 27-27                       VSLOAD, 28-22

   VISDL5, 27-27                       VSMAPL, 28-22

   VKDESN, 27-5, 27-23                 VSMMIN, 28-22

   VKYPWR, 26-16                       VSMPG, 20-8, 20-20 to 20-21

   VLAMCB, 27-26                       VSMPGH, 20-8, 20-21

   VLFNTM, 26-27                       VSNMAX, 15-7, 15-13

   VLORPM, 28-19                       VSPADV, 27-22

   VMAF, 19-4, 19-9, 19-18             VSPCLP, 28-3

   VMAFO1, 26-13                       VSPRET, 27-22

   VMAFPIPLMT, 28-12                   VSPRPM, 27-22

   VMAFR1, 27-14                       VSPTDL, 27-22

   VMAFR2, 27-14                       VSPTEN, 27-22

   VMAMAX, 21-6, 21-9, 26-13, 28-12    VSS, 15-2, 19-44

   VMAMIN, 21-6, 21-9, 28-12           VSSMN1, 28-22

   VMARPM, 21-6, 21-9, 28-12           VSSSW, 28-22

   VMDEL2, 26-10                       VSSTIM, 28-22

   VMLO, 29-12                         VSTGN, 29-13

   VMPMAX, 19-25                       VSTYPE, 6-89, 6-92, 15-2, 15-7,

   VN, 28-13                               20-8, 20-20 to 20-21, 25-2 to

   VNMIN, 27-15                            25-3

   VPIPTM, 28-19                       VTABFL, 27-18

   VPSIND, 9-35, 9-39, 27-5            VTAP1, 26-11, 29-6

   VPSINU, 9-34, 9-39, 27-5            VTAP2, 26-11, 29-6

   VPSSW, 27-13                        VTAP3, 27-10

   VPTCNT, 28-24                       VTAP4, 27-10

   VPTFLG, 28-23                       VTAP5, 26-26

   VRLAM, 27-5, 27-16, 27-18           VTAP6, 26-26

   VRSH, 29-10                         VTCEPT, 19-48

   VRSS, 29-10                         VTPGN, 29-13

   VS, 19-44 to 19-45, 19-48           VTPLD, 29-12

   VS CALCULATION, 19-44               VTPLU, 29-12

   VSAMIN, 28-22                       VVHGN, 29-13

   VSBAR, 6-68, 6-72, 6-89, 6-92,      VVS_CL, 6-89, 6-92

       7-4, 7-14, 9-9 to 9-10, 9-12    VVS_SH, 6-89, 6-92

       to 9-13, 13-3, 13-5 to 13-6,    VVSCET, 25-2

       17-2, 17-4, 19-4, 19-9, 19-48,

       20-20                           WAC, 3-5

   VSC_BUTTONS, 15-5                   WARM_UP, 6-39, 6-49

   VSC_DC, 15-5, 15-21 to 15-22        WCOTMR, 10-4, 10-7, 13-3, 13-5,

   VSC_ERROR, 15-8, 15-21                  20-3, 20-11, 20-23

   VSC_OFF_COUNT, 15-8, 15-22          WIGLVL, 28-6

   VSC_ON_COUNT, 15-8, 15-22           WINCLD, 7-31, 7-34, 7-37 to 7-38

   VSC_PULSE, 15-6, 15-8, 15-13 to     WINLEN, 7-34 to 7-35, 7-37

       15-19, 15-21                    WMEGOL, 6-9 to 6-10, 6-12 to 6-13,

   VSC_STATES, 15-5                        6-20, 6-98, 20-5, 21-4, 21-15

                                       WOPEN, 7-34 to 7-35







                                  Index-20


                                GUFB - INDEX







   WOT, 13-2                           X, 8-4, 8-16

   WRMEGO, 6-9 to 6-13, 6-19           XFREPT, 8-15 to 8-16

   WRMEGO LOGIC, 6-12

                                       Y, 7-9, 7-14, 7-34


                                     GUFB - INDEX







                          Please  feel  free  to  use

                          this  form to record faults

                          with   the   book,   and/or

                          general     comments    and

                          complaints  about  Strategy

                          Group documentation.  As we

                          make improvements, we would

                          also like to know about the

                          things you  would  like  to

                          see in the strategy book.



                          This form, if used,  should

                          be    directed    to    the

                          responsible  person  listed

                          on   the   cover   of  this

                          document.


                                     GUFB - INDEX







       ***********************************************************************



      Do you have any general comments on this book, or its availability?





























       ***********************************************************************



      Specific errors found in this book.  Please list the page on which the error

      was found, the error itself, and the correction if known.









































       ***********************************************************************



      Please indicate your area, and/or primary use made of this book.











      If you would like to be notified when a change is made, or if you would like

      to discuss something, please write your name and extension below. 







      Name______________________  Ext_____________   Date___________________


